!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PhotoEditorSDK=e():t.PhotoEditorSDK=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=126)}([function(t,e,n){t.exports={default:n(146),__esModule:!0}},function(t,e,n){t.exports={default:n(163),__esModule:!0}},function(t,e,n){t.exports={default:n(148),__esModule:!0}},function(t,e,n){t.exports={default:n(151),__esModule:!0}},function(t,e,n){t.exports=n(127).default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(236)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=i(this,(e.__proto__||p()(e)).call(this,t,{intensity:{type:d.OptionType.NUMBER,default:1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:d.OptionType.BOOLEAN,default:!0}}));return n._stack=new v.a(n._options.intensity),n}return o(e,t),_(e,[{key:"render",value:function(t,e,n){var r=this;return this._stack.render(t,e,n).then(function(t){return r.setDirty(!1),t})}},{key:"setDirtyForRenderer",value:function(t,e){this._stack.setDirtyForRenderer(t,e)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}]),e}(d.Configurable);y.identifier=null,y.isIdentity=!1,y.displayName=null,y.PrimitivesStack=v.a,e.a=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(238);n.d(e,"Brightness",function(){return r.a});var i=n(240);n.d(e,"Contrast",function(){return i.a});var o=n(242);n.d(e,"ColorMatrixPrimitive",function(){return o.a});var a=n(244);n.d(e,"Desaturation",function(){return a.a});var s=n(246);n.d(e,"Gamma",function(){return s.a});var u=n(248);n.d(e,"Glow",function(){return u.a});var l=n(250);n.d(e,"Gobblin",function(){return l.a});var c=n(252);n.d(e,"Grayscale",function(){return c.a});var h=n(123);n.d(e,"LookupTable",function(){return h.a});var f=n(255);n.d(e,"LookupTableImage",function(){return f.a});var p=n(257);n.d(e,"Saturation",function(){return p.a});var d=n(259);n.d(e,"SoftColorOverlay",function(){return d.a});var v=n(261);n.d(e,"ToneCurve",function(){return v.a});var _=n(262);n.d(e,"X400",function(){return _.a});var y=n(264);n.d(e,"ThreeDLookupTableImage",function(){return y.a})},function(t,e,n){t.exports={default:n(181),__esModule:!0}},function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"j",function(){return p});var r=n(22),i=n(39),o=n(102),a=n(103),s=n(32),u=n(40),l=n(18),c=n(104),h=n(23);n.d(e,"b",function(){return i.a}),n.d(e,"g",function(){return o.a}),n.d(e,"k",function(){return s.a}),n.d(e,"h",function(){return a.a}),n.d(e,"d",function(){return u.a}),n.d(e,"f",function(){return r.a}),n.d(e,"i",function(){return l.a}),n.d(e,"c",function(){return h}),n.d(e,"e",function(){return c.a});var f=2e3,p=20},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(64)("wks"),i=n(47),o=n(12).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),_=function(t){function e(){return r(this,e),i(this,(e.__proto__||p()(e)).apply(this,arguments))}return o(e,t),v(e,[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}]),e}(d.Configurable);e.a=_},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(12),i=n(9),o=n(26),a=n(19),s=function(t,e,n){var u,l,c,h=t&s.F,f=t&s.G,p=t&s.S,d=t&s.P,v=t&s.B,_=t&s.W,y=f?i:i[e]||(i[e]={}),g=y.prototype,m=f?r:p?r[e]:(r[e]||{}).prototype;f&&(n=e);for(u in n)(l=!h&&m&&void 0!==m[u])&&u in y||(c=l?m[u]:n[u],y[u]=f&&"function"!=typeof m[u]?n[u]:v&&l?o(c,r):_&&m[u]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((y.virtual||(y.virtual={}))[u]=c,t&s.R&&g&&!g[u]&&a(g,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var r=n(16);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(14),i=n(85),o=n(60),a=Object.defineProperty;e.f=n(17)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";(function(t){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return f()(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(25),a=n.n(o),s=n(29),u=n.n(s),l=n(75),c=n.n(l),h=n(173),f=n.n(h),p=n(30),d=n.n(p),v=n(52),_=n.n(v),y=n(1),g=n.n(y),m=n(0),b=n.n(m),x=n(41),w=c.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T="function"==typeof u.a&&"symbol"==typeof a.a?function(t){return typeof t}:function(t){return t&&"function"==typeof u.a&&t.constructor===u.a&&t!==u.a.prototype?"symbol":typeof t},k=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),b()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),C=function(){function t(){i(this,t)}return k(t,null,[{key:"head",value:function(t){return t[0]}},{key:"tail",value:function(t){return t.slice(1)}},{key:"last",value:function(t){return t[t.length-1]}},{key:"init",value:function(t){return t.slice(0,t.length-1)}},{key:"remove",value:function(t,e){return t.filter(function(t,n,r){return!e(t,n,r)})}}]),t}(),E=function(){function e(){i(this,e)}return k(e,null,[{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{key:"isPlainObject",value:function(t){if("object"!==(void 0===t?"undefined":T(t))||!t)return!1;if("function"==typeof g.a){var e=g()(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&void 0!==t}},{key:"values",value:function(t){var e=[];for(var n in t)e.push(t[n]);return e}},{key:"isDOMElement",value:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":T(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":T(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}},{key:"isTouchEvent",value:function(t){return-1!==t.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(t,e){var n=Math.min(e.x/t.x,e.y/t.y);return t.clone().multiply(n)}},{key:"resizeVectorToFill",value:function(t,e){var n=t.x/t.y;return n>e.x/e.y?e.clone().set(e.y*n,e.y):e.clone().set(e.x,e.x/n)}},{key:"isExtendable",value:function(t){return void 0!==t&&null!==t&&("object"===(void 0===t?"undefined":T(t))||"function"==typeof t)}},{key:"defaults",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)void 0===e[u]&&(e[u]=s[u])}return e}},{key:"deepMerge",value:function(t){for(var n=function t(n,i){if(void 0===i)return t(null,n);if(Array.isArray(i))return[].concat(r(i));if(!e.isPlainObject(i))return i;if(!e.isPlainObject(n))return w({},i);var o=w({},n);return _()(i).forEach(function(e){var r=i[e];void 0!==r&&(o[e]=t(n[e],r))}),o},i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return o.reduce(n,t)}},{key:"deepDefaults",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=[].concat(i).reverse();return e.deepMerge.apply(e,r(a).concat([t]))}},{key:"deepClone",value:function(t){var n={};for(var r in t)e.isExtendable(t[r])?n[r]=e.deepClone(t[r]):n[r]=t[r];return n}},{key:"getDeepProperty",value:function(t,e){if("string"==typeof e)return t[e];if(Array.isArray(e)){var n=function(t,e){var n=void 0;try{n=e(t)}catch(t){if(!(t instanceof TypeError))throw t}return n};return e.reduce(function(t,e){return t?"function"==typeof e?n(t,e):t[e]:null},t)}}},{key:"extend",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)e[u]=s[u]}return e}},{key:"clone",value:function(t){return this.extend({},t)}},{key:"createBlobURIFromDataURI",value:function(e){var n="undefined"==typeof window?t:window;if(!(n.Blob&&n.URL&&ArrayBuffer&&Uint8Array))return e;for(var r=x.a.decode(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(r.length),a=new Uint8Array(o),s=0;s<r.length;s++)a[s]=r[s];var u=new n.Blob([o],{type:i});return n.URL.createObjectURL(u)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},{key:"flatten",value:function(t){return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e.flatten(n):n)},[])}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"isPowerOfTwo",value:function(t){return 0==(t.x&t.x-1)&&0==(t.y&t.y-1)}},{key:"nextLowestPOT",value:function(t){for(var e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)}},{key:"nextHighestPOT",value:function(t){t--;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1}},{key:"moveArrayItem",value:function(t,e,n){if(n>=t.length)for(var r=n-t.length;1+r--;)t.push(void 0);t.splice(n,0,t.splice(e,1)[0])}},{key:"ensureCanvasDimensions",value:function(t,e){t.width===e.x&&t.height===e.y||(t.width=e.x,t.height=e.y)}},{key:"byteArrayToString",value:function(t){return t.map(function(t){return String.fromCharCode(t)}).join("")}},{key:"clamp",value:function(t,e,n){return Math.max(e,Math.min(t,n))}},{key:"wildCardMatch",value:function(t,e){return new RegExp("^"+e.split("*").join(".*")+"$").test(t)}},{key:"flipObject",value:function(t){var e={};for(var n in t)e[t[n]]=n;return e}},{key:"cloneOptions",value:function(t){var e={};for(var n in t){var r=t[n];Array.isArray(r)?r=r.slice():r.clone&&(r=r.clone()),e[n]=r}return e}},{key:"ISODateString",value:function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"}},{key:"shallowEqual",value:function(t,e){if(t===e)return!0;if("object"!==(void 0===t?"undefined":T(t))||null===t||"object"!==(void 0===e?"undefined":T(e))||null===e)return!1;var n=_()(t),r=_()(e);if(n.length!==r.length)return!1;for(var i=hasOwnProperty.bind(e),o=0;o<n.length;o++)if(!i(n[o])||t[n[o]]!==e[n[o]])return!1;return!0}},{key:"enableIf",value:function(t,e){return t?e:void 0}},{key:"invariant",value:function(t,e){if(!t){throw new Error(e)}}},{key:"executePromises",value:function(t){var e=t.length,n=0,r=[],i=[];return new d.a(function(o,a){var s=function(){++n>=e&&(i.length<=0?o(r):a(i))},u=function(t){r.push(t),s()},l=function(t){i.push(t),s()};t.forEach(function(t){t.then(u).catch(l)})})}}]),e}();E.Array=C,e.a=E}).call(e,n(33))},function(t,e,n){var r=n(15),i=n(35);t.exports=n(17)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(88),i=n(58);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";(function(t){var n="warn",r=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],i=r.map(function(t){return t.type}),o={};o.setLevel=function(t){n=t},o.canLog=function(t){return null!==n&&!(i.indexOf(t)<i.indexOf(n))},o.hasColorfulOutput=function(){return(!t||t&&t.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},o.printError=function(t){t.stack.split("\n").forEach(function(t){o.error("Error",t)})},r.forEach(function(t){var e=t.type,n=t.background,r=t.color;o[e]=function(t){if("undefined"!=typeof console&&o.canLog(e)){for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];var u=a.map(function(t){return"string"==typeof t?t:t.toString()}).join(" ");if(!o.hasColorfulOutput())return console.log("PhotoEditorSDK | "+t+" | "+u);console.log("%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+u+"  %c  ","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+n+"; color: "+r+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0")}}}),e.a=o}).call(e,n(99))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"RenderType",function(){return r}),n.d(e,"ImageFormat",function(){return i}),n.d(e,"Events",function(){return o}),n.d(e,"OptionType",function(){return a}),n.d(e,"UniformType",function(){return s}),n.d(e,"RendererType",function(){return u});var r={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},i={PNG:"image/png",JPEG:"image/jpeg"},o={OPERATION_UPDATED:"operation:update"},a={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},s={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},u={WEBGL:"webgl",CANVAS:"canvas"}},function(t,e,n){"use strict";(function(t){var r=n(25),i=n.n(r),o=n(29),a=n.n(o),s=n(30),u=n.n(s),l=n(0),c=n.n(l),h=n(192),f=n.n(h),p="function"==typeof a.a&&"symbol"==typeof i.a?function(t){return typeof t}:function(t){return t&&"function"==typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t},d=void 0===t?window:t,v=void 0!==u.a?u.a:function(){function t(t,e){v.add(t,e),d||(d=y(v.drain))}function e(t){var e,n=void 0===t?"undefined":p(t);return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function n(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,n,r){var i,o;try{!1===n?r.reject(t.msg):(i=!0===n?t.msg:n.call(void 0,t.msg),i===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=e(i))?o.call(i,r.resolve,r.reject):r.resolve(i))}catch(t){r.reject(t)}}function i(r){var a,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(a=e(r))?t(function(){var t=new s(u);try{a.call(r,function(){i.apply(t,arguments)},function(){o.apply(t,arguments)})}catch(e){o.call(t,e)}}):(u.msg=r,u.state=1,u.chain.length>0&&t(n,u))}catch(t){o.call(new s(u),t)}}}function o(e){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=e,r.state=2,r.chain.length>0&&t(n,r))}function a(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){n(i,t)},r)}(i)}function s(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new u(this);this.then=function(e,i){var o={success:"function"!=typeof e||e,failure:"function"==typeof i&&i};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),r.chain.push(o),0!==r.state&&t(n,r),o.promise},this.catch=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){i.call(r,t)},function(t){o.call(r,t)})}catch(t){o.call(r,t)}}var h,d,v,_=Object.prototype.toString,y=void 0!==f.a?function(t){return f()(t)}:setTimeout;try{Object.defineProperty({},"x",{}),h=function(t,e,n,r){return c()(t,e,{value:n,writable:!0,configurable:!1!==r})}}catch(t){h=function(t,e,n){return t[e]=n,t}}v=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,r;return{add:function(i,o){r=new t(i,o),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var t=e;for(e=n=d=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=h({},"constructor",l,!1);return l.prototype=g,h(g,"__NPO__",0,!1),h(l,"resolve",function(t){var e=this;return t&&"object"==(void 0===t?"undefined":p(t))&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),h(l,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),h(l,"all",function(t){var e=this;return"[object Array]"!=_.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,o=Array(i),s=0;a(e,t,function(t,e){o[t]=e,++s===i&&n(o)},r)})}),h(l,"race",function(t){var e=this;return"[object Array]"!=_.call(t)?e.reject(TypeError("Not an array")):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");a(e,t,function(t,e){n(e)},r)})}),l}();d.Promise=d.Promise||v,e.a=v}).call(e,n(33))},function(t,e,n){t.exports={default:n(129),__esModule:!0}},function(t,e,n){var r=n(46);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,n){t.exports={default:n(138),__esModule:!0}},function(t,e,n){t.exports={default:n(153),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(51),i=n(23),o=n(41),a=n(40),s=n(18),u=n(44),l=n(39),c=n(22),h=n(24),f=n(104),p=n(204),d=n(214);n.d(e,"requestAnimationFrame",function(){return d.b}),n.d(e,"cancelAnimationFrame",function(){return d.a}),n.d(e,"Engine",function(){return r.a}),n.d(e,"EventEmitter",function(){return a.a}),n.d(e,"Utils",function(){return s.a}),n.d(e,"Configurable",function(){return u.a}),n.d(e,"Color",function(){return l.a}),n.d(e,"Constants",function(){return i}),n.d(e,"Log",function(){return c.a}),n.d(e,"Promise",function(){return h.a}),n.d(e,"GLUtils",function(){return f.a}),n.d(e,"Base64",function(){return o.a}),n.d(e,"LicenseChecker",function(){return p.a});var v=n(114);n.d(e,"Vector2",function(){return v.Vector2}),n.d(e,"Vector3",function(){return v.Vector3}),n.d(e,"Rectangle",function(){return v.Rectangle}),n.d(e,"Matrix",function(){return v.Matrix}),n.d(e,"ColorMatrix",function(){return v.ColorMatrix})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e,n){r(this,t),this.x=e,this.y=n,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return a(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"clamp",value:function(e,n){var r=null!==e&&void 0!==e,i=null!==n&&void 0!==n;return e instanceof t||!r||(e=new t(e,e)),n instanceof t||!i||(n=new t(n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y)),this}},{key:"divide",value:function(e,n){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=void 0===n?e:n),this}},{key:"subtract",value:function(e,n){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=void 0===n?e:n),this}},{key:"multiply",value:function(e,n){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=void 0===n?e:n),this}},{key:"add",value:function(e,n){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=void 0===n?e:n),this}},{key:"equals",value:function(e,n){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&n===this.y}},{key:"flip",value:function(){var t=this.x;return this.x=this.y,this.y=t,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this}}],[{key:"fromObject",value:function(e){return new t(e.x,e.y)}},{key:"NULL",get:function(){return new t(0,0)}}]),t}();e.a=s},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(130)(!0);n(84)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(87),i=n(65);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(58);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(100),o=n.n(i),a=n(101),s=n.n(a),u=n(0),l=n.n(u),c=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=s()(t);!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(o()(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(){function t(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,t),this.r=e,this.g=n,this.b=i,this.a=o}return h(t,[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=t,this.g=e,this.b=n,this.a=r,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var t=Math.max(this.r,this.g,this.b),e=Math.min(this.r,this.g,this.b),n=void 0,r=void 0,i=t,o=t-e;if(r=0===t?0:o/t,t===e)n=0;else{switch(t){case this.r:n=(this.g-this.b)/o,this.g<this.b&&(n+=6);break;case this.g:n=(this.b-this.r)/o+2;break;case this.b:n=(this.r-this.g)/o+4}n/=6}return[n,r,i]}},{key:"fromHSV",value:function(e,n,r){return this.copy(t.fromHSV(e,n,r)),this}},{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.a)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}},{key:"minus",value:function(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}},{key:"divideScalar",value:function(t){return this.r/=t,this.g/=t,this.b/=t,this.a/=t,this}},{key:"clamp",value:function(t,e){return this.r=Math.min(Math.max(this.r,t),e),this.g=Math.min(Math.max(this.g,t),e),this.b=Math.min(Math.max(this.b,t),e),this.a=Math.min(Math.max(this.a,t),e),this}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"equals",value:function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}},{key:"_componentToHex",value:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},{key:"toString",value:function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"fromHSV",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],u=o[2],l=Math.floor(6*e),c=6*e-l,h=r*(1-n),f=r*(1-c*n),p=r*(1-(1-c)*n);switch(l%6){case 0:a=r,s=p,u=h;break;case 1:a=f,s=r,u=h;break;case 2:a=h,s=r,u=p;break;case 3:a=h,s=f,u=r;break;case 4:a=p,s=h,u=r;break;case 5:a=r,s=h,u=f}return new t(a,s,u,i)}},{key:"fromArray",value:function(e){return new t(e[0],e[1],e[2],e[3])}},{key:"fromHex",value:function(e){var n=e.match(/.{1,2}/g),r=c(n,3),i=r[0],o=r[1],a=r[2];return new t(parseInt(i,16)/255,parseInt(o,16)/255,parseInt(a,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}}]),t}();e.a=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(22),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=12,l=function(){function t(){r(this,t),this._maxListeners=u,this._events={},this._pipeDestinations=[]}return s(t,[{key:"pipeEvents",value:function(t){this._pipeDestinations.push(t)}},{key:"unpipeEvents",value:function(t){var e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)}},{key:"on",value:function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if("function"!=typeof e)throw new TypeError;var n=this._events[t]||(this._events[t]=[]);return-1!==n.indexOf(e)?this:(n.push(e),this._maxListeners&&n.length>this._maxListeners&&(a.a.warn("EventEmitter","Possible memory leak detected, added "+n.length+" `"+t+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace()),this)}},{key:"once",value:function(t,e){function n(){r.off(t,n),e.apply(null,arguments)}if(void 0===t)throw new Error("Invalid event type: `"+t+"`");var r=this;return this.on(t,n)}},{key:"off",value:function(t){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var n=this._events[t];if(!n||!n.length)return this;var r=n.indexOf(e);return-1===r?this:(n.splice(r,1),this)}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(void 0===t)throw new Error("Invalid event type: `"+t+"`");this._pipeDestinations.forEach(function(e){e.emit.apply(e,[t].concat(n))});var i=this._events[t];return!(!i||!i.length)&&(i.slice(0).forEach(function(t){return t.apply(null,n)}),!0)}},{key:"setMaxListeners",value:function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t}}]),t}();e.a=l},function(t,e,n){"use strict";/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i={encode:function(t){var e="",n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=0;do{n=t[c++],i=t[c++],o=t[c++],a=n>>2,s=(3&n)<<4|i>>4,u=(15&i)<<2|o>>6,l=63&o,isNaN(i)?u=l=64:isNaN(o)&&(l=64),e=e+r.charAt(a)+r.charAt(s)+r.charAt(u)+r.charAt(l),n=i=o="",a=s=u=l=""}while(c<t.length);return e},decode:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=0,c=[];if(/[^A-Za-z0-9+\/=]/g.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9+\/=]/g,"");do{o=r.indexOf(t.charAt(l++)),a=r.indexOf(t.charAt(l++)),s=r.indexOf(t.charAt(l++)),u=r.indexOf(t.charAt(l++)),e=o<<2|a>>4,n=(15&a)<<4|s>>2,i=(3&s)<<6|u,c.push(e),64!==s&&c.push(n),64!==u&&c.push(i),e=n=i="",o=a=s=u=""}while(l<t.length);return c}};e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||p()(e)).call(this));return n.id=e.id++,n._onSourceLoaded=n._onSourceLoaded.bind(n),n._renderers=[],n._glTextures={},n._source=t,n._dirty=!0,n._glUnit=0,n._mipMapping=!1,n._magFilter=e.DefaultMagFilter,n._minFilter=e.DefaultMinFilter,n._repeatX=e.ClampToEdge,n._repeatY=e.ClampToEdge,n._pixelRatio=1,n._loaded=!1,n._frame=new d.h(0,0,100,100),t&&n._loadSource(),n}return o(e,t),v(e,[{key:"resizeTo",value:function(t){this._frame.width===t.x&&this._frame.height===t.y||(this._frame.width=t.x,this._frame.height=t.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var t=this._source,e=t.complete,n="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();if(e||n)return this._onSourceLoaded();t.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var t=new d.k(this._source.width,this._source.height);d.i.isPowerOfTwo(t)?(d.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=e.TrilinearFilter,this._mipMapping=!0):(this._minFilter=e.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new d.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getGLFilter",value:function(t,e){switch(e){case"min":return this.constructor.getGLFilter(t,this._minFilter);case"mag":return this.constructor.getGLFilter(t,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(t){this._loaded=t}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(t){this._source=t}},{key:"getGLTextureForRenderer",value:function(t){return this._glTextures[t.id]}},{key:"setGLTextureForRenderer",value:function(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getDimensions",value:function(){return new d.k(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(t){this._glUnit=t}},{key:"setMinFilter",value:function(t){this._minFilter=t}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(t){this._magFilter=t}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(t){this._repeatX=t}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(t){this._repeatY=t}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(t,n){switch("x"===n?this.getRepeatX():this.getRepeatY()){case e.ClampToEdge:return t.CLAMP_TO_EDGE;case e.Repeat:return t.REPEAT;case e.MirroredRepeat:return t.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(t){this._dirty=t}},{key:"disposeGLTextures",value:function(){for(var t in this._renderers)this.disposeGLTexturesForRenderer(this._renderers[t])}},{key:"disposeGLTexturesForRenderer",value:function(t){if(this._glTextures[t.id]){t.getContext().deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id]}}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(t){this._mipMapping=t}},{key:"dispose",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disposeGLTextures()}}],[{key:"getGLFilter",value:function(t,n){switch(n){case e.LinearFilter:return t.LINEAR;case e.NearestFilter:return t.NEAREST;case e.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case e.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}}}]),e}(d.d);_.NearestFilter=0,_.LinearFilter=1,_.BilinearFilter=2,_.TrilinearFilter=3,_.DefaultMagFilter=_.NearestFilter,_.DefaultMinFilter=_.LinearFilter,_.ClampToEdge=0,_.Repeat=1,_.MirroredRepeat=2,_.id=0,e.a=_},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(8),y=n(44),g=n(78),m=n(77),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),x=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},w=_.c.OptionType,T=_.c.UniformType,k=_.c.RendererType,C=function(t){function e(){return r(this,e),i(this,(e.__proto__||v()(e)).apply(this,arguments))}return o(e,t),b(e,[{key:"_initOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=m.a.defaultUniforms,this._attributes=m.a.defaultAttributes,this._vertexSource=m.a.defaultVertexSource,this._fragmentSource=m.a.defaultFragmentSource,this._initUniforms(),x(e.prototype.__proto__||v()(e.prototype),"_initOptions",this).call(this,t)}},{key:"_initUniforms",value:function(){this._uniforms={};for(var t in this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(var n in this.availableOptions){var r=this.availableOptions[n];r.uniformType?this._uniforms["u_"+n]={type:r.uniformType,value:r.default||null}:_.f.trace(this.constructor.name,"Option `"+n+"` is missing a `uniformType`!")}}},{key:"setOption",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x(e.prototype.__proto__||v()(e.prototype),"setOption",this).call(this,t,n,r);var i=n,o=this.availableOptions[t];if(o.uniformType){var a="u_"+t;switch(o.type){case w.COLOR:o.uniformType===T.FLOAT4?i=n.toGLColor():o.uniformType===T.FLOAT3&&(i=n.toRGBGLColor());break;case w.VECTOR2:i=[n.x,n.y];break;case w.COLOR_MATRIX:i=[n.a,n.b,n.c,n.d,n.f,n.g,n.h,n.i,n.k,n.l,n.m,n.n,n.p,n.q,n.r,n.s];var s=[n.e,n.j,n.o,n.t];this._uniforms[a+"_vec"]={value:s,type:T.FLOAT4}}this.setUniform(a,i)}}},{key:"setUniform",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"syncUniform",value:function(t){this._shaders.forEach(function(e){e.syncUniform(t)})}},{key:"syncUniforms",value:function(){this._shaders.forEach(function(t){t.syncUniforms()})}},{key:"getShaderForRenderer",value:function(t){var e=t.getContext(),n=this._shaders[e.id];return n||(n=new g.a(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=n),n}},{key:"apply",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.isOfType(k.WEBGL)?this._applyWebGL(t,e,n,r):t.isOfType(k.CANVAS)&&this._applyCanvas(t,e,n,r)}},{key:"_applyWebGL",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(n),r&&n.clear(),t.setShader(o);var a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=n.getContext();_.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),i.clearRect(0,0,r.width,r.height),i.drawImage(r,0,0)}},{key:"dispose",value:function(){this._shaders.forEach(function(t){return t.dispose()}),this._shaders=[]}}]),e}(y.a);e.a=C},function(t,e,n){"use strict";function r(t,e,n){return e in t?f()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=_()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(d.a?d()(t,e):t.__proto__=e)}var s=n(25),u=n.n(s),l=n(29),c=n.n(l),h=n(0),f=n.n(h),p=n(2),d=n.n(p),v=n(3),_=n.n(v),y=n(52),g=n.n(y),m=n(1),b=n.n(m),x=n(24),w=n(22),T=n(40),k=n(32),C=n(39),E=n(18),R=n(112),O=n(23),S="function"==typeof c.a&&"symbol"==typeof u.a?function(t){return typeof t}:function(t){return t&&"function"==typeof c.a&&t.constructor===c.a&&t!==c.a.prototype?"symbol":typeof t},F=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),A=void 0;A=window.Image;var D=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var r=o(this,(e.__proto__||b()(e)).call(this));return r.availableOptions=r.availableOptions||{},r.availableOptions=E.a.extend(r.availableOptions,n),r._onConfigurableUpdate=r._onConfigurableUpdate.bind(r),r._initOptions(t),r}return a(e,t),F(e,[{key:"_buildConfigError",value:function(t){var e="";return this.constructor.name&&(e=this.constructor.name+": "),e+=t,new Error(e)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var t=this;return new x.a(function(e,n){for(var r in t.availableOptions){if(t.availableOptions[r].required&&void 0===t._options[r])return n(t._buildConfigError("Option `"+r+"` is required."))}e()})}},{key:"_initOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var n,r,i,o=this;for(n in this.availableOptions){if(i=n.charAt(0).toUpperCase()+n.slice(1),r=this.availableOptions[n],-1===[O.OptionType.STRING,O.OptionType.NUMBER,O.OptionType.BOOLEAN,O.OptionType.OBJECT,O.OptionType.VECTOR2,O.OptionType.COLOR,O.OptionType.CONFIGURABLE,O.OptionType.COLOR_MATRIX,O.OptionType.ARRAY,O.OptionType.IMAGE,O.OptionType.FUNCTION,O.OptionType.ALL].indexOf(r.type))throw this._buildConfigError("Unknown option type: `"+r.type+"`");if(function(t,e){o["set"+i]=function(e,n,r){o.setOption(t,e,n,r)},o["get"+i]=function(){return o.getOption(t)}}(n),r.type===O.OptionType.CONFIGURABLE&&(this._options[n]=new e(void 0,r.structure||{}),this._options[n].on("update",this._onConfigurableUpdate)),!(n in t)||void 0===t[n])if(void 0!==r.default){var a=r.default;"function"==typeof r.default&&(a=r.default()),this["set"+i](a,!1,!0)}else r.type!==O.OptionType.CONFIGURABLE&&(this._options[n]=void 0)}for(n in t){if(void 0===this.availableOptions[n])throw new Error("Invalid option: "+n);void 0!==t[n]&&(i=n.charAt(0).toUpperCase()+n.slice(1),this["set"+i](t[n],!1,!0))}}},{key:"set",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in t)this.setOption(n,t[n],!1);this._onOptionsChange(),e&&this.emit("update",this,t)}},{key:"getOption",value:function(t){return this._options[t]}},{key:"hasOption",value:function(t){return!!this.availableOptions[t]}},{key:"getOptionDefault",value:function(t){var e=this.availableOptions[t];if(!e)throw new Error("Invalid option: "+t);return e.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var t={};for(var e in this.availableOptions){var n=this.availableOptions[e].default;void 0!==n&&(t[e]=n)}return t}},{key:"optionsEqual",value:function(t){for(var e in t){var n=t[e];if(!this._optionEquals(e,n))return!1}return!0}},{key:"_optionEquals",value:function(t,e){if(void 0===this.availableOptions[t])throw new Error("Invalid option: "+t);var n=this.availableOptions[t].type,r=this._options[t];if(r===e)return!0;if(void 0===e||void 0===r)return!1;switch(n){case O.OptionType.OBJECT:return"function"==typeof r.optionsEqual?r.optionsEqual(e._options):r===e;case O.OptionType.STRING:case O.OptionType.NUMBER:case O.OptionType.BOOLEAN:case O.OptionType.FUNCTION:case"*":return r===e;case O.OptionType.VECTOR2:return r.equals(e);case O.OptionType.COLOR:case O.OptionType.COLOR_MATRIX:return e.equals(r);case O.OptionType.CONFIGURABLE:return r.optionsEqual(e);case O.OptionType.ARRAY:return this._arrayOptionEquals(t,e);case O.OptionType.IMAGE:return r.src===e.src}}},{key:"_arrayOptionEquals",value:function(t,n){var r=this._options[t];if(n.length!==r.length)return!1;for(var i=!0,o=0;o<r.length;o++){var a=r[o],s=n[o];if(a instanceof e){if(void 0===s||!a.optionsEqual(s)){i=!1;break}}else if(s!==a){i=!1;break}}return i}},{key:"serializeOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()(this._options),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return e.forEach(function(e){if(void 0===t.availableOptions[e])return w.a.warn("Trying to serialize a key that does not exist: "+e);!1!==t.availableOptions[e].serializable&&(r[e]=t.serializeOption(e,n))}),r}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableOptions[t],r=n.type,i=this._options[t];if(!i)return i;if(!1===n.serializable)throw new Error("Option `"+t+"` is not serializable.");switch(r){case O.OptionType.STRING:case O.OptionType.NUMBER:case O.OptionType.BOOLEAN:case O.OptionType.OBJECT:case O.OptionType.FUNCTION:case O.OptionType.ALL:return i;case O.OptionType.VECTOR2:return e?i.toObject():i.clone();case O.OptionType.COLOR:case O.OptionType.COLOR_MATRIX:return e?i.toArray():i.clone();case O.OptionType.CONFIGURABLE:return i.serializeOptions(void 0,e);case O.OptionType.ARRAY:return i.slice(0);case O.OptionType.IMAGE:return e?i.src:i}}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.availableOptions[t];if(!o)throw new Error("Invalid option: "+t);if(void 0!==o.setter&&(e=o.setter.call(this,e,i)),void 0!==o.validation&&o.validation(e),null===e||void 0===e){if(o.required)throw this._buildConfigError("Option `"+t+"` is required.");this._options[t]=e}else switch(o.type){case O.OptionType.STRING:if((void 0===e?"undefined":S(e))!==O.OptionType.STRING)throw this._buildConfigError("Option `"+t+"` has to be a string.");var a=o.available;if(void 0!==a&&-1===a.indexOf(e))throw this._buildConfigError("Invalid value for `"+t+"` (valid values are: "+o.available.join(", ")+")");this._options[t]=e;break;case O.OptionType.NUMBER:if((void 0===e?"undefined":S(e))!==O.OptionType.NUMBER)throw this._buildConfigError("Option `"+t+"` has to be a number.");this._options[t]=e;break;case O.OptionType.BOOLEAN:if((void 0===e?"undefined":S(e))!==O.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+t+"` has to be a boolean.");this._options[t]=e;break;case O.OptionType.VECTOR2:if(!(e instanceof k.a||"object"===(void 0===e?"undefined":S(e))&&"x"in e&&"y"in e))throw this._buildConfigError("Option `"+t+"` has to be an instance of Vector2 or an Object holding x and y values.");e instanceof k.a?this._options[t]=e.clone():this._options[t]=k.a.fromObject(e);break;case O.OptionType.COLOR:if(!(e instanceof C.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of Color.");this._options[t]=e;break;case O.OptionType.COLOR_MATRIX:if(!(e instanceof R.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of ColorMatrix.");this._options[t]=e.clone();break;case O.OptionType.FUNCTION:if("function"!=typeof e)throw this._buildConfigError("Option `"+t+"` has to be a function.");this._options[t]=e;break;case O.OptionType.OBJECT:case"*":this._options[t]=e;break;case O.OptionType.IMAGE:if("string"==typeof e){var s=new A;s.src=e,this._options[t]=s}else{if(!(e instanceof A||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw this._buildConfigError("Option `"+t+"` has to be an Image or String.");this._options[t]=e}break;case O.OptionType.CONFIGURABLE:this._options[t].set(e);break;case O.OptionType.ARRAY:if(!(e instanceof Array))throw this._buildConfigError("Option `"+t+"` has to be an Array.");this._options[t]=e.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+o.type+"`")}n&&(this._onOptionsChange(),this.emit("update",this,r({},t,e)))}},{key:"_onConfigurableUpdate",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,["update"].concat(e))}},{key:"hasChanges",value:function(){var t=this.getDefaultOptions();return!this.optionsEqual(t)}}]),e}(T.a);e.a=D},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(15).f,i=n(20),o=n(10)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){n(135);for(var r=n(12),i=n(19),o=n(28),a=n(10)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],h=c&&c.prototype;h&&!h[a]&&i(h,a,l),o[l]=o.Array}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var r=n(165),i=n(180),o=n(76),a=n(80),s=n(79),u=n(110),l=n(42),c=n(111),h=n(188),f=n(54),p=n(53),d=n(189),v=n(191),_=n(78),y=n(43),g=n(195),m=n(109),b={WebGLRenderer:i.a,CanvasRenderer:r.a,WebGLFilterManager:a.a,CanvasFilterManager:o.a,DisplayObject:s.a,Container:u.a,BaseTexture:l.a,Texture:c.a,RenderTexture:h.a,WebGLRenderTarget:f.a,CanvasRenderTarget:p.a,Sprite:d.a,Shaders:v.a,Shader:_.a,Filter:y.a,Filters:g,PixelArrayImage:m.a,autoDetectRenderer:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.a.isSupported()?new i.a(t,e,n):new r.a(t,e,n)}};e.a=b},function(t,e,n){t.exports={default:n(177),__esModule:!0}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(8),s=n(42),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(){function t(e,n,i,o,a){r(this,t),this._width=e,this._height=n,this._pixelRatio=i,this._baseTexture=new s.a,this._canvas=o||this._createCanvas(),this._context=a||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return u(t,[{key:"_createCanvas",value:function(){return a.i.createCanvas()}},{key:"clear",value:function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(t){this._baseTexture.resizeTo(t),this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getDimensions",value:function(){return new a.k(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(8),s=n(42),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(){function t(e,n,i,o){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,t),this._renderer=e,this._gl=e.getContext(),this._width=n,this._height=i,this._frame=null,this._pixelRatio=o,this._projectionMatrix=new a.g,this._mipMapping=!1,this._baseTexture=new s.a;var l=this._baseTexture.getFrame();l.width=n,l.height=i,this._baseTexture.setPixelRatio(o),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=u,this._filterStack=[{renderTarget:this,filter:[]}],u||this._initFrameBuffer()}return u(t,[{key:"resizeTo",value:function(t){this._width=0|t.x,this._height=0|t.y,this._baseTexture.resizeTo(t),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var t=s.a.DefaultMinFilter;return this._mipMapping&&(t=s.a.TrilinearFilter),t}},{key:"_getMagFilter",value:function(){return s.a.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var t=this._gl;t.bindTexture(t.TEXTURE_2D,this._texture);var e=this._width*this._pixelRatio,n=this._height*this._pixelRatio;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null);var r=new a.k(this._width,this._height);a.i.isPowerOfTwo(r)?(a.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.b.TRANSPARENT,e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),a.e.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new a.h(0,0,this._width,this._height),n=e.x,r=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-n*t.a,t.ty=1-r*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-n*t.a,t.ty=-1-r*t.d)}},{key:"_initFrameBuffer",value:function(){var t=this._gl;this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new a.k(this._width,this._height)),a.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var t=this._gl;this._baseTexture.disposeGLTexturesForRenderer(this._renderer),t.deleteTexture(this._texture),t.deleteFramebuffer(this._framebuffer)}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e,n,r,s,u){if(!(isNaN(u)||u<1)){u|=0;var l,c,h,f,p,d,v,_,y,g,m,b,x,w,T,k,C,E,R,O,S,F,A,D,M,B=t.data,I=u+u+1,L=r-1,P=s-1,U=u+1,N=U*(U+1)/2,j=new i,z=j;for(h=1;h<I;h++)z=z.next=new i,h==U&&(M=z);z.next=j;var G=null,V=null;v=d=0;var W=o[u],q=a[u];for(c=0;c<s;c++){for(k=C=E=R=_=y=g=m=0,b=U*(O=B[d]),x=U*(S=B[d+1]),w=U*(F=B[d+2]),T=U*(A=B[d+3]),_+=N*O,y+=N*S,g+=N*F,m+=N*A,z=j,h=0;h<U;h++)z.r=O,z.g=S,z.b=F,z.a=A,z=z.next;for(h=1;h<U;h++)f=d+((L<h?L:h)<<2),_+=(z.r=O=B[f])*(D=U-h),y+=(z.g=S=B[f+1])*D,g+=(z.b=F=B[f+2])*D,m+=(z.a=A=B[f+3])*D,k+=O,C+=S,E+=F,R+=A,z=z.next;for(G=j,V=M,l=0;l<r;l++)B[d+3]=A=m*W>>q,0!==A?(A=255/A,B[d]=(_*W>>q)*A,B[d+1]=(y*W>>q)*A,B[d+2]=(g*W>>q)*A):B[d]=B[d+1]=B[d+2]=0,_-=b,y-=x,g-=w,m-=T,b-=G.r,x-=G.g,w-=G.b,T-=G.a,f=v+((f=l+u+1)<L?f:L)<<2,k+=G.r=B[f],C+=G.g=B[f+1],E+=G.b=B[f+2],R+=G.a=B[f+3],_+=k,y+=C,g+=E,m+=R,G=G.next,b+=O=V.r,x+=S=V.g,w+=F=V.b,T+=A=V.a,k-=O,C-=S,E-=F,R-=A,V=V.next,d+=4;v+=r}for(l=0;l<r;l++){for(C=E=R=k=y=g=m=_=0,d=l<<2,b=U*(O=B[d]),x=U*(S=B[d+1]),w=U*(F=B[d+2]),T=U*(A=B[d+3]),_+=N*O,y+=N*S,g+=N*F,m+=N*A,z=j,h=0;h<U;h++)z.r=O,z.g=S,z.b=F,z.a=A,z=z.next;for(p=r,h=1;h<=u;h++)d=p+l<<2,_+=(z.r=O=B[d])*(D=U-h),y+=(z.g=S=B[d+1])*D,g+=(z.b=F=B[d+2])*D,m+=(z.a=A=B[d+3])*D,k+=O,C+=S,E+=F,R+=A,z=z.next,h<P&&(p+=r);for(d=l,G=j,V=M,c=0;c<s;c++)f=d<<2,B[f+3]=A=m*W>>q,A>0?(A=255/A,B[f]=(_*W>>q)*A,B[f+1]=(y*W>>q)*A,B[f+2]=(g*W>>q)*A):B[f]=B[f+1]=B[f+2]=0,_-=b,y-=x,g-=w,m-=T,b-=G.r,x-=G.g,w-=G.b,T-=G.a,f=l+((f=c+U)<P?f:P)*r<<2,_+=k+=G.r=B[f],y+=C+=G.g=B[f+1],g+=E+=G.b=B[f+2],m+=R+=G.a=B[f+3],G=G.next,b+=O=V.r,x+=S=V.g,w+=F=V.b,T+=A=V.a,k-=O,C-=S,E-=F,R-=A,V=V.next,d+=r}}}function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports={stackBlurCanvasRGBA:r}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),g=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},m=_.Math.Vector2,b=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||v()(e)).call(this,n));return o._operation=t,o._dirtiness={},o.id=_.Utils.getUUID(),o._renderTextures={},o._identitySprite=new _.Engine.Sprite,o._sprite=new _.Engine.Sprite,o._dummyImage={addEventListener:function(){},removeEventListener:function(){}},o._hitTestSprite=new _.Engine.Sprite,o._renderers=[],o}return o(e,t),y(e,[{key:"applyScale",value:function(t){}},{key:"applyRotation",value:function(t){var e=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=t,this.setRotation(n*Math.PI/180);var r=(t+360)%360,i=r*Math.PI/180,o=Math.cos(i),a=Math.sin(i),s=this._options.position.clone().subtract(.5).multiply(e),u=new m(s.x*o-s.y*a,s.x*a+s.y*o).divide(e.clone().flip());this.setPosition(new m(.5,.5).add(u))}},{key:"applyFlip",value:function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)}},{key:"applyTransform",value:function(t){var e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new _.Engine.Container,this._renderTextureSprite=new _.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(_.RendererType.WEBGL)}},{key:"_optionEquals",value:function(t,n){return"type"===t||g(e.prototype.__proto__||v()(e.prototype),"_optionEquals",this).call(this,t,n)}},{key:"update",value:function(t,e){this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e)}},{key:"_updateSprite",value:function(t){var e=this;[this._sprite,this._hitTestSprite].forEach(function(n){if(n.getTexture()){n.setAnchor(e._options.anchor),n.setPosition(e._options.position.clone().multiply(t)),void 0!==e._options.alpha&&n.setAlpha(e._options.alpha);var r=e._options.dimensions;r&&(r=r.clone().multiply(e._operation.getSDK().getTextureScale()),n.setWidth(r.x),n.setHeight(r.y)),n.updateTransform();var i=n.getTexture().getFrame(),o=new m(i.width,i.height);n.setPivot(e._options.pivot.clone().multiply(o)),n.setRotation(e._options.rotation),n.updateTransform()}})}},{key:"_renderToRenderTexture",value:function(t){var e=this._getTexture().getDimensions(),n=this._getRenderTexture(t.getRenderer(),e),r=e.clone();if(this._options.smoothDownscaling&&(r.x=_.Utils.nextHighestPOT(r.x),r.y=_.Utils.nextHighestPOT(r.y)),this._renderTexture.resizeTo(r),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var i=r.clone().subtract(e.x,e.y).divide(r),o=n.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-i.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-i.y}this._sprite.setTexture(n)}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])}},{key:"_getRenderTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new m(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new _.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]}},{key:"dispose",value:function(){for(var t in this._renderTextures)this._renderTextures[t].dispose()}}]),e}(_.Configurable);e.a=b},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(16),i=n(12).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(16);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(14),i=n(132),o=n(65),a=n(63)("IE_PROTO"),s=function(){},u=function(){var t,e=n(59)("iframe"),r=o.length;for(e.style.display="none",n(89).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(57),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(64)("keys"),i=n(47);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(12),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){e.f=n(10)},function(t,e,n){var r=n(12),i=n(9),o=n(45),a=n(66),s=n(15).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(50),i=n(35),o=n(21),a=n(60),s=n(20),u=n(85),l=Object.getOwnPropertyDescriptor;e.f=n(17)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(37),i=n(10)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(70),i=n(10)("iterator"),o=n(28);t.exports=n(9).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r,i,o,a=n(26),s=n(157),u=n(89),l=n(59),c=n(12),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,v=c.Dispatch,_=0,y={},g=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},m=function(t){g.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++_]=function(){s("function"==typeof t?t:Function(t),e)},r(_),_},p=function(t){delete y[t]},"process"==n(37)(h)?r=function(t){h.nextTick(a(g,t,1))}:v&&v.now?r=function(t){v.now(a(g,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=m,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",m,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}var i=n(46);t.exports.f=function(t){return new r(t)}},function(t,e,n){var r=n(13),i=n(9),o=n(27);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){t.exports={default:n(170),__esModule:!0}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(8),s=n(53),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(){function t(e){r(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new a.h(0,0,e.getWidth(),e.getHeight())}return u(t,[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach(function(e){return e.resizeTo(t)})}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:e}),r.clear()}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1],i=n,o=r.renderTarget;return 1===e.length?(e[0].apply(this._renderer,i,o),this._textures.push(i)):this._applyFilters(e,i,o),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach(function(t,e){if(t===a)t.apply(r._renderer,i,n);else{t.apply(r._renderer,i,o);var s=i;i=o,o=s}}),this._textures.push(i),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._textures.pop();return e||(e=new s.a(this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"dispose",value:function(){}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(8),p=n(78),d=f.c.UniformType,v=function(t){function e(t,n,o){return r(this,e),n=n||e.defaultVertexSource,o=o||e.defaultFragmentSource,i(this,(e.__proto__||h()(e)).call(this,t,n,o,e.defaultUniforms,e.defaultAttributes))}return o(e,t),e}(p.a);v.defaultVertexSource=n(184),v.defaultFragmentSource=n(185);var _=new f.g;v.defaultUniforms={u_image:{type:d.SAMPLER2D,value:0},u_projMatrix:{type:d.MAT3,value:_.toArray()}},v.defaultAttributes=["a_position","a_texCoord","a_color"],e.a=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(52),s=n.n(a),u=n(8),l=n(23),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=u.f,f=u.i,p=function(){function t(e,n,i,o,a){r(this,t),this._renderer=e,this._vertexSource=n,this._fragmentSource=i,this._uniforms=o||{},this._uniformLocations={},this._attributes=a||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return c(t,[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(t,e){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,t),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.vertexAttribPointer(this._attributeLocations.a_position,2,n.FLOAT,!1,u.j,0),n.vertexAttribPointer(this._attributeLocations.a_texCoord,2,n.FLOAT,!1,u.j,8),n.vertexAttribPointer(this._attributeLocations.a_color,4,n.UNSIGNED_BYTE,!0,u.j,16)}},{key:"syncUniforms",value:function(){var t=this;s()(this._uniforms).forEach(function(e){t.syncUniform(e)})}},{key:"syncUniform",value:function(t){var e=this._renderer.getContext(),n=this._uniforms[t],r=this._uniformLocations[t];switch(n.type){case l.UniformType.SAMPLER2D:e.uniform1i(r,n.value);break;case l.UniformType.INT:case l.UniformType.INT1:e.uniform1i(r,n.value);break;case l.UniformType.FLOAT:case l.UniformType.FLOAT1:e.uniform1f(r,n.value);break;case l.UniformType.FLOAT2:e.uniform2f(r,n.value[0],n.value[1]);break;case l.UniformType.FLOAT3:e.uniform3f(r,n.value[0],n.value[1],n.value[2]);break;case l.UniformType.FLOAT4:e.uniform4f(r,n.value[0],n.value[1],n.value[2],n.value[3]);break;case l.UniformType.FLOAT_VECTOR2:e.uniform2fv(r,n.value);break;case l.UniformType.MAT3:case l.UniformType.MAT3FV:e.uniformMatrix3fv(r,!1,n.value);break;case l.UniformType.MAT4:e.uniformMatrix4fv(r,!1,n.value);break;default:h.warn(this.constructor.name,"Unknown uniform type: "+n.type)}}},{key:"_cacheAttributeLocations",value:function(){var t=this,e=this._renderer.getContext();this._attributes.forEach(function(n){t._attributeLocations[n]=e.getAttribLocation(t._program,n)})}},{key:"_cacheUniformLocations",value:function(){var t=this,e=this._renderer.getContext();s()(this._uniforms).forEach(function(n){t._uniformLocations[n]=e.getUniformLocation(t._program,n)})}},{key:"_addPrecisionToSource",value:function(t){var e=this._renderer.getMaxFloatPrecision(),n="mediump";return f.isMobile()&&"highp"===e&&(n="highp"),"precision "+n+" float;\n"+t}},{key:"_compile",value:function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;var n=this._addPrecisionToSource(this._fragmentSource),r=this._compileShader(t.FRAGMENT_SHADER,n);this._fragmentShader=r;var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var o=t.getProgramInfoLog(i);t.isContextLost()&&(o="WebGL context lost"),t.deleteProgram(i),h.error(this.constructor.name,"WebGL program linking error: "+o)}this._program=i}},{key:"_compileShader",value:function(t,e){var n=this._renderer.getContext(),r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);n.isContextLost()&&(i="WebGL context lost"),n.deleteShader(r),h.error(this.constructor.name,"WebGL shader compilation error: "+i)}return r}},{key:"setUniform",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e,n&&this.syncUniform(t)}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}]),t}();e.a=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(8),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){r(this,t),this._position=new a.k(0,0),this._scale=new a.k(1,1),this._pivot=new a.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new a.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new a.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new a.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new a.h(0,0,0,0)}return s(t,[{key:"renderWebGL",value:function(t){a.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(t){a.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var t=this._parent?this._parent.getWorldTransform():a.g.IDENTITY,e=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.tx|=0,e.ty|=0,e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(t){this._shaders.push(t)}},{key:"removeShader",value:function(t){var e=this._shaders.indexOf(t);return-1!==e&&(this._shaders.splice(e,1),!0)}},{key:"removeShaderAt",value:function(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(t,e){t instanceof a.k?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(t,e){t instanceof a.k?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(t,e){t instanceof a.k?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(t){this._alpha=t}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(t){this._parent=t}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(t){this._filterRectangle.copy(t)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(t){this._tint=t}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(t){this._visible=t}}]),t}();e.a=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(8),s=n(54),u=n(186),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=a.c.RendererType,h=function(){function t(e){r(this,t),this._renderer=e,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new a.h(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return l(t,[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach(function(e){return e.resizeTo(t)})}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._renderTargets.pop();return e||(e=new s.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),e.setFrame(this._currentFrame),t&&e.clear(),e}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=t.getFilterRectangle();r.width>0&&r.height>0&&(this._currentFrame=r);var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),i.clear(),this._filterStack.push({renderTarget:i,filters:e})}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1],i=n,o=r.renderTarget;this._quad.map(this._textureFrame,i.getFrame());var a=e[0].getShaderForRenderer(this._renderer),s=this._quad.getVertexBuffer(),u=this._quad.getIndexBuffer(),l=this._renderer.getContext();l.bindBuffer(l.ARRAY_BUFFER,s),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,u);var c=a.getAttributeLocations();return l.vertexAttribPointer(c.a_position,2,l.FLOAT,!1,0,0),l.vertexAttribPointer(c.a_texCoord,2,l.FLOAT,!1,0,32),l.vertexAttribPointer(c.a_color,4,l.FLOAT,!1,0,64),this._renderer.updateTexture(i.getBaseTexture(),!1),1===e.length?(e[0].apply(this._renderer,i,o),this._renderTargets.push(i)):this._applyFilters(e,i,o),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=t[t.length-1];t.forEach(function(t,e){if(t===a)t.apply(r._renderer,i,n);else{t.apply(r._renderer,i,o);var s=i;i=o,o=s}}),this._renderTargets.push(i),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(c.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new u.a(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(t){t.dispose()})}}]),t}();e.a=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(41),s=n(82),u=n(18),l=n(83),c=n(218),h=n(219),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=u.a.invariant,d=l.a.MARKERS,v=new RegExp("^data:image/jpeg;base64,","i"),_=function(){function t(e){r(this,t),this._buf=e,this._stream=new s.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new h.a(this._getMarkerBuffer(d.EXIF)),this._jfifData=new c.a(this._getMarkerBuffer(d.JFIF))}return f(t,[{key:"restoreSegments",value:function(e){var n=t.fromDataURL(e);return n=this.restoreExifTagsToImageData(n),n=this.restoreJfifSegmentToImageData(n),t.toDataURL(n)}},{key:"restoreExifTagsToImageData",value:function(t){if(!this._exifData.isValid())return t;var e=this._sliceIntoSegments(t),n=e[1][0],r=t.slice(0,n),i=t.slice(n),o=r.concat(this._exifData.getBuffer());return o=o.concat(i)}},{key:"restoreJfifSegmentToImageData",value:function(t){if(!this._jfifData.isValid())return t;var e=this._sliceIntoSegments(t),n=this._findSegment(d.JFIF,e);p(n,"JFIF Data Error: Segment not found");var r=n[0],i=n[1],o=t.slice(0,r),a=t.slice(r,i),s=t.slice(i),u=new c.a(a);u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity());var l=o.concat(a);return l=l.concat(s)}},{key:"restoreExifTags",value:function(e){var n=t.fromDataURL(e),r=this.restoreExifTagsToImageData(n);return t.toDataURL(r)}},{key:"restoreJfifSegment",value:function(e){if(!this._jfifData.isValid())return e;var n=t.fromDataURL(e),r=this.restoreJfifSegmentToImageData(n);return t.toDataURL(r)}},{key:"setOrientation",value:function(t){return this._exifData.setOrientation(t)}},{key:"_findSegment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];this._stream.setHead(r);if(this._stream.peekInt16()===t)return[r,i]}return!1}},{key:"_getMarkerBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=this._findSegment(t,e);if(n){var r=n[0],i=n[1];return this._buf.slice(r,i)}return!1}},{key:"_sliceIntoSegments",value:function(t){for(var e=new s.a(t),n=[];e.getHead()<t.length;){var r=e.readInt16();if(r!==d.SOI){if(r===d.SOS)break;if(!(r>=65280&&r<=65535))throw new Error("Invalid marker: 0x"+r.toString(16));var i=e.readInt16(),o=e.getHead()+i-2;n.push([e.getHead()-4,o]),e.setHead(o)}}return this._stream.setHead(0),n}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}],[{key:"toDataURL",value:function(t){return"data:image/jpeg;base64,"+a.a.encode(t)}},{key:"fromDataURL",value:function(t){var e=t.replace("data:image/jpeg;base64,","");return a.a.decode(e)}},{key:"isJPEG",value:function(t){return v.test(t)}},{key:"bufferIsJPEG",value:function(t){return"JFIF"===t.slice(6,10).toString()}},{key:"fromBase64String",value:function(e){var n=e.replace("data:image/jpeg;base64,","");return new t(a.a.decode(n))}}]),t}();e.a=_},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e){r(this,t),this._head=0,this._buf=e}return a(t,[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1];return t?(n<<8)+e:(e<<8)+n}},{key:"peekInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2];return t?(r<<16)+(n<<8)+e:(e<<16)+(n<<8)+r}},{key:"peekInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2],i=this._buf[this._head+3];return t?(i<<32)+(r<<16)+(n<<8)+e:(e<<32)+(n<<16)+(r<<8)+i}},{key:"writeInt8",value:function(t){this._buf[this._head]=255&t}},{key:"writeInt16",value:function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t}},{key:"readInt8",value:function(){var t=this.peekInt8();return this._head+=1,t}},{key:"readInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt16(t);return this._head+=2,e}},{key:"readInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt24(t);return this._head+=3,e}},{key:"readInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt32(t);return this._head+=4,e}},{key:"readString",value:function(t){for(var e="",n=0;n<t;n++){var r=this.readInt8();e+=String.fromCharCode(r)}return e}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(t){this._head=t}}]),t}();e.a=s},function(t,e,n){"use strict";var r={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},i={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};e.a={MARKERS:r,EXIF_TAGS:i}},function(t,e,n){"use strict";var r=n(45),i=n(13),o=n(86),a=n(19),s=n(20),u=n(28),l=n(131),c=n(48),h=n(90),f=n(10)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,v,_,y,g){l(n,e,v);var m,b,x,w=function(t){if(!p&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",k="values"==_,C=!1,E=t.prototype,R=E[f]||E["@@iterator"]||_&&E[_],O=!p&&R||w(_),S=_?k?w("entries"):O:void 0,F="Array"==e?E.entries||R:R;if(F&&(x=h(F.call(new t)))!==Object.prototype&&x.next&&(c(x,T,!0),r||s(x,f)||a(x,f,d)),k&&R&&"values"!==R.name&&(C=!0,O=function(){return R.call(this)}),r&&!g||!p&&!C&&E[f]||a(E,f,O),u[e]=O,u[T]=d,_)if(m={values:k?O:w("values"),keys:y?O:w("keys"),entries:S},g)for(b in m)b in E||o(E,b,m[b]);else i(i.P+i.F*(p||C),e,m);return m}},function(t,e,n){t.exports=!n(17)&&!n(27)(function(){return 7!=Object.defineProperty(n(59)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(19)},function(t,e,n){var r=n(20),i=n(21),o=n(133)(!1),a=n(63)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(37);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(12).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(20),i=n(38),o=n(63)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(87),i=n(65).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e){},function(t,e,n){var r=n(14);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(28),i=n(10)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(14),i=n(46),o=n(10)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(14),i=n(16),o=n(73);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(10)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):_=-1,d.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=d.length;e;){for(p=d,d=[];++_<e;)p&&p[_].run();_=-1,e=d.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var p,d=[],v=!1,_=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){t.exports={default:n(166),__esModule:!0}},function(t,e,n){t.exports={default:n(168),__esModule:!0}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(32),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){r(this,t),this.reset()}return s(t,[{key:"multiply",value:function(t){var e=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;return e=this.a*t.a+this.b*t.c,n=this.a*t.b+this.b*t.d,r=this.c*t.a+this.d*t.c,i=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,a=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(t){var e=t,n=e.x,r=e.y;return t=t.clone(),t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.tx,t}},{key:"applyInverseToVector",value:function(t){var e=1/(this.a*this.d+this.c*-this.b),n=t,r=n.x,i=n.y;return t=t.clone(),t.x=this.d*e*r+-this.c*e*i+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*i+-this.b*e*r+(-this.ty*this.a+this.tx*this.b)*e,t}},{key:"rectangleToCoordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.a(0,0),n=t.width*(1-e.x),r=t.width*-e.x,i=t.height*(1-e.y),o=t.height*-e.y,s=[];return s.push(new a.a(this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),s.push(new a.a(this.a*n+this.c*o+this.tx,this.d*o+this.b*n+this.ty)),s.push(new a.a(this.a*n+this.c*i+this.tx,this.d*i+this.b*n+this.ty)),s.push(new a.a(this.a*r+this.c*i+this.tx,this.d*i+this.b*r+this.ty)),s}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)}},{key:"toString",value:function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"}}],[{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(32),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=e,this.y=n,this.width=i,this.height=o}return s(t,[{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"equals",value:function(e,n,r,i){return e instanceof t?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&n===this.y&&r===this.width&&i===this.height}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new a.a(this.x,this.y)}},{key:"getSize",value:function(){return new a.a(this.width,this.height)}},{key:"toString",value:function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"}}]),t}();e.a=u},function(t,e,n){"use strict";function r(t,e,n){return e in t?o()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(0),o=n.n(i),a=n(22);e.a={checkFramebufferStatus:function(t,e){var n,i=e.checkFramebufferStatus(e.FRAMEBUFFER),o=(n={},r(n,e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),r(n,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),r(n,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),r(n,e.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),n);i!==e.FRAMEBUFFER_COMPLETE&&a.a.warn(t,"Framebuffer incomplete: "+o[i])}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(8),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(106),l=function(){function t(e){var n=this;r(this,t),this._context=e,this._tracking=!1;var i=this;for(var o in e)!function(t){"function"==typeof e[t]?n[t]=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=e[t];if(!i._tracking)return a.apply(e,r);var s=u(),l=a.apply(e,r),c=u()-s,h={functionName:t,arguments:r,duration:c};return i._trackedCalls.push(h),l}:n._makePropertyWrapper(t)}(o)}return s(t,[{key:"_makePropertyWrapper",value:function(t){if(-1===["_context","_trackedCalls","_tracking"].indexOf(t)){var e=this._context;this.__defineGetter__(t,function(){return e[t]}),this.__defineSetter__(t,function(n){e[t]=n})}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var t="Rendering";a.f.log(t,"Frame rendering results:"),a.f.log(t,"Context calls: "+this._trackedCalls.length);var e={};this._trackedCalls.forEach(function(t){var n=t.functionName,r=t.duration;e[n]=e[n]||{totalDuration:0,calls:0},e[n].totalDuration+=r,e[n].calls++});var n=[];for(var r in e){var i=e[r];i.averageDuration=i.totalDuration/i.calls,n.push({functionName:r,data:i})}n.sort(function(t,e){return e.data.totalDuration-t.data.totalDuration}),n=n.slice(0,3),n.forEach(function(e){a.f.log(t,e.functionName+": "+e.data.calls+" calls, "+e.data.totalDuration.toFixed(2)+"ms")})}}]),t}();e.a=l},function(t,e,n){(function(e){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,n=function(){var t;return t=r(),1e9*t[0]+t[1]},i=n()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,n(99))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(179),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e);var a=i(this,(e.__proto__||p()(e)).call(this));return a._options=v.a.defaults(o,{pixelRatio:1,transparent:!1,clearColor:d.b.BLACK,debug:!1}),a.setMaxListeners(0),a._width=t||800,a._height=n||600,a._dimensions=new d.k(a._width,a._height),a._maxTextureSize=null,a._pixelRatio=a._options.pixelRatio,a._clearColor=a._options.transparent?d.b.TRANSPARENT:a._options.clearColor||d.b.BLACK,a}return o(e,t),_(e,[{key:"setCanvas",value:function(t){var e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new d.k(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=t.clone()}},{key:"_createContext",value:function(){d.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){d.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(t){d.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(t){this._filterManager=t}},{key:"isOfType",value:function(t){return this._type===t}},{key:"dispose",value:function(){d.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}],[{key:"isSupported",value:function(){return!0}}]),e}(d.d);e.a=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e){r(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return a(t,[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e,n,i){r(this,t),this.width=e,this.height=n,this.data=i}return a(t,null,[{key:"fromNodeCanvasImage",value:function(e){var n=new Canvas(e.width,e.height),r=n.getContext("2d");r.drawImage(e,0,0);var i=r.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,i.data)}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(8),y=n(79),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},b=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._children=[],s._filters=[],s}return o(e,t),g(e,[{key:"addFilter",value:function(t){this._filters.push(t)}},{key:"removeFilter",value:function(t){var e=this._filters.indexOf(t);return-1!==e&&(this._filters.splice(e,1),!0)}},{key:"setFilters",value:function(t){this._filters=t}},{key:"addChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)}},{key:"prependChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)}},{key:"hasChild",value:function(t){return-1!==this._children.indexOf(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):_.f.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach(function(e){e.renderWebGL(t)}),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(t){}},{key:"renderCanvas",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach(function(e){e.renderCanvas(t)}),this._filters&&this._filters.length&&e.popFilters()}}},{key:"_renderCanvas",value:function(t){}},{key:"updateTransform",value:function(){m(e.prototype.__proto__||v()(e.prototype),"updateTransform",this).call(this),this._children.forEach(function(t){t.updateTransform()})}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}]),e}(y.a);e.a=b},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(42),_=n(187),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||p()(e)).call(this));if(!(t instanceof v.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return o._uvs=new _.a,o._frame=n?n.clone():null,o._frameLocked=!!n,o._onBaseTextureLoaded=o._onBaseTextureLoaded.bind(o),o._onBaseTextureUpdated=o._onBaseTextureUpdated.bind(o),o._frame||(o._frame=new d.h(0,0,1,1)),o.setBaseTexture(t),o}return o(e,t),y(e,[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var t=this._baseTexture.getFrame(),e=t.width,n=t.height;this._frame.width=e,this._frame.height=n,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(t){if(this._baseTexture=t,this._baseTexture.isLoaded()){var e=t.getFrame(),n=e.width,r=e.height;this._frameLocked||(this._frame=new d.h(0,0,n,r)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new d.k(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._baseTexture.dispose()}}],[{key:"fromImage",value:function(t){return new e(new v.a(t))}},{key:"fromCanvas",value:function(t){return new e(new v.a(t))}}]),e}(d.d);e.a=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(39),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,_=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,g=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,m=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,x=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;r(this,t),this.set(e,n,i,o,a,s,u,l,c,h,f,p,d,v,_,y,g,m,b,x)}return s(t,[{key:"set",value:function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,v,_,y,g,m){this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o,this.g=a,this.h=s,this.i=u,this.j=l,this.k=c,this.l=h,this.m=f,this.n=p,this.o=d,this.p=v,this.q=_,this.r=y,this.s=g,this.t=m}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(t){var e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e,n=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j,r=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o,i=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new a.a(e,n,r,i)}},{key:"multiply",value:function(t){var e=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0,p=void 0,d=void 0,v=void 0,_=void 0,y=void 0,g=void 0,m=void 0,b=void 0,x=t,w=this;return e=x.a*w.a+x.b*w.f+x.c*w.k+x.d*w.p,n=x.a*w.b+x.b*w.g+x.c*w.l+x.d*w.q,r=x.a*w.c+x.b*w.h+x.c*w.m+x.d*w.r,i=x.a*w.d+x.b*w.i+x.c*w.n+x.d*w.s,a=x.f*w.a+x.g*w.f+x.h*w.k+x.i*w.p,s=x.f*w.b+x.g*w.g+x.h*w.l+x.i*w.q,u=x.f*w.c+x.g*w.h+x.h*w.m+x.i*w.r,l=x.f*w.d+x.g*w.i+x.h*w.n+x.i*w.s,h=x.k*w.a+x.l*w.f+x.m*w.k+x.n*w.p,f=x.k*w.b+x.l*w.g+x.m*w.l+x.n*w.q,p=x.k*w.c+x.l*w.h+x.m*w.m+x.n*w.r,d=x.k*w.d+x.l*w.i+x.m*w.n+x.n*w.s,_=x.p*w.a+x.q*w.f+x.r*w.k+x.s*w.p,y=x.p*w.b+x.q*w.g+x.r*w.l+x.s*w.q,g=x.p*w.c+x.q*w.h+x.r*w.m+x.s*w.r,m=x.p*w.d+x.q*w.i+x.r*w.n+x.s*w.s,o=x.a*w.e+x.b*w.j+x.c*w.o+x.d*w.t+x.e,c=x.f*w.e+x.g*w.j+x.h*w.o+x.i*w.t+x.j,v=x.k*w.e+x.l*w.j+x.m*w.o+x.n*w.t+x.o,b=x.p*w.e+x.q*w.j+x.r*w.o+x.s*w.t+x.t,this.a=e,this.b=n,this.c=r,this.d=i,this.e=o,this.f=a,this.g=s,this.h=u,this.i=l,this.j=c,this.k=h,this.l=f,this.m=p,this.n=d,this.o=v,this.p=_,this.q=y,this.r=g,this.s=m,this.t=b,this}},{key:"clone",value:function(){var e=new t;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}},{key:"equals",value:function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"}},{key:"toArray",value:function(){var t=this;return"abcdefghijklmnopqrst".split("").map(function(e){return t[e]})}}],[{key:"createBrightnessMatrix",value:function(e){var n=new t;return n.e=e,n.j=e,n.o=e,n}},{key:"createContrastMatrix",value:function(e){var n=new t,r=(1-e)/2;return n.a=n.g=n.m=e,n.e=n.j=n.o=r,n}},{key:"createSaturationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new t,r=1-e,i=.213*r,o=.715*r,a=.072*r;return n.a=i+e,n.b=o,n.c=a,n.f=i,n.g=o+e,n.h=a,n.k=i,n.l=o,n.m=a+e,n}},{key:"createExposureMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(2,e);return new t(n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return r.a=r.g=r.m=e,r.e=r.j=r.o=n,r}},{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=u},function(t,e,n){"use strict";(function(t){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(24),s=n(206),u=n.n(s),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c="undefined"!=typeof window?window:t,h=function(){function t(e){r(this,t),this._url=e,this._parsedUrl=u.a.parse(this._url,!0)}return l(t,[{key:"_isJSONPRequest",value:function(){var t=this._parsedUrl.query;for(var e in t){if("?"===t[e])return!0}return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var t=this;return new a.a(function(e,n){var r=void 0;c.XDomainRequest?(r=new c.XDomainRequest,r.onload=function(){var t=JSON.parse(r.responseText);e(t)},r.onerror=function(t){n(t)},r.open("GET",t._url,!0),r.send()):c.XMLHttpRequest&&(r=new XMLHttpRequest,r.onreadystatechange=function(t){if(4===r.readyState)if(200===r.status){var i=JSON.parse(r.responseText);e(i)}else n(new Error("HTTP Status "+r.status))},r.open("GET",t._url,!0),r.send())})}},{key:"_loadJSONP",value:function(){var t=this,e=!1,n=!1,r="pesdk"+Math.round(99999999999999*Math.random());return new a.a(function(i,o){var a=t._createJSONPNode(r);c[r]=function(r){t._removeJSONPNode(a),e||(n=!0,i(r))},c.setTimeout(function(){n||(t._removeJSONPNode(a),e=!0,o(new Error("Timeout of 5 seconds exceeded.")))},5e3)})}},{key:"_createJSONPNode",value:function(t){var e=this._buildJSONPUrl(t),n=document.querySelector("head"),r=document.createElement("script");return r.src=e,n.appendChild(r),r}},{key:"_removeJSONPNode",value:function(t){t.parentNode.removeChild(t)}},{key:"_buildJSONPUrl",value:function(t){var e=this._parsedUrl.query,n=null;for(var r in e)if("?"===e[r]){n=r;break}return delete this._parsedUrl.search,e[n]=t,u.a.format(this._parsedUrl)}}]),t}();e.a=h}).call(e,n(33))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),i=n(215),o=n(103),a=n(102),s=n(112);n.d(e,"Vector2",function(){return r.a}),n.d(e,"Vector3",function(){return i.a}),n.d(e,"Rectangle",function(){return o.a}),n.d(e,"Matrix",function(){return a.a}),n.d(e,"ColorMatrix",function(){return s.a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(216);n.d(e,"ExifOrientationOperation",function(){return r.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(23),v=n(24),_=n(22),y=n(51),g=n(44),m=n(117),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),x=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var o=i(this,(e.__proto__||p()(e)).call(this,n,{enabled:{type:d.OptionType.BOOLEAN,default:!0,serializable:!1}}));return o._sdk=t,o._cacheEnabled=!1,o._dirtiness={},o._sprite=new y.a.Sprite,o._container=new y.a.Container,o._container.addChild(o._sprite),o}return o(e,t),b(e,[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(t){var e=this;if(!this.getEnabled())return _.a.info(this.constructor.name,"Disabled - skipping"),v.a.resolve(t);if(!this._renderTexture){var n=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new y.a.RenderTexture(this._sdk.getRenderer(),n.width,n.height)}var r=this._sdk.getRenderer(),i=void 0,o=void 0;if(_.a.canLog("info")&&(o=new m.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(r)){this._sprite.setTexture(t);var a=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),i=this._render(t).then(function(){return e.setDirtyForRenderer(!1,r),e._renderTexture})}else _.a.info(this.constructor.name,"Rendering from cache"),i=v.a.resolve(this._renderTexture);return i.then(function(t){return o&&o.stop(),t})}},{key:"_render",value:function(t){return(this._sdk.getRenderer().isOfType(d.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)}},{key:"_renderWebGL",value:function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(t){return t.clone()}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(t){var e=this._dirtiness[t.id];return void 0===e||e}},{key:"setDirtyForRenderer",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,{id:n},e)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._sdk.getInputDimensions();e&&n.multiply(this._sdk.getZoom()).floor();var r=void 0;return this._sdk.getOperationsStack().forEach(function(e){if(!r)return e===t?void(r=!0):void(n=e.getNewDimensions(n))}),n.floor()}},{key:"clone",value:function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}]),e}(g.a);x.identifier=null,e.a=x},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(31),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(106),l=function(){function t(e,n){r(this,t),this._tag=e,this._name=n,this._start=u()}return s(t,[{key:"stop",value:function(){var t=u(),e=t-this._start,n=Math.round(1e3/e);a.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+n+" FPS)")}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(31),v=n(24),_=n(40),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,e);var n=i(this,(e.__proto__||p()(e)).call(this));return n._onOperationUpdate=n._onOperationUpdate.bind(n),n._cacheEnabled=!0,n._stack=t,n._stack.forEach(function(t){t.on("update",n._onOperationUpdate)}),n}return o(e,t),y(e,[{key:"clear",value:function(){var t=this;this.forEach(function(e){return t.remove(e)}),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter(function(t){return!!t}).some(function(t){return t.hasChanges()})}},{key:"_onOperationUpdate",value:function(t,e){this.emit(d.Constants.Events.OPERATION_UPDATED,t,e)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(t){return this._stack.filter(function(t){return!!t}).forEach(t)}},{key:"render",value:function(t,e){var n=this,r=e,i=this._stack.filter(function(t){return!!t}).filter(function(t){return t.getEnabled()});i.reverse();var o=i.filter(function(e){return!e.isDirtyForRenderer(t.getRenderer())})[0],a=i.indexOf(o);i.reverse();var s=0;-1!==a&&(s=i.length-a-1);for(var u=0;u<s;u++)d.Log.info(this.constructor.name,"Skipping "+i[u].constructor.name);for(var l=v.a.resolve(r),c=s;c<i.length;c++)!function(t){var e=i[t],r=void 0,o=void 0;l=l.then(function(t){return e.render(t).then(function(t){return r&&t!==r&&!n._cacheEnabled&&o.disposeRenderTextures(),r=t,o=e,t})})}(c);return l}},{key:"validateSettings",value:function(){return v.a.all(this._stack.filter(function(t){return!!t}).map(function(t){return t.validateSettings()}))}},{key:"setAllToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(e){return e.setDirty(!0,t)})}},{key:"updateDirtinessForRenderer",value:function(t){for(var e=!1,n=0;n<this._stack.length;n++){var r=this._stack[n];r&&(r.isDirtyForRenderer(t)&&(e=!0),e&&r.setDirtyForRenderer(!0,t))}}},{key:"push",value:function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)}},{key:"unshift",value:function(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new e(this._stack.slice(0))}},{key:"get",value:function(t){return this._stack[t]}},{key:"set",value:function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)}},{key:"remove",value:function(t){var e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))}},{key:"removeAt",value:function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach(function(t){t.dispose()})}}]),e}(_.a);e.a=g},function(t,e){t.exports={name:"photoeditorsdk",version:"4.5.0",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (9elements GmbH) <contact@photoeditorsdk.com>",license:"SEE LICENSE IN LICENSE.md",bin:{},scripts:{start:"npm run watch",release:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_RELEASE=true webpack --progress --colors && cross-env npm run prerender-desktop-css && rimraf build/examples/qa-* && rimraf build/examples/ci-* && rimraf build/**/dev.*","release:production":"cross-env ENV=production npm run release && rm -rf build/examples/shared","release:test":"cross-env ENV=test PESDK_CLEAN=true PESDK_ASSETS=true webpack && npm run prerender-desktop-css","release:development":"cross-env ENV=development PESDK_CLEAN=true PESDK_ASSETS=true npm run release",lint:"eslint --ext .jsx,.js src/js","lint:test":"eslint --ext .jsx,.js test","lint:sdk":"eslint --ext .jsx,.js src/js/sdk","lint:ui":"eslint --ext .jsx,.js src/js/ui","lint:ui:react-ui":"eslint --ext .jsx,.js src/js/ui/react-ui","lint:ui:desktop-ui":"eslint --ext .jsx,.js src/js/ui/desktop-ui",build:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true webpack",rebuild:"cross-env PESDK_ASSETS=true webpack --progress --color",clean:"rimraf build/* doc/* dist/*",watch:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors","watch:test":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true ENV=test webpack --watch --progress --colors","watch:production":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors",test:"npm run test:sdk && npm run test:ui && npm run test:ui:react-ui && npm run test:desktop-ui && npm run server","test:ui":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/ui","test:sdk":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","test:ui:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:ui:desktop-ui":'cross-env ENV=test node --stack-size=65500  node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:server":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/server/support/helpers test/shared/run-server.js "test/server/*.test.js" "test/server/**/*.test.js"',"test:comparison":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/comparison/support/helpers "test/comparison/*.test.js" "test/comparison/**/*.test.js"',"test:webgl":"cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk",jsdoc:"rimraf doc/photoeditorsdk && jsdoc -c config/jsdoc/jsdoc.json -r","jsdoc:server":"rimraf doc/photoeditorsdk-server && jsdoc -c config/jsdoc/jsdoc.server.json -r","render-filter-previews":"node scripts/run render-filter-previews","prerender-desktop-css":"node scripts/run render-desktop-ui-css","dist:sdk":"rimraf dist/photoeditorsdk && cp -r build/photoeditorsdk/ dist/photoeditorsdk && find dist/photoeditorsdk -d 2 -name '*.min.*'  | sed 'p;s/.min././' | xargs -n2 cp && npm run jsdoc","dist:server":"rimraf dist/photoeditorsdk-server && cp -r build/photoeditorsdk-server/ dist/photoeditorsdk-server && find dist/photoeditorsdk-server -d 2 -name '*.min.*'  | sed 's/.min././' | xargs -n1 rm && npm run jsdoc:server",precommit:"true",prepush:"npm run lint"},devDependencies:{adonis:"git://github.com/imgly/adonis.git#v1.0.1",ajv:"^5.5.1","babel-core":"^6.26.0","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-env":"^1.6.1","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-preset-stage-3":"^6.24.1","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chai:"^3.4.0","chai-as-promised":"^5.1.0",chromedriver:"^2.33.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.3.0","cross-env":"^5.1.1","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",eslint:"^4.16.0","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.10.0","eslint-plugin-mocha":"^5.0.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2",husky:"^0.14.3",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"^3.5.5","json-loader":"^0.5.7",lodash:"^4.17.4",minimist:"^1.2.0",mkdirp:"^0.5.1",mocha:"^3.5.3",nightwatch:"git://github.com/imgly/nightwatch.git#feature/file-upload-and-multiple-selectors","node-sass":"^4.7.2","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0",pixelmatch:"^4.0.2",pngjs:"^3.3.2","preprocess-loader":"^0.2.2","pretty-error":"^2.0.0",prompt:"^1.0.0","prop-types":"^15.6.0","raw-loader":"^0.5.1",react:"^16.2.0","react-dom":"^16.2.0",rembrandt:"^0.1.3",rimraf:"^2.6.2","sass-loader":"^6.0.6","selenium-server-standalone-jar":"3.4.0",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.2","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","term-img2":"^2.0.1","transform-loader":"^0.2.2","uglifyjs-webpack-plugin":"^0.4.6","vinyl-source-stream":"0.1.1",webpack:"^3.10.0","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{canvas:"git://github.com/imgly/node-canvas.git#v2.0.0-alpha.9",gl:"^4.0.4",request:"^2.83.0"}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),_=d.Math.ColorMatrix,y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(230),t}return o(e,t),v(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options,u=s.colorMatrix,l=s.gamma,c=s.shadows,h=s.highlights,f=1!==l,p=0!==c||0!==h,v=new d.Color(0,0,0,0),_=0;_<r.width*r.height;_++){var y=4*_;if(v.r=a.data[y]/255,v.g=a.data[y+1]/255,v.b=a.data[y+2]/255,f&&(v.r=Math.pow(v.r,1/Math.max(l,1e-7)),v.g=Math.pow(v.g,1/Math.max(l,1e-7)),v.b=Math.pow(v.b,1/Math.max(l,1e-7))),p){var g=.2125*v.r+.7154*v.g+.0721*v.b,m=c>=0?d.Utils.clamp(Math.pow(g,1/(c+1))+-.76*Math.pow(g,2/(c+1))-g,0,Math.max(c,1)):-d.Utils.clamp(Math.pow(g,1/(1-c))+-.76*Math.pow(g,2/(1-c))-g,0,Math.max(-c,1)),b=h<0?d.Utils.clamp(1-Math.pow(1-g,1/(1-h))- -.8*Math.pow(1-g,2/(1-h))-g,-1,0):-d.Utils.clamp(1-Math.pow(1-g,1/(1+h))- -.8*Math.pow(1-g,2/(1+h))-g,-1,0),x=m*g*g,w=m-x,T=g+x+b;v.r=d.Utils.clamp(T*((v.r+w)/Math.max(g,1e-7)),0,1),v.g=d.Utils.clamp(T*((v.g+w)/Math.max(g,1e-7)),0,1),v.b=d.Utils.clamp(T*((v.b+w)/Math.max(g,1e-7)),0,1)}v=u.apply(v),a.data[y]=255*v.r,a.data[y+1]=255*v.g,a.data[y+2]=255*v.b}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter);y.prototype.availableOptions={gamma:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.FLOAT},shadows:{type:d.OptionType.NUMBER,default:0,uniformType:d.UniformType.FLOAT},highlights:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.FLOAT},colorMatrix:{type:d.OptionType.COLOR_MATRIX,default:new _,uniformType:d.UniformType.MAT4},colorOffset:{type:d.OptionType.ARRAY,default:[],uniformType:d.UniformType.FLOAT4}},e.a=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(55)),g=n.n(y),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},x=_.Math.Vector2,w=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(234),u._lastBlurRadius=null,u._lastDimensions=new x(0,0),u._blurredRenderTarget=new _.Engine.CanvasRenderTarget(100,100,1),u}return o(e,t),m(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._lastDimensions.equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),n.setPixelRatio(e.getPixelRatio()),n.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(r)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new x(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);g.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"dispose",value:function(){b(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._blurredRenderTarget.dispose()}}]),e}(_.Engine.Filter);w.prototype.availableOptions={blurRadius:{type:_.OptionType.NUMBER,default:30,uniformType:_.UniformType.FLOAT},delta:{type:_.OptionType.VECTOR2,default:new x(1,1),uniformType:_.UniformType.FLOAT2},texSize:{type:_.OptionType.VECTOR2,default:new x(100,100),uniformType:_.UniformType.FLOAT2}},e.a=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(5)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){return r(this,e),i(this,(e.__proto__||p()(e)).apply(this,arguments))}return o(e,t),_(e,[{key:"render",value:function(t,e,n){return d.Promise.resolve(n)}},{key:"hasChanges",value:function(){return!1}}]),e}(v.a);y.isIdentity=!0,y.identifier="identity",e.a=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(7),s=n.n(a),u=n(0),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(11)),g=function t(e,n,r){null===e&&(e=Function.prototype);var i=s()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(254),u}return o(e,t),m(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.lookupTableData,u=0;u<r.width*r.height;u++){var l=4*u,c=a.data[l];a.data[l]=s[4*c];var h=a.data[l+1];a.data[l+1]=s[1+4*h];var f=a.data[l+2];a.data[l+2]=s[2+4*f]}o.putImageData(a,0,0)}}]),e}(_.Engine.Filter);b.prototype.availableOptions={lookupTable:{type:_.OptionType.NUMBER,default:1,uniformType:_.UniformType.INT},lookupTableData:{type:_.OptionType.ARRAY,default:[]}};var x=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._filter=new b({lookupTable:s._options.textureGLUnit}),s._textures={},s._renderers={},s}return o(e,t),m(e,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(_.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(_.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),n=t.getRenderer(),r=n.id;this._renderers[r]=n,this._textures[r]||(this._textures[r]=new _.Engine.BaseTexture);var i=this._textures[r],o=new _.Engine.PixelArrayImage(256,1,e);i.setSource(o),i.setGLUnit(this._options.textureGLUnit),n.isOfType(_.RendererType.WEBGL)&&n.updateTexture(i)}},{key:"dispose",value:function(){g(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this);for(var t in this._textures)this._textures[t].dispose(),delete this._textures[t];delete this._options.data}}]),e}(y.a);e.a=x},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(311)),g=n(56),m=n(125),b=n(313),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},T=_.Math.Vector2,k=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._persistedPaths=[],s._outputCanvasDirty=!0,s._outputCanvas=_.Utils.createCanvas(),s._outputContext=s._outputCanvas.getContext("2d"),s._persistCanvas=_.Utils.createCanvas(),s._persistContext=s._persistCanvas.getContext("2d"),s._nextCanvas=_.Utils.createCanvas(),s._texture=_.Engine.Texture.fromCanvas(s._outputCanvas),s._sprite.setTexture(s._texture),s._onPathUpdate=s._onPathUpdate.bind(s),s}return o(e,t),x(e,[{key:"applyFlip",value:function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var n=e.getPosition().clone();switch(t){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}e.setPosition(n)}),e.setDirty(!0)}),this._reset()}},{key:"applyRotation",value:function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var n=e.getPosition().clone();90===t?(n.flip(),n.x=1-n.x):-90===t&&(n.flip(),n.y=1-n.y),e.setPosition(n)}),e.setDirty(!0)}),this._reset()}},{key:"applyTransform",value:function(t){var e=null;this._options.paths.forEach(function(n){n.forEachControlPoint(function(e){e.setPosition(t.applyToRelativePoint(e.getPosition()))});var r=n.getBrush();r!==e&&(r.setSize(t.applyToRelativeSize(r.getSize())),e=r),n.setDirty(!0)}),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,n=t.height;this._outputContext.clearRect(0,0,e,n)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,n=t.height;this._persistContext.clearRect(0,0,e,n)}}},{key:"serializeOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=w(e.prototype.__proto__||v()(e.prototype),"serializeOptions",this).call(this,t,n);return t||(r.type="brush"),r}},{key:"serializeOption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===t?this._options.paths.map(function(t){return t.serializeOptions(void 0,n)}):w(e.prototype.__proto__||v()(e.prototype),"serializeOption",this).call(this,t,n)}},{key:"createPath",value:function(t){var e=new y.a(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];w(e.prototype.__proto__||v()(e.prototype),"setDirtyForRenderer",this).call(this,t,n,r),t&&r&&(this._persistedPaths=[],this._options.paths.forEach(function(t){t.setDirty(!0)}))}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[n],e)}},{key:"render",value:function(t){var e=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(_.Utils.ensureCanvasDimensions(this._outputCanvas,t),_.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach(function(n){n.render(t),n.getClosed()&&-1===e._persistedPaths.indexOf(n)&&e._onPathPersist(n)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)}),this.setDirtyForRenderer(!1,n))}},{key:"update",value:function(t,n){n&&(_.Utils.ensureCanvasDimensions(this._outputCanvas,n),_.Utils.ensureCanvasDimensions(this._persistCanvas,n),this._texture.getBaseTexture().update()),this.render(n);var r=t.getRenderer();r.isOfType(_.RendererType.WEBGL)&&r.updateTexture(this._texture.getBaseTexture()),w(e.prototype.__proto__||v()(e.prototype),"update",this).call(this,t,n)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"dispose",value:function(){w(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._texture.getBaseTexture().dispose()}}]),e}(g.a);k.prototype.availableOptions={id:{type:_.OptionType.STRING,default:function(){return _.Utils.getUUID()}},position:{type:_.OptionType.VECTOR2,default:new T(0,0)},scale:{type:_.OptionType.VECTOR2,default:new T(1,1)},anchor:{type:_.OptionType.VECTOR2,default:new T(0,0)},pivot:{type:_.OptionType.VECTOR2,default:new T(0,0)},rotation:{type:_.OptionType.NUMBER,default:0},paths:{type:_.OptionType.ARRAY,default:[],setter:function(t){var e=this;return t=t.map(function(t){if(t instanceof y.a)return t;var n=t.brush,r=t.closed,i=new y.a(e._operation,{brush:n,closed:r},e._nextCanvas);return t.controlPoints.forEach(function(t){i.addControlPoint(t)}),i}),this._reset(),t}}},k.type="brush",k.Brush=m.a,k.Path=y.a,k.Brushes={RadialBrush:b.a},e.a=k},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),_=d.Math.Vector2,y=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._lastOptions={},s._lastInputDimensions=new _(0,0),s._brush=null,s}return o(e,t),v(e,[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.image,r=e.size;n.width=n.height=Math.ceil(r*t.min());var i=d.Utils.createCanvas();i.width=n.width,i.height=n.height;var o=i.getContext("2d");o.drawImage(n,0,0,i.width,i.height);var a=this._tintImageData(o.getImageData(0,0,i.width,i.height),i.width,i.height);return o.putImageData(a,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=i,this._lastInputDimensions=t.clone(),i}},{key:"_tintImageData",value:function(t){for(var e=this._options.color,n=0;n<t.data.length;n+=4)t.data[n]+=(255*e.r-t.data[n])*e.a,t.data[n+1]+=(255*e.g-t.data[n+1])*e.a,t.data[n+2]+=(255*e.b-t.data[n+2])*e.a;return t}},{key:"clone",value:function(){return new(0,this.constructor)(this._options)}}]),e}(d.Configurable);e.a=y,y.prototype.availableOptions={identifier:{type:d.OptionType.STRING},image:{type:d.OptionType.IMAGE},size:{type:d.OptionType.NUMBER,default:.05},color:{type:d.OptionType.COLOR,default:d.Color.RED}}},function(t,e,n){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
t.exports=n(4),n(228)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(128),i=n(114),o=n(115),a=n(51),s=n(39),u=n(116),l=n(40),c=n(18),h=n(225),f=n(118),p=n(81),d=n(24),v=n(44),_=n(22),y=n(226),g=n(23),m=n(41);/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
r.a.version=n(119).version,r.a.Math=i,r.a.Operations=o,r.a.Engine=a.a,r.a.Color=s.a,r.a.Operation=u.a,r.a.EventEmitter=l.a,r.a.Utils=c.a,r.a.Env=h.a,r.a.OperationsStack=f.a,r.a.EXIF=p.a,r.a.Promise=d.a,r.a.Configurable=v.a,r.a.Log=_.a,r.a.Loaders=y,r.a.RenderType=g.RenderType,r.a.ImageFormat=g.ImageFormat,r.a.OptionType=g.OptionType,r.a.RendererType=g.RendererType,r.a.UniformType=g.UniformType,r.a.Base64=m.a,r.a.UI={},e.default=r.a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=v()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(p.a?p()(t,e):t.__proto__=e)}var a=n(25),s=n.n(a),u=n(29),l=n.n(u),c=n(0),h=n.n(c),f=n(2),p=n.n(f),d=n(3),v=n.n(d),_=n(30),y=n.n(_),g=n(1),m=n.n(g),b=n(31),x=n(115),w=n(118),T=n(217),k=n(81),C=n(220),E=n(117),R="function"==typeof l.a&&"symbol"==typeof s.a?function(t){return typeof t}:function(t){return t&&"function"==typeof l.a&&t.constructor===l.a&&t!==l.a.prototype?"symbol":typeof t},O=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),h()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),S=function(t){return M.byteArrayToString(P.decode(t))},F=b.Rectangle,A=b.Constants,D=b.Engine,M=b.Utils,B=b.EventEmitter,I=b.Vector2,L=b.Log,P=b.Base64,U=A.RenderType,N=A.ImageFormat,j=A.Events,z=A.RendererType,G=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var a=i(this,(e.__proto__||m()(e)).call(this));a._onOperationUpdate=a._onOperationUpdate.bind(a),a._onContextRestored=a._onContextRestored.bind(a);var s=n(119),u=s.version;if(a.version=u,a[S("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,a._preferredRenderer=t,a._options=M.defaults(o,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),a._options.smoothUpscaling&&(D.BaseTexture.DefaultMagFilter=D.BaseTexture.LinearFilter),a._options.extensions=M.defaults(a._options.extensions,{operations:[],controls:[],languages:[]}),L.setLevel(a._options.logLevel),!a._v())return i(a);var l=b[S("TGljZW5zZUNoZWNrZXI=")];a._l=new l(a[S("X29wdGlvbnM=")][S("bGljZW5zZQ==")]),a._cv(!0).then(function(){a._ct()}).catch(function(t){L.error(S("TGljZW5zaW5n"),t.message)}),a._defaultRenderMode=a._options.renderMode,a._renderMode=a._options.renderMode,a._textureQuality=a._options.textureQuality,a._offset=new I,a._zoom=a._options.zoom,a._spriteScale=a._options.spriteScale,a._rotation=a._options.rotation,a._operations={},a._operationsStack=null,a.setOperationsStack(new w.a),a._container=new D.Container,a._sprite=new D.Sprite,a._container.addChild(a._sprite),a._inputTexture=a._options.inputTexture,a._currentInputTexture=null,a._currentTexture=null,a._resizedTexture=null,a._resizedContainer=new D.Container,a._resizedSprite=new D.Sprite,a._resizedContainer.addChild(a._resizedSprite),a.setSmoothDownscaling(a._options.smoothDownscaling),a._checkForUpdates(),a._registerOperations(),a._initRenderer();var c=a._renderer.constructor.type;return a._options.displayWelcomeMessage&&L.log("Version:",a.version+" ("+c+") - https://www.photoeditorsdk.com"),a._options.image&&a.setImage(a._options.image),a}return o(e,t),O(e,[{key:"_v",value:function(){return!!this[S("X29wdGlvbnM=")][S("bGljZW5zZQ==")]||(L.error(S("TGljZW5zaW5n"),S("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),L.error(S("TGljZW5zaW5n"),S("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){if(this._l.exp()){this._l.isExp()?L.error(S("TGljZW5zaW5n"),S("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):L.warn(S("TGljZW5zaW5n"),S("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl()))}}},{key:"_cv",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(n){t[S("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var r=S("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(r="ELICEXP"===n.code?S("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===n.code?S("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===n.code?S("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===n.code?S("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",R(t._options.license)):S("ELICINV"===n.code?"SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu":"SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),n.message=r,new Error(n)})}},{key:"_t",value:function(){this._l.t()}},{key:"_onOperationUpdate",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,[j.OPERATION_UPDATED].concat(e))}},{key:"_onContextRestored",value:function(){L.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(t){t.disposeRenderTextures()}),this.render()}},{key:"export",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.DATAURL,e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.PNG,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then(function(){return e.hasChanges()&&e._t(),new C.a(e,{renderType:t,imageFormat:n,quality:r}).export()})}},{key:"render",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var n=this._renderer.getContext();n.startFrame&&n.startFrame();var r=void 0;L.canLog("info")&&(r=new E.a("⚡⚡⚡","Frame rendering")),L.info("⚡⚡⚡","Rendering starts");var i=this._operationsStack;return i.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(e){"export"===t._renderMode&&(e=t._inputTexture),t._currentTexture=e,t._sprite.setTexture(e),t._container.updateTransform()}).then(function(){return i.validateSettings()}).then(function(){return i.render(t,t._currentTexture)}).then(function(n){switch(t._currentTexture=n,t._sprite.setTexture(t._currentTexture),t._renderMode){case"dynamic":var r=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom/t.getTextureScale(),t._zoom/t.getTextureScale()),t._container.setPosition(r),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(t._rotation);break;case"export":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(0)}return e&&t._renderer.render(t._container),n}).then(function(t){return r&&r.stop(),n.endFrame&&n.endFrame(),t})}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var t=this;return new y.a(function(e,n){var r=t.getTextureScale();if(1===t._textureQuality)return e(t._inputTexture);var i=t.getInputDimensions().multiply(r).floor(),o=void 0;t._resizedTexture?t._resizedTexture.getDimensions().equals(i)||(t._resizedTexture.resizeTo(i),o=!0):(t._resizedTexture=new D.RenderTexture(t._renderer,i.x,i.y),o=!0),o&&(t._resizedSprite.setScale(r,r),t._resizedSprite.setTexture(t._inputTexture),t._resizedTexture.render(t._resizedContainer)),e(t._resizedTexture)})}},{key:"_registerOperations",value:function(){this._operations={};for(var t in x){var e=x[t];this._operations[e.identifier]=e}this._operations=M.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(t){var e=this;t.forEach(function(t){e._operations[t.identifier]=t})}},{key:"setAllOperationsToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(t)}},{key:"createOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._operations[t];if(!r)throw new Error("No operation with identifier `"+t+"` found.");var i=new r(this,e);return n&&this.addOperation(i),i}},{key:"addOperation",value:function(t){this._operationsStack.push(t)}},{key:"removeOperation",value:function(t){this._operationsStack.remove(t)}},{key:"getInputDimensions",value:function(){var t=this._inputTexture.getFrame();return new I(t.width,t.height)}},{key:"getFinalDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getInputDimensions();return this._operationsStack.forEach(function(t){t.getEnabled()&&(e=t.getNewDimensions(e))}),t&&e.multiply(this._spriteScale),e.floor()}},{key:"getOutputDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.getTextureScale()),e=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(function(t){e=t.getNewDimensions(e)}),e}},{key:"_checkForUpdates",value:function(){this._l.isENT()||(this._versionChecker=new T.a(this.version))}},{key:"_initRenderer",value:function(){var t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},e=void 0,n=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var r=this._options.canvas;e=r.width,n=r.height}else if(this._inputTexture){var i=this.getFinalDimensions();e=i.x,n=i.y}else e=1,n=1;switch(this._preferredRenderer){case z.WEBGL:this._renderer=D.autoDetectRenderer(e,n,t),this._renderer.on("context-restored",this._onContextRestored);break;case z.CANVAS:this._renderer=new D.CanvasRenderer(e,n,t),this._renderer.on("context-restored",this._onContextRestored);break;default:L.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=D.autoDetectRenderer(e,n,t)}}},{key:"resizeTo",value:function(t){this._renderer.resizeTo(t,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(t){if(t){var e=t.src,n=!1,r=null;if(n=k.a.isJPEG(e),r=e,n){var i=null;try{i=k.a.fromBase64String(r)}catch(t){}if(!i)return;return i}}}},{key:"_handleExifOrientation",value:function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,n=-1!==[2,4,5,7].indexOf(t.Orientation);(e||n)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t),this._exif.setOrientation(1))}}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"setImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();var r=new D.BaseTexture(this._image),i=new F(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);n&&(i.width=n.x,i.height=n.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=new D.Texture(r,i),this._currentTexture=this._inputTexture,this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(t){this._inputTexture=t}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(t){this._renderer.setCanvas(t)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(t){this._operationsStack&&this._operationsStack.off(j.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(j.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t,e){t instanceof I?this._offset.copy(t):this._offset.set(t,e)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(t){this._renderMode=t}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t),this._resizedSprite.setSmoothDownscaling(t)}},{key:"setRotation",value:function(t){this._rotation=t}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}]),e}(B);e.a=G},function(t,e,n){n(34),n(49),t.exports=n(66).f("iterator")},function(t,e,n){var r=n(57),i=n(58);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(61),i=n(35),o=n(48),a={};n(19)(a,n(10)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(15),i=n(14),o=n(36);t.exports=n(17)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(21),i=n(62),o=n(134);t.exports=function(t){return function(e,n,a){var s,u=r(e),l=i(u.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(57),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";var r=n(136),i=n(137),o=n(28),a=n(21);t.exports=n(84)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(139),n(92),n(144),n(145),t.exports=n(9).Symbol},function(t,e,n){"use strict";var r=n(12),i=n(20),o=n(17),a=n(13),s=n(86),u=n(140).KEY,l=n(27),c=n(64),h=n(48),f=n(47),p=n(10),d=n(66),v=n(67),_=n(141),y=n(142),g=n(14),m=n(16),b=n(21),x=n(60),w=n(35),T=n(61),k=n(143),C=n(69),E=n(15),R=n(36),O=C.f,S=E.f,F=k.f,A=r.Symbol,D=r.JSON,M=D&&D.stringify,B=p("_hidden"),I=p("toPrimitive"),L={}.propertyIsEnumerable,P=c("symbol-registry"),U=c("symbols"),N=c("op-symbols"),j=Object.prototype,z="function"==typeof A,G=r.QObject,V=!G||!G.prototype||!G.prototype.findChild,W=o&&l(function(){return 7!=T(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=O(j,e);r&&delete j[e],S(t,e,n),r&&t!==j&&S(j,e,r)}:S,q=function(t){var e=U[t]=T(A.prototype);return e._k=t,e},H=z&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},Y=function(t,e,n){return t===j&&Y(N,e,n),g(t),e=x(e,!0),g(n),i(U,e)?(n.enumerable?(i(t,B)&&t[B][e]&&(t[B][e]=!1),n=T(n,{enumerable:w(0,!1)})):(i(t,B)||S(t,B,w(1,{})),t[B][e]=!0),W(t,e,n)):S(t,e,n)},X=function(t,e){g(t);for(var n,r=_(e=b(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},Z=function(t,e){return void 0===e?T(t):X(T(t),e)},J=function(t){var e=L.call(this,t=x(t,!0));return!(this===j&&i(U,t)&&!i(N,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,B)&&this[B][t])||e)},K=function(t,e){if(t=b(t),e=x(e,!0),t!==j||!i(U,e)||i(N,e)){var n=O(t,e);return!n||!i(U,e)||i(t,B)&&t[B][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=F(b(t)),r=[],o=0;n.length>o;)i(U,e=n[o++])||e==B||e==u||r.push(e);return r},$=function(t){for(var e,n=t===j,r=F(n?N:b(t)),o=[],a=0;r.length>a;)!i(U,e=r[a++])||n&&!i(j,e)||o.push(U[e]);return o};z||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===j&&e.call(N,n),i(this,B)&&i(this[B],t)&&(this[B][t]=!1),W(this,t,w(1,n))};return o&&V&&W(j,t,{configurable:!0,set:e}),q(t)},s(A.prototype,"toString",function(){return this._k}),C.f=K,E.f=Y,n(91).f=k.f=Q,n(50).f=J,n(68).f=$,o&&!n(45)&&s(j,"propertyIsEnumerable",J,!0),d.f=function(t){return q(p(t))}),a(a.G+a.W+a.F*!z,{Symbol:A});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=R(p.store),rt=0;nt.length>rt;)v(nt[rt++]);a(a.S+a.F*!z,"Symbol",{for:function(t){return i(P,t+="")?P[t]:P[t]=A(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in P)if(P[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!z,"Object",{create:Z,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),D&&a(a.S+a.F*(!z||l(function(){var t=A();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(m(e)||void 0!==t)&&!H(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!H(e))return e}),r[1]=e,M.apply(D,r)}}),A.prototype[I]||n(19)(A.prototype,I,A.prototype.valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(47)("meta"),i=n(16),o=n(20),a=n(15).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(27)(function(){return u(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},f=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},p=function(t){return l&&d.NEED&&u(t)&&!o(t,r)&&c(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:f,onFreeze:p}},function(t,e,n){var r=n(36),i=n(68),o=n(50);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,n){var r=n(37);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(21),i=n(91).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){n(67)("asyncIterator")},function(t,e,n){n(67)("observable")},function(t,e,n){n(147);var r=n(9).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(13);r(r.S+r.F*!n(17),"Object",{defineProperty:n(15).f})},function(t,e,n){n(149),t.exports=n(9).Object.setPrototypeOf},function(t,e,n){var r=n(13);r(r.S,"Object",{setPrototypeOf:n(150).set})},function(t,e,n){var r=n(16),i=n(14),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(26)(Function.call,n(69).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){n(152);var r=n(9).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(13);r(r.S,"Object",{create:n(61)})},function(t,e,n){n(92),n(34),n(49),n(154),n(161),n(162),t.exports=n(9).Promise},function(t,e,n){"use strict";var r,i,o,a,s=n(45),u=n(12),l=n(26),c=n(70),h=n(13),f=n(16),p=n(46),d=n(155),v=n(156),_=n(95),y=n(72).set,g=n(158)(),m=n(73),b=n(96),x=n(97),w=u.TypeError,T=u.process,k=u.Promise,C="process"==c(T),E=function(){},R=i=m.f,O=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n(10)("species")]=function(t){t(E,E)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e}catch(t){}}(),S=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},F=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,l=e.domain;try{a?(i||(2==t._h&&M(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&l.exit()),n===e.promise?u(w("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){y.call(u,function(){var e,n,r,i=t._v,o=D(t);if(o&&(e=b(function(){C?T.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=C||D(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){y.call(u,function(){var e;C?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),F(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=S(t))?g(function(){var r={_w:n,_d:!1};try{e.call(t,l(I,r,1),l(B,r,1))}catch(t){B.call(r,t)}}):(n._v=t,n._s=1,F(n,!1))}catch(t){B.call({_w:n,_d:!1},t)}}};O||(k=function(t){d(this,k,"Promise","_h"),p(t),r.call(this);try{t(l(I,this,1),l(B,this,1))}catch(t){B.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(159)(k.prototype,{then:function(t,e){var n=R(_(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&F(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=l(I,t,1),this.reject=l(B,t,1)},m.f=R=function(t){return t===k||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!O,{Promise:k}),n(48)(k,"Promise"),n(160)("Promise"),a=n(9).Promise,h(h.S+h.F*!O,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!O),"Promise",{resolve:function(t){return x(s&&this===a?k:this,t)}}),h(h.S+h.F*!(O&&n(98)(function(t){k.all(t).catch(E)})),"Promise",{all:function(t){var e=this,n=R(e),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=R(e),r=n.reject,i=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(26),i=n(93),o=n(94),a=n(14),s=n(62),u=n(71),l={},c={},e=t.exports=function(t,e,n,h,f){var p,d,v,_,y=f?function(){return t}:u(t),g=r(n,h,e?2:1),m=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(p=s(t.length);p>m;m++)if((_=e?g(a(d=t[m])[0],d[1]):g(t[m]))===l||_===c)return _}else for(v=y.call(t);!(d=v.next()).done;)if((_=i(v,g,d.value,e))===l||_===c)return _};e.BREAK=l,e.RETURN=c},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(12),i=n(72).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(37)(a);t.exports=function(){var t,e,n,l=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve();n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var h=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(19);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(12),i=n(9),o=n(15),a=n(17),s=n(10)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(13),i=n(9),o=n(12),a=n(95),s=n(97);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(13),i=n(73),o=n(96);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(164),t.exports=n(9).Object.getPrototypeOf},function(t,e,n){var r=n(38),i=n(90);n(74)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(105),_=n(107),y=n(53),g=n(76),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=d.c.RendererType,x=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._type=b.CANVAS,s.setCanvas(s._options.canvas||s._createCanvas()),s}return o(e,t),m(e,[{key:"_createCanvas",value:function(){return d.i.createCanvas()}},{key:"_createContext",value:function(){var t=this._canvas,n=t.getContext("2d");return this._options.debug&&(n=new v.a(n)),this.id=n.id=e.contextId++,this._context=n,n.renderer=this,this.emit("context",n),n}},{key:"_setupContext",value:function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(e){t[e]&&(t[e]=!0)}),this._defaultRenderTarget=new y.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new g.a(this)}},{key:"render",value:function(t){var e=this._renderTarget.getContext(),n=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(n),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var r=this._canvas,i=r.width,o=r.height;e.clearRect(0,0,i,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,i,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)}},{key:"renderDisplayObject",value:function(t,e){var n=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(n)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(t){this._renderTarget=t}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}]),e}(_.a);x.contextId=0,x.type="Canvas2D",e.a=x},function(t,e,n){n(49),n(34),t.exports=n(167)},function(t,e,n){var r=n(70),i=n(10)("iterator"),o=n(28);t.exports=n(9).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){n(49),n(34),t.exports=n(169)},function(t,e,n){var r=n(14),i=n(71);t.exports=n(9).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){n(171),t.exports=n(9).Object.assign},function(t,e,n){var r=n(13);r(r.S+r.F,"Object",{assign:n(172)})},function(t,e,n){"use strict";var r=n(36),i=n(68),o=n(50),a=n(38),s=n(88),u=Object.assign;t.exports=!u||n(27)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,l=1,c=i.f,h=o.f;u>l;)for(var f,p=s(arguments[l++]),d=c?r(p).concat(c(p)):r(p),v=d.length,_=0;v>_;)h.call(p,f=d[_++])&&(n[f]=p[f]);return n}:u},function(t,e,n){t.exports={default:n(174),__esModule:!0}},function(t,e,n){n(34),n(175),t.exports=n(9).Array.from},function(t,e,n){"use strict";var r=n(26),i=n(13),o=n(38),a=n(93),s=n(94),u=n(62),l=n(176),c=n(71);i(i.S+i.F*!n(98)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,_=void 0!==v,y=0,g=c(f);if(_&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(e=u(f.length),n=new p(e);e>y;y++)l(n,y,_?v(f[y],y):f[y]);else for(h=g.call(f),n=new p;!(i=h.next()).done;y++)l(n,y,_?a(h,v,[i.value,y],!0):i.value);return n.length=y,n}})},function(t,e,n){"use strict";var r=n(15),i=n(35);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){n(178),t.exports=n(9).Object.keys},function(t,e,n){var r=n(38),i=n(36);n(74)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){"use strict";var r={defaults:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<n.length;a++){var s=n[a];for(var u in s)void 0===i[u]&&(i[u]=s[u])}return i},extend:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<n.length;a++){var s=n[a];for(var u in s)i[u]=s[u]}return i}};e.a=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(8),y=n(107),g=n(54),m=n(108),b=n(183),x=n(77),w=n(79),T=n(80),k=n(105),C=n(109),E=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),R=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},O=_.c.RendererType,S=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._type=O.WEBGL,s._textures=[],s._fakeObject=new w.a,s._onContextLost=s._onContextLost.bind(s),s._onContextRestored=s._onContextRestored.bind(s),s.setCanvas(s._options.canvas||_.i.createCanvas()),s.shaders=s._initShaders(),s.renderers=s._initRenderers(),s}return o(e,t),E(e,[{key:"_onContextLost",value:function(t){t.preventDefault(),_.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(t){t.preventDefault(),_.f.warn(this.constructor.name,"Failed to create WebGL context: "+(t.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){var t=this;_.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)}),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new T.a(this),this._currentObjectRenderer=new m.a(this)}},{key:"setShader",value:function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)}},{key:"setCanvas",value:function(t){this._canvas&&this._removeContextEventListeners(),R(e.prototype.__proto__||v()(e.prototype),"setCanvas",this).call(this,t),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(t){var e=this._context,n=t.getAttributes(),r=t.getAttributeLocations();n.forEach(function(t){var n=r[t];e.enableVertexAttribArray(n)})}},{key:"_initShaders",value:function(){return{default:new x.a(this)}}},{key:"_initRenderers",value:function(){return{sprite:new b.a(this)}}},{key:"_createContext",value:function(){var t=this._canvas,n=null,r={preserveDrawingBuffer:!0};if(n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug){var i=function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")};n=window.WebGLDebugUtils.makeDebugContext(n,null,i)}return this._options.debug&&(n=new k.a(n)),this.id=n.id=e.contextId++,this._context=n,n.renderer=this,this._maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.emit("context",n),n}},{key:"_setupContext",value:function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new g.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==e.precision?"highp":"mediump";var n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==n.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];R(e.prototype.__proto__||v()(e.prototype),"resizeTo",this).call(this,t,n),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(t)}},{key:"setRenderTarget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=t,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()}},{key:"render",value:function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer}},{key:"getOrCreateGLTexture",value:function(t){var e=this._context,n=t.getGLTextureForRenderer(this);return n||(n=e.createTexture(),t.setGLTextureForRenderer(n,this),this._textures.push(t)),n}},{key:"updateTexture",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getSource(),r=!!n,i=this._context,o=t.getGLUnit(),a=this.getOrCreateGLTexture(t);i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,a),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&r&&(n instanceof C.a?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n.width,n.height,0,i.RGBA,i.UNSIGNED_BYTE,n.data):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),t.isMipMappingEnabled()?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t.getGLRepeat(i,"x")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t.getGLRepeat(i,"y"))),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.getGLFilter(i,"min")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.getGLFilter(i,"mag")),i.activeTexture(i.TEXTURE0)}},{key:"getMaxDimensions",value:function(){var t=_.i.createCanvas(),e=t.getContext("webgl")||t.getContext("experimental-webgl");if(e){var n=e.getParameter(e.MAX_TEXTURE_SIZE),r=e.getExtension("WEBGL_lose_context");return r&&r.loseContext(),n}return null}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){var t=this;this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)});for(var e in this.shaders)this.shaders[e].dispose(),delete this.shaders[e];this._removeContextEventListeners();var n=this._context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext()}}],[{key:"isSupported",value:function(){var t=_.i.createCanvas();t.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var e=t.getContext("webgl")||t.getContext("experimental-webgl");return t.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),!!e}}]),e}(y.a);S.contextId=0,S.type="WebGL",e.a=S},function(t,e,n){n(182);var r=n(9).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(21),i=n(69).f;n(74)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(8),y=n(108),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},b=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));s._maxBatchSize=_.a,s._vertices=new ArrayBuffer(4*_.a*_.j),s._positions=new Float32Array(s._vertices),s._colors=new Uint32Array(s._vertices),s._indices=new Uint16Array(6*_.a);for(var u=0,l=0;u<6*_.a;u+=6,l+=4)s._indices[u+0]=l+0,s._indices[u+1]=l+1,s._indices[u+2]=l+2,s._indices[u+3]=l+0,s._indices[u+4]=l+2,s._indices[u+5]=l+3;return s._shaders=[],s._sprites=[],s._currentBatchSize=0,s._currentBaseTexture=null,s._onContextChange(),s}return o(e,t),g(e,[{key:"render",value:function(t){var e=t.getTexture(),n=e.getFrame(),r=e.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=r);var i=e.getUVs();if(i){var o=this._currentBatchSize*_.j;this._addVertexCoordinates(t,o,n),this._addTextureUVs(t,o,i),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}}},{key:"_addColors",value:function(t,e){var n=this._colors,r=t.getTint(),i=(r>>16)+(65280&r)+((255&r)<<16)+(255*t.getWorldAlpha()<<24);n[e+4]=n[e+9]=n[e+14]=n[e+19]=i}},{key:"_addTextureUVs",value:function(t,e,n){var r=this._positions,i=n.getUVsAt(0);r[e+2]=i.x,r[e+3]=i.y,i=n.getUVsAt(1),r[e+7]=i.x,r[e+8]=i.y,i=n.getUVsAt(2),r[e+12]=i.x,r[e+13]=i.y,i=n.getUVsAt(3),r[e+17]=i.x,r[e+18]=i.y}},{key:"_addVertexCoordinates",value:function(t,e,n){for(var r=this._positions,i=t.getWorldTransform(),o=t.getAnchor(),a=i.rectangleToCoordinates(n,o),s=0;s<4;s++)r[e+5*s]=a[s].x,r[e+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*_.a)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var n=this._positions.subarray(0,this._currentBatchSize*_.j);e.bufferSubData(e.ARRAY_BUFFER,0,n)}for(var r=0,i=null,o=null,a=null,s=null,u=!1,l=null,c=0,h=0,f=this._currentBatchSize;h<f;h++){if(l=this._sprites[h],o=l.getTexture().getBaseTexture(),s=l.getShader()||this._shader,u=a!==s,(i!==o||u)&&(this._renderBatch(i,r,c),c=h,r=0,i=o,u)){a=s,t.setShader(a);var p=t.getCurrentRenderTarget(),d=p.getProjectionMatrix().toArray();a.setUniform("u_projMatrix",d),a.syncUniforms(),e.activeTexture(e.TEXTURE0)}r++}this._renderBatch(i,r,c),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(t,e,n){if(0!==e){var r=this._renderer,i=r.getContext(),o=t.getGLTextureForRenderer(r);o||(o=r.getOrCreateGLTexture(t)),t.isDirty()&&(r.updateTexture(t),t.setDirty(!1)),i.activeTexture(i.TEXTURE0+t.getGLUnit()),i.bindTexture(i.TEXTURE_2D,o);var a=6*e,s=6*n*2;i.drawElements(i.TRIANGLES,a,i.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var t=this._renderer,n=t.getContext();n.deleteBuffer(this._vertexBuffer),n.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,m(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this)}}]),e}(y.a);e.a=b},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e){r(this,t),this._renderer=e,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return a(t,[{key:"map",value:function(t,e){var n=e.x,r=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=n,this._vertices[1]=r,this._vertices[2]=n+e.width,this._vertices[3]=r,this._vertices[4]=this._vertices[2],this._vertices[5]=r+e.height,this._vertices[6]=n,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var t=this._context;this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var t=this._context;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var t=this._context;t.deleteBuffer(this._vertexBuffer),t.deleteBuffer(this._indexBuffer)}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(8),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){r(this,t),this._uvs=[new a.k(0,0),new a.k(1,0),new a.k(1,1),new a.k(0,1)]}return s(t,[{key:"update",value:function(t,e){var n=this._uvs[0];n.x=t.x/e.width,n.y=t.y/e.height,n=this._uvs[1],n.x=(t.x+t.width)/e.width,n.y=t.y/e.height,n=this._uvs[2],n.x=(t.x+t.width)/e.width,n.y=(t.y+t.height)/e.height,n=this._uvs[3],n.x=t.x/e.width,n.y=(t.y+t.height)/e.height}},{key:"getUVsAt",value:function(t){return this._uvs[t]}},{key:"getUVs",value:function(){return this._uvs}}]),t}();e.a=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(111),_=n(42),y=n(54),g=n(53),m=n(80),b=n(76),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w=d.c.RendererType,T=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,e);var s=i(this,(e.__proto__||p()(e)).call(this,new _.a,new d.h(0,0,n,o)));return s._loaded=!0,s._width=n,s._height=o,s._pixelRatio=a,s._renderer=t,s._setupFilterManager(),s._setupBuffer(),s.setBaseTexture(s._renderTarget.getBaseTexture()),s._updateUVs(),s}return o(e,t),x(e,[{key:"_setupFilterManager",value:function(){this._renderer.isOfType(w.WEBGL)?this._filterManager=new m.a(this._renderer):this._renderer.isOfType(w.CANVAS)&&(this._filterManager=new b.a(this._renderer)),this._filterManager.resizeTo(new d.k(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(w.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(w.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget=new y.a(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget=new g.a(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(t){this._renderTarget.clear(t)}},{key:"resizeTo",value:function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))}},{key:"render",value:function(t){if(this._renderer.isOfType(w.WEBGL))this._renderWebGL(t);else{if(!this._renderer.isOfType(w.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(t)}}},{key:"_renderWebGL",value:function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"_renderCanvas",value:function(t){t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose()}}]),e}(v.a);e.a=T},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(110),_=n(190),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||p()(e)).call(this));return n._onTextureUpdate=n._onTextureUpdate.bind(n),n._texture=t,n._shader=null,n._width=0,n._height=0,n._anchor=new d.k(0,0),n.setTexture(t),n}return o(e,t),y(e,[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(t){var e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new _.a),this._potRenderer.render(t,this,this._texture)),t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(t){var e=this._worldTransform,n=this._texture.getFrame(),r=n.width,i=n.height,o=t.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-r|0,s=this._anchor.y*-i|0,u=t.getContext();u.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),u.globalAlpha=this.getWorldAlpha();var l=this._texture.getBaseTexture(),c=l.getPixelRatio(),h=l.getSource();u.drawImage(this._texture.getBaseTexture().getSource(),0,0,(h.naturalWidth||r)*c,(h.naturalHeight||i)*c,a*o,s*o,r*o,i*o)}},{key:"isAtPosition",value:function(t){var e=this._worldTransform.applyInverseToVector(t),n=this._texture.getFrame(),r=n.width,i=n.height,o=new d.k(-r,-i);o.multiply(this._anchor);var a=o.clone().add(r,i);return!(e.x<o.x||e.x>a.x||e.y<o.y||e.y>a.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var t=this._bounds,e=this._texture.getFrame(),n=this._worldTransform,r=this._anchor,i=n.rectangleToCoordinates(e,r),o=i[0].x,a=i[0].y,s=o,u=a;i.forEach(function(t){var e=t.x,n=t.y;o=Math.min(o,e),a=Math.min(a,n),s=Math.max(s,e),u=Math.max(u,n)}),t.x=o,t.width=Math.abs(s-o),t.y=a,t.height=Math.abs(u-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"setTexture",value:function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(t){this._shader=t}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new d.k(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(t,e){t instanceof d.k?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(t){this._smoothDownscaling=t}},{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(t||e)&&this._texture.dispose(e),this._potRenderer&&this._potRenderer.dispose()}}]),e}(v.a);e.a=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(31),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(){r(this,t),this._container=new a.Engine.Container,this._sprite=new a.Engine.Sprite,this._container.addChild(this._sprite)}return s(t,[{key:"render",value:function(t,e,n){var r=n.getDimensions(),i=this._getNextHighestPOT(r);this._renderTexture?this._renderTexture.resizeTo(i):this._renderTexture=new a.Engine.RenderTexture(t,i.x,i.y);var o=this._renderTexture.getDimensions();this._sprite.setTexture(n),this._sprite.updateTransform(),this._renderTexture.render(this._container),this._updateSprite(t,e,r,o)}},{key:"_updateSprite",value:function(t,e,n,r){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new a.Rectangle(0,0,n.x,n.y))}},{key:"_getNextHighestPOT",value:function(t){return new a.Vector2(a.Utils.nextHighestPOT(t.x),a.Utils.nextHighestPOT(t.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture.dispose(),this._renderTexture=null}}]),t}();e.a=u},function(t,e,n){"use strict";var r=n(77);e.a={TextureShader:r.a}},function(t,e,n){t.exports={default:n(193),__esModule:!0}},function(t,e,n){n(194),t.exports=n(9).setImmediate},function(t,e,n){var r=n(13),i=n(72);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(196);n.d(e,"UnpremultiplyFilter",function(){return r.a});var i=n(198);n.d(e,"ColorOverlayFilter",function(){return i.a});var o=n(200);n.d(e,"TintFilter",function(){return o.a});var a=n(202);n.d(e,"OverlayFilter",function(){return a.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(43),p=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||h()(e)).call(this));return t._fragmentSource=n(197),t}return o(e,t),e}(f.a);e.a=p},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(43),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=d.c.OptionType,g=d.c.UniformType,m=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(199),u}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=this._options.color,s=i.getImageData(0,0,r.width,r.height),u=o.getImageData(0,0,r.width,r.height),l=r.width*r.height,c=new d.b,h=new d.b,f=0;f<4*l;f+=4){c.set(s.data[f]/255,s.data[f+1]/255,s.data[f+2]/255,s.data[f+3]/255),h.set(u.data[f]/255,u.data[f+1]/255,u.data[f+2]/255,u.data[f+3]/255);var p=h.r+c.a*(c.r-h.r);u.data[f]=255*(p+c.a*(a.r-p));var v=h.g+c.a*(c.g-h.g);u.data[f+1]=255*(v+c.a*(a.g-v));var _=h.b+c.a*(c.b-h.b);u.data[f+2]=255*(_+c.a*(a.b-_))}o.putImageData(u,0,0)}}]),e}(v.a);m.prototype.availableOptions={color:{type:y.COLOR,default:d.b.WHITE,uniformType:g.FLOAT4}},e.a=m},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(43),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=d.c.OptionType,g=d.c.UniformType,m=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(201),u}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,n,r){var i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],n.getCanvas()),o=n.getContext(),a=r.getContext(),s=o.getImageData(0,0,i.width,i.height),u=this._options,l=u.mode,c=u.color,h=c.r,f=c.g,p=c.b,v=c.a,_=[.2125,.7154,.0721];switch(l){case e.MODES.SOLID:for(var y=0;y<i.width*i.height;y++){var g=4*y;s.data[g]+=(255*h-s.data[g])*v,s.data[g+1]+=(255*f-s.data[g+1])*v,s.data[g+2]+=(255*p-s.data[g+2])*v}break;case e.MODES.COLORIZED:for(var m=0;m<i.width*i.height;m++){var b=4*m,x=s.data[b]/255*_[0]+s.data[b+1]/255*_[1]+s.data[b+2]/255*_[2],w=new d.b(x*h,x*f,x*p);s.data[b]+=(255*w.r-s.data[b])*v,s.data[b+1]+=(255*w.g-s.data[b+1])*v,s.data[b+2]+=(255*w.b-s.data[b+2])*v}}a.putImageData(s,0,0)}}]),e}(v.a);m.MODES={NONE:0,SOLID:1,COLORIZED:2},m.prototype.availableOptions={color:{type:y.COLOR,default:d.b.WHITE,uniformType:g.FLOAT4},mode:{type:y.NUMBER,default:m.MODES.NONE,uniformType:g.INT}},e.a=m},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(8),v=n(43),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=d.c.OptionType,g=d.c.UniformType,m=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(203),u._lastImage=null,u}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,n,r){for(var i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],this._options.overlayTexture.getRenderTarget().getContext()),o=n.getCanvas(),a=n.getContext(),s=r.getContext(),u=a.getImageData(0,0,o.width,o.height),l=i.getImageData(0,0,o.width,o.height),c=this._options,h=c.blendMode,f=c.alpha,p=new d.b,v=new d.b,_=new d.b,y=0;y<o.width*o.height*4;y+=4){p.set(u.data[y]/255,u.data[y+1]/255,u.data[y+2]/255,u.data[y+3]/255),v.set(l.data[y]/255,l.data[y+1]/255,l.data[y+2]/255,l.data[y+3]/255);var g=void 0,m=void 0,b=void 0,x=void 0,w=void 0,T=void 0,k=void 0,C=void 0,E=void 0;switch(h){case e.BLEND_MODES.NORMAL:_.set(p.r+v.a*f*(v.r-p.r),p.g+v.a*f*(v.g-p.g),p.b+v.a*f*(v.b-p.b),p.a);break;case e.BLEND_MODES.OVERLAY:g=1-2*(1-p.r)*(1-v.r),m=2*p.r*v.r,b=g+(p.r<.5?1:0)*(m-g),x=1-2*(1-p.g)*(1-v.g),w=2*p.g*v.g,T=x+(p.g<.5?1:0)*(w-x),k=1-2*(1-p.b)*(1-v.b),C=2*p.b*v.b,E=k+(p.b<.5?1:0)*(C-k),_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a);break;case e.BLEND_MODES.HARD_LIGHT:g=1-2*(1-v.r)*(1-p.r),m=2*v.r*p.r,b=g+(v.r<.5?1:0)*(m-g),x=1-2*(1-v.g)*(1-p.g),w=2*v.g*p.g,T=x+(v.g<.5?1:0)*(w-x),k=1-2*(1-v.b)*(1-p.b),C=2*v.b*p.b,E=k+(v.b<.5?1:0)*(C-k),_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a);break;case e.BLEND_MODES.SOFT_LIGHT:g=2*p.r*(1-v.r)+(2*v.r-1)*Math.sqrt(p.r),m=2*p.r*v.r+p.r*p.r*(1-2*v.r),b=g+(v.r<.5?1:0)*(m-g),x=2*p.g*(1-v.g)+(2*v.g-1)*Math.sqrt(p.g),w=2*p.g*v.g+p.g*p.g*(1-2*v.g),T=x+(v.g<.5?1:0)*(w-x),k=2*p.b*(1-v.b)+(2*v.b-1)*Math.sqrt(p.b),C=2*p.b*v.b+p.b*p.b*(1-2*v.b),E=k+(v.b<.5?1:0)*(C-k),_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a);break;case e.BLEND_MODES.MULTIPLY:b=p.r*v.r,T=p.g*v.g,E=p.b*v.b,_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a);break;case e.BLEND_MODES.DARKEN:b=Math.min(p.r,v.r),T=Math.min(p.g,v.g),E=Math.min(p.b,v.b),_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a);break;case e.BLEND_MODES.LIGHTEN:b=Math.max(p.r,v.r),T=Math.max(p.g,v.g),E=Math.max(p.b,v.b),_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a);break;case e.BLEND_MODES.SCREEN:b=1-(1-p.r)*(1-v.r),T=1-(1-p.g)*(1-v.g),E=1-(1-p.b)*(1-v.b),_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a);break;case e.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-p.r)/Math.max(v.r,1e-6))),T=Math.max(0,Math.min(1,1-(1-p.g)/Math.max(v.g,1e-6))),E=Math.max(0,Math.min(1,1-(1-p.b)/Math.max(v.b,1e-6))),_.set(p.r+v.a*f*(b-p.r),p.g+v.a*f*(T-p.g),p.b+v.a*f*(E-p.b),p.a)}u.data[y]=255*_.r,u.data[y+1]=255*_.g,u.data[y+2]=255*_.b,u.data[y+3]=255*_.a}s.putImageData(u,0,0)}}]),e}(v.a);m.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},m.prototype.availableOptions={blendMode:{type:y.NUMBER,default:m.BLEND_MODES.NORMAL,uniformType:g.INT},overlayImage:{type:y.NUMBER,required:!0,uniformType:g.SAMPLER2D},overlayTexture:{type:y.OBJECT,required:!0},alpha:{type:y.NUMBER,default:1,uniformType:g.FLOAT}},e.a=m},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), 1.0);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t.map(function(t){return("0"+(255&t).toString(16)).slice(-2)}).join("")}var o=n(25),a=n.n(o),s=n(29),u=n.n(s),l=n(0),c=n.n(l),h=n(30),f=n.n(h),p=n(18),d=n(205),v=n(41),_=n(113),y=n(213),g="function"==typeof u.a&&"symbol"==typeof a.a?function(t){return typeof t}:function(t){return t&&"function"==typeof u.a&&t.constructor===u.a&&t!==u.a.prototype?"symbol":typeof t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),c()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function(t){return p.a.byteArrayToString(v.a.decode(t))},x=function(){function t(e){r(this,t),this._version="2.0",this._l="string"==typeof e?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return m(t,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(t){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[b("YXBwX2lkZW50aWZpZXJz")].length)return!0;var t=window.location.hostname,e=!1;return this._decLic[b("YXBwX2lkZW50aWZpZXJz")].forEach(function(n){p.a.wildCardMatch(t,n)&&(e=!0)}),e}},{key:"_platformValid",value:function(){return"HTML5"===this._decLic[b("cGxhdGZvcm0=")]}},{key:"c",value:function(){var t=this;return new f.a(function(e,n){if("string"!==g(t._l)||!t._jsonValid()){var r=new Error;return r.code="ELICINVFMT",n(r)}if(!t._sigValid()){var i=new Error;return i.code="ELICINV",n(i)}if(!t._hostnameValid()){var o=new Error;return o.code="ELICINVHOST",n(o)}if(!t._platformValid()){var a=new Error;return a.code="ELICINVPLAT",n(a)}if(t.isExp()){var s=new Error;return s.code="ELICEXP",n(s)}e()})}},{key:"isToolAllowed",value:function(t){return this._decLic[b("ZmVhdHVyZXM=")]&&-1!==this._decLic[b("ZmVhdHVyZXM=")].indexOf(t)}},{key:"t",value:function(){if(this._decLic.enterprise_license)return f.a.resolve();var t=this._decLic[b("ZG9tYWlucw==")][0]+b(b("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[b("YXBpX3Rva2Vu")];return new _.a(t).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[b("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[b("ZXhwaXJlc19hdA==")]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[b("ZXhwaXJlc19hdA==")]&&t>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[b("ZXhwaXJlc19hdA==")]}},{key:"_verify",value:function(t,e){var n=void 0,r=void 0;return r=this._encodeMessage(t),n=this._decodeSignature(e),n=n.substr(-64),r===n}},{key:"_encodeMessage",value:function(t){return Object(y.a)(t)}},{key:"_decodeSignature",value:function(t){var e=void 0;return t=v.a.decode(t),t=i(t),t=this._parseBigInt(t,16),e=t.modPowInt(this._e,this._n),e=e.toString(16)}},{key:"_parseBigInt",value:function(t,e){return new d.a(t,e)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[b("c2lnbmF0dXJl")]||"",delete this._decLic[b("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+\/=]/g,""),this._message=this._l.replace(new RegExp(',"'+b("c2lnbmF0dXJl")+'":"([^"]*)"'),""))}}]),t}();e.a=x},function(t,e,n){"use strict";function r(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function i(){return new r(null)}function o(t,e,n,r,i,o){for(;--o>=0;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i}function a(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this[t],l=this[t++]>>15,c=s*u+l*a;u=a*u+((32767&c)<<15)+n[r]+(1073741823&i),i=(u>>>30)+(c>>>15)+s*l+(i>>>30),n[r++]=1073741823&u}return i}function s(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this[t],l=this[t++]>>14,c=s*u+l*a;u=a*u+((16383&c)<<14)+n[r]+i,i=(u>>28)+(c>>14)+s*l,n[r++]=268435455&u}return i}function u(t){return oe.charAt(t)}function l(t,e){var n=ae[t.charCodeAt(e)];return null==n?-1:n}function c(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function h(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function f(t){var e=i();return e.fromInt(t),e}function p(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var s=8==n?255&t[i]:l(t,i);s<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==a?this[this.t++]=s:a+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=n)>=this.DB&&(a-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&r.ZERO.subTo(this,this)}function d(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function v(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=u(n));a>=0;)s<e?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=u(n));return i?o:"0"}function _(){var t=i();return r.ZERO.subTo(this,t),t}function y(){return this.s<0?this.negate():this}function g(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function m(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function b(){return this.t<=0?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)}function x(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function w(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function T(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function k(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}function C(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function E(t,e){var n=this.abs(),i=t.abs(),o=n.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+n.t]=n.am(0,i[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)}function R(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function O(t,e,n){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=i());var s=i(),u=this.s,l=t.s,c=this.DB-m(o[o.t-1]);c>0?(o.lShiftTo(c,s),a.lShiftTo(c,n)):(o.copyTo(s),a.copyTo(n));var h=s.t,f=s[h-1];if(0!=f){var p=f*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),d=this.FV/p,v=(1<<this.F1)/p,_=1<<this.F2,y=n.t,g=y-h,b=null==e?i():e;for(s.dlShiftTo(g,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),r.ONE.dlShiftTo(h,b),b.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--g>=0;){var x=n[--y]==f?this.DM:Math.floor(n[y]*d+(n[y-1]+_)*v);if((n[y]+=s.am(0,x,n,g,0,h))<x)for(s.dlShiftTo(g,b),n.subTo(b,n);n[y]<--x;)n.subTo(b,n)}null!=e&&(n.drShiftTo(h,e),u!=l&&r.ZERO.subTo(e,e)),n.t=h,n.clamp(),c>0&&n.rShiftTo(c,n),u<0&&r.ZERO.subTo(n,n)}}}function S(t){var e=i();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e}function F(t){this.m=t}function A(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function D(t){return t}function M(t){t.divRemTo(this.m,null,t)}function B(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function I(t,e){t.squareTo(e),this.reduce(e)}function L(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function P(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function U(t){var e=i();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e}function N(t){var e=i();return t.copyTo(e),this.reduce(e),e}function j(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function z(t,e){t.squareTo(e),this.reduce(e)}function G(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function V(){return 0==(this.t>0?1&this[0]:this.s)}function W(t,e){if(t>4294967295||t<1)return r.ONE;var n=i(),o=i(),a=e.convert(this),s=m(t)-1;for(a.copyTo(n);--s>=0;)if(e.sqrTo(n,o),(t&1<<s)>0)e.mulTo(o,a,n);else{var u=n;n=o,o=u}return e.revert(n)}function q(t,e){var n;return n=t<256||e.isEven()?new F(e):new P(e),this.exp(t,n)}function H(){var t=i();return this.copyTo(t),t}function Y(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function X(){return 0==this.t?this.s:this[0]<<24>>24}function Z(){return 0==this.t?this.s:this[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=f(n),o=i(),a=i(),s="";for(this.divRemTo(r,o,a);o.signum()>0;)s=(n+a.intValue()).toString(t).substr(1)+s,o.divRemTo(r,o,a);return a.intValue().toString(t)+s}function $(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),o=!1,a=0,s=0,u=0;u<t.length;++u){var c=l(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(s=e*s+c,++a>=n&&(this.dMultiply(i),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),o&&r.ZERO.subTo(this,this)}function tt(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(r.ONE.shiftLeft(t-1),ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(r.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function et(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function nt(t){return 0==this.compareTo(t)}function rt(t){return this.compareTo(t)<0?this:t}function it(t){return this.compareTo(t)>0?this:t}function ot(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function at(t,e){return t&e}function st(t){var e=i();return this.bitwiseTo(t,at,e),e}function ut(t,e){return t|e}function lt(t){var e=i();return this.bitwiseTo(t,ut,e),e}function ct(t,e){return t^e}function ht(t){var e=i();return this.bitwiseTo(t,ct,e),e}function ft(t,e){return t&~e}function pt(t){var e=i();return this.bitwiseTo(t,ft,e),e}function dt(){for(var t=i(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function vt(t){var e=i();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function _t(t){var e=i();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function yt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function gt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+yt(this[t]);return this.s<0?this.t*this.DB:-1}function mt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=mt(this[n]^e);return t}function xt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function wt(t,e){var n=r.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function Tt(t){return this.changeBit(t,ut)}function kt(t){return this.changeBit(t,ft)}function Ct(t){return this.changeBit(t,ct)}function Et(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function Rt(t){var e=i();return this.addTo(t,e),e}function Ot(t){var e=i();return this.subTo(t,e),e}function St(t){var e=i();return this.multiplyTo(t,e),e}function Ft(){var t=i();return this.squareTo(t),t}function At(t){var e=i();return this.divRemTo(t,e,null),e}function Dt(t){var e=i();return this.divRemTo(t,null,e),e}function Mt(t){var e=i(),n=i();return this.divRemTo(t,e,n),new Array(e,n)}function Bt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function It(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Lt(){}function Pt(t){return t}function Ut(t,e,n){t.multiplyTo(e,n)}function Nt(t,e){t.squareTo(e)}function jt(t){return this.exp(t,new Lt)}function zt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function Gt(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Vt(t){this.r2=i(),this.q3=i(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Wt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=i();return t.copyTo(e),this.reduce(e),e}function qt(t){return t}function Ht(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Yt(t,e){t.squareTo(e),this.reduce(e)}function Xt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Zt(t,e){var n,r,o=t.bitLength(),a=f(1);if(o<=0)return a;n=o<18?1:o<48?3:o<144?4:o<768?5:6,r=o<8?new F(e):e.isEven()?new Vt(e):new P(e);var s=new Array,u=3,l=n-1,c=(1<<n)-1;if(s[1]=r.convert(this),n>1){var h=i();for(r.sqrTo(s[1],h);u<=c;)s[u]=i(),r.mulTo(h,s[u-2],s[u]),u+=2}var p,d,v=t.t-1,_=!0,y=i();for(o=m(t[v])-1;v>=0;){for(o>=l?p=t[v]>>o-l&c:(p=(t[v]&(1<<o+1)-1)<<l-o,v>0&&(p|=t[v-1]>>this.DB+o-l)),u=n;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--v),_)s[p].copyTo(a),_=!1;else{for(;u>1;)r.sqrTo(a,y),r.sqrTo(y,a),u-=2;u>0?r.sqrTo(a,y):(d=a,a=y,y=d),r.mulTo(y,s[p],a)}for(;v>=0&&0==(t[v]&1<<o);)r.sqrTo(a,y),d=a,a=y,y=d,--o<0&&(o=this.DB-1,--v)}return r.revert(a)}function Jt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Kt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function Qt(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;for(var n=t.clone(),i=this.clone(),o=f(1),a=f(0),s=f(0),u=f(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),e&&o.subTo(s,o),a.subTo(u,a)):(i.subTo(n,i),e&&s.subTo(o,s),u.subTo(a,u))}return 0!=i.compareTo(r.ONE)?r.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function $t(t){var e,n=this.abs();if(1==n.t&&n[0]<=se[se.length-1]){for(e=0;e<se.length;++e)if(n[0]==se[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<se.length;){for(var r=se[e],i=e+1;i<se.length&&r<ue;)r*=se[i++];for(r=n.modInt(r);e<i;)if(r%se[e++]==0)return!1}return n.millerRabin(t)}function te(t){var e=this.subtract(r.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var o=e.shiftRight(n);(t=t+1>>1)>se.length&&(t=se.length);for(var a=i(),s=0;s<t;++s){a.fromInt(se[Math.floor(Math.random()*se.length)]);var u=a.modPow(o,this);if(0!=u.compareTo(r.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<n&&0!=u.compareTo(e);)if(u=u.modPowInt(2,this),0==u.compareTo(r.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
var ee,ne=ne||{};"Microsoft Internet Explorer"==ne.appName?(r.prototype.am=a,ee=30):"Netscape"!=ne.appName?(r.prototype.am=o,ee=26):(r.prototype.am=s,ee=28),r.prototype.DB=ee,r.prototype.DM=(1<<ee)-1,r.prototype.DV=1<<ee;r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-ee,r.prototype.F2=2*ee-52;var re,ie,oe="0123456789abcdefghijklmnopqrstuvwxyz",ae=new Array;for(re="0".charCodeAt(0),ie=0;ie<=9;++ie)ae[re++]=ie;for(re="a".charCodeAt(0),ie=10;ie<36;++ie)ae[re++]=ie;for(re="A".charCodeAt(0),ie=10;ie<36;++ie)ae[re++]=ie;F.prototype.convert=A,F.prototype.revert=D,F.prototype.reduce=M,F.prototype.mulTo=B,F.prototype.sqrTo=I,P.prototype.convert=U,P.prototype.revert=N,P.prototype.reduce=j,P.prototype.mulTo=G,P.prototype.sqrTo=z,r.prototype.copyTo=c,r.prototype.fromInt=h,r.prototype.fromString=p,r.prototype.clamp=d,r.prototype.dlShiftTo=x,r.prototype.drShiftTo=w,r.prototype.lShiftTo=T,r.prototype.rShiftTo=k,r.prototype.subTo=C,r.prototype.multiplyTo=E,r.prototype.squareTo=R,r.prototype.divRemTo=O,r.prototype.invDigit=L,r.prototype.isEven=V,r.prototype.exp=W,r.prototype.toString=v,r.prototype.negate=_,r.prototype.abs=y,r.prototype.compareTo=g,r.prototype.bitLength=b,r.prototype.mod=S,r.prototype.modPowInt=q,r.ZERO=f(0),r.ONE=f(1),Lt.prototype.convert=Pt,Lt.prototype.revert=Pt,Lt.prototype.mulTo=Ut,Lt.prototype.sqrTo=Nt,Vt.prototype.convert=Wt,Vt.prototype.revert=qt,Vt.prototype.reduce=Ht,Vt.prototype.mulTo=Xt,Vt.prototype.sqrTo=Yt;var se=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ue=(1<<26)/se[se.length-1];r.prototype.chunkSize=J,r.prototype.toRadix=Q,r.prototype.fromRadix=$,r.prototype.fromNumber=tt,r.prototype.bitwiseTo=ot,r.prototype.changeBit=wt,r.prototype.addTo=Et,r.prototype.dMultiply=Bt,r.prototype.dAddOffset=It,r.prototype.multiplyLowerTo=zt,r.prototype.multiplyUpperTo=Gt,r.prototype.modInt=Kt,r.prototype.millerRabin=te,r.prototype.clone=H,r.prototype.intValue=Y,r.prototype.byteValue=X,r.prototype.shortValue=Z,r.prototype.signum=K,r.prototype.toByteArray=et,r.prototype.equals=nt,r.prototype.min=rt,r.prototype.max=it,r.prototype.and=st,r.prototype.or=lt,r.prototype.xor=ht,r.prototype.andNot=pt,r.prototype.not=dt,r.prototype.shiftLeft=vt,r.prototype.shiftRight=_t,r.prototype.getLowestSetBit=gt,r.prototype.bitCount=bt,r.prototype.testBit=xt,r.prototype.setBit=Tt,r.prototype.clearBit=kt,r.prototype.flipBit=Ct,r.prototype.add=Rt,r.prototype.subtract=Ot,r.prototype.multiply=St,r.prototype.divide=At,r.prototype.remainder=Dt,r.prototype.divideAndRemainder=Mt,r.prototype.modPow=Zt,r.prototype.modInverse=Qt,r.prototype.pow=jt,r.prototype.gcd=Jt,r.prototype.isProbablePrime=$t,r.prototype.square=Ft,e.a=r},function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&l.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return l.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=n(207),l=n(209);e.parse=i,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=r;var c=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(d),_=["%","/","?",";","#"].concat(v),y=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=n(210);r.prototype.parse=function(t,e,n){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(i);var s=t;if(s=s.trim(),!n&&1===t.split("#").length){var h=f.exec(s);if(h)return this.path=s,this.href=s,this.pathname=h[1],h[2]?(this.search=h[2],this.query=e?T.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=c.exec(s);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===s.substr(0,2);!k||p&&x[p]||(s=s.substr(2),this.slashes=!0)}if(!x[p]&&(k||p&&!w[p])){for(var C=-1,E=0;E<y.length;E++){var R=s.indexOf(y[E]);-1!==R&&(-1===C||R<C)&&(C=R)}var O,S;S=-1===C?s.lastIndexOf("@"):s.lastIndexOf("@",C),-1!==S&&(O=s.slice(0,S),s=s.slice(S+1),this.auth=decodeURIComponent(O)),C=-1;for(var E=0;E<_.length;E++){var R=s.indexOf(_[E]);-1!==R&&(-1===C||R<C)&&(C=R)}-1===C&&(C=s.length),this.host=s.slice(0,C),s=s.slice(C),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var A=this.hostname.split(/\./),E=0,D=A.length;E<D;E++){var M=A[E];if(M&&!M.match(g)){for(var B="",I=0,L=M.length;I<L;I++)M.charCodeAt(I)>127?B+="x":B+=M[I];if(!B.match(g)){var P=A.slice(0,E),U=A.slice(E+1),N=M.match(m);N&&(P.push(N[1]),U.unshift(N[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=u.toASCII(this.hostname));var j=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+j,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!b[d])for(var E=0,D=v.length;E<D;E++){var G=v[E];if(-1!==s.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),s=s.split(G).join(V)}}var W=s.indexOf("#");-1!==W&&(this.hash=s.substr(W),s=s.slice(0,W));var q=s.indexOf("?");if(-1!==q?(this.search=s.substr(q),this.query=s.substr(q+1),e&&(this.query=T.parse(this.query)),s=s.slice(0,q)):e&&(this.search="",this.query={}),s&&(this.pathname=s),w[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",H=this.search||"";this.path=j+H}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=T.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(l.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=t[c])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!w[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||x[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",_=n.search||"";n.path=v+_}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=g||y||n.host&&t.pathname,b=m,T=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],k=n.protocol&&!w[n.protocol];if(k&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),m=m&&(""===d[0]||""===T[0])),g)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),n.search=t.search,n.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(k){n.hostname=n.host=T.shift();var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return n.search=t.search,n.query=t.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=T.slice(-1)[0],R=(n.host||t.host||T.length>1)&&("."===E||".."===E)||""===E,O=0,S=T.length;S>=0;S--)E=T[S],"."===E?T.splice(S,1):".."===E?(T.splice(S,1),O++):O&&(T.splice(S,1),O--);if(!m&&!b)for(;O--;O)T.unshift("..");!m||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),R&&"/"!==T.join("/").substr(-1)&&T.push("");var F=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(k){n.hostname=n.host=F?"":T.length?T.shift():"";var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return m=m||n.host&&T.length,m&&!F&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,r){var i;!function(o){function a(t){throw new RangeError(D[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(A,"."),r+s(t.split("."),e).join(".")}function l(t){for(var e,n,r=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function c(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=I(t>>>10&1023|55296),t=56320|1023&t),e+=I(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function p(t,e,n){var r=0;for(t=n?B(t/C):t>>1,t+=B(t/e);t>M*T>>1;r+=x)t=B(t/M);return B(r+(M+1)*t/(t+k))}function d(t){var e,n,r,i,o,s,u,l,f,d,v=[],_=t.length,y=0,g=R,m=E;for(n=t.lastIndexOf(O),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&a("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=y,s=1,u=x;i>=_&&a("invalid-input"),l=h(t.charCodeAt(i++)),(l>=x||l>B((b-y)/s))&&a("overflow"),y+=l*s,f=u<=m?w:u>=m+T?T:u-m,!(l<f);u+=x)d=x-f,s>B(b/d)&&a("overflow"),s*=d;e=v.length+1,m=p(y-o,e,0==o),B(y/e)>b-g&&a("overflow"),g+=B(y/e),y%=e,v.splice(y++,0,g)}return c(v)}function v(t){var e,n,r,i,o,s,u,c,h,d,v,_,y,g,m,k=[];for(t=l(t),_=t.length,e=R,n=0,o=E,s=0;s<_;++s)(v=t[s])<128&&k.push(I(v));for(r=i=k.length,i&&k.push(O);r<_;){for(u=b,s=0;s<_;++s)(v=t[s])>=e&&v<u&&(u=v);for(y=r+1,u-e>B((b-n)/y)&&a("overflow"),n+=(u-e)*y,e=u,s=0;s<_;++s)if(v=t[s],v<e&&++n>b&&a("overflow"),v==e){for(c=n,h=x;d=h<=o?w:h>=o+T?T:h-o,!(c<d);h+=x)m=c-d,g=x-d,k.push(I(f(d+m%g,0))),c=B(m/g);k.push(I(f(c,0))),o=p(n,y,r==i),n=0,++r}++n,++e}return k.join("")}function _(t){return u(t,function(t){return S.test(t)?d(t.slice(4).toLowerCase()):t})}function y(t){return u(t,function(t){return F.test(t)?"xn--"+v(t):t})}var g=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof r&&r);var m,b=2147483647,x=36,w=1,T=26,k=38,C=700,E=72,R=128,O="-",S=/^xn--/,F=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=x-w,B=Math.floor,I=String.fromCharCode;m={version:"1.4.1",ucs2:{decode:l,encode:c},decode:d,encode:v,toASCII:y,toUnicode:_},void 0!==(i=function(){return m}.call(e,n,e,t))&&(t.exports=i)}()}).call(e,n(208)(t),n(33))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(211),e.encode=e.stringify=n(212)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,f,p,d,v=t[c].replace(s,"%20"),_=v.indexOf(n);_>=0?(h=v.substr(0,_),f=v.substr(_+1)):(h=v,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(i(a))+n;return o(t[a])?r(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
function r(t){function e(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function n(t,e){return t>>>e|t<<32-e}function r(t,e){return t>>>e}function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function a(t){return n(t,2)^n(t,13)^n(t,22)}function s(t){return n(t,6)^n(t,11)^n(t,25)}function u(t){return n(t,7)^n(t,18)^r(t,3)}function l(t){return n(t,17)^n(t,19)^r(t,10)}var c=8,h=0;return t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t),function(t){for(var e=h?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(t[r>>2]>>8*(3-r%4)+4&15)+e.charAt(t[r>>2]>>8*(3-r%4)&15);return n}(function(t,n){var r,c,h,f,p,d,v,_,y,g,m,b,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),T=new Array(64);t[n>>5]|=128<<24-n%32,t[15+(n+64>>9<<4)]=n;for(var y=0;y<t.length;y+=16){r=w[0],c=w[1],h=w[2],f=w[3],p=w[4],d=w[5],v=w[6],_=w[7];for(var g=0;g<64;g++)T[g]=g<16?t[g+y]:e(e(e(l(T[g-2]),T[g-7]),u(T[g-15])),T[g-16]),m=e(e(e(e(_,s(p)),i(p,d,v)),x[g]),T[g]),b=e(a(r),o(r,c,h)),_=v,v=d,d=p,p=e(f,m),f=h,h=c,c=r,r=e(m,b);w[0]=e(r,w[0]),w[1]=e(c,w[1]),w[2]=e(h,w[2]),w[3]=e(f,w[3]),w[4]=e(p,w[4]),w[5]=e(d,w[5]),w[6]=e(v,w[6]),w[7]=e(_,w[7])}return w}(function(t){for(var e=Array(),n=(1<<c)-1,r=0;r<t.length*c;r+=c)e[r>>5]|=(t.charCodeAt(r/c)&n)<<24-r%32;return e}(t),t.length*c))}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});for(var r="undefined"==typeof window?t:window,i=r.requestAnimationFrame,o=r.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],u=0;u<s.length&&!i;++u)i=r[s[u]+"RequestAnimationFrame"],o=r[s[u]+"CancelAnimationFrame"]||r[s[u]+"CancelRequestAnimationFrame"];i&&(i=i.bind(r)),o&&(o=o.bind(r)),i||(i=function(t,e){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),i=setTimeout(function(){t(n+r)},r);return a=n+r,i}),o||(o=function(t){clearTimeout(t)})}).call(e,n(33))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e,n,i){r(this,t),this.x=e,this.y=n,this.z=i,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}return a(t,[{key:"set",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"clamp",value:function(e,n){var r=null!==e&&void 0!==e,i=null!==n&&void 0!==n;return e instanceof t||!r||(e=new t(e,e,e)),n instanceof t||!i||(n=new t(n,n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y),this.z=Math.min(n.z,this.z)),this}},{key:"divide",value:function(e){return e instanceof t?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}},{key:"subtract",value:function(e){return e instanceof t?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}},{key:"multiply",value:function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}},{key:"add",value:function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}},{key:"equals",value:function(e){return e instanceof t?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: "+this.x+", y: "+this.y+", z: "+this.z+" })"}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t)),this}}],[{key:"fromObject",value:function(e){return new t(e.x,e.y,e.z)}},{key:"NULL",get:function(){return new t(0,0,0)}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(31),v=n(24),_=n(32),y=n(116),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=d.Constants.OptionType,b=function(t){function e(){return r(this,e),i(this,(e.__proto__||p()(e)).apply(this,arguments))}return o(e,t),g(e,[{key:"_getRotation",value:function(){var t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t}},{key:"_getFlipVertically",value:function(){return-1!==[5,7].indexOf(this.getTags().Orientation)}},{key:"_getFlipHorizontally",value:function(){return-1!==[2,4].indexOf(this.getTags().Orientation)}},{key:"_getFinalOptions",value:function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(t){var e=this._getFinalOptions(),n=e.rotation%360,r=n*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(r),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var i=this._sprite.getBounds();return this._renderTexture.resizeTo(new _.a(i.width,i.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),v.a.resolve()}},{key:"getNewDimensions",value:function(t){var e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t}}]),e}(y.a);b.identifier="exif-orientation",b.prototype.availableOptions={tags:{type:m.OBJECT,default:{}}},e.a=b},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(31),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e){r(this,t),this._version=e,this._check()}return s(t,[{key:"_check",value:function(){var t=this;if("undefined"==typeof document)return a.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var e=this;window.imglySDKVersionCallback=function(n){n.outdated&&a.Log.warn(t.constructor.name,"Your Version "+e._version+" is outdated. Current version is "+n.version+".")};var n=document.createElement("script");n.src="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback=imglySDKVersionCallback&version="+this._version,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}]),t}();e.a=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(82),s=n(83),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=s.a.MARKERS,c=function(){function t(e){r(this,t),this._buf=e,this._stream=new a.a(this._buf),this._stream.setHead(0)}return u(t,[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==l.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var t=this._stream.readString(4),e=this._stream.readInt8();return"JFIF"===t&&0===e}},{key:"setUnitDensity",value:function(t){this._stream.setHead(11),this._stream.writeInt8(t)}},{key:"setDensityX",value:function(t){this._stream.setHead(12),this._stream.writeInt16(t)}},{key:"setDensityY",value:function(t){this._stream.setHead(13),this._stream.writeInt16(t)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}}]),t}();e.a=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(82),s=n(83),u=n(18),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=u.a.invariant,h=s.a.MARKERS,f=s.a.EXIF_TAGS,p=function(){function t(e){r(this,t),this._buf=e,this._stream=new a.a(this._buf),this._stream.setHead(0),this._parse()}return l(t,[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===h.EXIF&&(this._stream.readInt16()>0&&"Exif"===this._stream.readString(4))}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var t=this._stream.getHead(),e=!1,n=this._stream.readInt16();18761===n?e=!1:19789===n?e=!0:c(!1,"Invalid TIFF data: No endian type found"),c(42===this._stream.readInt16(!e),"Invalid TIFF data: No 0x002A");var r=this._stream.readInt32(!e);c(r>=8,"Invalid TIFF data: First IFD offset < 8");var i=t+r,o=this._readTags(this._stream,t,i,e);this._tags=o.tags,this._tagData=o.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._stream.setHead(e+8),this._stream.writeInt16(t)}}},{key:"_readTags",value:function(t,e,n,r){t.setHead(n);for(var i=t.readInt16(!r),o={},a=[],s=0;s<i;s++){var u=n+12*s+2;t.setHead(u);var l=t.readInt16(!r),c=void 0,h=void 0,p=void 0;if(f[l]){l=f[l],c=t.readInt16(!r),h=t.readInt32(!r),p=t.readInt32(!r)+e;var d=null;switch(c){case 1:case 7:if(1===h)d=t.readInt8(!r);else{d=[];for(var v=0;v<h;v++)d.push(t.readInt8(!r))}break;case 2:t.setHead(h>4?p:u+8),d=t.readString(h);break;case 3:if(t.setHead(h>2?p:u+8),1===h)d=t.readInt16(!r);else{d=[];for(var _=0;_<h;_++)d.push(t.readInt16(!r))}break;case 4:case 9:if(t.setHead(h>1?p:u+8),1===h)d=t.readInt32(!r);else{d=[];for(var y=0;y<h;y++)d.push(t.readInt32(!r))}break;case 5:case 10:if(t.setHead(p),1===h){d=t.readInt32(!r)/t.readInt32(!r)}else{d=[];for(var g=0;g<h;g++){var m=t.readInt32(!r),b=t.readInt32(!r),x=m/b;d.push(x)}}}o[l]=d,a[l]={value:d,numValues:h,entryOffset:u,valueOffset:p,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}]),t}();e.a=p},function(t,e,n){"use strict";(function(t){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(30),p=n.n(f),d=n(1),v=n.n(d),_=n(23),y=n(51),g=n(18),m=n(81),b=n(44),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w=function(e){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,n);var o=i(this,(n.__proto__||v()(n)).call(this,e));return o._sdk=t,o}return o(n,e),x(n,[{key:"export",value:function(){var e=this,n=this._sdk.getRenderer(),r=this._options,i=r.renderType,o=r.imageFormat,a=r.quality;return this.validateSettings().then(function(){return e._prepareSDK()}).then(function(r){var s=n.getCanvas();n.isOfType(_.RendererType.WEBGL)&&(s=e._createCanvasFromTexture(r));var u=void 0;if(i===_.RenderType.IMAGE||i===_.RenderType.DATAURL){u="undefined"==typeof window?s.toDataURL(o):s.toDataURL(o,a);var l=e._sdk.getImage(),c=m.a.isJPEG(l.src),h=m.a.isJPEG(u);if(c&&h){var f=e._sdk.getExif();f&&(u=f.restoreSegments(u))}}if(i===_.RenderType.IMAGE){var d=void 0;return d=new Image,d.src=u,d}if(i===_.RenderType.DATAURL)return u;if(i===_.RenderType.BUFFER)switch(o){case _.ImageFormat.JPEG:return new p.a(function(e,n){var r=s.createJPEGStream({bufsize:2048,quality:100*a|0}),i=[];r.on("data",function(t){return i.push(t)}),r.on("end",function(){return e(t.concat(i))})});case _.ImageFormat.PNG:return p.a.resolve(s.toBuffer());default:return p.a.reject(new Error("Invalid ImageFormat: "+o))}else{if(i===_.RenderType.MSBLOB)return s.msToBlob();if(i===_.RenderType.BLOB)return new p.a(function(t,e){s.toBlob(function(e){t(e)},o,a)})}}).then(function(t){return e._restoreSDK().then(function(){return t})})}},{key:"_prepareSDK",value:function(){var t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var e=t.isOfType(_.RendererType.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);var n=this._sdk.getOperationsStack();return n.forEach(function(t){t.disposeRenderTextures()}),n.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var t=this._sdk.getRenderer(),e=t.isOfType(_.RendererType.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,e),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(t){var e=this._sdk.getRenderer(),n=this._sdk.getFinalDimensions(),r=this._sdk.getRenderer().getContext(),i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i);var o=t.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var a=new Uint8Array(n.x*n.y*4);r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,a);var s=this._checkPixelsForTransparency(a),u=void 0;if(s){var l=new y.a.Sprite(t);l.setFilters([new y.a.Filters.UnpremultiplyFilter]);var c=new y.a.Container;c.addChild(l),u=new y.a.RenderTexture(e,n.x,n.y),u.render(c);var h=u.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0),r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,a),e.setRenderTarget(),u.dispose()}var f=g.a.createCanvas();f.width=n.x,f.height=n.y;var p=f.getContext("2d"),d=p.createImageData(n.x,n.y);return d.data.set(a),p.putImageData(d,0,0),r.deleteFramebuffer(i),f}},{key:"_checkPixelsForTransparency",value:function(t){for(var e=this._sdk.getFinalDimensions(),n=e.x*e.y*4,r=3;r<n;r+=4)if(255!==t[r])return!0;return!1}}]),n}(b.a);w.prototype.availableOptions={renderType:{type:_.OptionType.STRING,available:g.a.values(_.RenderType),default:_.RenderType.IMAGE},imageFormat:{type:_.OptionType.STRING,available:g.a.values(_.ImageFormat),default:_.ImageFormat.PNG},quality:{type:_.OptionType.NUMBER,default:.8}},e.a=w}).call(e,n(221).Buffer)},function(t,e,n){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,n,r):"string"==typeof e?c(t,e,n):p(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return s(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function l(t,e){if(s(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|_(e,n);t=i(t,r);var a=t.write(e,n);return a!==r&&(t=t.slice(0,a)),t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=h(t,e),t}function p(t,e){if(o.isBuffer(e)){var n=0|d(e.length);return t=i(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Z(e.length)?i(t,0):h(t,e);if("Buffer"===e.type&&Q(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),o.alloc(+t)}function _(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(r)return W(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return F(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<s;l++)if(o(t,l)===o(e,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var h=!0,f=0;f<u;f++)if(o(t,l+f)!==o(e,f)){h=!1;break}if(h)return l}return-1}function x(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return X(W(e,t.length-n),t,n,r)}function T(t,e,n,r){return X(q(e),t,n,r)}function k(t,e,n,r){return T(t,e,n,r)}function C(t,e,n,r){return X(Y(e),t,n,r)}function E(t,e,n,r){return X(H(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,l,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128==(192&u)&&(h=(31&o)<<6|63&u)>127&&(a=h);break;case 3:u=t[i+1],l=t[i+2],128==(192&u)&&128==(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l)>2047&&(h<55296||h>57343)&&(a=h);break;case 4:u=t[i+1],l=t[i+2],c=t[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(a=h)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return S(r)}function S(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=$));return n}function F(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function D(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function M(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function U(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,i){return i||U(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,i){return i||U(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,r,52,8),n+8}function z(t){if(t=G(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Y(t){return J.toByteArray(z(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Z(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var J=n(222),K=n(223),Q=n(224);e.Buffer=o,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return a(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return u(null,t,e,n)},o.allocUnsafe=function(t){return l(null,t)},o.allocUnsafeSlow=function(t){return l(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=_,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):y.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,s=n-e,u=Math.min(a,s),l=this.slice(r,i),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+t]}return r},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){I(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){I(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=o.isBuffer(t)?t:W(new o(t,r).toString()),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(33))},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-r(t)}function o(t){var e,n,i,o,a,s,u=t.length;a=r(t),s=new h(3*u/4-a),i=a>0?u-4:u;var l=0;for(e=0,n=0;e<i;e+=4,n+=3)o=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[l++]=o>>16&255,s[l++]=o>>8&255,s[l++]=255&o;return 2===a?(o=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[l++]=255&o):1===a&&(o=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[l++]=o>>8&255,s[l++]=255&o),s}function a(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function s(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(a(r));return i.join("")}function u(t){for(var e,n=t.length,r=n%3,i="",o=[],a=0,u=n-r;a<u;a+=16383)o.push(s(t,a,a+16383>u?u:a+16383));return 1===r?(e=t[n-1],i+=l[e>>2],i+=l[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=l[e>>10],i+=l[e>>4&63],i+=l[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=i,e.toByteArray=o,e.fromByteArray=u;for(var l=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=f.length;p<d;++p)l[p]=f[p],c[f.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(){r(this,t)}return a(t,null,[{key:"current",value:function(){return"production"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!1}},{key:"isProduction",value:function(){return!0}}]),t}();e.a=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(227);n.d(e,"ImageLoader",function(){return r.a});var i=n(113);n.d(e,"JSONLoader",function(){return i.a})},function(t,e,n){"use strict";var r=n(100),i=n.n(r),o=n(101),a=n.n(o),s=n(30),u=n.n(s),l=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=a()(t);!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(i()(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.a={load:function(t){var e=this;return function(){if(t.substr(0,5),!0)return u.a.resolve([t,t])}().then(function(t){var n=l(t,2),r=n[0],i=n[1];return e._createAndLoadImage(r,i)})},_createAndLoadImage:function(t,e){return new u.a(function(t,n){var r=new window.Image;r.addEventListener("load",function(){t(r)}),r.addEventListener("error",function(){n(new Error("Failed to load image at "+e))}),r.crossOrigin="Anonymous",r.src=e})},loadXHR:function(t,e){return new u.a(function(n,r){var i=void 0;window.XDomainRequest?(i=new window.XDomainRequest,e&&i.overrideMimeType(e),i.onload=function(){n(i)},i.onerror=function(t){r(t)}):window.XMLHttpRequest&&(i=new window.XMLHttpRequest,e&&i.overrideMimeType(e),i.onreadystatechange=function(t){4===i.readyState&&(200===i.status?n(i):r(new Error("HTTP Status "+i.status)))}),i.open("GET",t,!0),i.send()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n.n(r),o=n(229),a=n(233),s=n(235),u=n(298),l=n(299),c=n(302),h=n(305),f=n(306),p=n(307),d=n(310),v=n(316),_=n(321),y=n(323),g=[o.a,a.a,s.a,u.a,l.a,c.a,h.a,f.a,p.a,d.a,v.a,_.a,y.a];i.a.AllOperations=g,e.default=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=n.n(_),g=n(120),m=n(231),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),x=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},w=_.Math.ColorMatrix,T=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._clarityFilter=new m.a,s._filter=new g.a,s._sprite.setFilters([s._clarityFilter,s._filter]),s}return o(e,t),b(e,[{key:"_render",value:function(t){var e=t.getDimensions();e.x=1/e.x,e.y=1/e.y;var n=new w;n.multiply(w.createSaturationMatrix(-.3*this._options.clarity+1)),n.multiply(w.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:e,colorMatrix:n,colorOffset:n.getOffsets()});var r=new w;return r.multiply(w.createExposureMatrix(this._options.exposure)),r.multiply(w.createSaturationMatrix(this._options.saturation+1)),r.multiply(w.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),r.multiply(w.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,colorMatrix:r,colorOffset:r.getOffsets()}),0!==this._options.clarity?this._sprite.setFilters([this._clarityFilter,this._filter]):this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"dispose",value:function(){x(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose()}}]),e}(_.Operation);T.identifier="adjustments",T.prototype.availableOptions={brightness:{type:_.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:_.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:_.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:_.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:_.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:_.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:_.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:_.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},y.a.Operations.AdjustmentsOperation=T,e.a=T},function(t,e){t.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n  color.rgb = clamp((luminance + highlight + shadowContrast) * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n\n  // Apply Color Matrix\n  color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n  color.rgb *= color.a; // Do premultiplie alpha\n\n  gl_FragColor = color;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),_=d.Math.Vector2,y=d.Math.ColorMatrix,g=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(232),t}return o(e,t),v(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],n.getContext()),i=e.getCanvas(),o=e.getContext(),a=this._options.clarity,s=this._options.colorMatrix,u=new d.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),l=i.width,c=i.height,h=o.getImageData(0,0,l,c),f=r.createImageData(l,c);this.canvasShader(h,f,a,s,u),r.putImageData(f,0,0)}},{key:"canvasShader",value:function(t,e,n,r,i){for(var o=function(t,e,n){return Math.min(Math.max(t,e),n)},a=function(t,e,n){var r=o((n-t)/(e-t),0,1);return r*r*(3-2*r)},s=4*t.width,u=t.data.length,l=u-1,c=t.data,h=e.data,f=new d.Color,p=function(t){return t=t<0?0:t,t=t>l?l:t,c[t]},v=0;v<u;v+=4){var _=p(v+0),y=p(v+1),g=p(v+2),m=p(v+3),b=(_+p(v-4-s+0)+p(v-4+0)+p(v-4+s+0)+p(v-s+0)+p(v+s+0)+p(v+4-s+0)+p(v+4+0)+p(v+4+s))/2295,x=(y+p(v-4-s+1)+p(v-4+1)+p(v-4+s+1)+p(v-s+1)+p(v+s+1)+p(v+4-s+1)+p(v+4+1)+p(v+4+s+1))/2295,w=(g+p(v-4-s+2)+p(v-4+2)+p(v-4+s+2)+p(v-s+2)+p(v+s+2)+p(v+4-s+2)+p(v+4+2)+p(v+4+s+2))/2295,T=(m+p(v-4-s+3)+p(v-4+3)+p(v-4+s+3)+p(v-s+3)+p(v+s+3)+p(v+4-s+3)+p(v+4+3)+p(v+4+s+3))/2295;_/=255,y/=255,g/=255,m/=255;var k=o(.3*_+.59*y+.1*g,.111111,.999999),C=Math.min(a(1-k,0,.11),a(k,0,.11)),E=3.7*n*C,R=Math.pow(2,.27*n*C),O=o(_+o((_-b)*E,0,10),0,1)*R,S=o(y+o((y-x)*E,0,10),0,1)*R,F=o(g+o((g-w)*E,0,10),0,1)*R,A=o(m+o((m-T)*E,0,10),0,1);f.set(O,S,F,A);var D=r.apply(f).add(i);h[v+0]=255*D.r,h[v+1]=255*D.g,h[v+2]=255*D.b,h[v+3]=255*D.a}}}]),e}(d.Engine.Filter);g.prototype.availableOptions={clarity:{type:d.OptionType.NUMBER,default:0,uniformType:d.UniformType.FLOAT},pixelDimension:{type:d.OptionType.VECTOR2,default:new _(100,100),uniformType:d.UniformType.FLOAT2},colorMatrix:{type:d.OptionType.COLOR_MATRIX,default:new y,uniformType:d.UniformType.MAT4},colorOffset:{type:d.OptionType.ARRAY,default:[],uniformType:d.UniformType.FLOAT4}},e.a=g},function(t,e){t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n\n    vec4 mergedColor = color;\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor /= 9.0;\n\n    color.rgb /= max(color.a, EPSILON);       // Revert premultiplied alpha\n    mergedColor.rgb /= max(mergedColor.a, EPSILON); // Revert premultiplied alpha\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0);\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n\n\n    color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n    color.rgb *= color.a; // Do premultiplie alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=n.n(_),g=n(121),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},x=_.Math.Vector2,w=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._horizontalFilter=new g.a,s._verticalFilter=new g.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new x(.5,.5)),s._verticalFilter.setDelta(new x(-.5,.5)),s._filter=new g.a,s}return o(e,t),m(e,[{key:"_renderWebGL",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options.blurRadius,i={blurRadius:r*n,texSize:e};return this._horizontalFilter.set(i),this._verticalFilter.set(i),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"_renderCanvas",value:function(t){var e=this._options.blurRadius,n=t.getDimensions();return this._filter.set({blurRadius:e,texSize:n}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"transform",value:function(t){var e=this.getBlurRadius(),n=t.applyToRelativeSize(e);this.set({blurRadius:n},!1)}},{key:"dispose",value:function(){b(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}(_.Operation);w.identifier="blur",w.prototype.availableOptions={blurRadius:{type:_.OptionType.NUMBER,default:.025}},y.a.Operations.BlurOperation=w,e.a=w},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=v()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(p.a?p()(t,e):t.__proto__=e)}var a=n(75),s=n.n(a),u=n(0),l=n.n(u),c=n(7),h=n.n(c),f=n(2),p=n.n(f),d=n(3),v=n.n(d),_=n(1),y=n.n(_),g=n(4),m=n.n(g),b=n(122),x=n(6),w=n(266),T=n(5),k=s.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),E=function t(e,n,r){null===e&&(e=Function.prototype);var i=h()(e,n);if(void 0===i){var o=y()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},R=function(t){function e(){return r(this,e),i(this,(e.__proto__||y()(e)).apply(this,arguments))}return o(e,t),C(e,[{key:"_render",value:function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)}},{key:"render",value:function(t){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?g.Promise.resolve(t):E(e.prototype.__proto__||y()(e.prototype),"render",this).call(this,t)}},{key:"setDirtyForRenderer",value:function(t,n){E(e.prototype.__proto__||y()(e.prototype),"setDirtyForRenderer",this).call(this,t,n),this._selectedFilter.setDirtyForRenderer(t,n)}},{key:"disposeRenderTextures",value:function(){E(e.prototype.__proto__||y()(e.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){E(e.prototype.__proto__||y()(e.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(t){var e=k({},t);if(delete e.filter,t.filter){var n=t.filter.constructor;"3d-lut"===n.identifier?this.setFilter(new n({image:t.filter.getImage(),resolution:t.filter.getResolution(),horizontalTileCount:t.filter.getHorizontalTileCount(),verticalTileCount:t.filter.getVerticalTileCount()})):this.setFilter(new n)}this.set(e)}}]),e}(g.Operation);R.identifier="filter",R.prototype.availableOptions={identifier:{type:g.OptionType.STRING,default:"identity"},intensity:{type:g.OptionType.NUMBER,default:1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:g.OptionType.OBJECT,default:new b.a,setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},R.FilterPrimitives=x,R.Filters=w,R.Filter=T.a,m.a.Operations.FilterOperation=R,e.a=R},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),_=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(237),t}return o(e,t),v(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=n.getContext(),o=this._options.filteredCanvas;i.save(),i.drawImage(r,0,0),i.globalAlpha=this._options.intensity,i.drawImage(o,0,0),i.restore()}}]),e}(d.Engine.Filter);_.prototype.availableOptions={filteredImage:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.INT},filteredCanvas:{type:d.OptionType.OBJECT,default:null},intensity:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.FLOAT}};var y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new d.Engine.Container,this._sprite=new d.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new _}return v(t,[{key:"push",value:function(t){this._stack.push(t)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(t,e,n){if(0===this._stack.length)return d.Promise.resolve();var r=t.getRenderer();this._sprite.setTexture(e);var i=this._renderTextures[r.id];if(!i){var o=t.getSprite().getTexture().getFrame();i=new d.Engine.RenderTexture(t.getRenderer(),o.width,o.height),this._renderTextures[r.id]=i}var a=n.getDimensions();i.resizeTo(a);var s=this.isDirtyForRenderer(r);if(s){this._stack.forEach(function(e){e.update(t)});var u=this._stack.map(function(t){return t.getFilter()});this._sprite.setFilters(u),i.render(this._container),this.setDirtyForRenderer(!1,r)}if(this._blendFilter.setIntensity(this._intensity),r.isOfType(d.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(i.getRenderTarget().getCanvas());else if(r.isOfType(d.RendererType.WEBGL)){var l=i.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage()),r.updateTexture(l,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(d.Color.TRANSPARENT),n.render(this._container),s&&this.disposeRenderTextures(),d.Promise.resolve(n)}},{key:"setIntensity",value:function(t){this._intensity=t}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this._dirtiness[e]=t}},{key:"disposeRenderTextures",value:function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach(function(t){return t.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),t}();e.a=y},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(239),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.brightness;if(0!==s){s*=255;for(var u=0;u<r.width*r.height;u++){var l=4*u;a.data[l]+=s,a.data[l+1]+=s,a.data[l+2]+=s}o.putImageData(a,0,0)}}}]),e}(d.Engine.Filter);y.prototype.availableOptions={brightness:{type:d.OptionType.NUMBER,default:0,uniformType:d.UniformType.FLOAT}};var g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),e}(v.a);g.prototype.availableOptions=y.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(241),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.contrast;if(1!==s){for(var u=0;u<r.width*r.height;u++){var l=4*u;a.data[l]=(a.data[l]-127)*s+127,a.data[l+1]=(a.data[l+1]-127)*s+127,a.data[l+2]=(a.data[l+2]-127)*s+127}o.putImageData(a,0,0)}}}]),e}(d.Engine.Filter);y.prototype.availableOptions={contrast:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.FLOAT}};var g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),e}(v.a);g.prototype.availableOptions=y.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=d.Math.ColorMatrix,g=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(243),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.colorMatrix,u=new d.Color(0,0,0,0),l=0;l<r.width*r.height;l++){var c=4*l;u.r=a.data[c]/255,u.g=a.data[c+1]/255,u.b=a.data[c+2]/255,u=s.apply(u),a.data[c]=255*u.r,a.data[c+1]=255*u.g,a.data[c+2]=255*u.b}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter);g.prototype.availableOptions={colorMatrix:{type:d.OptionType.COLOR_MATRIX,default:new y,uniformType:d.UniformType.MAT4},colorMatrixOffset:{type:d.OptionType.ARRAY,default:[],uniformType:d.UniformType.FLOAT4}};var m=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new g,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),e}(v.a);m.prototype.availableOptions=g.prototype.availableOptions,e.a=m},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(245),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=[.3,.59,.11],u=this._options.desaturation,l=0;l<r.width*r.height;l++){var c=4*l,h=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*h-a.data[c])*u,a.data[c+1]+=(255*h-a.data[c+1])*u,a.data[c+2]+=(255*h-a.data[c+2])*u}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter);y.prototype.availableOptions={desaturation:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.FLOAT}};var g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),e}(v.a);g.prototype.availableOptions=y.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(247),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.gamma,u=new Float32Array(256),l=0;l<256;l++)u[l]=255*Math.pow(l/255,s.r);for(var c=new Float32Array(256),h=0;h<256;h++)c[h]=255*Math.pow(h/255,s.g);for(var f=new Float32Array(256),p=0;p<256;p++)f[p]=255*Math.pow(p/255,s.b);for(var d=0;d<r.width*r.height;d++){var v=4*d;a.data[v]=u[a.data[v]],a.data[v+1]=c[a.data[v+1]],a.data[v+2]=f[a.data[v+2]]}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter);y.prototype.availableOptions={gamma:{type:d.OptionType.COLOR,default:d.Color.WHITE,uniformType:d.UniformType.FLOAT3}};var g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),e}(v.a);g.prototype.availableOptions=y.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(249),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r,i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),o=e.getContext(),a=n.getContext(),s=o.getImageData(0,0,i.width,i.height),u=this._options.color,l=0;l<i.width;l++)for(var c=0;c<i.height;c++){var h=4*(i.width*c+l),f=l/i.width,p=c/i.height,d=(f-.5)/.75,v=(p-.5)/.75,_=d*d,y=v*v;r=1-(_+y),r=Math.min(Math.max(r,.1),1),s.data[h]=s.data[h]*(r*u.r),s.data[h+1]=s.data[h+1]*(r*u.g),s.data[h+2]=s.data[h+2]*(r*u.b),s.data[h+3]=255}a.putImageData(s,0,0)}}]),e}(d.Engine.Filter);y.prototype.availableOptions={color:{type:d.OptionType.COLOR,default:d.Color.WHITE,uniformType:d.UniformType.FLOAT3}};var g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),e}(v.a);g.prototype.availableOptions=y.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(251),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s);a.data[l+2]=.33*a.data[l+1],a.data[l]=.6*a.data[l],a.data[l+2]+=.33*a.data[l],a.data[l+1]=.7*a.data[l+1],a.data[l+3]=255}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter),g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),e}(v.a);e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(253),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s),c=.2125*a.data[l]+.7154*a.data[l+1]+.0721*a.data[l+2];a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter),g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),e}(v.a);e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(7),s=n.n(a),u=n(0),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(11)),g=function t(e,n,r){null===e&&(e=Function.prototype);var i=s()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=_.Math.Vector2,x=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||v()(e)).call(this));return t._precomputeQuads(),t._fragmentSource=n(256),t}return o(e,t),m(e,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new b;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a),u=s.getContext("2d"),l=i.getImageData(0,0,r.width,r.height),c=u.getImageData(0,0,a.width,a.height),h=new b,f=0;f<r.width*r.height*4;f+=4){var p=l.data[f],d=l.data[f+1],v=l.data[f+2],_=l.data[f+3]/255,y=this._quads[v];h.x=64*y.x,h.y=64*y.y,h.x+=Math.floor(p/4),h.y+=Math.floor(d/4);var g=4*(a.width*h.y+h.x)|0,m=c.data[g];m=p*(1-_)+m*_;var x=c.data[g+1];x=d*(1-_)+x*_;var w=c.data[g+2];w=v*(1-_)+w*_,l.data[f]=m,l.data[f+1]=x,l.data[f+2]=w}o.putImageData(l,0,0)}},{key:"_createImageCanvas",value:function(t){var e=_.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),e}(_.Engine.Filter);x.prototype.availableOptions={lookupTable:{type:_.OptionType.NUMBER,default:3,uniformType:_.UniformType.INT},lookupTableImage:{type:_.OptionType.IMAGE,uniformType:null}};var w=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._filter=new x,s._textures={},s}return o(e,t),m(e,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(_.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(_.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new _.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),e.updateTexture(r)}},{key:"dispose",value:function(){g(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this);for(var t in this._textures)delete this._textures[t]}}]),e}(y.a);w.prototype.availableOptions={image:{type:_.OptionType.IMAGE}},e.a=w},function(t,e){t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(258),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.saturation,u=0;u<r.width;u++)for(var l=0;l<r.height;l++){var c=4*(r.width*l+u),h=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=h*(1-s)+a.data[c]*s,a.data[c+1]=h*(1-s)+a.data[c+1]*s,a.data[c+2]=h*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter);y.prototype.availableOptions={saturation:{type:d.OptionType.NUMBER,default:0,uniformType:d.UniformType.FLOAT}};var g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),e}(v.a);g.prototype.availableOptions=y.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(260),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s);a.data[l]=Math.max(255*this._options.color.r,a.data[l]),a.data[l+1]=Math.max(255*this._options.color.g,a.data[l+1]),a.data[l+2]=Math.max(255*this._options.color.b,a.data[l+2])}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter);y.prototype.availableOptions={color:{type:d.OptionType.COLOR,default:d.Color.WHITE,uniformType:d.UniformType.FLOAT3}};var g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),_(e,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),e}(v.a);g.prototype.availableOptions=y.prototype.availableOptions,e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(123)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._options.rgbControlPoints||(s._options.rgbControlPoints={red:s._options.controlPoints,green:s._options.controlPoints,blue:s._options.controlPoints}),s._updateLookupTable(),s}return o(e,t),_(e,[{key:"_updateLookupTable",value:function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,n)}},{key:"_buildLookupTable",value:function(t,e,n){for(var r=[],i=0;i<256;i++)r.push(Math.min(Math.max(i+t[i],0),255)),r.push(Math.min(Math.max(i+e[i],0),255)),r.push(Math.min(Math.max(i+n[i],0),255)),r.push(255);return r}},{key:"_calculateSplineCurve",value:function(t){t=t.sort(function(t,e){return t[0]>e[0]});var e,n=this._getSplineCurve(t),r=n[0];if(r[0]>0)for(e=0;e<r[0];e++)n.unshift([0,0]);var i=[];for(e=0;e<n.length;e++){var o=n[e],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),i.push(s)}return i}},{key:"_getSplineCurve",value:function(t){var e,n=this._secondDerivative(t),r=n.length,i=[];for(e=0;e<r;e++)i[e]=n[e];var o=[];for(e=0;e<r-1;e++)for(var a=t[e],s=t[e+1],u=a[0];u<s[0];u++){var l=(u-a[0])/(s[0]-a[0]),c=1-l,h=l,f=s[0]-a[0],p=c*a[1]+h*s[1]+f*f/6*((c*c*c-c)*i[e]+(h*h*h-h)*i[e+1]);p>255?p=255:p<0&&(p=0),o.push([u,p])}return 255===o.length&&o.push(t[t.length-1]),o}},{key:"_secondDerivative",value:function(t){var e=t.length;if(e<=0||1===e)return null;var n,r,i=[],o=[];for(i[0]=[0,1,0],n=1;n<e-1;n++){var a=t[n-1],s=t[n],u=t[n+1];i[n]=i[n]||[],i[n][0]=(s[0]-a[0])/6,i[n][1]=(u[0]-a[0])/3,i[n][2]=(u[0]-s[0])/6,o[n]=(u[1]-s[1])/(u[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[e-1]=0,i[e-1]=[0,1,0],n=1;n<e;n++)r=i[1][0]/i[n-1][1],i[n][1]-=r*i[n-1][2],i[n][0]=0,o[n]-=r*o[n-1];for(n=e-2;n>0;n--)r=i[n][2]/i[n+1][1],i[n][1]-=r*i[n+1][0],i[n][2]=0,o[n]-=r*o[n+1];var l=[];for(n=0;n<e;n++)l[n]=o[n]/i[n][1];return l}}]),e}(v.a);y.prototype.availableOptions={rgbControlPoints:{type:d.OptionType.OBJECT},controlPoints:{type:d.OptionType.ARRAY,default:[]},textureGLUnit:{type:d.OptionType.NUMBER,default:1}},e.a=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(11)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(263),t}return o(e,t),_(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+s),c=a.data[l]/255*.3+a.data[l+1]/255*.3+a.data[l+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),e}(d.Engine.Filter),g=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(o)));return s._filter=new y,s}return o(e,t),e}(v.a);e.a=g},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(7),s=n.n(a),u=n(0),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(11)),g=function t(e,n,r){null===e&&(e=Function.prototype);var i=s()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=_.Math.Vector2,x=_.Math.Vector3,w=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||v()(e)).call(this));return t._precomputeQuads(),t._fragmentSource=n(265),t}return o(e,t),m(e,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new b;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],this._options),i=r.resolution,o=r.horizontalTileCount,a=r.verticalTileCount,s=e.getCanvas(),u=e.getContext(),l=n.getContext(),c=this._options.lookupTableImage,h=this._createImageCanvas(c),f=h.getContext("2d"),p=u.getImageData(0,0,s.width,s.height),d=f.getImageData(0,0,c.width,c.height),v=new x(i/o-1|0,i/a-1|0,o*a-1|0),y=new _.Color,g=new _.Color,m=new _.Color,w=new _.Color,T=new _.Color,k=new _.Color,C=new _.Color,E=new _.Color,R=new b,O=new b,S=function(t,e,n,r){t.r=e.r*(1-r)+n.r*r,t.g=e.g*(1-r)+n.g*r,t.b=e.b*(1-r)+n.b*r},F=function(t,e,n){e=.5+e|0,n=.5+n|0;var r=4*(n*i+e);t.r=d.data[r]/255,t.g=d.data[r+1]/255,t.b=d.data[r+2]/255,t.a=d.data[r+3]/255},A=new _.Color,D=new _.Color,M=function(t,e,n,r,i,o,a){S(A,e,r,o),S(D,n,i,o),S(t,A,D,a)},B=new b(i,i).divide(o,a).floor(),I=0;I<s.width*s.height*4;I+=4){y.set(p.data[I]/255,p.data[I+1]/255,p.data[I+2]/255,p.data[I+3]/255);var L=new x(y.r*v.x,y.g*v.y,y.b*v.z),P=L.clone().floor().toInt(),U=L.clone().ceil().toInt(),N=L.clone().fract();R.y=P.z/o|0,R.x=P.z-R.y*o|0,O.y=U.z/o|0,O.x=U.z-O.y*o|0,R.multiply(B),O.multiply(B),F(T,R.x+P.x,R.y+P.y),F(k,R.x+P.x,R.y+U.y),F(C,R.x+U.x,R.y+P.y),F(E,R.x+U.x,R.y+U.y),M(m,T,k,C,E,N.x,N.y),F(T,O.x+P.x,O.y+P.y),F(k,O.x+P.x,O.y+U.y),F(C,O.x+U.x,O.y+P.y),F(E,O.x+U.x,O.y+U.y),M(w,T,k,C,E,N.x,N.y),S(g,m,w,N.z),p.data[I]=Math.ceil(255*g.r),p.data[I+1]=Math.ceil(255*g.g),p.data[I+2]=Math.ceil(255*g.b)}l.putImageData(p,0,0)}},{key:"_createImageCanvas",value:function(t){var e=_.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),e}(_.Engine.Filter);w.prototype.availableOptions={lookupTable:{type:_.OptionType.NUMBER,default:3,uniformType:_.UniformType.INT},lookupTableImage:{type:_.OptionType.IMAGE,uniformType:null},resolution:{type:_.OptionType.NUMBER,default:128,uniformType:_.UniformType.FLOAT},horizontalTileCount:{type:_.OptionType.NUMBER,default:5,uniformType:_.UniformType.FLOAT},verticalTileCount:{type:_.OptionType.NUMBER,default:5,uniformType:_.UniformType.FLOAT}};var T=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._filter=new w,s._textures={},s}return o(e,t),m(e,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(_.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(_.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var n=this._options,r=n.resolution,i=n.verticalTileCount,o=n.horizontalTileCount;this._filter.set({resolution:r,verticalTileCount:i,horizontalTileCount:o})}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new _.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),r.setMinFilter(_.Engine.BaseTexture.NearestFilter),e.updateTexture(r)}},{key:"dispose",value:function(){g(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this);for(var t in this._textures)delete this._textures[t]}}]),e}(y.a);T.prototype.availableOptions={image:{type:_.OptionType.IMAGE},resolution:{type:_.OptionType.NUMBER,default:128},horizontalTileCount:{type:_.OptionType.NUMBER,default:5},verticalTileCount:{type:_.OptionType.NUMBER,default:5}},e.a=T},function(t,e){t.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(122);n.d(e,"IdentityFilter",function(){return r.a});var i=n(267);n.d(e,"A15Filter",function(){return i.a});var o=n(268);n.d(e,"BreezeFilter",function(){return o.a});var a=n(269);n.d(e,"BWFilter",function(){return a.a});var s=n(270);n.d(e,"BWHardFilter",function(){return s.a});var u=n(271);n.d(e,"CelsiusFilter",function(){return u.a});var l=n(272);n.d(e,"ChestFilter",function(){return l.a});var c=n(273);n.d(e,"FixieFilter",function(){return c.a});var h=n(274);n.d(e,"FoodFilter",function(){return h.a});var f=n(275);n.d(e,"FridgeFilter",function(){return f.a});var p=n(276);n.d(e,"FrontFilter",function(){return p.a});var d=n(277);n.d(e,"GlamFilter",function(){return d.a});var v=n(278);n.d(e,"GobblinFilter",function(){return v.a});var _=n(279);n.d(e,"K1Filter",function(){return _.a});var y=n(280);n.d(e,"K2Filter",function(){return y.a});var g=n(281);n.d(e,"K6Filter",function(){return g.a});var m=n(282);n.d(e,"KDynamicFilter",function(){return m.a});var b=n(283);n.d(e,"LeninFilter",function(){return b.a});var x=n(284);n.d(e,"LomoFilter",function(){return x.a});var w=n(285);n.d(e,"MellowFilter",function(){return w.a});var T=n(286);n.d(e,"MetalFilter",function(){return T.a});var k=n(287);n.d(e,"MorningFilter",function(){return k.a});var C=n(288);n.d(e,"OrchidFilter",function(){return C.a});var E=n(289);n.d(e,"PolaFilter",function(){return E.a});var R=n(290);n.d(e,"Pola669Filter",function(){return R.a});var O=n(291);n.d(e,"QuoziFilter",function(){return O.a});var S=n(292);n.d(e,"SemiredFilter",function(){return S.a});var F=n(293);n.d(e,"SunnyFilter",function(){return F.a});var A=n(294);n.d(e,"TexasFilter",function(){return A.a});var D=n(295);n.d(e,"X400Filter",function(){return D.a});var M=n(296);n.d(e,"LUTFilter",function(){return M.a});var B=n(297);n.d(e,"ThreeDLUTFilter",function(){return B.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Contrast({contrast:.63})),s._stack.push(new p.Brightness({brightness:.12})),s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),s}return o(e,t),e}(f.a);d.identifier="a15",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Desaturation({desaturation:.5})),s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),s}return o(e,t),e}(f.a);d.identifier="breeze",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Grayscale),s}return o(e,t),e}(f.a);d.identifier="bw",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Grayscale),s._stack.push(new p.Contrast({contrast:1.5})),s}return o(e,t),e}(f.a);d.identifier="bwhard",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),s}return o(e,t),e}(f.a);d.identifier="celsius",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),s}return o(e,t),e}(f.a);d.identifier="chest",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),s}return o(e,t),e}(f.a);d.identifier="fixie",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Saturation({saturation:1.35})),s._stack.push(new p.Contrast({contrast:1.1})),s}return o(e,t),e}(f.a);d.identifier="food",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),s}return o(e,t),e}(f.a);d.identifier="fridge",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),s}return o(e,t),e}(f.a);d.identifier="front",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Contrast({contrast:1.1})),s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),s}return o(e,t),e}(f.a);d.identifier="glam",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Gobblin),s}return o(e,t),e}(f.a);d.identifier="gobblin",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),s._stack.push(new p.Saturation({saturation:.9})),s}return o(e,t),e}(f.a);d.identifier="k1",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(4),p=(n.n(f),n(5)),d=n(6),v=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new d.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),s._stack.push(new d.SoftColorOverlay({color:new f.Color(40/255,40/255,40/255)})),s}return o(e,t),e}(p.a);v.identifier="k2",e.a=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Saturation({saturation:.5})),s}return o(e,t),e}(f.a);d.identifier="k6",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),s._stack.push(new p.Saturation({saturation:.7})),s}return o(e,t),e}(f.a);d.identifier="kdynamic",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Desaturation({desaturation:.4})),s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),s}return o(e,t),e}(f.a);d.identifier="lenin",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),s}return o(e,t),e}(f.a);d.identifier="lomo",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),s}return o(e,t),e}(f.a);d.identifier="mellow",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(4),p=(n.n(f),n(5)),d=n(6),v=f.Math.ColorMatrix,_=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o))),u=new v(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);s._stack.push(new d.ColorMatrixPrimitive({colorMatrix:u}));var l=new f.Color(.8,.6,.9);return s._stack.push(new d.Gamma({gamma:l})),s}return o(e,t),e}(p.a);_.identifier="metal",e.a=_},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),s._stack.push(new p.Glow),s}return o(e,t),e}(f.a);d.identifier="morning",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),s._stack.push(new p.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),s._stack.push(new p.Desaturation({desaturation:.65})),s}return o(e,t),e}(f.a);d.identifier="orchid",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),s._stack.push(new p.Saturation({saturation:.8})),s._stack.push(new p.Contrast({contrast:1.5})),s}return o(e,t),e}(f.a);d.identifier="pola",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),s._stack.push(new p.Saturation({saturation:.8})),s._stack.push(new p.Contrast({contrast:1.5})),s}return o(e,t),e}(f.a);d.identifier="pola669",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.Desaturation({desaturation:.65})),s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),s}return o(e,t),e}(f.a);d.identifier="quozi",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),s._stack.push(new p.Glow),s}return o(e,t),e}(f.a);d.identifier="semired",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),s._stack.push(new p.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),s}return o(e,t),e}(f.a);d.identifier="sunny",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),s}return o(e,t),e}(f.a);d.identifier="texas",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(5),p=n(6),d=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._stack.push(new p.X400),s}return o(e,t),e}(f.a);d.identifier="x400",e.a=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(4),p=(n.n(f),n(5)),d=n(6),v=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o)));return s._lutPrimitive=new d.LookupTableImage({image:s._options.image}),s._stack.push(s._lutPrimitive),s}return o(e,t),e}(p.a);v.prototype.availableOptions={image:{type:f.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},v.identifier="lut",e.a=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=l()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(s.a?s()(t,e):t.__proto__=e)}var a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),h=n.n(c),f=n(4),p=(n.n(f),n(5)),d=n(6),v=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||h()(e)).call.apply(t,[this].concat(o))),u=s._options,l=u.image,c=u.resolution,f=u.verticalTileCount,p=u.horizontalTileCount;return s._lutPrimitive=new d.ThreeDLookupTableImage({image:l,resolution:c,verticalTileCount:f,horizontalTileCount:p}),s._stack.push(s._lutPrimitive),s}return o(e,t),e}(p.a);v.prototype.availableOptions={image:{type:f.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:f.OptionType.NUMBER,default:128},horizontalTileCount:{type:f.OptionType.NUMBER,default:5},verticalTileCount:{type:f.OptionType.NUMBER,default:5}},v.identifier="3d-lut",e.a=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=y()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(v.a?v()(t,e):t.__proto__=e)}var a=n(25),s=n.n(a),u=n(29),l=n.n(u),c=n(0),h=n.n(c),f=n(7),p=n.n(f),d=n(2),v=n.n(d),_=n(3),y=n.n(_),g=n(1),m=n.n(g),b=n(4),x=n.n(b),w="function"==typeof l.a&&"symbol"==typeof s.a?function(t){return typeof t}:function(t){return t&&"function"==typeof l.a&&t.constructor===l.a&&t!==l.a.prototype?"symbol":typeof t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),h()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){null===e&&(e=Function.prototype);var i=p()(e,n);if(void 0===i){var o=m()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},C=b.Math.Vector2,E=void 0;E=window.Image;var R=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||m()(e)).call.apply(t,[this].concat(o)));return s._colorOverlayFilter=new b.Engine.Filters.ColorOverlayFilter({color:s.getTintColor()}),s._frameContainer=new b.Engine.Container,s._resetSprites(),s._options.frame&&s._createSpritesForFrame(s._options.frame),s}return o(e,t),T(e,[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(t){var e=this;if(!t)return this._disposeSprites();var n=t.imageGroups,r=t.layoutMode;this._layoutMode=r||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(t){void 0!==n[t]&&["start","mid","end"].forEach(function(r){if(void 0!==n[t][r]){var i=n[t][r];"image"in i&&(i=i.image);var o=b.Engine.Texture.fromImage(i),a=new b.Engine.Sprite(o);e._spriteGroups[t][r]=a,e._sprites.push(a),e._frameContainer.addChild(a)}})})}},{key:"_render",value:function(t){var e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new b.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new b.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),b.Promise.resolve(this._renderTexture)}},{key:"_updateSprites",value:function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.getDimensions(),i="vertical-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,l=0,c=void 0,h=void 0;if(o){c=o.getTexture().getDimensions(),h=c.y/c.x,u=Math.floor(this._frameWidth/h);var f=new C(0,n);f.x=i?this._frameWidth:0,o.setPosition(f),o.setHeight(this._frameWidth),o.setWidth(u)}if(s){c=s.getTexture().getDimensions(),h=c.y/c.x,l=Math.floor(this._frameWidth*h);var p=new C(r.x-l,n);p.x-=i?this._frameWidth:0,s.setPosition(p),s.setHeight(this._frameWidth),s.setWidth(l)}if(a){c=a.getTexture().getDimensions(),h=c.y/c.x;var d=new C(u,n),v=r.x-u-l;if(i&&(d.x+=this._frameWidth,v-=2*this._frameWidth),a.setPosition(d),a.setWidth(v),a.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var _=this._frameWidth/h,y=Math.ceil(v/_),g=0;if(-1!==y){var m=Math.round(v/y);a.setWidth(m),g+=m,this._ensureRepeatSpritesExist(y-1,e,a);for(var b=0;b<y-1;b++){m=Math.round((v-g)/(y-b-1));var x=this._repeatSprites[e][b],w=d.clone().add(g,0).floor();x.setPosition(w),x.setWidth(m),x.setHeight(this._frameWidth),g+=m}}}}}},{key:"_ensureRepeatSpritesExist",value:function(t,e,n){var r=this;n.getTexture().setMaxListeners(t+1);var i=this._repeatSprites[e].length;if(t>i)for(var o=t-i,a=0;a<o;a++){var s=new b.Engine.Sprite(n.getTexture());this._repeatSprites[e].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}else if(t<i){var u=this._repeatSprites[e].splice(t);u.forEach(function(t){var e=r._sprites.indexOf(t);-1!==e&&(r._sprites.splice(e,1),r._frameContainer.removeChild(t),t.dispose())})}}},{key:"_updateVerticalSpriteGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.getDimensions(),i="horizontal-inside"===this._layoutMode,o=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,u=0,l=0,c=void 0,h=void 0;if(o){c=o.getTexture().getDimensions(),h=c.y/c.x,u=Math.floor(this._frameWidth*h);var f=new C(n,0);f.y=i?this._frameWidth:0,o.setPosition(f),o.setWidth(this._frameWidth),o.setHeight(u)}if(s){c=s.getTexture().getDimensions(),h=c.y/c.x,l=Math.floor(this._frameWidth*h);var p=new C(n,r.y-l);p.y-=i?this._frameWidth:0,s.setPosition(p),s.setWidth(this._frameWidth),s.setHeight(l)}if(a){c=a.getTexture().getDimensions(),h=c.y/c.x;var d=new C(n,u),v=r.y-u-l;if(i&&(d.y+=this._frameWidth,v-=2*this._frameWidth),a.setPosition(d),a.setHeight(v),a.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var _=this._frameWidth*h,y=Math.ceil(v/_),g=0;if(-1!==y){var m=Math.round(v/y);a.setHeight(m),g+=m,this._ensureRepeatSpritesExist(y-1,e,a);for(var b=0;b<y-1;b++){m=Math.round((v-g)/(y-b-1));var x=this._repeatSprites[e][b],w=d.clone().add(0,g).floor();x.setPosition(w),x.setHeight(m),x.setWidth(this._frameWidth),g+=m}}}}}},{key:"_disposeSprites",value:function(){var t=this;this._sprites.forEach(function(e){t._frameContainer.removeChild(e),e.getTexture().getBaseTexture().dispose(),e.dispose()}),this._resetSprites()}},{key:"dispose",value:function(){k(e.prototype.__proto__||m()(e.prototype),"dispose",this).call(this),this._disposeSprites()}}],[{key:"validateFrame",value:function(t){if(t){var e=t.imageGroups,n=t.layoutMode;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==w(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var r=function(t){var n=e[t],r=n.start,i=n.end,o=n.mid;if(void 0!==e[t]){if("object"!==w(e[t]))throw new Error("Frame: `imageGroups."+t+"` needs to be of type Object.");if(void 0!==r&&!(r instanceof E||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".start` needs to be of type Image.");if(void 0!==o&&!(r instanceof E||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)&&"object"!==(void 0===o?"undefined":w(o)))throw new Error("Frame: `imageGroups."+t+".mid` needs to be of type Image or Object.");if(void 0!==i&&!(i instanceof E||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".end` needs to be of type Image.")}};if(void 0!==n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");r("top"),r("left"),r("right"),r("bottom")}}}]),e}(b.Operation);R.identifier="frame",R.prototype.availableOptions={frame:{type:b.OptionType.OBJECT,validation:R.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t}},alpha:{type:b.OptionType.NUMBER,default:1},tintColor:{type:b.OptionType.COLOR,default:new b.Color(1,1,1,0)},scale:{type:b.OptionType.NUMBER,default:.1}},x.a.Operations.FrameOperation=R,e.a=R},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=n.n(_),g=n(300),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},x=_.Math.Vector2,w=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._lastControlPoint1=s._options.controlPoint1.clone(),s._lastControlPoint2=s._options.controlPoint2.clone(),s._horizontalFilter=new g.a,s._verticalFilter=new g.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new x(.5,.5)),s._verticalFilter.setDelta(new x(-.5,.5)),s._filter=new g.a,s}return o(e,t),m(e,[{key:"rotate",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:e,controlPoint2:n})}},{key:"flip",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({controlPoint1:e,controlPoint2:n})}},{key:"transform",value:function(t){var e=this,n={};["controlPoint1","controlPoint2"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)}),["blurRadius"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.blurRadius,o=r.controlPoint1,a=r.controlPoint2,s={blurRadius:i*n,controlPoint1:o,controlPoint2:a,texSize:e};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"_renderCanvas",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.controlPoint1,o=n.controlPoint2;return this._filter.set({blurRadius:r,controlPoint1:i.clone(),controlPoint2:o.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"dispose",value:function(){b(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}(_.Operation);w.identifier="linear-focus",w.prototype.availableOptions={controlPoint1:{type:_.OptionType.VECTOR2,default:new x(0,.5)},controlPoint2:{type:_.OptionType.VECTOR2,default:new x(1,.5)},blurRadius:{type:_.OptionType.NUMBER,default:.025}},y.a.Operations.LinearFocusOperation=w,e.a=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(55)),_=n.n(v),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=d.Math.Vector2,m=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(301),u._lastBlurRadius=null,u._lastControlPoint1=new g,u._lastControlPoint2=new g,u._blurredRenderTarget=new d.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new d.Engine.CanvasRenderTarget(100,100,1),u}return o(e,t),y(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastControlPoint1.equals(this._options.controlPoint1)&&this._lastControlPoint2.equals(this._options.controlPoint2)&&!i||(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new g(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);_.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new g(t.width,t.height),r=this._options.controlPoint1.clone().multiply(n),i=this._options.controlPoint2.clone().multiply(n),o=e.createLinearGradient(r.x,r.y,i.x,i.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n=e.getContext(),r=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,r.width,r.height),u=s.data,l=o.getImageData(0,0,r.width,r.height).data,c=a.getImageData(0,0,r.width,r.height).data,h=void 0,f=0;f<r.width*r.height*4;f+=4)h=c[f]/255,u[f]=h*u[f]+(1-h)*l[f],u[f+1]=h*u[f+1]+(1-h)*l[f+1],u[f+2]=h*u[f+2]+(1-h)*l[f+2];n.putImageData(s,0,0)}}]),e}(d.Engine.Filter);m.prototype.availableOptions={blurRadius:{type:d.OptionType.NUMBER,default:30,uniformType:d.UniformType.FLOAT},controlPoint1:{type:d.OptionType.VECTOR2,default:new g(0,.5),uniformType:d.UniformType.FLOAT2},controlPoint2:{type:d.OptionType.VECTOR2,default:new g(1,.5),uniformType:d.UniformType.FLOAT2},delta:{type:d.OptionType.VECTOR2,default:new g(1,1),uniformType:d.UniformType.FLOAT2},texSize:{type:d.OptionType.VECTOR2,default:new g(100,100),uniformType:d.UniformType.FLOAT2}},e.a=m},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      _sample.rgb *= _sample.a;\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=n.n(_),g=n(303),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},x=_.Math.Vector2,w=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._lastSize=s._options.size,s._lastGradientSize=s._options.gradientSize,s._horizontalFilter=new g.a,s._verticalFilter=new g.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new x(.5,.5)),s._verticalFilter.setDelta(new x(-.5,.5)),s._filter=new g.a,s}return o(e,t),m(e,[{key:"rotate",value:function(t){var e=this._options.start,n=this._options.end;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({start:e,end:n})}},{key:"flip",value:function(t){var e=this._options.start,n=this._options.end;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({start:e,end:n})}},{key:"transform",value:function(t){var e=this,n={};["start","end"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)}),["blurRadius","size","gradientSize"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options.start.clone(),i=this._options.end.clone(),o=this._options,a=o.blurRadius,s=o.size,u=o.gradientSize,l={blurRadius:a*n,size:s*n,gradientSize:u*n,start:r.clone().multiply(e),end:i.clone().multiply(e),texSize:e};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"_renderCanvas",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.size,o=n.gradientSize,a=n.start,s=n.end;return this._filter.set({blurRadius:r,gradientSize:o,size:i,start:a.clone(),end:s.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"dispose",value:function(){b(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}(_.Operation);w.identifier="mirrored-focus",w.prototype.availableOptions={start:{type:_.OptionType.VECTOR2,default:new x(0,.5)},end:{type:_.OptionType.VECTOR2,default:new x(1,.5)},blurRadius:{type:_.OptionType.NUMBER,default:.025},size:{type:_.OptionType.NUMBER,default:.1},gradientSize:{type:_.OptionType.NUMBER,default:.1}},y.a.Operations.MirroredFocusOperation=w,e.a=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(55)),_=n.n(v),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=d.Math.Vector2,m=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(304),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastStart=new g,u._lastEnd=new g,u._blurredRenderTarget=new d.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new d.Engine.CanvasRenderTarget(100,100,1),u}return o(e,t),y(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!i||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new g(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);_.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),r=new g(t.width,t.height),i=this._options.size*r.min()*n,o=this._options.gradientSize*r.min()*n,a=this._options.start.clone().multiply(r),s=this._options.end.clone().multiply(r),u=s.clone().subtract(a),l=a.clone().add(u.clone().divide(2)),c=u.len(),h=u.clone().divide(c),f=l.clone().add((i+o)*h.y,-(i+o)*h.x),p=l.clone().add(-(i+o)*h.y,(i+o)*h.x),d=e.createLinearGradient(f.x,f.y,p.x,p.y),v=p.clone().subtract(f).len();d.addColorStop(0,"#000000"),d.addColorStop(o/2/v,"#FFFFFF"),d.addColorStop(1-o/2/v,"#FFFFFF"),d.addColorStop(1,"#000000"),e.fillStyle=d,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n=e.getContext(),r=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,r.width,r.height),u=s.data,l=o.getImageData(0,0,r.width,r.height).data,c=a.getImageData(0,0,r.width,r.height).data,h=void 0,f=0;f<r.width*r.height*4;f+=4)h=c[f]/255,u[f]=h*u[f]+(1-h)*l[f],u[f+1]=h*u[f+1]+(1-h)*l[f+1],u[f+2]=h*u[f+2]+(1-h)*l[f+2];n.putImageData(s,0,0)}}]),e}(d.Engine.Filter);m.prototype.availableOptions={blurRadius:{type:d.OptionType.NUMBER,default:30,uniformType:d.UniformType.FLOAT},size:{type:d.OptionType.NUMBER,default:50,uniformType:d.UniformType.FLOAT},gradientSize:{type:d.OptionType.NUMBER,default:50,uniformType:d.UniformType.FLOAT},start:{type:d.OptionType.VECTOR2,default:new g(0,.5),uniformType:d.UniformType.FLOAT2},end:{type:d.OptionType.VECTOR2,default:new g(1,.5),uniformType:d.UniformType.FLOAT2},delta:{type:d.OptionType.VECTOR2,default:new g(1,1),uniformType:d.UniformType.FLOAT2},texSize:{type:d.OptionType.VECTOR2,default:new g(100,100),uniformType:d.UniformType.FLOAT2}},e.a=m},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=n.n(d),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=d.Math.Vector2,g=function(t){function e(){return r(this,e),i(this,(e.__proto__||p()(e)).apply(this,arguments))}return o(e,t),_(e,[{key:"_render",value:function(t){var e=this._options.rotation%360,n=e*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var r=this._sprite.getBounds();return this._renderTexture.resizeTo(new y(r.width,r.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),d.Promise.resolve()}},{key:"getNewDimensions",value:function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t}},{key:"flip",value:function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}]),e}(d.Operation);g.identifier="orientation",g.prototype.availableOptions={rotation:{type:d.OptionType.NUMBER,default:0,validation:function(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:d.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:d.OptionType.BOOLEAN,default:!1}},v.a.Operations.OrientationOperation=g,e.a=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=v()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(p.a?p()(t,e):t.__proto__=e)}var a=n(52),s=n.n(a),u=n(0),l=n.n(u),c=n(7),h=n.n(c),f=n(2),p=n.n(f),d=n(3),v=n.n(d),_=n(1),y=n.n(_),g=n(4),m=n.n(g),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),x=function t(e,n,r){null===e&&(e=Function.prototype);var i=h()(e,n);if(void 0===i){var o=y()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},w=g.Engine.Filters.OverlayFilter,T=g.Math.Vector2,k=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||y()(e)).call.apply(t,[this].concat(o)));return s._overlayTexture=g.Engine.Texture.fromImage(s._options.image),s._overlayContainer=new g.Engine.Container,s._overlaySprite=new g.Engine.Sprite,s._overlaySprite.setTexture(s._overlayTexture),s._overlaySprite.setAnchor(0,0),s._overlayContainer.addChild(s._overlaySprite),s._overlayFilter=new g.Engine.Filters.OverlayFilter({overlayImage:s._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:s._overlayTexture}),s._sprite.setFilters([s._overlayFilter]),s._renderedOverlaySprite=new g.Engine.Sprite,s._renderedOverlayContainer=new g.Engine.Container,s._renderedOverlayContainer.addChild(s._renderedOverlaySprite),s._overlayRendered=!1,s._lastInputDimensions=new T(0,0),s}return o(e,t),b(e,[{key:"setOption",value:function(t,n){if(x(e.prototype.__proto__||y()(e.prototype),"setOption",this).call(this,t,n),"image"===t&&n&&this._sdk){var r=this._sdk.getRenderer(),i=this._overlayTexture.getBaseTexture();i.setSource(n),r.isOfType(g.RendererType.WEBGL)&&r.updateTexture(i),this._overlayRendered=!1}}},{key:"_render",value:function(t){var e=t.getDimensions(),n=this._options,r=n.image,i=n.alpha,o=n.blendMode;return r?(this._overlayRendered&&this._lastInputDimensions.equals(e)||(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),g.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),g.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(t){var e=this._sdk.getRenderer(),n=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new g.Engine.RenderTexture(e,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var r=this._options.image,i=r.width,o=r.height,a=g.Utils.resizeVectorToFill(new T(i,o),n);this._overlaySprite.setWidth(a.x),this._overlaySprite.setHeight(a.y);var s=this._overlayRenderTexture.getBaseTexture();e.isOfType(g.RendererType.WEBGL)&&(s.setGLUnit(4),e.updateTexture(s,!1)),this._overlayRenderTexture.resizeTo(n),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){x(e.prototype.__proto__||y()(e.prototype),"dispose",this).call(this),this._overlaySprite.dispose()}}]),e}(g.Operation);k.identifier="overlay",k.BLEND_MODES=w.BLEND_MODES,k.prototype.availableOptions={identifier:{type:g.OptionType.STRING},image:{type:g.OptionType.IMAGE},blendMode:{type:g.OptionType.NUMBER,default:w.BLEND_MODES.MULTIPLY,available:s()(w.BLEND_MODES).map(function(t){return w.BLEND_MODES[t]})},alpha:{type:g.OptionType.NUMBER,default:1}},m.a.Operations.OverlayOperation=k,e.a=k},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=n.n(_),g=n(308),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},x=_.Math.Vector2,w=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._lastBlurRadius=s._options.blurRadius,s._lastGradientRadius=s._options.gradientRadius,s._horizontalFilter=new g.a,s._verticalFilter=new g.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new x(.5,.5)),s._verticalFilter.setDelta(new x(-.5,.5)),s._filter=new g.a,s}return o(e,t),m(e,[{key:"rotate",value:function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})}},{key:"flip",value:function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})}},{key:"transform",value:function(t){var e=this,n={},r=this.getPosition();n.position=t.applyToRelativePoint(r),["radius","blurRadius","gradientRadius"].forEach(function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.position,o=r.blurRadius,a=r.radius,s=r.gradientRadius,u={blurRadius:o*n,radius:a*n,gradientRadius:s*n,position:i.clone().multiply(e),texSize:e};return this._horizontalFilter.set(u),this._verticalFilter.set(u),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"_renderCanvas",value:function(t){var e=this._options,n=e.blurRadius,r=e.radius,i=e.gradientRadius,o=e.position,a=t.getDimensions();return this._filter.set({blurRadius:n,radius:r,gradientRadius:i,position:o,texSize:a}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"dispose",value:function(){b(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}(_.Operation);w.identifier="radial-focus",w.prototype.availableOptions={position:{type:_.OptionType.VECTOR2,default:new x(.5,.5)},radius:{type:_.OptionType.NUMBER,default:.25},gradientRadius:{type:_.OptionType.NUMBER,default:.125},blurRadius:{type:_.OptionType.NUMBER,default:.025}},y.a.Operations.RadialFocusOperation=w,e.a=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(55)),_=n.n(v),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=d.Math.Vector2,m=function(t){function e(){var t;r(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=i(this,(t=e.__proto__||p()(e)).call.apply(t,[this].concat(a)));return u._fragmentSource=n(309),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastPosition=new g,u._blurredRenderTarget=new d.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new d.Engine.CanvasRenderTarget(100,100,1),u}return o(e,t),y(e,[{key:"_applyCanvas",value:function(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastPosition.equals(this._options.position)&&this._lastGradientRadius===this._options.gradientRadius&&!i||(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_blurImage",value:function(t){var e=t.getCanvas(),n=t.getContext(),r=new g(e.width,e.height),i=n.getImageData(0,0,e.width,e.height);_.a.stackBlurCanvasRGBA(i,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(i,0,0)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new g(t.width,t.height),r=this._maskRenderTarget.getPixelRatio(),i=this._options.position.clone().multiply(n),o=this._options,a=o.radius,s=o.gradientRadius;a*=t.height,s*=t.height;var u=e.createRadialGradient(i.x,i.y,0,i.x,i.y,(a+s)*r);u.addColorStop(0,"#FFFFFF"),u.addColorStop(a/(a+s),"#FFFFFF"),u.addColorStop(1,"#000000"),e.fillStyle=u,e.fillRect(0,0,n.x,n.y)}},{key:"_applyMask",value:function(t,e){for(var n=e.getContext(),r=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,r.width,r.height),u=s.data,l=o.getImageData(0,0,r.width,r.height).data,c=a.getImageData(0,0,r.width,r.height).data,h=void 0,f=0;f<r.width*r.height*4;f+=4)h=c[f]/255,u[f]=h*u[f]+(1-h)*l[f],u[f+1]=h*u[f+1]+(1-h)*l[f+1],u[f+2]=h*u[f+2]+(1-h)*l[f+2];n.putImageData(s,0,0)}}]),e}(d.Engine.Filter);m.prototype.availableOptions={blurRadius:{type:d.OptionType.NUMBER,default:30,uniformType:d.UniformType.FLOAT},radius:{type:d.OptionType.NUMBER,default:50,uniformType:d.UniformType.FLOAT},gradientRadius:{type:d.OptionType.NUMBER,default:25,uniformType:d.UniformType.FLOAT},position:{type:d.OptionType.VECTOR2,default:new g(.5,.5),uniformType:d.UniformType.FLOAT2},delta:{type:d.OptionType.VECTOR2,default:new g(1,1),uniformType:d.UniformType.FLOAT2},texSize:{type:d.OptionType.VECTOR2,default:new g(100,100),uniformType:d.UniformType.FLOAT2}},e.a=m},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=n.n(_),g=n(124),m=n(121),b=n(314),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),w=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},T=_.Math.Vector2,k=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o))),u=s._sdk.getRenderer();s._lastBlurRadius=null,s._blurredRenderTexture=new _.Engine.RenderTexture(u,100,100,1),s._maskRenderTexture=new _.Engine.RenderTexture(u,100,100,1),s._brushSprite=new g.a(s),s._brushSpriteContainer=new _.Engine.Container;var l=s._brushSprite.getDisplayObject();if(s._brushSpriteContainer.addChild(l),s._outputSprite=new _.Engine.Sprite,s._outputContainer=new _.Engine.Container,s._outputContainer.addChild(s._outputSprite),s._maskFilter=new b.a,u.isOfType(_.RendererType.WEBGL)){s._horizontalFilter=new m.a,s._verticalFilter=new m.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new T(1,1)),s._verticalFilter.setDelta(new T(-1,1));var c=s._maskRenderTexture.getBaseTexture();c.setGLUnit(s._maskFilter.getMaskImage()),u.updateTexture(c,!1),c=s._blurredRenderTexture.getBaseTexture(),c.setGLUnit(s._maskFilter.getFilterImage()),u.updateTexture(c,!1)}else u.isOfType(_.RendererType.CANVAS)&&(s._blurFilter=new m.a,s._sprite.setFilters([s._blurFilter]),s._maskFilter.setMaskCanvas(s._maskRenderTexture.getRenderTarget().getCanvas()),s._maskFilter.setFilterCanvas(s._blurredRenderTexture.getRenderTarget().getCanvas()));return s._outputSprite.setFilters([s._maskFilter]),s}return o(e,t),x(e,[{key:"flip",value:function(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),_.Promise.resolve()}},{key:"_renderMask",value:function(t){var e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(_.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType(_.RendererType.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(e)||this._blurredRenderTexture.resizeTo(e);var r=this._options.blurRadius;if(this._lastBlurRadius!==r||!n.equals(e)){var i=this._sdk.getRenderer(),o=void 0;if(i.isOfType(_.RendererType.WEBGL)){o={blurRadius:r*e.min(),texSize:e},this._horizontalFilter.set(o),this._verticalFilter.set(o)}else i.isOfType(_.RendererType.CANVAS)&&(o={blurRadius:r},this._blurFilter.set(o));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=r}}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new g.a.Brushes.RadialBrush({size:t,hardness:e,color:_.Color.WHITE}),r=this._brushSprite.createPath(n);return this._options.paths.push(r),this.setDirty(!0),r}},{key:"setDirtyForRenderer",value:function(t,n,r){w(e.prototype.__proto__||v()(e.prototype),"setDirtyForRenderer",this).call(this,t,n,r),this._brushSprite.setDirtyForRenderer(t,n,r)}},{key:"dispose",value:function(){w(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(_.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}]),e}(_.Operation);k.identifier="selective-blur",k.prototype.availableOptions={blurRadius:{type:_.OptionType.NUMBER,default:.05},paths:{type:_.OptionType.ARRAY,default:[],setter:function(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},y.a.Operations.SelectiveBlurOperation=k,e.a=k},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(312)),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},b=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||v()(e)).call(this,n));return a._operation=t,a._canvas=o||_.Utils.createCanvas(),a._context=a._canvas.getContext("2d"),a}return o(e,t),g(e,[{key:"serializeOption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===t?this._options.controlPoints.map(function(t){var e=t.getPosition();return n?e.toObject():e.clone()}):m(e.prototype.__proto__||v()(e.prototype),"serializeOption",this).call(this,t,n)}},{key:"_optionEquals",value:function(t,n){if("controlPoints"===t){for(var r=this._options.controlPoints,i=0,o=r.length;i<o;i++)if(!r[i].getPosition().equals(n[i]))return!1;return!0}return m(e.prototype.__proto__||v()(e.prototype),"_optionEquals",this).call(this,t,n)}},{key:"render",value:function(t){var e=this._options,n=e.controlPoints,r=e.size;if(!(n.length<2)){_.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushSize===r&&t.equals(this._brushInputDimensions)||(this._brushInputDimensions=t.clone(),this._lastBrushSize=r);for(var i=n[0],o=i,a=1;a<n.length;a++)o=n[a],o.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,i),i=o}}},{key:"_createBrush",value:function(t){var e=this._options,n=e.size,r=e.hardness,i=e.color,o=_.Utils.createCanvas();o.width=o.height=Math.ceil(n*t.min());var a=o.getContext("2d");if(i=i.clone(),i.a=1,1===o.width)a.fillStyle=i.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);s.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return o}},{key:"addControlPoint",value:function(t){var e=new y.a(this,t);this._options.controlPoints.push(e),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(t){this._canvas=t,this._context=t.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(t){t.setDirty()})}},{key:"forEachControlPoint",value:function(t){this._options.controlPoints.forEach(t)}},{key:"renderToCanvas",value:function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}]),e}(_.Configurable);b.prototype.availableOptions={id:{type:_.OptionType.STRING,default:function(){return _.Utils.getUUID()}},brush:{type:_.OptionType.OBJECT,required:!0},controlPoints:{type:_.OptionType.ARRAY,default:[]},closed:{type:_.OptionType.BOOLEAN,default:!1}},e.a=b},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(4),s=(n.n(a),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),u=a.Math.Vector2,l=function(){function t(e,n){r(this,t),this._path=e,this._drawnCanvases=[],this._position=n}return s(t,[{key:"renderToCanvas",value:function(t,e,n){if(-1===this._drawnCanvases.indexOf(e)){for(var r=new u(e.width,e.height),i=e.getContext("2d"),o=this._position.clone().multiply(r),a=n.getPosition().clone().multiply(r),s=o.clone().subtract(a).len(),l=t.width/10,c=0;c<=s;){var h=Math.max(0,Math.min(1,c/s)),f=a.x+(o.x-a.x)*h,p=a.y+(o.y-a.y)*h;i.drawImage(t,f-t.width/2,p-t.height/2,t.width,t.height),c+=l}this._drawnCanvases.push(e)}}},{key:"setPosition",value:function(t){this._position=t}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),n(125)),_=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){return r(this,e),i(this,(e.__proto__||p()(e)).apply(this,arguments))}return o(e,t),_(e,[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.size,r=e.hardness,i=e.color,o=d.Utils.createCanvas();o.width=o.height=Math.ceil(n*t.min());var a=o.getContext("2d");if(i=i.clone(),i.a=1,1===o.width)a.fillStyle=i.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);s.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=t.clone(),o}}]),e}(v.a);e.a=y,y.identifier="imgly_brush_radial",y.prototype.availableOptions=d.Utils.extend(v.a.prototype.availableOptions,{hardness:{type:d.OptionType.NUMBER,default:1}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),_=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||p()(e)).call(this));return t._fragmentSource=n(315),t}return o(e,t),v(e,[{key:"_applyCanvas",value:function(t,e,n){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),o=n.getContext(),a=this._options,s=a.maskCanvas,u=a.filterCanvas,l=s.getContext("2d"),c=u.getContext("2d"),h=l.getImageData(0,0,r.width,r.height).data,f=i.getImageData(0,0,r.width,r.height),p=f.data,d=c.getImageData(0,0,r.width,r.height).data,v=void 0,_=0;_<r.width*r.height*4;_+=4)v=h[_]/255,p[_]=v*d[_]+(1-v)*p[_],p[_+1]=v*d[_+1]+(1-v)*p[_+1],p[_+2]=v*d[_+2]+(1-v)*p[_+2];o.putImageData(f,0,0)}}]),e}(d.Engine.Filter);_.prototype.availableOptions={maskImage:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.INT},maskCanvas:{type:d.OptionType.OBJECT,default:null},filterImage:{type:d.OptionType.NUMBER,default:2,uniformType:d.UniformType.INT},filterCanvas:{type:d.OptionType.OBJECT,default:null}},e.a=_},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=v()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(p.a?p()(t,e):t.__proto__=e)}var a=n(75),s=n.n(a),u=n(0),l=n.n(u),c=n(7),h=n.n(c),f=n(2),p=n.n(f),d=n(3),v=n.n(d),_=n(1),y=n.n(_),g=n(4),m=n.n(g),b=n(56),x=n(317),w=n(318),T=n(124),k=s.a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),l()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),E=function t(e,n,r){null===e&&(e=Function.prototype);var i=h()(e,n);if(void 0===i){var o=y()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},R=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||y()(e)).call.apply(t,[this].concat(o)));return s._onSpriteUpdate=s._onSpriteUpdate.bind(s),s._options.sprites.slice().forEach(function(t){s.removeSprite(t),s.addSprite(t)}),s}return o(e,t),C(e,[{key:"getSpritesOfType",value:function(t){return this._options.sprites.filter(function(e){return e instanceof t})}},{key:"rotate",value:function(t){this._options.sprites.forEach(function(e){e.applyRotation(t)})}},{key:"flip",value:function(t){this._options.sprites.forEach(function(e){e.applyFlip(t)})}},{key:"_onSpriteUpdate",value:function(t,e){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(t,e){this._options.sprites.forEach(function(n){return n.applyRotation(t,e)})}},{key:"transform",value:function(t){this._options.sprites.forEach(function(e){return e.applyTransform(t)})}},{key:"scale",value:function(t){this._options.sprites.forEach(function(e){return e.applyScale(t)})}},{key:"serializeOption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===t?this._options.sprites.map(function(t){return t.serializeOptions(void 0,n)}):E(e.prototype.__proto__||y()(e.prototype),"serializeOption",this).call(this,t,n)}},{key:"createSticker",value:function(t){return new x.a(this,t)}},{key:"createText",value:function(t){return new w.a(this,t)}},{key:"createBrush",value:function(t){return new T.a(this,t)}},{key:"addSprite",value:function(t){this._options.sprites.push(t),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(t){var e=this._options.sprites,n=e.indexOf(t);return-1!==n&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(n,1),this.setDirty(!0),!0)}},{key:"_render",value:function(t){var e=this,n=this._container,r=this._options.sprites,i=t.getDimensions().clone().floor();return g.Promise.all(r.map(function(t){return t.validateSettings()})).then(function(){r.forEach(function(t){return t.update(e._sdk,i)})}).then(function(){e._renderTexture.clear(),e._renderTexture.render(n)})}},{key:"takeSpriteToFront",value:function(t){var e=this._options.sprites,n=e.indexOf(t);if(-1!==n){g.Utils.moveArrayItem(e,n,e.length-1);var r=t.getDisplayObject();this._container.removeChild(r),this._container.addChild(r),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(t,e){var n=this,r=[];this._options.sprites.forEach(function(t){return t.update(n._sdk,e)});var i=this._sdk.getSprite(),o=i.getWorldTransform().applyInverseToVector(t),a=i.getTexture().getFrame(),s=a.width,u=a.height,l=i.getAnchor().clone().multiply(-s,-u);o.subtract(l);for(var c=this._options.sprites.slice(0).reverse(),h=0,f=c.length;h<f;h++){var p=c[h];p.getHitTestDisplayObject().isAtPosition(o)&&r.push(p)}return r}},{key:"setDirtyForRenderer",value:function(t,n,r){E(e.prototype.__proto__||y()(e.prototype),"setDirtyForRenderer",this).call(this,t,n,r),this._options.sprites.forEach(function(e){e.setDirtyForRenderer(t,n,r)})}},{key:"dispose",value:function(){E(e.prototype.__proto__||y()(e.prototype),"dispose",this).call(this),this._options.sprites.forEach(function(t){t.dispose()})}}]),e}(g.Operation);R.StickerSprite=x.a,R.TextSprite=w.a,R.BrushSprite=T.a,R.identifier="sprite",R.prototype.availableOptions={sprites:{type:g.OptionType.ARRAY,default:[],setter:function(t,e){var n=this;if(t=t.map(function(t,e){if(t instanceof b.a)return t;var r=k({},t);switch(delete r.type,t.type){case"text":return new w.a(n,r);case"sticker":return new x.a(n,r);case"brush":return new T.a(n,r);default:g.Log.error(n.constructor.name,"Invalid sprite type: "+t.type)}}),!e){if(this._options.sprites){this._options.sprites.slice().forEach(function(t){t.dispose(),n.removeSprite(t)})}t.forEach(function(t){n.addSprite(t)})}return t}}},m.a.Operations.SpriteOperation=R,e.a=R},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(56)),g=n(120),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},x=_.Math.Vector2,w=_.Math.ColorMatrix,T=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o))),u=s._options.image,l=u.src||u.filePath;return s._isSVG=l&&!!l.match(/\w+\.svg(?=\?|$)/i),s._isSVG&&(s._canvas=_.Utils.createCanvas(),s._context=s._canvas.getContext("2d")),u&&s._onImageUpdate(),s._tintFilter=new _.Engine.Filters.TintFilter,s._adjustmentsFilter=new g.a,s._lastRenderedDimensions=x.NULL,s._lastRenderedInputDimensions=x.NULL,s._onOptionsChange=s._onOptionsChange.bind(s),s._options.adjustments.on("update",s._onOptionsChange),s}return o(e,t),m(e,[{key:"applyScale",value:function(t){this.setDimensions(this.getDimensions().multiply(t))}},{key:"serializeOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=b(e.prototype.__proto__||v()(e.prototype),"serializeOptions",this).call(this,t,n);return t||(r.type="sticker"),r}},{key:"_rendersToRenderTexture",value:function(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(_.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(t,e){var n=this._options,r=n.dimensions,i=n.image;if(r.equals(x.NULL)&&r.set(i.width,i.height),(!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==i)&&this._isSVG&&t.getRenderer().isOfType(_.RendererType.WEBGL)){var o=t.getOutputDimensions();if(r.x>o.x||r.y>o.y){var a=_.Utils.resizeVectorToFit(r,o);i.width=a.x,i.height=a.y}else i.width=r.x,i.height=r.y;this._canvas.width=i.width,this._canvas.height=i.height,this._context.clearRect(0,0,i.width,i.height),this._context.drawImage(i,0,0,i.width,i.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);var s=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){s.push(this._adjustmentsFilter);var u=this._options.adjustments,l=new w;l.multiply(w.createBrightnessMatrix(u.getBrightness())),l.multiply(w.createSaturationMatrix(u.getSaturation())),l.multiply(w.createContrastMatrix(u.getContrast())),this._adjustmentsFilter.set({colorMatrix:l})}this._options.tintMode&&"none"!==this._options.tintMode&&(s.push(this._tintFilter),this._tintFilter.set({mode:_.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(s)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=i}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale();this._options.flipVertically&&(t.y*=-1),this._options.flipHorizontally&&(t.x*=-1),this._sprite.setScale(t)}},{key:"applyFlip",value:function(t){b(e.prototype.__proto__||v()(e.prototype),"applyFlip",this).call(this,t);var n={rotation:this._options.rotation},r=n.rotation/Math.PI*180,i=-1*r;switch(n.rotation=i*Math.PI/180,t){case"horizontal":n.flipHorizontally=!this._options.flipHorizontally,this.set(n);break;case"vertical":n.flipVertically=!this._options.flipVertically,this.set(n)}}},{key:"_hasAdjustments",value:function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()}},{key:"_onImageUpdate",value:function(){var t=this._options.image,e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(_.RendererType.WEBGL)&&(t=this._canvas),this._inputTexture=_.Engine.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"setOption",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b(e.prototype.__proto__||v()(e.prototype),"setOption",this).call(this,t,n,r),"image"===t&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var t=this._dirtiness;for(var e in t)t[e]=!0}},{key:"dispose",value:function(){b(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)}}]),e}(y.a);T.prototype.availableOptions={id:{type:_.OptionType.STRING,default:function(){return _.Utils.getUUID()}},identifier:{type:_.OptionType.STRING,default:""},image:{type:_.OptionType.IMAGE,required:!0},position:{type:_.OptionType.VECTOR2,default:x.NULL},dimensions:{type:_.OptionType.VECTOR2,default:x.NULL},anchor:{type:_.OptionType.VECTOR2,default:new x(0,0)},pivot:{type:_.OptionType.VECTOR2,default:new x(.5,.5)},rotation:{type:_.OptionType.NUMBER,default:0},flipHorizontally:{type:_.OptionType.BOOLEAN,default:!1},flipVertically:{type:_.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:_.OptionType.BOOLEAN,default:!1},tintColor:{type:_.OptionType.COLOR,default:_.Color.WHITE},tintMode:{type:_.OptionType.STRING,default:"none",available:["none","solid","colorized"]},alpha:{type:_.OptionType.NUMBER,default:1},adjustments:{type:_.OptionType.CONFIGURABLE,structure:{brightness:{type:_.OptionType.NUMBER,default:0},saturation:{type:_.OptionType.NUMBER,default:1},contrast:{type:_.OptionType.NUMBER,default:1}}}},T.type="sticker",e.a=T},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=(n.n(_),n(56)),g=n(319),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),b=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},x=_.Math.Vector2,w=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._textRenderer=new g.a(s,s._operation),s._textRenderer.rotation=s.getRotation(),s._sprite.setTexture(s._textRenderer.getFinalTexture()),s._hitTestSprite.setTexture(s._textRenderer.getTexture()),s}return o(e,t),m(e,[{key:"serializeOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=b(e.prototype.__proto__||v()(e.prototype),"serializeOptions",this).call(this,t,n);return t||(r.type="text"),r}},{key:"getDOMStyle",value:function(t,e){var n=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:n+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(t){var e=this.getFontSize()*t.y,n=this.getTextMetrics();if(n){var r=1/n.unitsPerEm*e,i=n.ascender*r,o=n.descender*r;return i+Math.abs(o)}return e*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(t,e){return this._textRenderer.getDimensions(t,e)}},{key:"applyFlip",value:function(t){b(e.prototype.__proto__||v()(e.prototype),"applyFlip",this).call(this,t);var n=this._options.rotation;switch(t){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}}},{key:"applyTransform",value:function(t){b(e.prototype.__proto__||v()(e.prototype),"applyTransform",this).call(this,t),this.set({fontSize:t.scaleSize(this.getFontSize(),"y"),maxWidth:t.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(t){b(e.prototype.__proto__||v()(e.prototype),"applyRotation",this).call(this,t);var n=(t+360)%360,r=this._operation.getInputDimensions();90!==n&&270!==n||(this.setMaxWidth(this.getMaxWidth()/r.x*r.y),this.setFontSize(this.getFontSize()/r.y*r.x))}},{key:"setOption",value:function(t,n){if("rotation"===t)return this._options.rotation=n,this._textRenderer&&(this._textRenderer.rotation=n),this._rotation=n,void this.emit("update");b(e.prototype.__proto__||v()(e.prototype),"setOption",this).call(this,t,n)}},{key:"getOption",value:function(t){return"rotation"===t?this._rotation:b(e.prototype.__proto__||v()(e.prototype),"getOption",this).call(this,t)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(t,n){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(t,n);var r=this._textRenderer.getFinalTexture();r.getBaseTexture().update();var i=t.getRenderer();i.isOfType(_.RendererType.WEBGL)&&i.updateTexture(r.getBaseTexture()),b(e.prototype.__proto__||v()(e.prototype),"update",this).call(this,t,n),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()}}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){b(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._textRenderer.dispose()}}]),e}(y.a);w.prototype.availableOptions={id:{type:_.OptionType.STRING,default:function(){return _.Utils.getUUID()}},fontSize:{type:_.OptionType.NUMBER,default:.1},characterSpacing:{type:_.OptionType.NUMBER,default:0},lineHeight:{type:_.OptionType.NUMBER,default:1.1},fontIdentifier:{type:_.OptionType.STRING},fontFamily:{type:_.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:_.OptionType.ALL,default:"normal"},fontStyle:{type:_.OptionType.STRING,default:"normal"},textMetrics:{type:_.OptionType.OBJECT,default:null},outlineWidth:{type:_.OptionType.NUMBER,default:0},outlineColor:{type:_.OptionType.COLOR,default:_.Color.BLACK},alignment:{type:_.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:_.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:_.OptionType.COLOR,default:new _.Color(1,0,0,1)},backgroundColor:{type:_.OptionType.COLOR,default:_.Color.TRANSPARENT},position:{type:_.OptionType.VECTOR2,default:new x(.5,.5)},anchor:{type:_.OptionType.VECTOR2,default:new x(0,0)},pivot:{type:_.OptionType.VECTOR2,default:new x(.5,.5)},rotation:{type:_.OptionType.NUMBER,default:0},text:{type:_.OptionType.STRING,required:!0},maxWidth:{type:_.OptionType.NUMBER,default:.5},maxHeight:{type:_.OptionType.NUMBER,default:0},visible:{type:_.OptionType.BOOLEAN,default:!0}},w.type="text",e.a=w},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(4),s=(n.n(a),n(320)),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=a.Math.Vector2,c=function(){function t(e,n){r(this,t),this._text=e,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return u(t,[{key:"_createCanvas",value:function(){this._canvas=a.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new s.a(this._context),this._finalCanvas=a.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=a.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=a.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(t,e){e.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+t.fontSize+'px "'+this._text.getFontFamily()+'"',e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(e.lineWidth=n)}},{key:"_buildOutputLines",value:function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(t,e){var n=this._text.getAlignment(),r=new l(0,e);switch(n){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,r.x,r.y))}},{key:"update",value:function(t,e){var n=this.calculateFontStyles(t,e);if(n){var r=this._calculateText(t,n,e),i=r.dimensions,o=r.lines;this._renderText(t,i,o,n,e),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var t=this._canvas,e=t.width,n=t.height,r=this.rotation,i=Math.cos(r),o=Math.sin(r),a=new l(Math.abs(e*i)+Math.abs(n*o),Math.abs(e*o)+Math.abs(n*i));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(r),this._finalContext.drawImage(this._canvas,-e/2,-n/2),this._finalContext.restore()}},{key:"_renderText",value:function(t,e,n,r,i){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*i.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(r,this._context);for(var o=0;o<n.length;o++){var a=n[o];this._renderTextLine(a,r.topPadding+r.lineHeight*o)}}},{key:"calculateFontStyles",value:function(t,e){var n=this._text.getFontFamily(),r=this._text.getFontSize()*e.y,i=this._text.getAbsoluteTextHeight(e),o=i*this._text.getLineHeight(),a=i*(this._text.getLineHeight()-1)/2,s={fontFamily:n,fontSize:r,lineHeight:o,topPadding:a};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===r&&this._textOptions.lineHeight===o||(this._textOptions=s),s}},{key:"_calculateText",value:function(t,e,n){var r=this._text.getMaxWidth()*n.x;this._applyTextOptions(e,this._context);var i=new l,o=this._text.getText().split("\n");if(void 0!==r)i.x=r,o=this._buildOutputLines(r);else for(var a=0;a<o.length;a++){var s=o[a];i.x=Math.max(i.x,this._context.measureText(s).width)}var u=e.lineHeight;return i.y=o.length*u,{dimensions:i,lines:o}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(t,e){var n=this.calculateFontStyles(t,e);return this._calculateText(t,n,e).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture.getBaseTexture().dispose(),this._texture=null,this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null}}]),t}();e.a=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e){r(this,t),this._context=e,this._lastFontStyle={}}return a(t,[{key:"getLines",value:function(){for(var t=this,e=[],n=[],r=this._lines.length,i=0;i<r;i++){for(var o=this._lines[i],a=this._buildWords(o),s=a.length,u=0;u<s;u++){var l=a[u],c=n.concat(l).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){n.length>0&&(e.push(n.join("")),n=[l]);var h=l.replace(/\s+$/i,"");if(this._getWidth(h)>this._maxWidth){var f=this._splitWord(l);e=e.concat(f.lines),f.rest&&(n=[f.rest])}}else n.push(l)}e.push(n.join("")),n=[]}return e.map(function(e){return t._trimLine(e,t._context.textAlign)})}},{key:"_trimLine",value:function(t,e){return t}},{key:"_buildWords",value:function(t){for(var e=[],n="",r=t.length,i=0;i<r;i++){var o=t[i];n+=o," "!==o&&"-"!==o&&i!==r-1||(e.push(n),n="")}return e}},{key:"_splitWord",value:function(t){for(var e={lines:[],rest:null},n=t.length,r=[],i=0;i<n;i++){var o=t[i];this._getWidth(r.concat(o).join(""))>this._maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),i===n-1&&r.length>0&&(e.rest=r.join(""))}return e}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(t){return this._context.measureText(t).width}},{key:"setText",value:function(t){this._text=t,this._lines=t.split("\n")}},{key:"setMaxWidth",value:function(t){this._maxWidth=t}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=h()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(l.a?l()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),h=n.n(c),f=n(1),p=n.n(f),d=n(4),v=n.n(d),_=n(322),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=d.Math.Vector2,m=function(t){function e(){return r(this,e),i(this,(e.__proto__||p()(e)).apply(this,arguments))}return o(e,t),y(e,[{key:"_render",value:function(t){this._sprite.setRotation(0);var e=t.getDimensions(),n=this._options,r=n.start,i=n.end,o=n.rotation,a=n.textureScale,s=r.clone().add(i.clone().subtract(r).divide(2)),u=this.calculateScale(),l=u*a,c=this.getNewDimensions(e);return this._sprite.setAnchor(s),this._sprite.setRotation(o),this._sprite.setScale(l,l),this._sprite.setPosition(c.clone().multiply(.5)),this._renderTexture.render(this._container),d.Promise.resolve()}},{key:"calculateScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),n=new g(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),r=e.clone().multiply(.5);r.subtract(n.clone().divide(2)),r.abs();return r.y>r.x?2*r.y/e.y+1:2*r.x/e.x+1}},{key:"getNewDimensions",value:function(t){var e=this._options,n=e.start,r=e.end,i=e.textureScale,o=this.calculateScale();return t.clone().multiply(i*o).multiply(r.clone().subtract(n)).round()}},{key:"flip",value:function(t){var e=this._options,n=e.start,r=e.end,i=n.clone();"horizontal"===t?(n.set(1-r.x,n.y),r.set(1-i.x,r.y)):"vertical"===t&&(n.set(n.x,1-r.y),r.set(r.x,1-i.y))}},{key:"rotate",value:function(t){for(var e=this._options,n=e.start,r=e.end,i=(t+360)%360,o=Math.floor(i/90),a=0;a<o;a++){var s=n.clone();n.set(1-r.y,s.x),r.set(1-s.y,r.x)}}}]),e}(d.Operation);m.identifier="transform",m.prototype.availableOptions={start:{type:d.OptionType.VECTOR2,default:new g(0,0)},end:{type:d.OptionType.VECTOR2,default:new g(1,1)},textureScale:{type:d.OptionType.NUMBER,default:1},rotation:{type:d.OptionType.NUMBER,default:0}},m.TransformChange=_.a,v.a.Operations.TransformOperation=m,e.a=m},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(0),o=n.n(i),a=n(4),s=(n.n(a),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),u=a.Math.Vector2,l=function(){function t(e,n){r(this,t),this._operation=e,this._options=n,this._inputDimensions=this._operation.getInputDimensions(!1),this._rotationDelta=n.rotation-this._operation.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._operation.getEnd().clone().subtract(this._operation.getStart()).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._operation.getStart().clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=this._operation.calculateScale(n.rotation)/this._operation.calculateScale(),this._absoluteStart=this._operation.getStart().clone().multiply(this._inputDimensions),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/this._operation.getTextureScale()}return s(t,[{key:"applyToRelativePoint",value:function(t){var e=this._operation.getStart(),n=this._operation.getEnd(),r=e.clone().add(n.clone().subtract(e).divide(2)),i=r.multiply(this._inputDimensions),o=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),a=i.clone().add(o),s=a.clone().subtract(this._inputDimensions.clone().divide(2)),l=new u(s.x*this._deltaCos-s.y*this._deltaSin,s.x*this._deltaSin+s.y*this._deltaCos),c=this._inputDimensions.clone().divide(2).add(l),h=this._options.start.clone().multiply(this._inputDimensions);return c.clone().subtract(h).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t}},{key:"scaleSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]}},{key:"applyToRotation",value:function(t){return(t+this._rotationDelta)%(2*Math.PI)}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=p()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(h.a?h()(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(7),l=n.n(u),c=n(2),h=n.n(c),f=n(3),p=n.n(f),d=n(1),v=n.n(d),_=n(4),y=n.n(_),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),s()(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=l()(e,n);if(void 0===i){var o=v()(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},b=_.Math.Vector2,x=function(t){function e(){var t;r(this,e);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i(this,(t=e.__proto__||v()(e)).call.apply(t,[this].concat(o)));return s._watermarkSprite=new _.Engine.Sprite,s._watermarkSprite.setAnchor(.5,.5),s._container.addChild(s._watermarkSprite),s}return o(e,t),g(e,[{key:"_render",value:function(t){this._watermarkTexture||(this._watermarkTexture=_.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),n=this._options.image,r=n.width,i=n.height,o=_.Utils.resizeVectorToFit(new b(r,i),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),_.Promise.resolve()}},{key:"dispose",value:function(){m(e.prototype.__proto__||v()(e.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}]),e}(_.Operation);x.identifier="watermark",x.prototype.availableOptions={image:{type:_.OptionType.OBJECT,required:!0}},y.a.Operations.WatermarkOperation=x,e.a=x}])});