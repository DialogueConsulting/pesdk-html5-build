!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("photoeditorsdk")):"function"==typeof define&&define.amd?define(["photoeditorsdk"],e):"object"==typeof exports?exports._unexposedPESDK=e(require("photoeditorsdk")):t._unexposedPESDK=e(t.PhotoEditorSDK)}("undefined"!=typeof self?self:this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=107)}([function(e,n){e.exports=t},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(22)),l=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var i=r(this,t.call(this,n,{intensity:{type:a.OptionType.NUMBER,default:1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:a.OptionType.BOOLEAN,default:!0}}));return i._stack=new s.a(i._options.intensity),i}return i(e,t),e.prototype.render=function(t,e,n){var o=this;return this._stack.render(t,e,n).then(function(t){return o.setDirty(!1),t})},e.prototype.setDirtyForRenderer=function(t,e){this._stack.setDirtyForRenderer(t,e)},e.prototype.disposeRenderTextures=function(){this._stack.disposeRenderTextures()},e.prototype.dispose=function(){this._stack.dispose()},e}(a.Configurable);l.identifier=null,l.isIdentity=!1,l.displayName=null,l.PrimitivesStack=s.a,e.a=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(24);n.d(e,"Brightness",function(){return o.a});var r=n(26);n.d(e,"Contrast",function(){return r.a});var i=n(28);n.d(e,"ColorMatrixPrimitive",function(){return i.a});var a=n(30);n.d(e,"Desaturation",function(){return a.a});var s=n(32);n.d(e,"Gamma",function(){return s.a});var l=n(34);n.d(e,"Glow",function(){return l.a});var u=n(36);n.d(e,"Gobblin",function(){return u.a});var p=n(38);n.d(e,"Grayscale",function(){return p.a});var c=n(13);n.d(e,"LookupTable",function(){return c.a});var f=n(41);n.d(e,"LookupTableImage",function(){return f.a});var h=n(43);n.d(e,"Saturation",function(){return h.a});var d=n(45);n.d(e,"SoftColorOverlay",function(){return d.a});var y=n(47);n.d(e,"ToneCurve",function(){return y.a});var _=n(48);n.d(e,"X400",function(){return _.a});var g=n(50);n.d(e,"ThreeDLookupTableImage",function(){return g.a})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.update=function(){},e.prototype.getFilter=function(){return this._filter},e.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null)},e}(a.Configurable));e.a=s},function(t,e,n){"use strict";function o(t,e,n,o,s,l){if(!(isNaN(l)||l<1)){l|=0;var u,p,c,f,h,d,y,_,g,v,b,m,x,w,T,O,C,R,E,S,F,P,j,D,M,B=t.data,I=l+l+1,k=o-1,z=s-1,A=l+1,U=A*(A+1)/2,L=new r,G=L;for(c=1;c<I;c++)G=G.next=new r,c==A&&(M=G);G.next=L;var N=null,V=null;y=d=0;var W=i[l],H=a[l];for(p=0;p<s;p++){for(O=C=R=E=_=g=v=b=0,m=A*(S=B[d]),x=A*(F=B[d+1]),w=A*(P=B[d+2]),T=A*(j=B[d+3]),_+=U*S,g+=U*F,v+=U*P,b+=U*j,G=L,c=0;c<A;c++)G.r=S,G.g=F,G.b=P,G.a=j,G=G.next;for(c=1;c<A;c++)f=d+((k<c?k:c)<<2),_+=(G.r=S=B[f])*(D=A-c),g+=(G.g=F=B[f+1])*D,v+=(G.b=P=B[f+2])*D,b+=(G.a=j=B[f+3])*D,O+=S,C+=F,R+=P,E+=j,G=G.next;for(N=L,V=M,u=0;u<o;u++)B[d+3]=j=b*W>>H,0!==j?(j=255/j,B[d]=(_*W>>H)*j,B[d+1]=(g*W>>H)*j,B[d+2]=(v*W>>H)*j):B[d]=B[d+1]=B[d+2]=0,_-=m,g-=x,v-=w,b-=T,m-=N.r,x-=N.g,w-=N.b,T-=N.a,f=y+((f=u+l+1)<k?f:k)<<2,O+=N.r=B[f],C+=N.g=B[f+1],R+=N.b=B[f+2],E+=N.a=B[f+3],_+=O,g+=C,v+=R,b+=E,N=N.next,m+=S=V.r,x+=F=V.g,w+=P=V.b,T+=j=V.a,O-=S,C-=F,R-=P,E-=j,V=V.next,d+=4;y+=o}for(u=0;u<o;u++){for(C=R=E=O=g=v=b=_=0,d=u<<2,m=A*(S=B[d]),x=A*(F=B[d+1]),w=A*(P=B[d+2]),T=A*(j=B[d+3]),_+=U*S,g+=U*F,v+=U*P,b+=U*j,G=L,c=0;c<A;c++)G.r=S,G.g=F,G.b=P,G.a=j,G=G.next;for(h=o,c=1;c<=l;c++)d=h+u<<2,_+=(G.r=S=B[d])*(D=A-c),g+=(G.g=F=B[d+1])*D,v+=(G.b=P=B[d+2])*D,b+=(G.a=j=B[d+3])*D,O+=S,C+=F,R+=P,E+=j,G=G.next,c<z&&(h+=o);for(d=u,N=L,V=M,p=0;p<s;p++)f=d<<2,B[f+3]=j=b*W>>H,j>0?(j=255/j,B[f]=(_*W>>H)*j,B[f+1]=(g*W>>H)*j,B[f+2]=(v*W>>H)*j):B[f]=B[f+1]=B[f+2]=0,_-=m,g-=x,v-=w,b-=T,m-=N.r,x-=N.g,w-=N.b,T-=N.a,f=u+((f=p+A)<z?f:z)*o<<2,_+=O+=N.r=B[f],g+=C+=N.g=B[f+1],v+=R+=N.b=B[f+2],b+=E+=N.a=B[f+3],N=N.next,m+=S=V.r,x+=F=V.g,w+=P=V.b,T+=j=V.a,O-=S,C-=F,R-=P,E-=j,V=V.next,d+=o}}}function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports={stackBlurCanvasRGBA:o}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.Math.Vector2),l=function(t){function e(n,i){o(this,e);var s=r(this,t.call(this,i));return s._operation=n,s._dirtiness={},s.id=a.Utils.getUUID(),s._renderTextures={},s._identitySprite=new a.Engine.Sprite,s._sprite=new a.Engine.Sprite,s._dummyImage={addEventListener:function(){},removeEventListener:function(){}},s._hitTestSprite=new a.Engine.Sprite,s._renderers=[],s}return i(e,t),e.prototype.applyScale=function(t){},e.prototype.applyRotation=function(t){var e=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=t,this.setRotation(n*Math.PI/180);var o=(t+360)%360,r=o*Math.PI/180,i=Math.cos(r),a=Math.sin(r),l=this._options.position.clone().subtract(.5).multiply(e),u=new s(l.x*i-l.y*a,l.x*a+l.y*i).divide(e.clone().flip());this.setPosition(new s(.5,.5).add(u))},e.prototype.applyFlip=function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)},e.prototype.applyTransform=function(t){var e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)},e.prototype.getDisplayObject=function(){return this._sprite},e.prototype.getHitTestDisplayObject=function(){return this._sprite},e.prototype._getTexture=function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")},e.prototype._prepareRenderTexture=function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new a.Engine.Container,this._renderTextureSprite=new a.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}},e.prototype._rendersToRenderTexture=function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(a.RendererType.WEBGL)},e.prototype._optionEquals=function(e,n){return"type"===e||t.prototype._optionEquals.call(this,e,n)},e.prototype.update=function(t,e){this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e)},e.prototype._updateSprite=function(t){var e=this;[this._sprite,this._hitTestSprite].forEach(function(n){if(n.getTexture()){n.setAnchor(e._options.anchor),n.setPosition(e._options.position.clone().multiply(t)),void 0!==e._options.alpha&&n.setAlpha(e._options.alpha);var o=e._options.dimensions;o&&(o=o.clone().multiply(e._operation.getSDK().getTextureScale()),n.setWidth(o.x),n.setHeight(o.y)),n.updateTransform();var r=n.getTexture().getFrame(),i=new s(r.width,r.height);n.setPivot(e._options.pivot.clone().multiply(i)),n.setRotation(e._options.rotation),n.updateTransform()}})},e.prototype._renderToRenderTexture=function(t){var e=this._getTexture().getDimensions(),n=this._getRenderTexture(t.getRenderer(),e),o=e.clone();if(this._options.smoothDownscaling&&(o.x=a.Utils.nextHighestPOT(o.x),o.y=a.Utils.nextHighestPOT(o.y)),this._renderTexture.resizeTo(o),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var r=o.clone().subtract(e.x,e.y).divide(o),i=n.getUVs().getUVs();i[0].x=i[3].x=0,i[1].x=i[2].x=1-r.x,i[0].y=i[1].y=0,i[2].y=i[3].y=1-r.y}this._sprite.setTexture(n)},e.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},e.prototype.setDirtyForRenderer=function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])},e.prototype._getRenderTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new a.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]},e.prototype.dispose=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose()},e}(a.Configurable);e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.Math.Vector2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._lastOptions={},l._lastInputDimensions=new s(0,0),l._brush=null,l}return i(e,t),e.prototype.getBrushImage=function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.image,o=e.size;n.width=n.height=Math.ceil(o*t.min());var r=a.Utils.createCanvas();r.width=n.width,r.height=n.height;var i=r.getContext("2d");i.drawImage(n,0,0,r.width,r.height);var s=this._tintImageData(i.getImageData(0,0,r.width,r.height),r.width,r.height);return i.putImageData(s,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=r,this._lastInputDimensions=t.clone(),r},e.prototype._tintImageData=function(t){for(var e=this._options.color,n=0;n<t.data.length;n+=4)t.data[n]+=(255*e.r-t.data[n])*e.a,t.data[n+1]+=(255*e.g-t.data[n+1])*e.a,t.data[n+2]+=(255*e.b-t.data[n+2])*e.a;return t},e.prototype.clone=function(){return new(0,this.constructor)(this._options)},e}(a.Configurable);e.a=l,l.prototype.availableOptions={identifier:{type:a.OptionType.STRING},image:{type:a.OptionType.IMAGE},size:{type:a.OptionType.NUMBER,default:.05},color:{type:a.OptionType.COLOR,default:a.Color.RED}}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),a.Math.ColorMatrix),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(10),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),s=r.getImageData(0,0,o.width,o.height),l=this._options,u=l.colorMatrix,p=l.gamma,c=l.shadows,f=l.highlights,h=1!==p,d=0!==c||0!==f,y=new a.Color(0,0,0,0),_=0;_<o.width*o.height;_++){var g=4*_;if(y.r=s.data[g]/255,y.g=s.data[g+1]/255,y.b=s.data[g+2]/255,h&&(y.r=Math.pow(y.r,1/Math.max(p,1e-7)),y.g=Math.pow(y.g,1/Math.max(p,1e-7)),y.b=Math.pow(y.b,1/Math.max(p,1e-7))),d){var v=.2125*y.r+.7154*y.g+.0721*y.b,b=c>=0?a.Utils.clamp(Math.pow(v,1/(c+1))+-.76*Math.pow(v,2/(c+1))-v,0,Math.max(c,1)):-a.Utils.clamp(Math.pow(v,1/(1-c))+-.76*Math.pow(v,2/(1-c))-v,0,Math.max(-c,1)),m=f<0?a.Utils.clamp(1-Math.pow(1-v,1/(1-f))- -.8*Math.pow(1-v,2/(1-f))-v,-1,0):-a.Utils.clamp(1-Math.pow(1-v,1/(1+f))- -.8*Math.pow(1-v,2/(1+f))-v,-1,0),x=b*v*v,w=b-x,T=v+x+m;y.r=a.Utils.clamp(T*((y.r+w)/Math.max(v,1e-7)),0,1),y.g=a.Utils.clamp(T*((y.g+w)/Math.max(v,1e-7)),0,1),y.b=a.Utils.clamp(T*((y.b+w)/Math.max(v,1e-7)),0,1)}y=u.apply(y),s.data[g]=255*y.r,s.data[g+1]=255*y.g,s.data[g+2]=255*y.b}i.putImageData(s,0,0)},e}(a.Engine.Filter);l.prototype.availableOptions={gamma:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT},shadows:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT},highlights:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT},colorMatrix:{type:a.OptionType.COLOR_MATRIX,default:new s,uniformType:a.UniformType.MAT4},colorOffset:{type:a.OptionType.ARRAY,default:[],uniformType:a.UniformType.FLOAT4}},e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(4)),l=n.n(s),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];var p=r(this,t.call.apply(t,[this].concat(s)));return p._fragmentSource=n(11),p._lastBlurRadius=null,p._lastDimensions=new u(0,0),p._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),p}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),r=!this._lastDimensions.equals(o);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),n.setPixelRatio(e.getPixelRatio()),n.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(o)},e.prototype._blurImage=function(t){var e=t.getCanvas(),n=t.getContext(),o=new u(e.width,e.height),r=n.getImageData(0,0,e.width,e.height);l.a.stackBlurCanvasRGBA(r,0,0,e.width,e.height,this._options.blurRadius*o.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._blurredRenderTarget.dispose()},e}(a.Engine.Filter);p.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},delta:{type:a.OptionType.VECTOR2,default:new u(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new u(100,100),uniformType:a.UniformType.FLOAT2}},e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(14)),l=n(5),u=n(6),p=n(16),c=a.Math.Vector2,f=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var l=r(this,t.call.apply(t,[this].concat(i)));return l._persistedPaths=[],l._outputCanvasDirty=!0,l._outputCanvas=a.Utils.createCanvas(),l._outputContext=l._outputCanvas.getContext("2d"),l._persistCanvas=a.Utils.createCanvas(),l._persistContext=l._persistCanvas.getContext("2d"),l._nextCanvas=a.Utils.createCanvas(),l._texture=a.Engine.Texture.fromCanvas(l._outputCanvas),l._sprite.setTexture(l._texture),l._onPathUpdate=l._onPathUpdate.bind(l),l}return i(e,t),e.prototype.applyFlip=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var n=e.getPosition().clone();switch(t){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}e.setPosition(n)}),e.setDirty(!0)}),this._reset()},e.prototype.applyRotation=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var n=e.getPosition().clone();90===t?(n.flip(),n.x=1-n.x):-90===t&&(n.flip(),n.y=1-n.y),e.setPosition(n)}),e.setDirty(!0)}),this._reset()},e.prototype.applyTransform=function(t){var e=null;this._options.paths.forEach(function(n){n.forEachControlPoint(function(e){e.setPosition(t.applyToRelativePoint(e.getPosition()))});var o=n.getBrush();o!==e&&(o.setSize(t.applyToRelativeSize(o.getSize())),e=o),n.setDirty(!0)}),this._reset()},e.prototype.clearCanvas=function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,n=t.height;this._outputContext.clearRect(0,0,e,n)}},e.prototype.clearPersistCanvas=function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,n=t.height;this._persistContext.clearRect(0,0,e,n)}},e.prototype.serializeOptions=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t.prototype.serializeOptions.call(this,e,n);return e||(o.type="brush"),o},e.prototype.serializeOption=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===e?this._options.paths.map(function(t){return t.serializeOptions(void 0,n)}):t.prototype.serializeOption.call(this,e,n)},e.prototype.createPath=function(t){var e=new s.a(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e},e.prototype._onPathUpdate=function(){this._operation.setDirty(!0),this.setDirty(!0)},e.prototype._onPathPersist=function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)},e.prototype._getTexture=function(){return this._texture},e.prototype.setDirtyForRenderer=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.prototype.setDirtyForRenderer.call(this,e,n,o),e&&o&&(this._persistedPaths=[],this._options.paths.forEach(function(t){t.setDirty(!0)}))},e.prototype.setDirty=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[n],e)},e.prototype.render=function(t){var e=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(a.Utils.ensureCanvasDimensions(this._outputCanvas,t),a.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach(function(n){n.render(t),n.getClosed()&&-1===e._persistedPaths.indexOf(n)&&e._onPathPersist(n)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)}),this.setDirtyForRenderer(!1,n))},e.prototype.update=function(e,n){n&&(a.Utils.ensureCanvasDimensions(this._outputCanvas,n),a.Utils.ensureCanvasDimensions(this._persistCanvas,n),this._texture.getBaseTexture().update()),this.render(n);var o=e.getRenderer();o.isOfType(a.RendererType.WEBGL)&&o.updateTexture(this._texture.getBaseTexture()),t.prototype.update.call(this,e,n)},e.prototype._reset=function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()},e.prototype.getCanvas=function(){return this._outputCanvas},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._texture.getBaseTexture().dispose()},e}(l.a);f.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},position:{type:a.OptionType.VECTOR2,default:new c(0,0)},scale:{type:a.OptionType.VECTOR2,default:new c(1,1)},anchor:{type:a.OptionType.VECTOR2,default:new c(0,0)},pivot:{type:a.OptionType.VECTOR2,default:new c(0,0)},rotation:{type:a.OptionType.NUMBER,default:0},paths:{type:a.OptionType.ARRAY,default:[],setter:function(t){var e=this;return t=t.map(function(t){if(t instanceof s.a)return t;var n=t.brush,o=t.closed,r=new s.a(e._operation,{brush:n,closed:o},e._nextCanvas);return t.controlPoints.forEach(function(t){r.addControlPoint(t)}),r}),this._reset(),t}}},f.type="brush",f.Brush=u.a,f.Path=s.a,f.Brushes={RadialBrush:p.a},e.a=f},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 color = texColor;\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = dot(color.rgb, luminanceWeighting);\n  float shadow = u_shadows >= 0.0\n      ? clamp(\n            pow(luminance, 1.0 / (u_shadows + 1.0))\n            + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n            - luminance\n      , 0.0, max(u_shadows, 1.0))\n      : -clamp(\n            pow(luminance, 1.0 / (-u_shadows + 1.0))\n            + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n            - luminance\n      , 0.0, max(-u_shadows, 1.0));\n\n    float highlight = u_highlights < 0.0\n      ? clamp(\n            1.0\n            - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n            - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n            - luminance\n       , -1.0, 0.0)\n      : -clamp(\n            1.0\n            - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n            - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n            - luminance\n       , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n  color.rgb = clamp((luminance + highlight + shadowContrast) * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n\n  // Apply Color Matrix\n  color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n  // Apply alpha\n  color = vec4(color.rgb * texColor.a, texColor.a);\n\n  gl_FragColor = color;\n}\n"},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(1)),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.render=function(t,e,n){return a.Promise.resolve(n)},e.prototype.hasChanges=function(){return!1},e}(s.a);l.isIdentity=!0,l.identifier="identity",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];var l=r(this,t.call.apply(t,[this].concat(a)));return l._fragmentSource=n(40),l}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=this._options.lookupTableData,l=0;l<o.width*o.height;l++){var u=4*l,p=a.data[u];a.data[u]=s[4*p];var c=a.data[u+1];a.data[u+1]=s[1+4*c];var f=a.data[u+2];a.data[u+2]=s[2+4*f]}i.putImageData(a,0,0)},e}(a.Engine.Filter);l.prototype.availableOptions={lookupTable:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.INT},lookupTableData:{type:a.OptionType.ARRAY,default:[]}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l({lookupTable:s._options.textureGLUnit}),s._textures={},s._renderers={},s}return i(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(a.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(a.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)},e.prototype._updateWebGLTexture=function(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),n=t.getRenderer(),o=n.id;this._renderers[o]=n,this._textures[o]||(this._textures[o]=new a.Engine.BaseTexture);var r=this._textures[o],i=new a.Engine.PixelArrayImage(256,1,e);r.setSource(i),r.setGLUnit(this._options.textureGLUnit),n.isOfType(a.RendererType.WEBGL)&&n.updateTexture(r)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data},e}(s.a);e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(15)),l=function(t){function e(n,i,s){o(this,e);var l=r(this,t.call(this,i));return l._operation=n,l._canvas=s||a.Utils.createCanvas(),l._context=l._canvas.getContext("2d"),l}return i(e,t),e.prototype.serializeOption=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===e?this._options.controlPoints.map(function(t){var e=t.getPosition();return n?e.toObject():e.clone()}):t.prototype.serializeOption.call(this,e,n)},e.prototype._optionEquals=function(e,n){if("controlPoints"===e){for(var o=this._options.controlPoints,r=0,i=o.length;r<i;r++)if(!o[r].getPosition().equals(n[r]))return!1;return!0}return t.prototype._optionEquals.call(this,e,n)},e.prototype.render=function(t){var e=this._options,n=e.controlPoints,o=e.size;if(!(n.length<2)){a.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushSize===o&&t.equals(this._brushInputDimensions)||(this._brushInputDimensions=t.clone(),this._lastBrushSize=o);for(var r=n[0],i=r,s=1;s<n.length;s++)i=n[s],i.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,r),r=i}},e.prototype._createBrush=function(t){var e=this._options,n=e.size,o=e.hardness,r=e.color,i=a.Utils.createCanvas();i.width=i.height=Math.ceil(n*t.min());var s=i.getContext("2d");if(r=r.clone(),r.a=1,1===i.width)s.fillStyle=r.toRGBA(),s.fillRect(0,0,1,1);else{var l=s.createRadialGradient(i.width/2,i.height/2,Math.min(i.width/2-1,i.width/2*o),i.width/2,i.height/2,i.width/2);l.addColorStop(0,r.toRGBA());var u=r.clone();u.a=0,l.addColorStop(1,u.toRGBA()),s.fillStyle=l,s.fillRect(0,0,i.width,i.height)}return i},e.prototype.addControlPoint=function(t){var e=new s.a(this,t);this._options.controlPoints.push(e),this.emit("update",this)},e.prototype.getCanvas=function(){return this._canvas},e.prototype.setCanvas=function(t){this._canvas=t,this._context=t.getContext("2d")},e.prototype.setDirty=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(t){t.setDirty()})},e.prototype.forEachControlPoint=function(t){this._options.controlPoints.forEach(t)},e.prototype.renderToCanvas=function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()},e.prototype.getCanvasDimensions=function(){return this._canvasDimensions},e}(a.Configurable);l.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},brush:{type:a.OptionType.OBJECT,required:!0},controlPoints:{type:a.OptionType.ARRAY,default:[]},closed:{type:a.OptionType.BOOLEAN,default:!1}},e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(0),i=(n.n(r),r.Math.Vector2),a=function(){function t(e,n){o(this,t),this._path=e,this._drawnCanvases=[],this._position=n}return t.prototype.renderToCanvas=function(t,e,n){if(-1===this._drawnCanvases.indexOf(e)){for(var o=new i(e.width,e.height),r=e.getContext("2d"),a=this._position.clone().multiply(o),s=n.getPosition().clone().multiply(o),l=a.clone().subtract(s).len(),u=t.width/10,p=0;p<=l;){var c=Math.max(0,Math.min(1,p/l)),f=s.x+(a.x-s.x)*c,h=s.y+(a.y-s.y)*c;r.drawImage(t,f-t.width/2,h-t.height/2,t.width,t.height),p+=u}this._drawnCanvases.push(e)}},t.prototype.setPosition=function(t){this._position=t},t.prototype.getPosition=function(){return this._position.clone()},t.prototype.setDirty=function(){this._drawnCanvases=[]},t}();e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(6)),l=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.getBrushImage=function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.size,o=e.hardness,r=e.color,i=a.Utils.createCanvas();i.width=i.height=Math.ceil(n*t.min());var s=i.getContext("2d");if(r=r.clone(),r.a=1,1===i.width)s.fillStyle=r.toRGBA(),s.fillRect(0,0,1,1);else{var l=s.createRadialGradient(i.width/2,i.height/2,Math.min(i.width/2-1,i.width/2*o),i.width/2,i.height/2,i.width/2);l.addColorStop(0,r.toRGBA());var u=r.clone();u.a=0,l.addColorStop(1,u.toRGBA()),s.fillStyle=l,s.fillRect(0,0,i.width,i.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=i,this._lastInputDimensions=t.clone(),i},e}(s.a);e.a=l,l.identifier="imgly_brush_radial",l.prototype.availableOptions=a.Utils.extend(s.a.prototype.availableOptions,{hardness:{type:a.OptionType.NUMBER,default:1}})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(7),u=n(18),p=a.Math.ColorMatrix,c=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._clarityFilter=new u.a,s._filter=new l.a,s._sprite.setFilters([s._clarityFilter,s._filter]),s}return i(e,t),e.prototype._render=function(t){var e=t.getDimensions();e.x=1/e.x,e.y=1/e.y,this._clarityFilter.set({clarity:this._options.clarity,texSize:e});var n=new p;return n.multiply(p.createExposureMatrix(this._options.exposure)),n.multiply(p.createSaturationMatrix(this._options.saturation+1)),n.multiply(p.createContrastMatrix(this._options.contrast+1)),n.multiply(p.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,colorMatrix:n,colorOffset:n.getOffsets()}),0!==this._options.clarity?this._sprite.setFilters([this._clarityFilter,this._filter]):this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._clarityFilter.dispose()},e}(a.Operation);c.identifier="adjustments",c.prototype.availableOptions={brightness:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:a.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:a.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:a.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},s.a.Operations.AdjustmentsOperation=c,e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(4)),l=n.n(s),u=a.Math.Vector2,p=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(19),i._lastClarity=null,i._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),r=!this._blurredRenderTarget.getDimensions().equals(o);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),r&&this._blurImage(e),this._applyClarity(e,n)},e.prototype._blurImage=function(t){var e=t.getCanvas(),n=t.getContext(),o=n.getImageData(0,0,e.width,e.height);l.a.stackBlurCanvasRGBA(o,0,0,e.width,e.height,1),this._blurredRenderTarget.getContext().putImageData(o,0,0)},e.prototype._applyClarity=function(t,e){for(var n=e.getContext(),o=t.getCanvas(),r=t.getContext(),i=this._blurredRenderTarget.getContext(),a=this._options.clarity,s=r.getImageData(0,0,o.width,o.height),l=s.data,u=i.getImageData(0,0,o.width,o.height).data,p=Math.max(.2*this._options.clarity,0),c=1-p,f=1+a,h=1-(1+a),d=0;d<o.width*o.height*4;d+=4){var y=u[d]*h+l[d]*f,_=u[d+1]*h+l[d+1]*f,g=u[d+2]*h+l[d+2]*f,v=.2125*y+.7154*_+.0721*g,b=v*p;l[d]=y*c+b,l[d+1]=_*c+b,l[d+2]=g*c+b}n.putImageData(s,0,0)},e}(a.Engine.Filter);p.prototype.availableOptions={clarity:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT},texSize:{type:a.OptionType.VECTOR2,default:new u(100,100),uniformType:a.UniformType.FLOAT2}},e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_clarity;\nuniform vec2 u_texSize;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n  vec4 original = texture2D(u_image, v_texCoord);\n\n  vec4 color = texture2D(u_image, v_texCoord);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 0.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 0.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 1.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, -1.0) * u_texSize);\n\n  // apply unsharp mask\n  vec4 blurred = color / 9.0;\n  color = mix(blurred, original, 1.0 + u_clarity);\n\n  // desaturation, to emphesize the effect\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, color.xyz));\n  float desaturation = clamp(u_clarity * 0.13, 0.0, 1.0);\n  gl_FragColor = vec4(mix(color.xyz, gray, desaturation) * color.a, color.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(8),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._lastBlurRadius=s._options.blurRadius,s._horizontalFilter=new l.a,s._verticalFilter=new l.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new u(1,1)),s._verticalFilter.setDelta(new u(-1,1)),s._filter=new l.a,s}return i(e,t),e.prototype._renderWebGL=function(t){var e=t.getDimensions(),n=e.min(),o=this._options.blurRadius,r={blurRadius:o*n,texSize:e};return this._horizontalFilter.set(r),this._verticalFilter.set(r),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=this._options.blurRadius,n=t.getDimensions();return this._filter.set({blurRadius:e,texSize:n}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.transform=function(t){var e=this.getBlurRadius(),n=t.applyToRelativeSize(e);this.set({blurRadius:n},!1)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e}(a.Operation);p.identifier="blur",p.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:.025}},s.a.Operations.BlurOperation=p,e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(12),u=n(2),p=n(52),c=n(1),f=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._render=function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)},e.prototype.render=function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?a.Promise.resolve(e):t.prototype.render.call(this,e)},e.prototype.setDirtyForRenderer=function(e,n){t.prototype.setDirtyForRenderer.call(this,e,n),this._selectedFilter.setDirtyForRenderer(e,n)},e.prototype.disposeRenderTextures=function(){t.prototype.disposeRenderTextures.call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._selectedFilter&&this._selectedFilter.dispose()},e}(a.Operation);f.identifier="filter",f.prototype.availableOptions={identifier:{type:a.OptionType.STRING,default:"identity"},intensity:{type:a.OptionType.NUMBER,default:1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:a.OptionType.OBJECT,default:new l.a,setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},f.FilterPrimitives=u,f.Filters=p,f.Filter=c.a,s.a.Operations.FilterOperation=f,e.default=f},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(23),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=n.getContext(),i=this._options.filteredCanvas;r.save(),r.drawImage(o,0,0),r.globalAlpha=this._options.intensity,r.drawImage(i,0,0),r.restore()},e}(a.Engine.Filter));s.prototype.availableOptions={filteredImage:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.INT},filteredCanvas:{type:a.OptionType.OBJECT,default:null},intensity:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT}};var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new a.Engine.Container,this._sprite=new a.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new s}return t.prototype.push=function(t){this._stack.push(t)},t.prototype.clear=function(){this._stack=[]},t.prototype.render=function(t,e,n){if(0===this._stack.length)return a.Promise.resolve();var o=t.getRenderer();this._sprite.setTexture(e);var r=this._renderTextures[o.id];if(!r){var i=t.getSprite().getTexture().getFrame();r=new a.Engine.RenderTexture(t.getRenderer(),i.width,i.height),this._renderTextures[o.id]=r}var s=n.getDimensions();r.resizeTo(s);var l=this.isDirtyForRenderer(o);if(l){this._stack.forEach(function(e){e.update(t)});var u=this._stack.map(function(t){return t.getFilter()});this._sprite.setFilters(u),r.render(this._container),this.setDirtyForRenderer(!1,o)}if(this._blendFilter.setIntensity(this._intensity),o.isOfType(a.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(r.getRenderTarget().getCanvas());else if(o.isOfType(a.RendererType.WEBGL)){var p=r.getBaseTexture();p.setGLUnit(this._blendFilter.getFilteredImage()),o.updateTexture(p,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(a.Color.TRANSPARENT),n.render(this._container),l&&this.disposeRenderTextures(),a.Promise.resolve(n)},t.prototype.setIntensity=function(t){this._intensity=t},t.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},t.prototype.setDirtyForRenderer=function(t,e){this._dirtiness[e.id]=t},t.prototype.setDirty=function(t){for(var e in this._dirtiness)this._dirtiness[e]=t},t.prototype.disposeRenderTextures=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]},t.prototype.dispose=function(){this.disposeRenderTextures(),this._stack.forEach(function(t){return t.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()},t}();e.a=l},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(25),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=this._options.brightness;if(0!==s){s*=255;for(var l=0;l<o.width*o.height;l++){var u=4*l;a.data[u]+=s,a.data[u+1]+=s,a.data[u+2]+=s}i.putImageData(a,0,0)}},e}(a.Engine.Filter);l.prototype.availableOptions={brightness:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e.prototype.update=function(){this._filter.setBrightness(this._options.brightness)},e}(s.a);u.prototype.availableOptions=l.prototype.availableOptions,e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(27),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=this._options.contrast;if(1!==s){for(var l=0;l<o.width*o.height;l++){var u=4*l;a.data[u]=(a.data[u]-127)*s+127,a.data[u+1]=(a.data[u+1]-127)*s+127,a.data[u+2]=(a.data[u+2]-127)*s+127}i.putImageData(a,0,0)}},e}(a.Engine.Filter);l.prototype.availableOptions={contrast:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e.prototype.update=function(){this._filter.setContrast(this._options.contrast)},e}(s.a);u.prototype.availableOptions=l.prototype.availableOptions,e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=a.Math.ColorMatrix,u=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(29),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),s=r.getImageData(0,0,o.width,o.height),l=this._options.colorMatrix,u=new a.Color(0,0,0,0),p=0;p<o.width*o.height;p++){var c=4*p;u.r=s.data[c]/255,u.g=s.data[c+1]/255,u.b=s.data[c+2]/255,u=l.apply(u),s.data[c]=255*u.r,s.data[c+1]=255*u.g,s.data[c+2]=255*u.b}i.putImageData(s,0,0)},e}(a.Engine.Filter);u.prototype.availableOptions={colorMatrix:{type:a.OptionType.COLOR_MATRIX,default:new l,uniformType:a.UniformType.MAT4},colorMatrixOffset:{type:a.OptionType.ARRAY,default:[],uniformType:a.UniformType.FLOAT4}};var p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new u,s}return i(e,t),e.prototype.update=function(){this._filter.setColorMatrix(this._options.colorMatrix)},e}(s.a);p.prototype.availableOptions=u.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(31),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=[.3,.59,.11],l=this._options.desaturation,u=0;u<o.width*o.height;u++){var p=4*u,c=s[0]*a.data[p]/255+s[1]*a.data[p+1]/255+s[2]*a.data[p+2]/255;a.data[p]+=(255*c-a.data[p])*l,a.data[p+1]+=(255*c-a.data[p+1])*l,a.data[p+2]+=(255*c-a.data[p+2])*l}i.putImageData(a,0,0)},e}(a.Engine.Filter);l.prototype.availableOptions={desaturation:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.FLOAT}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation)},e}(s.a);u.prototype.availableOptions=l.prototype.availableOptions,e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(33),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=this._options.gamma,l=new Float32Array(256),u=0;u<256;u++)l[u]=255*Math.pow(u/255,s.r);for(var p=new Float32Array(256),c=0;c<256;c++)p[c]=255*Math.pow(c/255,s.g);for(var f=new Float32Array(256),h=0;h<256;h++)f[h]=255*Math.pow(h/255,s.b);for(var d=0;d<o.width*o.height;d++){var y=4*d;a.data[y]=l[a.data[y]],a.data[y+1]=p[a.data[y+1]],a.data[y+2]=f[a.data[y+2]]}i.putImageData(a,0,0)},e}(a.Engine.Filter);l.prototype.availableOptions={gamma:{type:a.OptionType.COLOR,default:a.Color.WHITE,uniformType:a.UniformType.FLOAT3}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e.prototype.update=function(){this._filter.setGamma(this._options.gamma)},e}(s.a);u.prototype.availableOptions=l.prototype.availableOptions,e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(35),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o,r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),i=e.getContext(),a=n.getContext(),s=i.getImageData(0,0,r.width,r.height),l=this._options.color,u=0;u<r.width;u++)for(var p=0;p<r.height;p++){var c=4*(r.width*p+u),f=u/r.width,h=p/r.height,d=(f-.5)/.75,y=(h-.5)/.75,_=d*d,g=y*y;o=1-(_+g),o=Math.min(Math.max(o,.1),1),s.data[c]=s.data[c]*(o*l.r),s.data[c+1]=s.data[c+1]*(o*l.g),s.data[c+2]=s.data[c+2]*(o*l.b),s.data[c+3]=255}a.putImageData(s,0,0)},e}(a.Engine.Filter);l.prototype.availableOptions={color:{type:a.OptionType.COLOR,default:a.Color.WHITE,uniformType:a.UniformType.FLOAT3}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(s.a);u.prototype.availableOptions=l.prototype.availableOptions,e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(37),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=0;s<o.width;s++)for(var l=0;l<o.height;l++){var u=4*(o.width*l+s);a.data[u+2]=.33*a.data[u+1],a.data[u]=.6*a.data[u],a.data[u+2]+=.33*a.data[u],a.data[u+1]=.7*a.data[u+1],a.data[u+3]=255}i.putImageData(a,0,0)},e}(a.Engine.Filter),u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e}(s.a);e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(39),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=0;s<o.width;s++)for(var l=0;l<o.height;l++){var u=4*(o.width*l+s),p=.2125*a.data[u]+.7154*a.data[u+1]+.0721*a.data[u+2];a.data[u]=p,a.data[u+1]=p,a.data[u+2]=p}i.putImageData(a,0,0)},e}(a.Engine.Filter),u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e}(s.a);e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=a.Math.Vector2,u=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._precomputeQuads(),i._fragmentSource=n(42),i}return i(e,t),e.prototype._precomputeQuads=function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new l;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}},e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a),u=s.getContext("2d"),p=r.getImageData(0,0,o.width,o.height),c=u.getImageData(0,0,a.width,a.height),f=new l,h=0;h<o.width*o.height*4;h+=4){var d=p.data[h],y=p.data[h+1],_=p.data[h+2],g=p.data[h+3]/255,v=this._quads[_];f.x=64*v.x,f.y=64*v.y,f.x+=Math.floor(d/4),f.y+=Math.floor(y/4);var b=4*(a.width*f.y+f.x)|0,m=c.data[b];m=d*(1-g)+m*g;var x=c.data[b+1];x=y*(1-g)+x*g;var w=c.data[b+2];w=_*(1-g)+w*g,p.data[h]=m,p.data[h+1]=x,p.data[h+2]=w}i.putImageData(p,0,0)},e.prototype._createImageCanvas=function(t){var e=a.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},e}(a.Engine.Filter);u.prototype.availableOptions={lookupTable:{type:a.OptionType.NUMBER,default:3,uniformType:a.UniformType.INT},lookupTableImage:{type:a.OptionType.IMAGE,uniformType:null}};var p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new u,s._textures={},s}return i(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(a.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(a.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)},e.prototype._updateWebGLTexture=function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new a.Engine.BaseTexture);var o=this._textures[n];o.setSource(this._options.image),o.setGLUnit(3),e.updateTexture(o)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e]},e}(s.a);p.prototype.availableOptions={image:{type:a.OptionType.IMAGE}},e.a=p},function(t,e){t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(44),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=this._options.saturation,l=0;l<o.width;l++)for(var u=0;u<o.height;u++){var p=4*(o.width*u+l),c=.2125*a.data[p]+.7154*a.data[p+1]+.0721*a.data[p+2];a.data[p]=c*(1-s)+a.data[p]*s,a.data[p+1]=c*(1-s)+a.data[p+1]*s,a.data[p+2]=c*(1-s)+a.data[p+2]*s}i.putImageData(a,0,0)},e}(a.Engine.Filter);l.prototype.availableOptions={saturation:{type:a.OptionType.NUMBER,default:0,uniformType:a.UniformType.FLOAT}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e.prototype.update=function(){this._filter.setSaturation(this._options.saturation)},e}(s.a);u.prototype.availableOptions=l.prototype.availableOptions,e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(46),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=0;s<o.width;s++)for(var l=0;l<o.height;l++){var u=4*(o.width*l+s);a.data[u]=Math.max(255*this._options.color.r,a.data[u]),a.data[u+1]=Math.max(255*this._options.color.g,a.data[u+1]),a.data[u+2]=Math.max(255*this._options.color.b,a.data[u+2])}i.putImageData(a,0,0)},e}(a.Engine.Filter);l.prototype.availableOptions={color:{type:a.OptionType.COLOR,default:a.Color.WHITE,uniformType:a.UniformType.FLOAT3}};var u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(s.a);u.prototype.availableOptions=l.prototype.availableOptions,e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(13)),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._options.rgbControlPoints||(s._options.rgbControlPoints={red:s._options.controlPoints,green:s._options.controlPoints,blue:s._options.controlPoints}),s._updateLookupTable(),s}return i(e,t),e.prototype._updateLookupTable=function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,n)},e.prototype._buildLookupTable=function(t,e,n){for(var o=[],r=0;r<256;r++)o.push(Math.min(Math.max(r+t[r],0),255)),o.push(Math.min(Math.max(r+e[r],0),255)),o.push(Math.min(Math.max(r+n[r],0),255)),o.push(255);return o},e.prototype._calculateSplineCurve=function(t){t=t.sort(function(t,e){return t[0]>e[0]});var e,n=this._getSplineCurve(t),o=n[0];if(o[0]>0)for(e=0;e<o[0];e++)n.unshift([0,0]);var r=[];for(e=0;e<n.length;e++){var i=n[e],a=[i[0],i[0]],s=Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2));a[1]>i[1]&&(s=-s),r.push(s)}return r},e.prototype._getSplineCurve=function(t){var e,n=this._secondDerivative(t),o=n.length,r=[];for(e=0;e<o;e++)r[e]=n[e];var i=[];for(e=0;e<o-1;e++)for(var a=t[e],s=t[e+1],l=a[0];l<s[0];l++){var u=(l-a[0])/(s[0]-a[0]),p=1-u,c=u,f=s[0]-a[0],h=p*a[1]+c*s[1]+f*f/6*((p*p*p-p)*r[e]+(c*c*c-c)*r[e+1]);h>255?h=255:h<0&&(h=0),i.push([l,h])}return 255===i.length&&i.push(t[t.length-1]),i},e.prototype._secondDerivative=function(t){var e=t.length;if(e<=0||1===e)return null;var n,o,r=[],i=[];for(r[0]=[0,1,0],n=1;n<e-1;n++){var a=t[n-1],s=t[n],l=t[n+1];r[n]=r[n]||[],r[n][0]=(s[0]-a[0])/6,r[n][1]=(l[0]-a[0])/3,r[n][2]=(l[0]-s[0])/6,i[n]=(l[1]-s[1])/(l[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(i[0]=0,i[e-1]=0,r[e-1]=[0,1,0],n=1;n<e;n++)o=r[1][0]/r[n-1][1],r[n][1]-=o*r[n-1][2],r[n][0]=0,i[n]-=o*i[n-1];for(n=e-2;n>0;n--)o=r[n][2]/r[n+1][1],r[n][1]-=o*r[n+1][0],r[n][2]=0,i[n]-=o*i[n+1];var u=[];for(n=0;n<e;n++)u[n]=i[n]/r[n][1];return u},e}(s.a);l.prototype.availableOptions={rgbControlPoints:{type:a.OptionType.OBJECT},controlPoints:{type:a.OptionType.ARRAY,default:[]},textureGLUnit:{type:a.OptionType.NUMBER,default:1}},e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(49),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=r.getImageData(0,0,o.width,o.height),s=0;s<o.width;s++)for(var l=0;l<o.height;l++){var u=4*(o.width*l+s),p=a.data[u]/255*.3+a.data[u+1]/255*.3+a.data[u+2]/255*.3;p-=.2,p=Math.max(0,Math.min(1,p)),p+=.15,p*=1.4,p*=255,a.data[u]=p,a.data[u+1]=p,a.data[u+2]=p}i.putImageData(a,0,0)},e}(a.Engine.Filter),u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new l,s}return i(e,t),e}(s.a);e.a=u},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(3)),l=a.Math.Vector2,u=function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._precomputeQuads(),i._fragmentSource=n(51),i}return i(e,t),e.prototype._precomputeQuads=function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new l;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}},e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],this._options),r=o.resolution,i=o.horizontalTileCount,s=o.verticalTileCount,u=e.getCanvas(),p=e.getContext(),c=n.getContext(),f=this._options.lookupTableImage,h=this._createImageCanvas(f),d=h.getContext("2d"),y=p.getImageData(0,0,u.width,u.height),_=d.getImageData(0,0,f.width,f.height),g=Math.floor(r/i-1),v=Math.floor(r/s-1),b=Math.floor(i*s-1),m=void 0,x=void 0,w=void 0,T=void 0,O=void 0,C=void 0,R=new a.Color,E=new a.Color,S=new a.Color,F=new a.Color,P=new a.Color,j=new a.Color,D=new a.Color,M=new a.Color,B=new l,I=new l,k=function(t,e,n,o){t.r=e.r+o*(n.r-e.r),t.g=e.g+o*(n.g-e.g),t.b=e.b+o*(n.b-e.b)},z=function(t,e,n){var o=4*(Math.floor(n)*f.width+Math.floor(e));t.r=_.data[o]/255,t.g=_.data[o+1]/255,t.b=_.data[o+2]/255,t.a=_.data[o+3]/255},A=new a.Color,U=new a.Color,L=function(t,e,n){z(P,B.x+m,B.y+x),z(j,B.x+m,B.y+O),z(D,B.x+T,B.y+x),z(M,B.x+T,B.y+O),k(A,P,D,R.r*g%1),k(U,D,M,R.r*g%1),k(t,A,U,R.g*v%1)},G=new l(r,r).divide(i,s).floor(),N=0;N<u.width*u.height*4;N+=4)R.set(y.data[N]/255,y.data[N+1]/255,y.data[N+2]/255,y.data[N+3]/255),m=R.r*g|0,x=R.g*v|0,w=R.b*b|0,T=Math.ceil(R.r*g),O=Math.ceil(R.g*v),C=Math.ceil(R.b*b),B.y=w/i|0,B.x=w/(B.y*i)|0,I.y=C/i|0,I.x=C-I.y*i|0,B.multiply(G),I.multiply(G),L(S),L(F),k(E,S,F,R.b*b%1),y.data[N]=255*E.r,y.data[N+1]=255*E.g,y.data[N+2]=255*E.b;c.putImageData(y,0,0)},e.prototype._createImageCanvas=function(t){var e=a.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},e}(a.Engine.Filter);u.prototype.availableOptions={lookupTable:{type:a.OptionType.NUMBER,default:3,uniformType:a.UniformType.INT},lookupTableImage:{type:a.OptionType.IMAGE,uniformType:null},resolution:{type:a.OptionType.NUMBER,default:128,uniformType:a.UniformType.FLOAT},horizontalTileCount:{type:a.OptionType.NUMBER,default:5,uniformType:a.UniformType.FLOAT},verticalTileCount:{type:a.OptionType.NUMBER,default:5,uniformType:a.UniformType.FLOAT}};var p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._filter=new u,s._textures={},s}return i(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(a.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(a.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var n=this._options,o=n.resolution,r=n.verticalTileCount,i=n.horizontalTileCount;this._filter.set({resolution:o,verticalTileCount:r,horizontalTileCount:i})},e.prototype._updateWebGLTexture=function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new a.Engine.BaseTexture);var o=this._textures[n];o.setSource(this._options.image),o.setGLUnit(3),o.setMinFilter(a.Engine.BaseTexture.NearestFilter),e.updateTexture(o)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e]},e}(s.a);p.prototype.availableOptions={image:{type:a.OptionType.IMAGE},resolution:{type:a.OptionType.NUMBER,default:128},horizontalTileCount:{type:a.OptionType.NUMBER,default:5},verticalTileCount:{type:a.OptionType.NUMBER,default:5}},e.a=p},function(t,e){t.exports="uniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 belinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON));\n\n    float rRange = floor(u_resolution / u_horizontalTileCount - 1.0);\n    float gRange = floor(u_resolution / u_verticalTileCount - 1.0);\n    float bRange = floor(u_horizontalTileCount * u_horizontalTileCount - 1.0);\n\n    int rFloor = int(sourceColor.r * rRange);\n    int gFloor = int(sourceColor.g * gRange);\n    int bFloor = int(sourceColor.b * bRange);\n\n    int rCeil = int(ceil(sourceColor.r * rRange));\n    int gCeil = int(ceil(sourceColor.g * gRange));\n    int bCeil = int(ceil(sourceColor.b * bRange));\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = bFloor / int(u_horizontalTileCount);\n    tileFloor.x = bFloor - (tileFloor.y * int(u_horizontalTileCount));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = bCeil / int(u_horizontalTileCount);\n    tileCeil.x = bCeil - (tileCeil.y * int(u_horizontalTileCount));\n\n    // Map tile index to tile pixel pos.\n    tileFloor *= int(u_resolution / u_horizontalTileCount);\n    tileCeil  *= int(u_resolution / u_verticalTileCount);\n\n    // Interpolate between red and green\n    vec3 lutColorFB = belinearInterpolate(\n        lutColor(tileFloor.x + rFloor, tileFloor.y + gFloor),\n        lutColor(tileFloor.x + rFloor, tileFloor.y + gCeil),\n        lutColor(tileFloor.x + rCeil,  tileFloor.y + gFloor),\n        lutColor(tileFloor.x + rCeil,  tileFloor.y + gCeil),\n        fract(sourceColor.r * rRange), fract(sourceColor.g * gRange)\n    );\n    vec3 lutColorCB = belinearInterpolate(\n        lutColor(tileCeil.x + rFloor, tileCeil.y + gFloor),\n        lutColor(tileCeil.x + rFloor, tileCeil.y + gCeil),\n        lutColor(tileCeil.x + rCeil,  tileCeil.y + gFloor),\n        lutColor(tileCeil.x + rCeil,  tileCeil.y + gCeil),\n        fract(sourceColor.r * rRange), fract(sourceColor.g * gRange)\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fract(sourceColor.b * bRange));\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n\n\n\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12);n.d(e,"IdentityFilter",function(){return o.a});var r=n(53);n.d(e,"A15Filter",function(){return r.a});var i=n(54);n.d(e,"BreezeFilter",function(){return i.a});var a=n(55);n.d(e,"BWFilter",function(){return a.a});var s=n(56);n.d(e,"BWHardFilter",function(){return s.a});var l=n(57);n.d(e,"CelsiusFilter",function(){return l.a});var u=n(58);n.d(e,"ChestFilter",function(){return u.a});var p=n(59);n.d(e,"FixieFilter",function(){return p.a});var c=n(60);n.d(e,"FoodFilter",function(){return c.a});var f=n(61);n.d(e,"FridgeFilter",function(){return f.a});var h=n(62);n.d(e,"FrontFilter",function(){return h.a});var d=n(63);n.d(e,"GlamFilter",function(){return d.a});var y=n(64);n.d(e,"GobblinFilter",function(){return y.a});var _=n(65);n.d(e,"K1Filter",function(){return _.a});var g=n(66);n.d(e,"K2Filter",function(){return g.a});var v=n(67);n.d(e,"K6Filter",function(){return v.a});var b=n(68);n.d(e,"KDynamicFilter",function(){return b.a});var m=n(69);n.d(e,"LeninFilter",function(){return m.a});var x=n(70);n.d(e,"LomoFilter",function(){return x.a});var w=n(71);n.d(e,"MellowFilter",function(){return w.a});var T=n(72);n.d(e,"MetalFilter",function(){return T.a});var O=n(73);n.d(e,"MorningFilter",function(){return O.a});var C=n(74);n.d(e,"OrchidFilter",function(){return C.a});var R=n(75);n.d(e,"PolaFilter",function(){return R.a});var E=n(76);n.d(e,"Pola669Filter",function(){return E.a});var S=n(77);n.d(e,"QuoziFilter",function(){return S.a});var F=n(78);n.d(e,"SemiredFilter",function(){return F.a});var P=n(79);n.d(e,"SunnyFilter",function(){return P.a});var j=n(80);n.d(e,"TexasFilter",function(){return j.a});var D=n(81);n.d(e,"X400Filter",function(){return D.a});var M=n(82);n.d(e,"LUTFilter",function(){return M.a});var B=n(83);n.d(e,"ThreeDLUTFilter",function(){return B.a})},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Contrast({contrast:.63})),l._stack.push(new s.Brightness({brightness:.12})),l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),l}return i(e,t),e}(a.a);l.identifier="a15",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Desaturation({desaturation:.5})),l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),l}return i(e,t),e}(a.a);l.identifier="breeze",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Grayscale),l}return i(e,t),e}(a.a);l.identifier="bw",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Grayscale),l._stack.push(new s.Contrast({contrast:1.5})),l}return i(e,t),e}(a.a);l.identifier="bwhard",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),l}return i(e,t),e}(a.a);l.identifier="celsius",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),l}return i(e,t),e}(a.a);l.identifier="chest",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),l}return i(e,t),e}(a.a);l.identifier="fixie",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Saturation({saturation:1.35})),l._stack.push(new s.Contrast({contrast:1.1})),l}return i(e,t),e}(a.a);l.identifier="food",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),l}return i(e,t),e}(a.a);l.identifier="fridge",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),l}return i(e,t),e}(a.a);l.identifier="front",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Contrast({contrast:1.1})),l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),l}return i(e,t),e}(a.a);l.identifier="glam",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Gobblin),l}return i(e,t),e}(a.a);l.identifier="gobblin",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),l._stack.push(new s.Saturation({saturation:.9})),l}return i(e,t),e}(a.a);l.identifier="k1",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(1)),l=n(2),u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var u=r(this,t.call.apply(t,[this].concat(i)));return u._stack.push(new l.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),u._stack.push(new l.SoftColorOverlay({color:new a.Color(40/255,40/255,40/255)})),u}return i(e,t),e}(s.a);u.identifier="k2",e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Saturation({saturation:.5})),l}return i(e,t),e}(a.a);l.identifier="k6",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),l._stack.push(new s.Saturation({saturation:.7})),l}return i(e,t),e}(a.a);l.identifier="kdynamic",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Desaturation({desaturation:.4})),l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),l}return i(e,t),e}(a.a);l.identifier="lenin",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),l}return i(e,t),e}(a.a);l.identifier="lomo",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),l}return i(e,t),e}(a.a);l.identifier="mellow",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(1)),l=n(2),u=a.Math.ColorMatrix,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var p=r(this,t.call.apply(t,[this].concat(i))),c=new u(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);p._stack.push(new l.ColorMatrixPrimitive({colorMatrix:c}));var f=new a.Color(.8,.6,.9);return p._stack.push(new l.Gamma({gamma:f})),p}return i(e,t),e}(s.a);p.identifier="metal",e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),l._stack.push(new s.Glow),l}return i(e,t),e}(a.a);l.identifier="morning",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),l._stack.push(new s.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),l._stack.push(new s.Desaturation({desaturation:.65})),l}return i(e,t),e}(a.a);l.identifier="orchid",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),l._stack.push(new s.Saturation({saturation:.8})),l._stack.push(new s.Contrast({contrast:1.5})),l}return i(e,t),e}(a.a);l.identifier="pola",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),l._stack.push(new s.Saturation({saturation:.8})),l._stack.push(new s.Contrast({contrast:1.5})),l}return i(e,t),e}(a.a);l.identifier="pola669",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.Desaturation({desaturation:.65})),l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),l}return i(e,t),e}(a.a);l.identifier="quozi",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),l._stack.push(new s.Glow),l}return i(e,t),e}(a.a);l.identifier="semired",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),l._stack.push(new s.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),l}return i(e,t),e}(a.a);l.identifier="sunny",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),l}return i(e,t),e}(a.a);l.identifier="texas",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(1),s=n(2),l=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var l=r(this,t.call.apply(t,[this].concat(i)));return l._stack.push(new s.X400),l}return i(e,t),e}(a.a);l.identifier="x400",e.a=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(1)),l=n(2),u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._lutPrimitive=new l.LookupTableImage({image:s._options.image}),s._stack.push(s._lutPrimitive),s}return i(e,t),e}(s.a);u.prototype.availableOptions={image:{type:a.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},u.identifier="lut",e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(1)),l=n(2),u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i))),u=s._options,p=u.image,c=u.resolution,f=u.verticalTileCount,h=u.horizontalTileCount;return s._lutPrimitive=new l.ThreeDLookupTableImage({image:p,resolution:c,verticalTileCount:f,horizontalTileCount:h}),s._stack.push(s._lutPrimitive),s}return i(e,t),e}(s.a);u.prototype.availableOptions={image:{type:a.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:a.OptionType.NUMBER,default:128},horizontalTileCount:{type:a.OptionType.NUMBER,default:5},verticalTileCount:{type:a.OptionType.NUMBER,default:5}},u.identifier="3d-lut",e.a=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=a.Math.Vector2,p=void 0;p=window.Image;var c=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var l=r(this,t.call.apply(t,[this].concat(i)));return l._colorOverlayFilter=new a.Engine.Filters.ColorOverlayFilter({color:l.getTintColor()}),l._frameContainer=new a.Engine.Container,l._resetSprites(),l._options.frame&&l._createSpritesForFrame(l._options.frame),l}return i(e,t),e.prototype._resetSprites=function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}},e.prototype._createSpritesForFrame=function(t){var e=this;if(!t)return this._disposeSprites();var n=t.imageGroups,o=t.layoutMode;this._layoutMode=o||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(t){void 0!==n[t]&&["start","mid","end"].forEach(function(o){if(void 0!==n[t][o]){var r=n[t][o];"image"in r&&(r=r.image);var i=a.Engine.Texture.fromImage(r),s=new a.Engine.Sprite(i);e._spriteGroups[t][o]=s,e._sprites.push(s),e._frameContainer.addChild(s)}})})},e.prototype._render=function(t){var e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new a.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new a.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),a.Promise.resolve(this._renderTexture)},e.prototype._updateSprites=function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)},e.prototype._updateHorizontalSpriteGroup=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.getDimensions(),r="vertical-inside"===this._layoutMode,i=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,l=0,p=0,c=void 0,f=void 0;if(i){c=i.getTexture().getDimensions(),f=c.y/c.x,l=Math.floor(this._frameWidth/f);var h=new u(0,n);h.x=r?this._frameWidth:0,i.setPosition(h),i.setHeight(this._frameWidth),i.setWidth(l)}if(s){c=s.getTexture().getDimensions(),f=c.y/c.x,p=Math.floor(this._frameWidth*f);var d=new u(o.x-p,n);d.x-=r?this._frameWidth:0,s.setPosition(d),s.setHeight(this._frameWidth),s.setWidth(p)}if(a){c=a.getTexture().getDimensions(),f=c.y/c.x;var y=new u(l,n),_=o.x-l-p;if(r&&(y.x+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(y),a.setWidth(_),a.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth/f,v=Math.ceil(_/g),b=0;if(-1!==v){var m=Math.round(_/v);a.setWidth(m),b+=m,this._ensureRepeatSpritesExist(v-1,e,a);for(var x=0;x<v-1;x++){m=Math.round((_-b)/(v-x-1));var w=this._repeatSprites[e][x],T=y.clone().add(b,0).floor();w.setPosition(T),w.setWidth(m),w.setHeight(this._frameWidth),b+=m}}}}},e.prototype._ensureRepeatSpritesExist=function(t,e,n){var o=this;n.getTexture().setMaxListeners(t+1);var r=this._repeatSprites[e].length;if(t>r)for(var i=t-r,s=0;s<i;s++){var l=new a.Engine.Sprite(n.getTexture());this._repeatSprites[e].push(l),this._frameContainer.addChild(l),this._sprites.push(l)}else if(t<r){var u=this._repeatSprites[e].splice(t);u.forEach(function(t){var e=o._sprites.indexOf(t);-1!==e&&(o._sprites.splice(e,1),o._frameContainer.removeChild(t),t.dispose())})}},e.prototype._updateVerticalSpriteGroup=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.getDimensions(),r="horizontal-inside"===this._layoutMode,i=this._spriteGroups[e].start,a=this._spriteGroups[e].mid,s=this._spriteGroups[e].end,l=0,p=0,c=void 0,f=void 0;if(i){c=i.getTexture().getDimensions(),f=c.y/c.x,l=Math.floor(this._frameWidth*f);var h=new u(n,0);h.y=r?this._frameWidth:0,i.setPosition(h),i.setWidth(this._frameWidth),i.setHeight(l)}if(s){c=s.getTexture().getDimensions(),f=c.y/c.x,p=Math.floor(this._frameWidth*f);var d=new u(n,o.y-p);d.y-=r?this._frameWidth:0,s.setPosition(d),s.setWidth(this._frameWidth),s.setHeight(p)}if(a){c=a.getTexture().getDimensions(),f=c.y/c.x;var y=new u(n,l),_=o.y-l-p;if(r&&(y.y+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(y),a.setHeight(_),a.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth*f,v=Math.ceil(_/g),b=0;if(-1!==v){var m=Math.round(_/v);a.setHeight(m),b+=m,this._ensureRepeatSpritesExist(v-1,e,a);for(var x=0;x<v-1;x++){m=Math.round((_-b)/(v-x-1));var w=this._repeatSprites[e][x],T=y.clone().add(0,b).floor();w.setPosition(T),w.setHeight(m),w.setWidth(this._frameWidth),b+=m}}}}},e.prototype._disposeSprites=function(){var t=this;this._sprites.forEach(function(e){t._frameContainer.removeChild(e),e.getTexture().getBaseTexture().dispose(),e.dispose()}),this._resetSprites()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeSprites()},e.validateFrame=function(t){if(t){var e=t.imageGroups,n=t.layoutMode;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==l(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var o=function(t){var n=e[t],o=n.start,r=n.end,i=n.mid;if(void 0!==e[t]){if("object"!==l(e[t]))throw new Error("Frame: `imageGroups."+t+"` needs to be of type Object.");if(void 0!==o&&!(o instanceof p||"undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".start` needs to be of type Image.");if(void 0!==i&&!(o instanceof p||"undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement)&&"object"!==(void 0===i?"undefined":l(i)))throw new Error("Frame: `imageGroups."+t+".mid` needs to be of type Image or Object.");if(void 0!==r&&!(r instanceof p||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".end` needs to be of type Image.")}};if(void 0!==n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");o("top"),o("left"),o("right"),o("bottom")}},e}(a.Operation);c.identifier="frame",c.prototype.availableOptions={frame:{type:a.OptionType.OBJECT,validation:c.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t}},alpha:{type:a.OptionType.NUMBER,default:1},tintColor:{type:a.OptionType.COLOR,default:new a.Color(1,1,1,0)},scale:{type:a.OptionType.NUMBER,default:.1}},s.a.Operations.FrameOperation=c,e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(86),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._lastBlurRadius=s._options.blurRadius,s._lastControlPoint1=s._options.controlPoint1.clone(),s._lastControlPoint2=s._options.controlPoint2.clone(),s._horizontalFilter=new l.a,s._verticalFilter=new l.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new u(1,1)),s._verticalFilter.setDelta(new u(-1,1)),s._filter=new l.a,s}return i(e,t),e.prototype.rotate=function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:e,controlPoint2:n})},e.prototype.flip=function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({controlPoint1:e,controlPoint2:n})},e.prototype.transform=function(t){var e=this,n={};["controlPoint1","controlPoint2"].forEach(function(o){var r=e.getOption(o);n[o]=t.applyToRelativePoint(r)}),["blurRadius"].forEach(function(o){var r=e.getOption(o);n[o]=t.applyToRelativeSize(r)}),this.set(n,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),n=e.min(),o=this._options,r=o.blurRadius,i=o.controlPoint1,s=o.controlPoint2,l={blurRadius:r*n,controlPoint1:i,controlPoint2:s,texSize:e};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=t.getDimensions(),n=this._options,o=n.blurRadius,r=n.controlPoint1,i=n.controlPoint2;return this._filter.set({blurRadius:o,controlPoint1:r.clone(),controlPoint2:i.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);p.identifier="linear-focus",p.prototype.availableOptions={controlPoint1:{type:a.OptionType.VECTOR2,default:new u(0,.5)},controlPoint2:{type:a.OptionType.VECTOR2,default:new u(1,.5)},blurRadius:{type:a.OptionType.NUMBER,default:.025}},s.a.Operations.LinearFocusOperation=p,e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(4)),l=n.n(s),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];var p=r(this,t.call.apply(t,[this].concat(s)));return p._fragmentSource=n(87),p._lastBlurRadius=null,p._lastControlPoint1=new u,p._lastControlPoint2=new u,p._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),p._maskRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),p}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),r=!this._blurredRenderTarget.getDimensions().equals(o);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastControlPoint1.equals(this._options.controlPoint1)&&this._lastControlPoint2.equals(this._options.controlPoint2)&&!r||(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)},e.prototype._blurImage=function(t){var e=t.getCanvas(),n=t.getContext(),o=new u(e.width,e.height),r=n.getImageData(0,0,e.width,e.height);l.a.stackBlurCanvasRGBA(r,0,0,e.width,e.height,this._options.blurRadius*o.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new u(t.width,t.height),o=this._options.controlPoint1.clone().multiply(n),r=this._options.controlPoint2.clone().multiply(n),i=e.createLinearGradient(o.x,o.y,r.x,r.y);i.addColorStop(0,"#FFFFFF"),i.addColorStop(1,"#000000"),e.fillStyle=i,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var n=e.getContext(),o=t.getCanvas(),r=t.getContext(),i=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,o.width,o.height),l=s.data,u=i.getImageData(0,0,o.width,o.height).data,p=a.getImageData(0,0,o.width,o.height).data,c=void 0,f=0;f<o.width*o.height*4;f+=4)c=p[f]/255,l[f]=c*l[f]+(1-c)*u[f],l[f+1]=c*l[f+1]+(1-c)*u[f+1],l[f+2]=c*l[f+2]+(1-c)*u[f+2];n.putImageData(s,0,0)},e}(a.Engine.Filter);p.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},controlPoint1:{type:a.OptionType.VECTOR2,default:new u(0,.5),uniformType:a.UniformType.FLOAT2},controlPoint2:{type:a.OptionType.VECTOR2,default:new u(1,.5),uniformType:a.UniformType.FLOAT2},delta:{type:a.OptionType.VECTOR2,default:new u(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new u(100,100),uniformType:a.UniformType.FLOAT2}},e.a=p},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      _sample.rgb *= _sample.a;\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(89),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._lastBlurRadius=s._options.blurRadius,s._lastSize=s._options.size,s._lastGradientSize=s._options.gradientSize,s._horizontalFilter=new l.a,s._verticalFilter=new l.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new u(1,1)),s._verticalFilter.setDelta(new u(-1,1)),s._filter=new l.a,s}return i(e,t),e.prototype.rotate=function(t){var e=this._options.start,n=this._options.end;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({start:e,end:n})},e.prototype.flip=function(t){var e=this._options.start,n=this._options.end;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({start:e,end:n})},e.prototype.transform=function(t){var e=this,n={};["start","end"].forEach(function(o){var r=e.getOption(o);n[o]=t.applyToRelativePoint(r)}),["blurRadius","size","gradientSize"].forEach(function(o){var r=e.getOption(o);n[o]=t.applyToRelativeSize(r)}),this.set(n,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),n=e.min(),o=this._options.start.clone(),r=this._options.end.clone(),i=this._options,s=i.blurRadius,l=i.size,u=i.gradientSize,p={blurRadius:s*n,size:l*n,gradientSize:u*n,start:o.clone().multiply(e),end:r.clone().multiply(e),texSize:e};return this._horizontalFilter.set(p),this._verticalFilter.set(p),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=t.getDimensions(),n=this._options,o=n.blurRadius,r=n.size,i=n.gradientSize,s=n.start,l=n.end;return this._filter.set({blurRadius:o,gradientSize:i,size:r,start:s.clone(),end:l.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);p.identifier="mirrored-focus",p.prototype.availableOptions={start:{type:a.OptionType.VECTOR2,default:new u(0,.5)},end:{type:a.OptionType.VECTOR2,default:new u(1,.5)},blurRadius:{type:a.OptionType.NUMBER,default:.025},size:{type:a.OptionType.NUMBER,default:.1},gradientSize:{type:a.OptionType.NUMBER,default:.1}},s.a.Operations.MirroredFocusOperation=p,e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(4)),l=n.n(s),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];var p=r(this,t.call.apply(t,[this].concat(s)));return p._fragmentSource=n(90),p._lastBlurRadius=null,p._lastGradientRadius=null,p._lastStart=new u,p._lastEnd=new u,p._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),p._maskRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),p}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),r=!this._blurredRenderTarget.getDimensions().equals(o);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!r||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)},e.prototype._blurImage=function(t){var e=t.getCanvas(),n=t.getContext(),o=new u(e.width,e.height),r=n.getImageData(0,0,e.width,e.height);l.a.stackBlurCanvasRGBA(r,0,0,e.width,e.height,this._options.blurRadius*o.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),o=new u(t.width,t.height),r=this._options.size*o.min()*n,i=this._options.gradientSize*o.min()*n,a=this._options.start.clone().multiply(o),s=this._options.end.clone().multiply(o),l=s.clone().subtract(a),p=a.clone().add(l.clone().divide(2)),c=l.len(),f=l.clone().divide(c),h=p.clone().add((r+i)*f.y,-(r+i)*f.x),d=p.clone().add(-(r+i)*f.y,(r+i)*f.x),y=e.createLinearGradient(h.x,h.y,d.x,d.y),_=d.clone().subtract(h).len();y.addColorStop(0,"#000000"),y.addColorStop(i/2/_,"#FFFFFF"),y.addColorStop(1-i/2/_,"#FFFFFF"),y.addColorStop(1,"#000000"),e.fillStyle=y,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var n=e.getContext(),o=t.getCanvas(),r=t.getContext(),i=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,o.width,o.height),l=s.data,u=i.getImageData(0,0,o.width,o.height).data,p=a.getImageData(0,0,o.width,o.height).data,c=void 0,f=0;f<o.width*o.height*4;f+=4)c=p[f]/255,l[f]=c*l[f]+(1-c)*u[f],l[f+1]=c*l[f+1]+(1-c)*u[f+1],l[f+2]=c*l[f+2]+(1-c)*u[f+2];n.putImageData(s,0,0)},e}(a.Engine.Filter);p.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},size:{type:a.OptionType.NUMBER,default:50,uniformType:a.UniformType.FLOAT},gradientSize:{type:a.OptionType.NUMBER,default:50,uniformType:a.UniformType.FLOAT},start:{type:a.OptionType.VECTOR2,default:new u(0,.5),uniformType:a.UniformType.FLOAT2},end:{type:a.OptionType.VECTOR2,default:new u(1,.5),uniformType:a.UniformType.FLOAT2},delta:{type:a.OptionType.VECTOR2,default:new u(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new u(100,100),uniformType:a.UniformType.FLOAT2}},e.a=p},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=a.Math.Vector2,u=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._render=function(t){var e=this._options.rotation%360,n=e*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var o=this._sprite.getBounds();return this._renderTexture.resizeTo(new l(o.width,o.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.getNewDimensions=function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t},e.prototype.flip=function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}},e}(a.Operation);u.identifier="orientation",u.prototype.availableOptions={rotation:{type:a.OptionType.NUMBER,default:0,validation:function(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:a.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:a.OptionType.BOOLEAN,default:!1}},s.a.Operations.OrientationOperation=u,e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=a.Engine.Filters.OverlayFilter,u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var l=r(this,t.call.apply(t,[this].concat(i)));return l._overlayTexture=a.Engine.Texture.fromImage(l._options.image),l._overlayContainer=new a.Engine.Container,l._overlaySprite=new a.Engine.Sprite,l._overlaySprite.setTexture(l._overlayTexture),l._overlaySprite.setAnchor(0,0),l._overlayContainer.addChild(l._overlaySprite),l._overlayFilter=new a.Engine.Filters.OverlayFilter({overlayImage:l._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:l._overlayTexture}),l._sprite.setFilters([l._overlayFilter]),l._renderedOverlaySprite=new a.Engine.Sprite,l._renderedOverlayContainer=new a.Engine.Container,l._renderedOverlayContainer.addChild(l._renderedOverlaySprite),l._overlayRendered=!1,l._lastInputDimensions=new u(0,0),l}return i(e,t),e.prototype.setOption=function(e,n){if(t.prototype.setOption.call(this,e,n),"image"===e&&n&&this._sdk){var o=this._sdk.getRenderer(),r=this._overlayTexture.getBaseTexture();r.setSource(n),o.isOfType(a.RendererType.WEBGL)&&o.updateTexture(r),this._overlayRendered=!1}},e.prototype._render=function(t){var e=t.getDimensions(),n=this._options,o=n.image,r=n.alpha,i=n.blendMode;return o?(this._overlayRendered&&this._lastInputDimensions.equals(e)||(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:i,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),a.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),a.Promise.resolve())},e.prototype._renderOverlayToRenderTexture=function(t){var e=this._sdk.getRenderer(),n=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new a.Engine.RenderTexture(e,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var o=this._options.image,r=o.width,i=o.height,s=a.Utils.resizeVectorToFill(new u(r,i),n);this._overlaySprite.setWidth(s.x),this._overlaySprite.setHeight(s.y);var l=this._overlayRenderTexture.getBaseTexture();e.isOfType(a.RendererType.WEBGL)&&(l.setGLUnit(4),e.updateTexture(l,!1)),this._overlayRenderTexture.resizeTo(n),this._overlayRenderTexture.render(this._overlayContainer)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._overlaySprite.dispose()},e}(a.Operation);p.identifier="overlay",p.BLEND_MODES=l.BLEND_MODES,p.prototype.availableOptions={identifier:{type:a.OptionType.STRING},image:{type:a.OptionType.IMAGE},blendMode:{type:a.OptionType.NUMBER,default:l.BLEND_MODES.MULTIPLY,available:Object.keys(l.BLEND_MODES).map(function(t){return l.BLEND_MODES[t]})},alpha:{type:a.OptionType.NUMBER,default:1}},s.a.Operations.OverlayOperation=p,e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(94),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._lastBlurRadius=s._options.blurRadius,s._lastGradientRadius=s._options.gradientRadius,s._horizontalFilter=new l.a,s._verticalFilter=new l.a,s._sprite.setFilters([s._horizontalFilter,s._verticalFilter]),s._horizontalFilter.setDelta(new u(1,1)),s._verticalFilter.setDelta(new u(-1,1)),s._filter=new l.a,s}return i(e,t),e.prototype.rotate=function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})},e.prototype.flip=function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})},e.prototype.transform=function(t){var e=this,n={},o=this.getPosition();n.position=t.applyToRelativePoint(o),["radius","blurRadius","gradientRadius"].forEach(function(o){var r=e.getOption(o);n[o]=t.applyToRelativeSize(r)}),this.set(n,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),n=e.min(),o=this._options,r=o.position,i=o.blurRadius,s=o.radius,l=o.gradientRadius,u={blurRadius:i*n,radius:s*n,gradientRadius:l*n,position:r.clone().multiply(e),texSize:e};return this._horizontalFilter.set(u),this._verticalFilter.set(u),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=this._options,n=e.blurRadius,o=e.radius,r=e.gradientRadius,i=e.position,s=t.getDimensions();return this._filter.set({blurRadius:n,radius:o,gradientRadius:r,position:i,texSize:s}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);p.identifier="radial-focus",p.prototype.availableOptions={position:{type:a.OptionType.VECTOR2,default:new u(.5,.5)},radius:{type:a.OptionType.NUMBER,default:.25},gradientRadius:{type:a.OptionType.NUMBER,default:.125},blurRadius:{type:a.OptionType.NUMBER,default:.025}},s.a.Operations.RadialFocusOperation=p,e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(4)),l=n.n(s),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];var p=r(this,t.call.apply(t,[this].concat(s)));return p._fragmentSource=n(95),p._lastBlurRadius=null,p._lastGradientRadius=null,p._lastPosition=new u,p._blurredRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),p._maskRenderTarget=new a.Engine.CanvasRenderTarget(100,100,1),p}return i(e,t),e.prototype._applyCanvas=function(t,e,n){var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),r=!this._blurredRenderTarget.getDimensions().equals(o);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastPosition.equals(this._options.position)&&this._lastGradientRadius===this._options.gradientRadius&&!r||(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||r)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)},e.prototype._blurImage=function(t){var e=t.getCanvas(),n=t.getContext(),o=new u(e.width,e.height),r=n.getImageData(0,0,e.width,e.height);l.a.stackBlurCanvasRGBA(r,0,0,e.width,e.height,this._options.blurRadius*o.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new u(t.width,t.height),o=this._maskRenderTarget.getPixelRatio(),r=this._options.position.clone().multiply(n),i=this._options,a=i.radius,s=i.gradientRadius;a*=t.height,s*=t.height;var l=e.createRadialGradient(r.x,r.y,0,r.x,r.y,(a+s)*o);l.addColorStop(0,"#FFFFFF"),l.addColorStop(a/(a+s),"#FFFFFF"),l.addColorStop(1,"#000000"),e.fillStyle=l,e.fillRect(0,0,n.x,n.y)},e.prototype._applyMask=function(t,e){for(var n=e.getContext(),o=t.getCanvas(),r=t.getContext(),i=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,o.width,o.height),l=s.data,u=i.getImageData(0,0,o.width,o.height).data,p=a.getImageData(0,0,o.width,o.height).data,c=void 0,f=0;f<o.width*o.height*4;f+=4)c=p[f]/255,l[f]=c*l[f]+(1-c)*u[f],l[f+1]=c*l[f+1]+(1-c)*u[f+1],l[f+2]=c*l[f+2]+(1-c)*u[f+2];n.putImageData(s,0,0)},e}(a.Engine.Filter);p.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:30,uniformType:a.UniformType.FLOAT},radius:{type:a.OptionType.NUMBER,default:50,uniformType:a.UniformType.FLOAT},gradientRadius:{type:a.OptionType.NUMBER,default:25,uniformType:a.UniformType.FLOAT},position:{type:a.OptionType.VECTOR2,default:new u(.5,.5),uniformType:a.UniformType.FLOAT2},delta:{type:a.OptionType.VECTOR2,default:new u(1,1),uniformType:a.UniformType.FLOAT2},texSize:{type:a.OptionType.VECTOR2,default:new u(100,100),uniformType:a.UniformType.FLOAT2}},e.a=p},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(9),u=n(8),p=n(97),c=a.Math.Vector2,f=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var f=r(this,t.call.apply(t,[this].concat(i))),h=f._sdk.getRenderer();f._lastBlurRadius=null,f._blurredRenderTexture=new a.Engine.RenderTexture(h,100,100,1),f._maskRenderTexture=new a.Engine.RenderTexture(h,100,100,1),f._brushSprite=new l.a(f),f._brushSpriteContainer=new a.Engine.Container;var d=f._brushSprite.getDisplayObject();if(f._brushSpriteContainer.addChild(d),f._outputSprite=new a.Engine.Sprite,f._outputContainer=new a.Engine.Container,f._outputContainer.addChild(f._outputSprite),f._maskFilter=new p.a,h.isOfType(a.RendererType.WEBGL)){f._horizontalFilter=new u.a,f._verticalFilter=new u.a,f._sprite.setFilters([f._horizontalFilter,f._verticalFilter]),f._horizontalFilter.setDelta(new c(1,1)),f._verticalFilter.setDelta(new c(-1,1));var y=f._maskRenderTexture.getBaseTexture();y.setGLUnit(f._maskFilter.getMaskImage()),h.updateTexture(y,!1),y=f._blurredRenderTexture.getBaseTexture(),y.setGLUnit(f._maskFilter.getFilterImage()),h.updateTexture(y,!1)}else h.isOfType(a.RendererType.CANVAS)&&(f._blurFilter=new u.a,f._sprite.setFilters([f._blurFilter]),f._maskFilter.setMaskCanvas(f._maskRenderTexture.getRenderTarget().getCanvas()),f._maskFilter.setFilterCanvas(f._blurredRenderTexture.getRenderTarget().getCanvas()));return f._outputSprite.setFilters([f._maskFilter]),f}return i(e,t),e.prototype.flip=function(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.rotate=function(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.transform=function(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype._render=function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),a.Promise.resolve()},e.prototype._renderMask=function(t){var e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(a.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType(a.RendererType.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)},e.prototype._renderBlur=function(t){var e=t.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(e)||this._blurredRenderTexture.resizeTo(e);var o=this._options.blurRadius;if(this._lastBlurRadius!==o||!n.equals(e)){var r=this._sdk.getRenderer(),i=void 0;if(r.isOfType(a.RendererType.WEBGL)){i={blurRadius:o*e.min(),texSize:e},this._horizontalFilter.set(i),this._verticalFilter.set(i)}else r.isOfType(a.RendererType.CANVAS)&&(i={blurRadius:o},this._blurFilter.set(i));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=o}},e.prototype.getBrush=function(){return this._brushSprite},e.prototype.createPath=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new l.a.Brushes.RadialBrush({size:t,hardness:e,color:a.Color.WHITE}),o=this._brushSprite.createPath(n);return this._options.paths.push(o),this.setDirty(!0),o},e.prototype.setDirtyForRenderer=function(e,n,o){t.prototype.setDirtyForRenderer.call(this,e,n,o),this._brushSprite.setDirtyForRenderer(e,n,o)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._sdk.getRenderer().isOfType(a.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()},e.prototype.hasChanges=function(){return!0},e}(a.Operation);f.identifier="selective-blur",f.prototype.availableOptions={blurRadius:{type:a.OptionType.NUMBER,default:.05},paths:{type:a.OptionType.ARRAY,default:[],setter:function(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},s.a.Operations.SelectiveBlurOperation=f,e.default=f},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),function(t){function e(){o(this,e);var i=r(this,t.call(this));return i._fragmentSource=n(98),i}return i(e,t),e.prototype._applyCanvas=function(t,e,n){for(var o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),r=e.getContext(),i=n.getContext(),a=this._options,s=a.maskCanvas,l=a.filterCanvas,u=s.getContext("2d"),p=l.getContext("2d"),c=u.getImageData(0,0,o.width,o.height).data,f=r.getImageData(0,0,o.width,o.height),h=f.data,d=p.getImageData(0,0,o.width,o.height).data,y=void 0,_=0;_<o.width*o.height*4;_+=4)y=c[_]/255,h[_]=y*d[_]+(1-y)*h[_],h[_+1]=y*d[_+1]+(1-y)*h[_+1],h[_+2]=y*d[_+2]+(1-y)*h[_+2];i.putImageData(f,0,0)},e}(a.Engine.Filter));s.prototype.availableOptions={maskImage:{type:a.OptionType.NUMBER,default:1,uniformType:a.UniformType.INT},maskCanvas:{type:a.OptionType.OBJECT,default:null},filterImage:{type:a.OptionType.NUMBER,default:2,uniformType:a.UniformType.INT},filterCanvas:{type:a.OptionType.OBJECT,default:null}},e.a=s},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(5),u=n(100),p=n(101),c=n(9),f=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._onSpriteUpdate=s._onSpriteUpdate.bind(s),s._options.sprites.slice().forEach(function(t){s.removeSprite(t),s.addSprite(t)}),s}return i(e,t),e.prototype.getSpritesOfType=function(t){return this._options.sprites.filter(function(e){return e instanceof t})},e.prototype.rotate=function(t){this._options.sprites.forEach(function(e){e.applyRotation(t)})},e.prototype.flip=function(t){this._options.sprites.forEach(function(e){e.applyFlip(t)})},e.prototype._onSpriteUpdate=function(t,e){this.setDirty(!0)},e.prototype._applyRotation=function(t,e){this._options.sprites.forEach(function(n){return n.applyRotation(t,e)})},e.prototype.transform=function(t){this._options.sprites.forEach(function(e){return e.applyTransform(t)})},e.prototype.scale=function(t){this._options.sprites.forEach(function(e){return e.applyScale(t)})},e.prototype.serializeOption=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===e?this._options.sprites.map(function(t){return t.serializeOptions(void 0,n)}):t.prototype.serializeOption.call(this,e,n)},e.prototype.createSticker=function(t){return new u.a(this,t)},e.prototype.createText=function(t){return new p.a(this,t)},e.prototype.createBrush=function(t){return new c.a(this,t)},e.prototype.addSprite=function(t){this._options.sprites.push(t),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate)},e.prototype.removeSprite=function(t){var e=this._options.sprites,n=e.indexOf(t);return-1!==n&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(n,1),this.setDirty(!0),!0)},e.prototype._render=function(t){var e=this,n=this._container,o=this._options.sprites,r=t.getDimensions().clone().floor();return a.Promise.all(o.map(function(t){return t.validateSettings()})).then(function(){o.forEach(function(t){return t.update(e._sdk,r)})}).then(function(){e._renderTexture.clear(),e._renderTexture.render(n)})},e.prototype.takeSpriteToFront=function(t){var e=this._options.sprites,n=e.indexOf(t);if(-1!==n){a.Utils.moveArrayItem(e,n,e.length-1);var o=t.getDisplayObject();this._container.removeChild(o),this._container.addChild(o),this.setDirty(!0)}},e.prototype.getSpritesAtPosition=function(t,e){var n=this,o=[];this._options.sprites.forEach(function(t){return t.update(n._sdk,e)});var r=this._sdk.getSprite(),i=r.getWorldTransform().applyInverseToVector(t),a=r.getTexture().getFrame(),s=a.width,l=a.height,u=r.getAnchor().clone().multiply(-s,-l);i.subtract(u);for(var p=this._options.sprites.slice(0).reverse(),c=0,f=p.length;c<f;c++){var h=p[c];h.getHitTestDisplayObject().isAtPosition(i)&&o.push(h)}return o},e.prototype.setDirtyForRenderer=function(e,n,o){t.prototype.setDirtyForRenderer.call(this,e,n,o),this._options.sprites.forEach(function(t){t.setDirtyForRenderer(e,n,o)})},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._options.sprites.forEach(function(t){t.dispose()})},e}(a.Operation);f.StickerSprite=u.a,f.TextSprite=p.a,f.BrushSprite=c.a,f.identifier="sprite",f.prototype.availableOptions={sprites:{type:a.OptionType.ARRAY,default:[],setter:function(t,e){var n=this;if(t=t.map(function(t,e){if(t instanceof l.a)return t;var o=t.type;switch(delete t.type,o){case"text":return new p.a(n,t);case"sticker":return new u.a(n,t);case"brush":return new c.a(n,t);default:a.Log.error(n.constructor.name,"Invalid sprite type: "+t.type)}}),!e){if(this._options.sprites){this._options.sprites.slice().forEach(function(t){t.dispose(),n.removeSprite(t)})}t.forEach(function(t){n.addSprite(t)})}return t}}},s.a.Operations.SpriteOperation=f,e.default=f},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(5)),l=n(7),u=a.Math.Vector2,p=a.Math.ColorMatrix,c=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var p=r(this,t.call.apply(t,[this].concat(i))),c=p._options.image,f=c.src||c.filePath;return p._isSVG=f&&!!f.match(/\w+\.svg(?=\?|$)/i),p._isSVG&&(p._canvas=a.Utils.createCanvas(),p._context=p._canvas.getContext("2d")),c&&p._onImageUpdate(),p._tintFilter=new a.Engine.Filters.TintFilter,p._adjustmentsFilter=new l.a,p._lastRenderedDimensions=u.NULL,p._lastRenderedInputDimensions=u.NULL,p._onOptionsChange=p._onOptionsChange.bind(p),p._options.adjustments.on("updated",p._onOptionsChange),p}return i(e,t),e.prototype.applyScale=function(t){this.setDimensions(this.getDimensions().multiply(t))},e.prototype.serializeOptions=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t.prototype.serializeOptions.call(this,e,n);return e||(o.type="sticker"),o},e.prototype._rendersToRenderTexture=function(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(a.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode},e.prototype._getTexture=function(){return this._inputTexture},e.prototype.update=function(t,e){var n=this._options,o=n.dimensions,r=n.image;if(o.equals(u.NULL)&&o.set(r.width,r.height),(!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(o)||this._lastRenderedImage!==r)&&this._isSVG&&t.getRenderer().isOfType(a.RendererType.WEBGL)){var i=t.getOutputDimensions();if(o.x>i.x||o.y>i.y){var s=a.Utils.resizeVectorToFit(o,i);r.width=s.x,r.height=s.y}else r.width=o.x,r.height=o.y;this._canvas.width=r.width,this._canvas.height=r.height,this._context.clearRect(0,0,r.width,r.height),this._context.drawImage(r,0,0,r.width,r.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);var l=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){l.push(this._adjustmentsFilter);var c=this._options.adjustments,f=new p;f.multiply(p.createBrightnessMatrix(c.getBrightness())),f.multiply(p.createSaturationMatrix(c.getSaturation())),f.multiply(p.createContrastMatrix(c.getContrast())),this._adjustmentsFilter.set({colorMatrix:f})}this._options.tintMode&&"none"!==this._options.tintMode&&(l.push(this._tintFilter),this._tintFilter.set({mode:a.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(l)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(o),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=r},e.prototype._applyFlip=function(){var t=this._sprite.getScale();this._options.flipVertically&&(t.y*=-1),this._options.flipHorizontally&&(t.x*=-1),this._sprite.setScale(t)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var n={rotation:this._options.rotation},o=n.rotation/Math.PI*180,r=-1*o;switch(n.rotation=r*Math.PI/180,e){case"horizontal":n.flipHorizontally=!this._options.flipHorizontally,this.set(n);break;case"vertical":n.flipVertically=!this._options.flipVertically,this.set(n)}},e.prototype._hasAdjustments=function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()},e.prototype._onImageUpdate=function(){var t=this._options.image,e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(a.RendererType.WEBGL)&&(t=this._canvas),this._inputTexture=a.Engine.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)},e.prototype.setOption=function(e,n){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setOption.call(this,e,n,o),"image"===e&&this._identitySprite&&this._onImageUpdate()},e.prototype._onOptionsChange=function(){var t=this._dirtiness;for(var e in t)t[e]=!0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)},e}(s.a);c.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},identifier:{type:a.OptionType.STRING,default:""},image:{type:a.OptionType.IMAGE,required:!0},position:{type:a.OptionType.VECTOR2,default:u.NULL},dimensions:{type:a.OptionType.VECTOR2,default:u.NULL},anchor:{type:a.OptionType.VECTOR2,default:new u(0,0)},pivot:{type:a.OptionType.VECTOR2,default:new u(.5,.5)},rotation:{type:a.OptionType.NUMBER,default:0},flipHorizontally:{type:a.OptionType.BOOLEAN,default:!1},flipVertically:{type:a.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:a.OptionType.BOOLEAN,default:!1},tintColor:{type:a.OptionType.COLOR,default:a.Color.WHITE},tintMode:{type:a.OptionType.STRING,default:"none",available:["none","solid","colorized"]},alpha:{type:a.OptionType.NUMBER,default:1},adjustments:{type:a.OptionType.CONFIGURABLE,structure:{brightness:{type:a.OptionType.NUMBER,default:0},saturation:{type:a.OptionType.NUMBER,default:1},contrast:{type:a.OptionType.NUMBER,default:1}}}},c.type="sticker",e.a=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(5)),l=n(102),u=a.Math.Vector2,p=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._textRenderer=new l.a(s,s._operation),s._textRenderer.rotation=s.getRotation(),s._sprite.setTexture(s._textRenderer.getFinalTexture()),s._hitTestSprite.setTexture(s._textRenderer.getTexture()),s}return i(e,t),e.prototype.serializeOptions=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t.prototype.serializeOptions.call(this,e,n);return e||(o.type="text"),o},e.prototype.getDOMStyle=function(t,e){var n=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:n+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}},e.prototype.getAbsoluteTextHeight=function(t){var e=this.getFontSize()*t.y,n=this.getTextMetrics();if(n){var o=1/n.unitsPerEm*e,r=n.ascender*o,i=n.descender*o;return r+Math.abs(i)}return e*this.getLineHeight()*1.1},e.prototype.getDimensions=function(t,e){return this._textRenderer.getDimensions(t,e)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var n=this._options.rotation;switch(e){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}},e.prototype.applyTransform=function(e){t.prototype.applyTransform.call(this,e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)},e.prototype.applyRotation=function(e){t.prototype.applyRotation.call(this,e);var n=(e+360)%360,o=this._operation.getInputDimensions();90!==n&&270!==n||(this.setMaxWidth(this.getMaxWidth()/o.x*o.y),this.setFontSize(this.getFontSize()/o.y*o.x))},e.prototype.setOption=function(e,n){if("rotation"===e)return this._options.rotation=n,this._textRenderer&&(this._textRenderer.rotation=n),this._rotation=n,void this.emit("update");t.prototype.setOption.call(this,e,n)},e.prototype.getOption=function(e){return"rotation"===e?this._rotation:t.prototype.getOption.call(this,e)},e.prototype.getHitTestDisplayObject=function(){return this._hitTestSprite},e.prototype.update=function(e,n){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(e,n);var o=this._textRenderer.getFinalTexture();o.getBaseTexture().update();var r=e.getRenderer();r.isOfType(a.RendererType.WEBGL)&&r.updateTexture(o.getBaseTexture()),t.prototype.update.call(this,e,n),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()}},e.prototype._getTexture=function(){return this._textRenderer.getFinalTexture()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._textRenderer.dispose()},e}(s.a);p.prototype.availableOptions={id:{type:a.OptionType.STRING,default:function(){return a.Utils.getUUID()}},fontSize:{type:a.OptionType.NUMBER,default:.1},characterSpacing:{type:a.OptionType.NUMBER,default:0},lineHeight:{type:a.OptionType.NUMBER,default:1.1},fontIdentifier:{type:a.OptionType.STRING},fontFamily:{type:a.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:a.OptionType.ALL,default:"normal"},fontStyle:{type:a.OptionType.STRING,default:"normal"},textMetrics:{type:a.OptionType.OBJECT,default:null},outlineWidth:{type:a.OptionType.NUMBER,default:0},outlineColor:{type:a.OptionType.COLOR,default:a.Color.BLACK},alignment:{type:a.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:a.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:a.OptionType.COLOR,default:new a.Color(1,0,0,1)},backgroundColor:{type:a.OptionType.COLOR,default:a.Color.TRANSPARENT},position:{type:a.OptionType.VECTOR2,default:new u(.5,.5)},anchor:{type:a.OptionType.VECTOR2,default:new u(0,0)},pivot:{type:a.OptionType.VECTOR2,default:new u(.5,.5)},rotation:{type:a.OptionType.NUMBER,default:0},text:{type:a.OptionType.STRING,required:!0},maxWidth:{type:a.OptionType.NUMBER,default:.5},maxHeight:{type:a.OptionType.NUMBER,default:0},visible:{type:a.OptionType.BOOLEAN,default:!0}},p.type="text",e.a=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(0),i=(n.n(r),n(103)),a=r.Math.Vector2,s=function(){function t(e,n){o(this,t),this._text=e,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return t.prototype._createCanvas=function(){this._canvas=r.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new i.a(this._context),this._finalCanvas=r.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")},t.prototype._createTexture=function(){this._texture=r.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=r.Engine.Texture.fromCanvas(this._finalCanvas)},t.prototype._applyTextOptions=function(t,e){e.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+t.fontSize+'px "'+this._text.getFontFamily()+'"',e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(e.lineWidth=n)},t.prototype._buildOutputLines=function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()},t.prototype._renderTextLine=function(t,e){var n=this._text.getAlignment(),o=new a(0,e);switch(n){case"center":o.x=this._canvas.width/2;break;case"right":o.x=this._canvas.width}this._context.fillText(t,o.x,o.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,o.x,o.y))},t.prototype.update=function(t,e){var n=this.calculateFontStyles(t,e);if(n){var o=this._calculateText(t,n,e),r=o.dimensions,i=o.lines;this._renderText(t,r,i,n,e),this._updateFinalTexture()}},t.prototype._updateFinalTexture=function(){var t=this._canvas,e=t.width,n=t.height,o=this.rotation,r=Math.cos(o),i=Math.sin(o),s=new a(Math.abs(e*r)+Math.abs(n*i),Math.abs(e*i)+Math.abs(n*r));this._finalCanvas.width=s.x,this._finalCanvas.height=s.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(o),this._finalContext.drawImage(this._canvas,-e/2,-n/2),this._finalContext.restore()},t.prototype._renderText=function(t,e,n,o,r){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*r.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(o,this._context);for(var i=0;i<n.length;i++){var a=n[i];this._renderTextLine(a,o.topPadding+o.lineHeight*i)}},t.prototype.calculateFontStyles=function(t,e){var n=this._text.getFontFamily(),o=this._text.getFontSize()*e.y,r=this._text.getAbsoluteTextHeight(e),i=r*this._text.getLineHeight(),a=r*(this._text.getLineHeight()-1)/2,s={fontFamily:n,fontSize:o,lineHeight:i,topPadding:a};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===o&&this._textOptions.lineHeight===i||(this._textOptions=s),s},t.prototype._calculateText=function(t,e,n){var o=this._text.getMaxWidth()*n.x;this._applyTextOptions(e,this._context);var r=new a,i=this._text.getText().split("\n");if(void 0!==o)r.x=o,i=this._buildOutputLines(o);else for(var s=0;s<i.length;s++){var l=i[s];r.x=Math.max(r.x,this._context.measureText(l).width)}var u=e.lineHeight;return r.y=i.length*u,{dimensions:r,lines:i}},t.prototype.getTexture=function(){return this._texture},t.prototype.getFinalTexture=function(){return this._finalTexture},t.prototype.getDimensions=function(t,e){var n=this.calculateFontStyles(t,e);return this._calculateText(t,n,e).dimensions},t.prototype.dispose=function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture.getBaseTexture().dispose(),this._texture=null,this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null},t}();e.a=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){o(this,t),this._context=e,this._lastFontStyle={}}return t.prototype.getLines=function(){for(var t=this,e=[],n=[],o=this._lines.length,r=0;r<o;r++){for(var i=this._lines[r],a=this._buildWords(i),s=a.length,l=0;l<s;l++){var u=a[l],p=n.concat(u).join("").replace(/\s+$/i,"");if(this._getWidth(p)>this._maxWidth){n.length>0&&(e.push(n.join("")),n=[u]);var c=u.replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){var f=this._splitWord(u);e=e.concat(f.lines),f.rest&&(n=[f.rest])}}else n.push(u)}e.push(n.join("")),n=[]}return e.map(function(e){return t._trimLine(e,t._context.textAlign)})},t.prototype._trimLine=function(t,e){return t},t.prototype._buildWords=function(t){for(var e=[],n="",o=t.length,r=0;r<o;r++){var i=t[r];n+=i," "!==i&&"-"!==i&&r!==o-1||(e.push(n),n="")}return e},t.prototype._splitWord=function(t){for(var e={lines:[],rest:null},n=t.length,o=[],r=0;r<n;r++){var i=t[r];this._getWidth(o.concat(i).join(""))>this._maxWidth?(o.length>0&&e.lines.push(o.join("")),o=[i]):o.push(i),r===n-1&&o.length>0&&(e.rest=o.join(""))}return e},t.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)},t.prototype._getWidth=function(t){return this._context.measureText(t).width},t.prototype.setText=function(t){this._text=t,this._lines=t.split("\n")},t.prototype.setMaxWidth=function(t){this._maxWidth=t},t}();e.a=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(105),u=a.Math.Vector2,p=function(t){function e(){return o(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._render=function(t){this._sprite.setRotation(0);var e=t.getDimensions(),n=this._options,o=n.start,r=n.end,i=n.rotation,s=n.textureScale,l=o.clone().add(r.clone().subtract(o).divide(2)),u=this.calculateScale(),p=u*s,c=this.getNewDimensions(e);return this._sprite.setAnchor(l),this._sprite.setRotation(i),this._sprite.setScale(p,p),this._sprite.setPosition(c.clone().multiply(.5)),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.calculateScale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),n=new u(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),o=e.clone().multiply(.5);o.subtract(n.clone().divide(2)),o.abs();return o.y>o.x?2*o.y/e.y+1:2*o.x/e.x+1},e.prototype.getNewDimensions=function(t){var e=this._options,n=e.start,o=e.end,r=e.textureScale,i=this.calculateScale();return t.clone().multiply(r*i).multiply(o.clone().subtract(n)).round()},e.prototype.flip=function(t){var e=this._options,n=e.start,o=e.end,r=n.clone();"horizontal"===t?(n.set(1-o.x,n.y),o.set(1-r.x,o.y)):"vertical"===t&&(n.set(n.x,1-o.y),o.set(o.x,1-r.y))},e.prototype.rotate=function(t){for(var e=this._options,n=e.start,o=e.end,r=(t+360)%360,i=Math.floor(r/90),a=0;a<i;a++){var s=n.clone();n.set(1-o.y,s.x),o.set(1-s.y,o.x)}},e}(a.Operation);p.identifier="transform",p.prototype.availableOptions={start:{type:a.OptionType.VECTOR2,default:new u(0,0)},end:{type:a.OptionType.VECTOR2,default:new u(1,1)},textureScale:{type:a.OptionType.NUMBER,default:1},rotation:{type:a.OptionType.NUMBER,default:0}},p.TransformChange=l.a,s.a.Operations.TransformOperation=p,e.default=p},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(0),i=(n.n(r),r.Math.Vector2),a=function(){function t(e,n){o(this,t),this._operation=e,this._options=n,this._inputDimensions=this._operation.getInputDimensions(!1),this._rotationDelta=n.rotation-this._operation.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._operation.getEnd().clone().subtract(this._operation.getStart()).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._operation.getStart().clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=this._operation.calculateScale(n.rotation)/this._operation.calculateScale(),this._absoluteStart=this._operation.getStart().clone().multiply(this._inputDimensions),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/this._operation.getTextureScale()}return t.prototype.applyToRelativePoint=function(t){var e=this._operation.getStart(),n=this._operation.getEnd(),o=e.clone().add(n.clone().subtract(e).divide(2)),r=o.multiply(this._inputDimensions),a=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),s=r.clone().add(a),l=s.clone().subtract(this._inputDimensions.clone().divide(2)),u=new i(l.x*this._deltaCos-l.y*this._deltaSin,l.x*this._deltaSin+l.y*this._deltaCos),p=this._inputDimensions.clone().divide(2).add(u),c=this._options.start.clone().multiply(this._inputDimensions);return p.clone().subtract(c).divide(this._newAbsoluteSize)},t.prototype.applyToRelativeSize=function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()},t.prototype.applyToDimensions=function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t},t.prototype.scaleSize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]},t.prototype.applyToRotation=function(t){return(t+this._rotationDelta)%(2*Math.PI)},t}();e.a=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=a.Math.Vector2,u=function(t){function e(){o(this,e);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var l=r(this,t.call.apply(t,[this].concat(i)));return l._watermarkSprite=new a.Engine.Sprite,l._watermarkSprite.setAnchor(.5,.5),l._container.addChild(l._watermarkSprite),l}return i(e,t),e.prototype._render=function(t){this._watermarkTexture||(this._watermarkTexture=a.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),n=this._options.image,o=n.width,r=n.height,i=a.Utils.resizeVectorToFit(new l(o,r),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(i.x),this._watermarkSprite.setHeight(i.y),this._renderTexture.render(this._container),a.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._watermarkSprite.dispose()},e}(a.Operation);u.identifier="watermark",u.prototype.availableOptions={image:{type:a.OptionType.OBJECT,required:!0}},s.a.Operations.WatermarkOperation=u,e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n.n(o),i=n(17),a=n(20),s=n(21),l=n(84),u=n(85),p=n(88),c=n(91),f=n(92),h=n(93),d=n(96),y=n(99),_=n(104),g=n(106),v=[i.default,a.default,s.default,l.default,u.default,p.default,c.default,f.default,h.default,d.default,y.default,_.default,g.default];r.a.AllOperations=v,e.default=v}]).default});