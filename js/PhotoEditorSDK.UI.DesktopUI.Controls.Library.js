!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):"function"==typeof define&&define.amd?define([["PhotoEditorSDK","UI","DesktopUI"],"photoeditorsdk"],t):"object"==typeof exports?exports._unexposedPESDK=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):e._unexposedPESDK=t(e.PhotoEditorSDK.UI.DesktopUI,e.PhotoEditorSDK)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(t,o){t.exports=e},function(e,o){e.exports=t},,,,,,,,,,function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),i.ControlsStyles.PlainControlItem),c=i.ControlsStyles.PlainControlItemBackground,l=function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onWebcamClick","_onDropZoneClick","_onDropZoneDragEnter","_onDropZoneDragLeave","_onDropZoneDragOver","_onDropZoneDrop","_onImage"),s._dragCounter=0,s.state={dropZoneHovered:!1},s}return a(t,e),t.prototype._onWebcamClick=function(){this.props.onWebcamActivated&&this.props.onWebcamActivated()},t.prototype._onImage=function(e){this.props.onImage&&this.props.onImage(e)},t.prototype._onDropZoneClick=function(){this.refs.upload.open()},t.prototype._onDropZoneDragEnter=function(e){e.preventDefault(),this._dragCounter++,this.setState({dropZoneHovered:!0})},t.prototype._onDropZoneDragLeave=function(e){e.preventDefault(),0===--this._dragCounter&&this.setState({dropZoneHovered:!1})},t.prototype._onDropZoneDragOver=function(e){e.preventDefault()},t.prototype._onDropZoneDrop=function(e){var t=this;e.stopPropagation(),e.preventDefault(),e=e.nativeEvent,e.returnValue=!1,this.setState({dropZoneHovered:!1},function(){if(e.target||e.dataTransfer){var o=e.target.files||e.dataTransfer.files;if(o&&!(o.length<=0))return o[0].type.match(/^image\//i)?void t._handleFile(o[0]):i.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.invalidFileType.text",{fileType:o[0].type}))}})},t.prototype._handleFile=function(e){var t=this,o=new window.FileReader;o.onload=function(){return function(e){var o=e.target.result,n=new window.Image;n.addEventListener("load",function(){t._onImage(n)}),n.addEventListener("error",function(e){return i.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.imageLoadingError.text"))}),n.src=o}}(),o.readAsDataURL(e)},t.prototype.render=function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return i.React.createElement(p,null,i.React.createElement(i.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onImage}),i.React.createElement(u,null,i.React.createElement(d,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone")),!this.state.dropZoneHovered&&this.props.webcamEnabled&&i.React.createElement(h,{style:e,className:void 0,onClick:this._onWebcamClick})))},t}(i.BaseComponent);t.a=l;var p=Object(i.adonis)(s).li("fujban","Container"),u=Object(i.adonis)(c).div("17hsmc4","Background"),d=i.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),h=i.adonis.div("1y2fyfw","WebcamButton")},,,function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(0),s=o.n(i),c=o(15),l=o(21),p=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.shouldKeepChanges=function(){var e=this,t=this.context,o=t.editor,n=t.ui;return void 0===this.keepChanges&&!o.isShallow&&o.history.isAvailable()?new Promise(function(t,o){i.ModalManager.instance.displayWarning(n.translate("warnings.discardChanges.title"),n.translate("warnings.discardChanges.text"),[n.translate("warnings.discardChanges.buttons.keep"),n.translate("warnings.discardChanges.buttons.discard")],!0).on("button",function(o){var n=0===o;e.keepChanges=n,t(n)})}):Promise.resolve(this.keepChanges)},t.prototype.onImage=function(e){var t=this;this.shouldKeepChanges().then(function(o){if(t._options.switchScreenOnImage)t.context.options.editor.image=e,t.context.appComponent.switchToScreen("editor");else{t.context.editor.setImage(e,!o)}t.sharedState.get("webcamEnabled")&&(t.sharedState.set({webcamEnabled:!1}),t.context.screen.switchToControls("default"))})},t.prototype._onEnter=function(){this.sharedState.set({webcamEnabled:!1})},t.hasLibraryProvider=function(e){var t=e.getOptions().editor.controlsOptions;if(void 0===t.library)return!0;var o=t.library;return!!(o.provider||o.enableWebcam||o.enableUpload)},t.isEnabled=function(e){return t.hasLibraryProvider(e)&&e.isToolEnabled("library")},t}(i.BaseControls);p.clickAtPosition=i.BaseControls.clickAtPosition,p.getPreloadAssets=i.BaseControls.getPreloadAssets,p.identifier="library",p.controlsComponent=c.a,p.canvasControlsComponent=l.a,p.iconPath="editor/controls/library/icon.png",p.activeIconPath="editor/controls/library/icon-active.png",p.defaultOptions={enableWebcam:!0,enableUpload:!0,displayUploadInCanvas:!1,switchScreenOnImage:!1},t.default=p,s.a.Controls.LibraryControls=p},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),o(16)),c=o(18),l=o(20),p={ROOT:0,SEARCH:1},u=function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a))),c=s.props.options.provider;return c&&(s._library=new c),s._bindAll("_onCategorySelect","_onImageSelect","_onSearchQueryChange","_onWebcamActivated"),s.state.currentPanel=p.ROOT,s.state.searchQuery="",s}return a(t,e),t.prototype._onBackButtonClick=function(){this.setState({currentPanel:p.ROOT,searchQuery:"",backButton:!1})},t.prototype._onCategorySelect=function(e){this.setState({currentPanel:p.SEARCH,searchQuery:e.getName(),backButton:!0})},t.prototype._onImageSelect=function(e){var t=this;this.setSharedState({webcamEnabled:!1});var o=new window.Image,n=void 0,r=setTimeout(function(){n=i.ModalManager.instance.displayLoading(t._t("loading.loading"))},200);o.addEventListener("load",function(){n&&n.close(),r&&(clearTimeout(r),r=null),t.props.controls.onImage(o)}),o.addEventListener("error",function(){n&&n.close(),r&&(clearTimeout(r),r=null),i.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.imageLoadingError.text"))}),o.crossOrigin="Anonymous",o.src=e.getRawUrl()},t.prototype._onSearchQueryChange=function(e){this.setState({searchQuery:e,currentPanel:p.SEARCH})},t.prototype._onWebcamActivated=function(e){this.setSharedState({webcamEnabled:!0})},t.prototype.fixStyles=function(){var t=this;if(this._list)return this._list.style.height="100%",e.prototype.fixStyles.call(this).then(function(){if(i.Utils.Browser.isIElte(10)){var e=t._container.offsetHeight;t._list.style.height=e+"px"}return t.refs.panel.fixStyles()})},t.prototype._renderCurrentPanel=function(){var e=this;switch(this.state.currentPanel){case p.ROOT:return i.React.createElement(s.a,{controls:this.props.controls,innerRef:function(t){e._list=t},library:this._library,onCategorySelect:this._onCategorySelect,onWebcamActivated:this._onWebcamActivated,options:this.props.options,key:"panel",ref:"panel"});case p.SEARCH:return i.React.createElement(c.a,{innerRef:function(t){e._list=t},library:this._library,onImageSelect:this._onImageSelect,searchQuery:this.state.searchQuery,key:"panel",ref:"panel"})}},t.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!1}},t.prototype._renderContent=function(){var e=[];return this._library&&e.push(i.React.createElement(l.a,{key:"searchHeader",onChange:this._onSearchQueryChange,searchQuery:this.state.searchQuery})),e.push(this._renderCurrentPanel()),e},t}(i.ControlsComponent);u.contextTypes=i.ControlsComponent.contextTypes,u.propTypes=i.ControlsComponent.propTypes,u.RootElement=i.ControlsComponent.RootElement,t.a=u},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),o(17)),c=o(11),l=function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onImage"),s.state={loading:!0,categories:[]},s}return a(t,e),t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){i.Utils.Browser.isIElte(10)?Object(i.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this._loadCategories()},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this._loadCoverImagesQueue&&this._loadCoverImagesQueue.dispose(),this._disposed=!0},t.prototype._onCategoryClick=function(e){this.props.onCategorySelect&&this.props.onCategorySelect(e)},t.prototype._onImage=function(e){this.props.controls.onImage(e)},t.prototype._loadCoverImages=function(e){var t=this,o=this.context.theme,n=e.map(function(e){return{fn:function(){return e.loadCoverImage()},index:e}});this._loadCoverImagesQueue=new i.DelayedJobQueue(n,{minDelay:o.listItemSlideInDelay}),this._loadCoverImagesQueue.on("job-done",function(e){t._disposed||(t.forceUpdate(),t._scrollbar.update())}),this._loadCoverImagesQueue.start()},t.prototype._loadCategories=function(){var e=this;return this.props.library?this.props.library.getCategories().then(function(t){e._loadCoverImages(t),e.setState({loading:!1,categories:t})}):(this.setState({loading:!1,categories:[]}),Promise.resolve())},t.prototype._renderListItems=function(){var e=this;return this.state.categories.map(function(t){return i.React.createElement(s.a,{key:t.getName(),category:t,visible:t.isCoverImageLoaded(),onClick:e._onCategoryClick.bind(e,t)})})},t.prototype.render=function(){var e=this;if(this.state.loading)return i.React.createElement(i.LoadingIndicatorComponent,null);var t=this.props.options,o=t.enableUpload,n=t.displayUploadInCanvas,r=this.props.innerRef;return i.React.createElement(p,{innerRef:function(t){r&&r(t),e._wrapper=t},className:void 0},i.React.createElement(i.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},i.React.createElement(u,null,o&&!n&&i.React.createElement(c.a,{controls:this.props.controls,onImage:this._onImage,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this.props.onWebcamActivated}),this._renderListItems())))},t}(i.BaseComponent);t.a=l;var p=i.adonis.div("rfecls","RootPanelWrapper"),u=i.adonis.ul("5jg0ou","CategoryList")},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),i.ControlsStyles.ControlItem),c=i.ControlsStyles.ControlItemTitle,l=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.category,o=e.onClick,n=e.visible,r={backgroundImage:"url('"+t.getCoverImage()+"')"};return i.React.createElement(p,{animated:!0,style:r,visible:n,className:void 0,onClick:o},i.React.createElement(u,null,t.getName()))},t}(i.BaseComponent);t.a=l;var p=Object(i.adonis)(s).li("prcvvt","ListItem"),u=Object(i.adonis)(c).div("1ler8h7","ListItemTitle")},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),o(19)),c=function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s.state={loading:!0,images:[]},s}return a(t,e),t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){i.Utils.Browser.isIElte(10)?Object(i.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this._loadImages(this.props.searchQuery)},t.prototype.componentWillReceiveProps=function(e){this.props.searchQuery!==e.searchQuery&&this._loadImages(e.searchQuery)},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this._loadThumbsQueue.stop(),this._loadThumbsQueue.dispose(),this._disposed=!0},t.prototype._onImageClick=function(e){this.props.onImageSelect&&this.props.onImageSelect(e)},t.prototype._loadThumbs=function(e){var t=this,o=this.context.theme,n=e.map(function(e){return{fn:function(){return e.loadThumb()},index:e}});this._loadThumbsQueue=new i.DelayedJobQueue(n,{minDelay:o.listItemSlideInDelay}),this._loadThumbsQueue.on("job-done",function(e){t._disposed||(t.forceUpdate(),t._scrollbar.update())}),this._loadThumbsQueue.start()},t.prototype._loadImages=function(e){var t=this;return e.trim()||this.setState({loading:!1,images:[]},function(){return t._scrollbar.update()}),this.setState({loading:!0}),this.props.library.searchImages(e).then(function(e){t._loadThumbs(e),t.setState({loading:!1,images:e},function(){return t._scrollbar.update()})})},t.prototype._renderListItems=function(){var e=this,t=this.context.editor,o=t.getImage();return 0===this.state.images.length?i.React.createElement(u,null,this._t("editor.controls.library.noResults")):this.state.images.map(function(t){return i.React.createElement(s.a,{key:t.getThumbUrl(),image:t,selected:t.getRawUrl()===(o&&o.src),visible:t.isThumbLoaded(),onClick:e._onImageClick.bind(e,t)})})},t.prototype.render=function(){var e=this;if(this.state.loading)return i.React.createElement(i.LoadingIndicatorComponent,null);var t=this.props.innerRef;return i.React.createElement(l,{innerRef:function(o){t&&t(o),e._wrapper=o},className:void 0},i.React.createElement(i.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},i.React.createElement(p,null,this._renderListItems())))},t}(i.BaseComponent);t.a=c;var l=i.adonis.div("rfecls","RootPanelWrapper"),p=i.adonis.ul("5jg0ou","ImageList"),u=i.adonis.div("6kl290","NoResultsText")},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),i.ControlsStyles.ControlItem),c=i.ControlsStyles.ControlItemActiveOverlay,l=function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s.state={isPortrait:!1,hovered:!1},s}return a(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.props.visible!==e.visible){var t=this.props.image.getThumbImage();t.height>t.width&&this.setState({isPortrait:!0})}},t.prototype.render=function(){var e=this,t=this.props,o=t.image,n=t.onClick,r=t.selected,a=t.visible,s={backgroundImage:"url('"+o.getThumbUrl()+"')"},c=o.getAuthorAvatar(),l=this.context.theme.transitionDuration,y=[void 0,r&&"is-selected"].filter(function(e){return e});return i.React.createElement(p,{animated:!0,style:s,selected:r,visible:a,className:y.join(" "),onClick:n,portrait:this.state.isPortrait,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},i.React.createElement(i.Transition,{active:this.state.hovered,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},i.React.createElement(f,{selected:r},c&&i.React.createElement(d,{src:c}),i.React.createElement(h,null,o.getAuthorName()))),i.React.createElement(i.Transition,{active:r,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},i.React.createElement(u,{selected:!0})))},t}(i.BaseComponent);t.a=l;var p=Object(i.adonis)(s).li("1a5mxw5",{portrait:"otbyv0"},"ListItem"),u=Object(i.adonis)(c).div("120drhm","ListItemOverlay"),d=i.adonis.img("1owxkzt","AuthorAvatar"),h=i.adonis.div("1jylqsv","AuthorName"),f=i.adonis.div("mchu36",{rendered:"2jlos",visible:"1fmxelx"},"Author")},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),250),c=function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];var l=r(this,e.call.apply(e,[this].concat(a)));return l._bindAll("_onInputChange"),l._onDebouncedInputChange=i.Utils.debounce(l._onDebouncedInputChange,s),l.state={searchQueryInputValue:""},l}return a(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.searchQuery!==e.searchQuery&&this.setState({searchQueryInputValue:e.searchQuery})},t.prototype.componentWillUnmount=function(){this._disposed=!0},t.prototype._onDebouncedInputChange=function(e){this._disposed||this.props.onChange&&this.props.onChange(e)},t.prototype._onInputChange=function(e){var t=e.target.value;this.setState({searchQueryInputValue:t}),this._onDebouncedInputChange(t)},t.prototype.render=function(){return i.React.createElement(l,{key:"header"},i.React.createElement(p,null,i.React.createElement(u,{placeholder:this._t("editor.controls.library.search"),onLiveChange:this._onInputChange,className:void 0,value:this.state.searchQueryInputValue})))},t}(i.BaseComponent);t.a=c;var l=i.adonis.div("1tkmkv6","Header"),p=i.adonis.div("mz0a5q","InputContainer"),u=Object(i.adonis)(i.TextInputComponent)("py3uvl","TextInput")},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),o(22)),c=o(23),l=function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onImage","_onWebcamBack","_onWebcamActivated"),s.state.displayHeader=!1,s}return a(t,e),t.prototype._onImage=function(e){this.props.controls.onImage(e)},t.prototype._onWebcamBack=function(){this.setSharedState({webcamEnabled:!1})},t.prototype._onWebcamActivated=function(e){this.setSharedState({webcamEnabled:!0})},t.prototype._renderControls=function(){var e=this.getSharedState("webcamEnabled"),t=this.props.options.displayUploadInCanvas;return e?i.React.createElement(s.a,{onImage:this._onImage,onBack:this._onWebcamBack}):t?i.React.createElement(p,null,i.React.createElement(c.a,{large:!0,controls:this.props.controls,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this._onWebcamActivated,onImage:this._onImage})):void 0},t}(i.CanvasControlsComponent);l.contextTypes=i.CanvasControlsComponent.contextTypes,t.a=l;var p=i.adonis.div("1up9ikz","LibraryUploadContainer")},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(1),s=(o.n(i),o(0)),c=(o.n(s),function(e){function t(){n(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onWebcamReady","_onButtonClick","_onCancelClick"),s.state={webcamReady:!1,videoWidth:1,videoHeight:1},s}return a(t,e),t.prototype._onWebcamReady=function(){this.props.onReady&&this.props.onReady();var e=new i.Math.Vector2(this._video.videoWidth,this._video.videoHeight),t=s.Utils.getInnerDimensionsForElement(this._videoContainer),o=i.Utils.resizeVectorToFit(e,t);this.setState({webcamReady:!0,videoWidth:o.x,videoHeight:o.y})},t.prototype._onButtonClick=function(e){e.preventDefault(),this._takePhoto()},t.prototype._onCancelClick=function(e){e.preventDefault(),this.props.onBack&&this.props.onBack()},t.prototype.componentDidMount=function(){this._initVideoStream()},t.prototype.componentWillUnmount=function(){if(e.prototype.componentWillUnmount.call(this),this._stream){var t=this._stream.getTracks()[0];t&&t.stop(),this._stream.stop&&this._stream.stop()}this._video.pause()},t.prototype._initVideoStream=function(){var e=this,t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!t){return void s.ModalManager.instance.displayError(this._t("errors.title"),this._t("errors.webcamNotSupported.text")).on("close",function(){return e.props.onBack()})}t.call(navigator,{video:!0},function(t){e._stream=t,e._video.onloadedmetadata=e._onWebcamReady,e._video.src=window.URL.createObjectURL(t)},function(t){i.Log.error(t),s.ModalManager.instance.displayError(e._t("errors.title"),e._t("errors.webcamUnavailable.text",{error:t.name}),!0).on("close",function(){return e.props.onBack()})})},t.prototype._takePhoto=function(){var e=this;if(this.state.webcamReady){var t=document.createElement("canvas");t.width=this._video.videoWidth,t.height=this._video.videoHeight;t.getContext("2d").drawImage(this._video,0,0);var o=new window.Image;o.addEventListener("load",function(){e.props.onImage&&e.props.onImage(o)}),o.src=t.toDataURL("image/png")}},t.prototype.render=function(){var e=this,t={width:this.state.videoWidth,height:this.state.videoHeight};return s.React.createElement(l,null,s.React.createElement(p,null,s.React.createElement(u,{onClick:this._onCancelClick},this._t("editor.cancel"))),s.React.createElement(d,null,s.React.createElement(h,{innerRef:function(t){e._videoContainer=t}},s.React.createElement(f,{autoPlay:!0,visible:this.state.webcamReady,style:t,innerRef:function(t){e._video=t}}),s.React.createElement(y,{onClick:this._onButtonClick}))))},t}(s.BaseComponent));t.a=c;var l=s.adonis.div("dehn6v","Container"),p=s.adonis.div("4d756t","Gradient"),u=s.adonis.div("1p4kwwq","CancelButton"),d=s.adonis.div("1j41msh","OuterVideoContainer"),h=s.adonis.div("1g72uw9","VideoContainer"),f=s.adonis.video("1btv3tg",{visible:"jsuk9w"},"Video"),y=s.adonis.div("1fkab7z","Button")},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=o(0),s=(o.n(i),o(11)),c=i.ControlsStyles.PlainControlItem,l=i.ControlsStyles.PlainControlItemBackground,p=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return i.React.createElement(u,null,i.React.createElement(d,null,i.React.createElement(y,null,i.React.createElement(h,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},i.React.createElement(i.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onNewFile}),this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone"))),!this.state.dropZoneHovered&&this.props.webcamEnabled&&i.React.createElement(y,null,i.React.createElement(f,{style:e,className:void 0,onClick:this._onWebcamClick}))))},t}(s.a);t.a=p;var u=Object(i.adonis)(c).div("1xesje3","Container"),d=Object(i.adonis)(l).div("z914p5","Background"),h=i.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),f=i.adonis.div("1jg5y1q","WebcamButton"),y=i.adonis.div("15u7gri","Row")}]).default});