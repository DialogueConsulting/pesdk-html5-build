!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["photoeditorsdk","react","react-dom"],t):"object"==typeof exports?exports.PhotoEditorDesktopUI=t(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom")):e.PhotoEditorDesktopUI=t(e.PhotoEditorSDK,e.React,e.ReactDOM)}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=128)}([function(e,t,n){e.exports={default:n(130),__esModule:!0}},function(e,t,n){e.exports={default:n(132),__esModule:!0}},function(e,t,n){e.exports={default:n(135),__esModule:!0}},function(e,t,n){e.exports={default:n(140),__esModule:!0}},function(e,t,n){"use strict";(function(e){n.d(t,"j",function(){return T}),n.d(t,"v",function(){return P}),n.d(t,"q",function(){return O}),n.d(t,"e",function(){return E}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return C}),n.d(t,"o",function(){return R}),n.d(t,"i",function(){return x}),n.d(t,"p",function(){return I}),n.d(t,"y",function(){return B}),n.d(t,"f",function(){return D}),n.d(t,"n",function(){return j}),n.d(t,"w",function(){return w});var i=n(7),o=n.n(i),r=n(32),a=n.n(r),s=n(142),l=n.n(s),u=n(38),c=n.n(u),f=n(85),p=n(148),h=n.n(p),d=n(86),m=n(164),_=n(186),g=n(191),v=n(15),y=n(65),b=n(26),k=n(100);n.d(t,"u",function(){return m.a}),n.d(t,"l",function(){return a.a}),n.d(t,"b",function(){return d.a}),n.d(t,"d",function(){return _.a}),n.d(t,"s",function(){return g.a}),n.d(t,"m",function(){return l.a}),n.d(t,"z",function(){return v.b}),n.d(t,"x",function(){return v.a}),n.d(t,"h",function(){return y.a}),n.o(p,"withTheme")&&n.d(t,"A",function(){return p.withTheme}),n.o(p,"ThemeProvider")&&n.d(t,"t",function(){return p.ThemeProvider}),n.d(t,"g",function(){return b.a}),n.d(t,"k",function(){return c.a}),n.d(t,"r",function(){return k.a});var w=new h.a(e.adonisOptions||{injection:!1,theme:f.a,minified:!0,cssSelectorPrefix:".pesdk-desktop-editor ",classNamePrefix:"pesdk-",hashedStyles:!0}),C=o.a.Base64,S=o.a.Color,E=(o.a.Math.ColorMatrix,o.a.EventEmitter),x=(o.a.EXIF,o.a.OptionType),T=o.a.Promise,O=o.a.Utils,R=o.a.RenderType,D=o.a.ImageFormat,I=o.a,P=(o.a.UniformType,o.a.Math.Vector2),j=o.a.Math.Rectangle,B="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(101)}).call(t,n(31))},function(e,t,n){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
e.exports=n(129).default},function(e,t,n){e.exports={default:n(200),__esModule:!0}},function(t,n){t.exports=e},function(e,t,n){e.exports={default:n(149),__esModule:!0}},function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(58)("wks"),o=n(37),r=n(12).Symbol,a="function"==typeof r;(e.exports=function(e){return i[e]||(i[e]=a&&r[e]||(a?r:o)("Symbol."+e))}).store=i},function(e,t,n){var i=n(12),o=n(9),r=n(23),a=n(19),s=function(e,t,n){var l,u,c,f=e&s.F,p=e&s.G,h=e&s.S,d=e&s.P,m=e&s.B,_=e&s.W,g=p?o:o[t]||(o[t]={}),v=g.prototype,y=p?i:h?i[t]:(i[t]||{}).prototype;p&&(n=t);for(l in n)(u=!f&&y&&void 0!==y[l])&&l in g||(c=u?y[l]:n[l],g[l]=p&&"function"!=typeof y[l]?n[l]:m&&u?r(c,i):_&&y[l]==c?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):d&&"function"==typeof c?r(Function.call,c):c,d&&((g.virtual||(g.virtual={}))[l]=c,e&s.R&&v&&!v[l]&&a(v,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports={default:n(192),__esModule:!0}},function(e,t,n){var i=n(17);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});for(var i="undefined"==typeof window?e:window,o=i.requestAnimationFrame,r=i.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],l=0;l<s.length&&!o;++l)o=i[s[l]+"RequestAnimationFrame"],r=i[s[l]+"CancelAnimationFrame"]||i[s[l]+"CancelRequestAnimationFrame"];o&&(o=o.bind(i)),r&&(r=r.bind(i)),o||(o=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-a)),o=setTimeout(function(){e(n+i)},i);return a=n+i,o}),r||(r=function(e){clearTimeout(e)})}).call(t,n(31))},function(e,t,n){var i=n(14),o=n(80),r=n(51),a=Object.defineProperty;t.f=n(18)?Object.defineProperty:function(e,t,n){if(i(e),t=r(t,!0),i(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(16),o=n(27);e.exports=n(18)?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(81),o=n(53);e.exports=function(e){return i(o(e))}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onDragStart","_onDragMove","_onDragEnd"),s}return r(t,e),g(t,[{key:"componentDidMount",value:function(){v(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this.refs.element&&(this._element=this.refs.element)}},{key:"_onDragStart",value:function(e){if(!this.props.disabled){e.preventDefault(),e.stopPropagation(),this._initialMousePosition=_.u.getEventPosition(e),document.addEventListener("mousemove",this._onDragMove),document.addEventListener("touchmove",this._onDragMove),document.addEventListener("mouseup",this._onDragEnd),document.addEventListener("touchend",this._onDragEnd);var t=this._element.getBoundingClientRect(),n=new _.v(t.left,t.top);this._lastMousePosition=this._initialMousePosition.clone();var i=this._initialMousePosition.clone().subtract(n);this.props.onStart&&this.props.onStart(i,this._initialMousePosition.clone(),e)}}},{key:"_onDragMove",value:function(e){e.preventDefault(),e.stopPropagation();var t=_.u.getEventPosition(e);if(t){var n=t.clone().subtract(this._initialMousePosition),i=t.clone().subtract(this._lastMousePosition);this._lastMousePosition=t.clone(),this.props.onDrag&&this.props.onDrag(n,t,i,e)}}},{key:"_onDragEnd",value:function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this._onDragMove(e),document.removeEventListener("mousemove",this._onDragMove),document.removeEventListener("touchmove",this._onDragMove),document.removeEventListener("mouseup",this._onDragEnd),document.removeEventListener("touchend",this._onDragEnd),this.props.onStop&&this.props.onStop(e)}},{key:"render",value:function(){var e=this;if(!this.props.children||this.props.children instanceof Array)throw new Error("DraggableComponent expects exactly one child.");var t={onMouseDown:this._onDragStart,onTouchStart:this._onDragStart,onClick:function(t){if(e.props.disabled){var n=e.props.children.props.onClick;return void(n&&n(t))}t.stopPropagation()}};if("string"==typeof this.props.children.type)t.ref="element";else{var n=this.props.children.props.innerRef;t.innerRef=function(t){e._element=t,n&&n(t)}}return _.l.cloneElement(this.props.children,t)}}]),t}(_.b);y.contextTypes=_.b.contextTypes,y.propTypes={onStart:_.k.func,onDrag:_.k.func,onStop:_.k.func,disabled:_.k.bool},t.a=y},function(e,t,n){var i=n(35);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports={}},function(e,t,n){"use strict";var i=n(98),o=n.n(i),r=n(99),a=n.n(r),s=n(8),l=n.n(s),u=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,l=a()(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(o()(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.a={load:function(e){var t=this;return function(){if(e.substr(0,5),!0)return l.a.resolve([e,e])}().then(function(e){var n=u(e,2),i=n[0],o=n[1];return t._createAndLoadImage(i,o)})},_createAndLoadImage:function(e,t){return new l.a(function(e,n){var i=new window.Image;i.addEventListener("load",function(){e(i)}),i.addEventListener("error",function(){n(new Error("Failed to load image at "+t))}),i.crossOrigin="Anonymous",i.src=t})},loadXHR:function(e,t){return new l.a(function(n,i){var o=void 0;window.XDomainRequest?(o=new window.XDomainRequest,t&&o.overrideMimeType(t),o.onload=function(){n(o)},o.onerror=function(e){i(e)}):window.XMLHttpRequest&&(o=new window.XMLHttpRequest,t&&o.overrideMimeType(t),o.onreadystatechange=function(e){4===o.readyState&&(200===o.status?n(o):i(new Error("HTTP Status "+o.status)))}),o.open("GET",e,!0),o.send()})}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(82),o=n(59);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var i=n(53);e.exports=function(e){return Object(i(e))}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,n){e.exports=t},function(e,t,n){"use strict";var i=n(150)(!0);n(88)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i(this,t);var s=o(this,(t.__proto__||h()(t)).call(this));return s.id=d.q.getUUID(),s.type=e,s.title=n,s.text=r,s.overlay=a,s.visible=!0,s.data=null,s}return r(t,e),m(t,[{key:"setData",value:function(e){this.data=e,this.emit("update")}},{key:"close",value:function(){this.visible=!1,this.emit("close")}},{key:"remove",value:function(){this.emit("remove")}}]),t}(d.e),g=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||h()(t)).call(this));return e._modals=[],e}return r(t,e),m(t,[{key:"displayLoading",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new _("loading",e,null,t);return this.addModal(n),n}},{key:"displayProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new _("progress",null,e);return n.setData({progress:t}),this.addModal(n),n}},{key:"displayWarning",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["OK"],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=new _("warning",e,t,i);return o.setData({buttons:n}),this.addModal(o),o}},{key:"displayError",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=new _("error",e,t,n);return this.addModal(i),i}},{key:"addModal",value:function(e){var t=this;this._modals.push(e),e.on("close",function(){t.emit("update")}),e.on("remove",function(){t.removeModal(e)}),e.on("update",function(){t.emit("update")}),this.emit("update")}},{key:"removeModal",value:function(e){var t=this._modals.indexOf(e);this._modals.splice(t,1),this.emit("update")}},{key:"getModals",value:function(){return this._modals}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(d.e);t.a=g},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){e.exports=n(143)()},function(e,t){e.exports=!0},function(e,t,n){var i=n(16).f,o=n(21),r=n(10)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},function(e,t,n){n(152);for(var i=n(12),o=n(19),r=n(25),a=n(10)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=i[u],f=c&&c.prototype;f&&!f[a]&&o(f,a,u),r[u]=r.Array}},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(166),s=n(179),l=n.n(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c="undefined"!=typeof window?window:e,f=function(){function e(t){i(this,e),this._url=t,this._parsedUrl=l.a.parse(this._url,!0)}return u(e,[{key:"_isJSONPRequest",value:function(){var e=this._parsedUrl.query;for(var t in e){if("?"===e[t])return!0}return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var e=this;return new a.a(function(t,n){var i=void 0;c.XDomainRequest?(i=new c.XDomainRequest,i.onload=function(){var e=JSON.parse(i.responseText);t(e)},i.onerror=function(e){n(e)},i.open("GET",e._url,!0),i.send()):c.XMLHttpRequest&&(i=new XMLHttpRequest,i.onreadystatechange=function(e){if(4===i.readyState)if(200===i.status){var o=JSON.parse(i.responseText);t(o)}else n(new Error("HTTP Status "+i.status))},i.open("GET",e._url,!0),i.send())})}},{key:"_loadJSONP",value:function(){var e=this,t=!1,n=!1,i="pesdk"+Math.round(99999999999999*Math.random());return new a.a(function(o,r){var a=e._createJSONPNode(i);c[i]=function(i){e._removeJSONPNode(a),t||(n=!0,o(i))},c.setTimeout(function(){n||(e._removeJSONPNode(a),t=!0,r(new Error("Timeout of 5 seconds exceeded.")))},5e3)})}},{key:"_createJSONPNode",value:function(e){var t=this._buildJSONPUrl(e),n=document.querySelector("head"),i=document.createElement("script");return i.src=t,n.appendChild(i),i}},{key:"_removeJSONPNode",value:function(e){e.parentNode.removeChild(e)}},{key:"_buildJSONPUrl",value:function(e){var t=this._parsedUrl.query,n=null;for(var i in t)if("?"===t[i]){n=i;break}return delete this._parsedUrl.search,t[n]=e,l.a.format(this._parsedUrl)}}]),e}();t.a=f}).call(t,n(31))},function(e,t,n){e.exports={default:n(167),__esModule:!0}},function(e,t,n){e.exports={default:n(168),__esModule:!0}},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(4),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(i)));return s._buttons=[],s.state={visible:!1},s}return a(t,e),v(t,[{key:"componentDidMount",value:function(){for(var e,n=this,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];(e=y(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this)).call.apply(e,[this].concat(o));var a=this.props.modal;a.on("close",function(){n.setState({visible:!1}),setTimeout(function(){a.remove()},1e3*n.context.theme.transitionDuration)}),Object(g.z)(function(){n.setState({visible:!0})})}},{key:"_onButtonClick",value:function(e){}},{key:"_renderButtons",value:function(){var e=this;return this._buttons.map(function(t,n){return g.l.createElement(x,{key:n,onClick:e._onButtonClick.bind(e,n)},t)})}},{key:"render",value:function(){var e=this.props.modal,t=i({},e.type,!0),n=this._buttons.length?g.l.createElement(E,null,this._renderButtons()):null;return g.l.createElement(k,{visible:this.state.visible},g.l.createElement(w,t,g.l.createElement(C,null,g.l.createElement(T,{src:this._getAssetPath("shared/modals/icon.png",!0)})),g.l.createElement(S,null,g.l.createElement(O,null,e.title),g.l.createElement(R,null,e.text))),n,g.l.createElement(D,{visible:!this.state.visible}))}}]),t}(g.b);b.propTypes={modal:g.k.object},b.contextTypes=g.b.contextTypes,t.a=b;var k=g.w.div("1jkivgb",{visible:"7bce9v"},"Modal"),w=g.w.div("1udylfs",{error:"120drhm",warning:"120drhm",loading:"120drhm"},"Top"),C=g.w.div("z6arf2","IconContainer"),S=g.w.div("245la5","TextContainer"),E=g.w.div("1943606","Buttons"),x=g.w.div("1kylmay","Button"),T=g.w.img("jsue2c","Icon"),O=g.w.div("1fx19is","Title"),R=g.w.div("1id6172","Text"),D=g.w.div("mv80g2",{visible:"2jlos"},"BlockingOverlay")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(32),m=n.n(d),_=n(38),g=n.n(_),v=n(15),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._timeout=null,s.state={enter:!1,appear:!1,leave:!1},s.props.active&&(s.state.enter=!0,s.state.appear=!0),s}return r(t,e),y(t,[{key:"componentWillReceiveProps",value:function(e){this.props.active&&!e.active?this._leave():!this.props.active&&e.active&&(this._enter(),this._appear())}},{key:"_cancelTimeout",value:function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)}},{key:"_enter",value:function(){this.setState({enter:!0})}},{key:"_leave",value:function(){var e=this;this._timeout&&this._cancelTimeout(),this.setState({appear:!1,leave:!0}),this._timeout=window.setTimeout(function(){e._cancelTimeout(),e.setState({enter:!1})},this.props.leaveDuration)}},{key:"_appear",value:function(){var e=this;this._timeout&&this._cancelTimeout(),Object(v.b)(function(){e.setState({appear:!0,leave:!1}),e._timeout=window.setTimeout(function(){e._cancelTimeout()},e.props.appearDuration)})}},{key:"_buildStateProps",value:function(){var e=this.props,t=e.enterProp,n=e.appearProp,i=e.leaveProp,o={};return t&&(o[t]=this.state.enter),n&&(o[n]=this.state.appear),i&&(o[i]=this.state.leave),o}},{key:"render",value:function(){if(!this.props.children)return null;var e=this._buildStateProps();return m.a.cloneElement(this.props.children,e)}}]),t}(d.Component);b.propTypes={active:g.a.bool,enterProp:g.a.string,enterDuration:g.a.number,appearProp:g.a.string,appearDuration:g.a.number,leaveProp:g.a.string,leaveDuration:g.a.number},b.defaultProps={active:!0,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},t.a=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=n(100),l=n(42),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(t,n){i(this,e),this._ui=t,this._options=n,this._categoriesById={},this._categories=[],this._stickersById={},this._addCategories(s.a.DEFAULTS.STICKER_CATEGORIES);var o=this._options,r=o.categories,a=o.replaceCategories;this._options.categories?this._addCategories(r,a):(this._updateCategoriesMap(),this._updateAllCategory())}return u(e,[{key:"loadExternal",value:function(e){var t=this;return new l.a(e).load().then(function(e){t._addCategories(e.categories,t._options.replaceCategories)})}},{key:"_addCategories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=t?e.slice(0):a.u.mergeCategories(this._categories,e,"stickers"),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_updateCategoriesMap",value:function(){var e=this;this._categoriesById={},this._categories.forEach(function(t){e._categoriesById[t.identifier]=t}),this._categories.forEach(function(t){t.stickers.forEach(function(t){e._stickersById[t.identifier]=t})}),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach(function(t){t.stickers=t.stickers.filter(function(t){return-1!==e._options.availableStickers.indexOf(t.identifier)})}),this._categories=this._categories.filter(function(e){return e.stickers.length>0})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(function(e){return e.stickers}).reduce(function(e,t){return e.concat(t)},[])},this._categoriesById.all=this._allCategory}},{key:"getStickersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown sticker category '"+e+"'");return this._categoriesById[e].stickers}},{key:"getStickerByIdentifier",value:function(e){return this._stickersById[e]}},{key:"getCategories",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}],[{key:"getURLForSticker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",n=e.images,i="base"===t?n.mediaBase||n.mediaThumb:n.mediaThumb,o=i.uris||[i.uri];if(void 0===a.u.Browser||a.u.Browser.getIEVersion()){var r=o.filter(function(e){return!/\.svg$/i.test(e)});return r.length?r[0]:o[0]}var s=o.filter(function(e){return/\.svg$/i.test(e)});return s.length?s[0]:o[0]}}]),e}();t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onSharedStateUpdate"),s}return r(t,e),g(t,[{key:"componentDidMount",value:function(){v(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this.context.sharedState&&this.context.sharedState.on("update",this._onSharedStateUpdate)}},{key:"componentWillUnmount",value:function(){v(t.prototype.__proto__||m()(t.prototype),"componentWillUnmount",this).call(this),this.context.sharedState&&this.context.sharedState.off("update",this._onSharedStateUpdate)}},{key:"_onSharedStateUpdate",value:function(e,t){this.shouldSharedComponentUpdate(e,t)?(this.sharedComponentWillUpdate(e,t),this.forceUpdate(),this.sharedStateDidChange(e,t)):this.sharedStateDidChange(e,t)}},{key:"sharedComponentWillUpdate",value:function(e,t){}},{key:"shouldSharedComponentUpdate",value:function(e,t){return!0}},{key:"sharedStateDidChange",value:function(e,t){}},{key:"sharedStateWillChange",value:function(e,t){}},{key:"setSharedState",value:function(e,t){this.context.sharedState.set(e,t)}},{key:"getSharedState",value:function(e){return this.context.sharedState.get(e)}},{key:"forceSharedUpdate",value:function(){this.context.sharedState.broadcastUpdate()}},{key:"sharedState",get:function(){return this.context.sharedState.state}}]),t}(_.b);y.contextTypes={editor:_.k.object,ui:_.k.object,options:_.k.object,mediator:_.k.object,sharedState:_.k.object,theme:_.k.object,screen:_.k.object,appComponent:_.k.object},y.propTypes={sharedState:_.k.any},t.a=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(74),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onKeyDown","_onInputBlur","_onInputChange"),s.state={},s}return r(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.value!==e.value||this.props.disabled!==e.disabled}},{key:"_onInputChange",value:function(e){this.props.onLiveChange&&this.props.onLiveChange(e)}},{key:"_onInputBlur",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"_onKeyDown",value:function(e){13!==e.keyCode&&27!==e.keyCode||this._input.blur(),this.props.onKeyDown&&this.props.onKeyDown()}},{key:"focus",value:function(){this._input.focus()}},{key:"_getInputStyle",value:function(){return{}}},{key:"render",value:function(){var e=this,t=this.constructor.RootElement;return d.l.createElement(t,{value:this.props.value,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function(t){e._input=t},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})}}]),t}(d.b);g.contextTypes=d.b.contextTypes,t.a=g,g.RootElement=Object(d.w)(m.a).input("120drhm","NumericInputComponent")},function(e,t,n){var i=n(17),o=n(12).document,r=i(o)&&i(o.createElement);e.exports=function(e){return r?o.createElement(e):{}}},function(e,t,n){var i=n(17);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(36),o=n(27),r=n(20),a=n(51),s=n(21),l=n(80),u=Object.getOwnPropertyDescriptor;t.f=n(18)?u:function(e,t){if(e=r(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(14),o=n(137),r=n(59),a=n(57)("IE_PROTO"),s=function(){},l=function(){var e,t=n(50)("iframe"),i=r.length;for(t.style.display="none",n(83).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[r[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var i=n(56),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(58)("keys"),o=n(37);e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var i=n(12),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(11),o=n(9),r=n(24);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*r(function(){n(1)}),"Object",a)}},function(e,t,n){var i=n(28),o=n(10)("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:r?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var i=n(61),o=n(10)("iterator"),r=n(25);e.exports=n(9).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||r[i(e)]}},function(e,t,n){var i,o,r,a=n(23),s=n(158),l=n(83),u=n(50),c=n(12),f=c.process,p=c.setImmediate,h=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,_=0,g={},v=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},y=function(e){v.call(e.data)};p&&h||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++_]=function(){s("function"==typeof e?e:Function(e),t)},i(_),_},h=function(e){delete g[e]},"process"==n(28)(f)?i=function(e){f.nextTick(a(v,e,1))}:m&&m.now?i=function(e){m.now(a(v,e,1))}:d?(o=new d,r=o.port2,o.port1.onmessage=y,i=a(r.postMessage,r,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:p,clear:h}},function(e,t,n){"use strict";function i(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=o(t),this.reject=o(n)}var o=n(35);e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";(function(e){var n="warn",i=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],o=i.map(function(e){return e.type}),r={};r.setLevel=function(e){n=e},r.canLog=function(e){return null!==n&&!(o.indexOf(e)<o.indexOf(n))},r.hasColorfulOutput=function(){return(!e||e&&e.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},r.printError=function(e){e.stack.split("\n").forEach(function(e){r.error("Error",e)})},i.forEach(function(e){var t=e.type,n=e.background,i=e.color;r[t]=function(e){if("undefined"!=typeof console&&r.canLog(t)){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var l=a.map(function(e){return"string"==typeof e?e:e.toString()}).join(" ");if(!r.hasColorfulOutput())return console.log("PhotoEditorSDK | "+e+" | "+l);console.log("%c  %c PhotoEditorSDK %c  %c "+e+" %c  "+l+"  %c  ","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+n+"; color: "+i+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0")}}}),t.a=r}).call(t,n(96))},function(e,t,n){t.f=n(10)},function(e,t,n){var i=n(12),o=n(9),r=n(39),a=n(66),s=n(16).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(43),r=n.n(o),a=n(44),s=n.n(a),l=n(0),u=n.n(l),c=n(8),f=n.n(c),p=n(224),h=n(227),d="function"==typeof s.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":typeof e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){function e(t,n){i(this,e),this._ui=t,this._fonts=n,this._loadedFonts=[]}return m(e,[{key:"setFonts",value:function(e){this._fonts=e}},{key:"needsToLoad",value:function(){for(var e=this,t=0;t<this._fonts.length;t++){var n=function(t){var n=void 0;return e._fonts[t].getVariations().forEach(function(e){n=n||e.getProvider()}),n?{v:!0}:"continue"}(t);switch(n){case"continue":continue;default:if("object"===(void 0===n?"undefined":d(n)))return n.v}}}},{key:"fontLoaded",value:function(e){var t=e.getFontFamily();return-1!==this._loadedFonts.indexOf(t)}},{key:"setFontLoaded",value:function(e){if(!this.fontLoaded(e)){var t=e.getFontFamily();this._loadedFonts.push(t)}}},{key:"load",value:function(){var e=this,t=this._fonts,n={google:new p.a(this._ui),file:new h.a(this._ui)},i=function(){for(var e in n){n[e].dispose()}};t.filter(function(t){return!e.fontLoaded(t)}).forEach(function(e){e.getVariations().forEach(function(e){var t=e.getProvider();if(t){n[t].add(e)}})});var o=[];for(var r in n)o.push(n[r].load());return f.a.all(o).then(function(){i(),t.forEach(function(t){e.setFontLoaded(t)})}).catch(function(e){throw i(),e})}}]),e}();t.a=_},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(112),g=n(114),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"_serializeSticker",value:function(e,n){var i=e.getInputDimensions(!1),o=y(t.prototype.__proto__||m()(t.prototype),"_serializeSticker",this).call(this,e,n);return"none"!==n.getTintMode()&&(o.options.tintColor=n.serializeOption("tintColor",!0)),o.options.dimensions=n.getDimensions().clone().divide(i.min()).toObject(),o.options.identifier=o.options.name,delete o.options.name,o}},{key:"_serializePath",value:function(e){var n=y(t.prototype.__proto__||m()(t.prototype),"_serializePath",this).call(this,e),i=e.getBrush();return i.hasOption("hardness")&&(n.hardness=i.getOption("hardness")),n}},{key:"_serializeOperation",value:function(e,n){return"frame"===e.constructor.identifier?(this._serializeFrameOperation(e,n),null):"overlay"===e.constructor.identifier?(this._serializeOverlayOperation(e,n),null):y(t.prototype.__proto__||m()(t.prototype),"_serializeOperation",this).call(this,e,n)}},{key:"_serializeFrameOperation",value:function(e,t){var n=t.filter(function(e){return"sprite"===e.type}),i=void 0;n.length?i=n.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}},{key:"_serializeOverlayOperation",value:function(e,t){if(e.getIdentifier()){var n=t.filter(function(e){return"sprite"===e.type}),i=void 0;n.length?i=n.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:g.a[e.getBlendMode()]}})}}},{key:"_getFrameOptions",value:function(e){return{identifier:e.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function(e){var n=y(t.prototype.__proto__||m()(t.prototype),"_serializeOrientationOperation",this).call(this,e);return 90!==n.options.rotation&&270!==n.options.rotation||(n.options.flipHorizontally=!n.options.flipHorizontally,n.options.flipVertically=!n.options.flipVertically),n}},{key:"_serializeTransformOperation",value:function(e){var n=this._editor.operations;if(n.exists("orientation")){e=e.clone();var i=n.get("orientation");e.rotate(-i.getRotation()),i.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),i.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation()))}var o=y(t.prototype.__proto__||m()(t.prototype),"_serializeTransformOperation",this).call(this,e);return o.type="transform",o}},{key:"_serializeText",value:function(e,n){var i=y(t.prototype.__proto__||m()(t.prototype),"_serializeText",this).call(this,e,n),o=e.getInputDimensions(!1);return i.options.fontIdentifier=n.getFontIdentifier(),i.options.maxWidth=i.options.maxWidth*o.x/o.min(),delete i.options.fontFamily,i}},{key:"_serializeFilterOperation",value:function(e){var n=y(t.prototype.__proto__||m()(t.prototype),"_serializeFilterOperation",this).call(this,e);return n?(n.options.identifier=n.options.name,delete n.options.name,n):null}},{key:"_serializeRadialFocusOperation",value:function(e){var n=y(t.prototype.__proto__||m()(t.prototype),"_serializeRadialFocusOperation",this).call(this,e),i=n.options.options;return i.start=i.position,delete i.position,i.end={x:i.start.x+i.radius,y:i.start.y},delete i.radius,n}}]),t}(_.a);t.a=b,b.version="2.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(8),m=n.n(d),_=n(3),g=n.n(_),v=n(4),y=n(113),b=n(115),k=n(116),w=n(47),C=n(117),S=n(69),E=n(26),x=n(114),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},R=v.q.flipObject(x.a),D=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(r)));s._frameManager=new b.a(s._ui,s._getOptions("frame"));var l=s._getOptions("overlay");return l&&(s._overlayManager=new k.a(s._ui,l)),s}return r(t,e),T(t,[{key:"_deserializeSprite",value:function(e,n){return"frame"===n.type?this._deserializeFrame(e,n):"overlay"===n.type?this._deserializeOverlay(e,n):O(t.prototype.__proto__||g()(t.prototype),"_deserializeSprite",this).call(this,e,n)}},{key:"_deserializeOperation",value:function(e){return"transform"===e.type?this._deserializeTransformOperation(e):O(t.prototype.__proto__||g()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeOrientationOperation",value:function(e){return 90!==e.options.rotation&&270!==e.options.rotation||(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),O(t.prototype.__proto__||g()(t.prototype),"_deserializeOrientationOperation",this).call(this,e)}},{key:"_deserializeTransformOperation",value:function(e){var n=this;return O(t.prototype.__proto__||g()(t.prototype),"_deserializeCropOperation",this).call(this,e).then(function(e){if(e){var t=n._data.operations.orientation;if(t){var i=t.options;e.rotate(i.rotation),i.flipHorizontally&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation())),i.flipVertically&&(e.flip("vertical"),e.setRotation(-1*e.getRotation()))}return e}})}},{key:"_deserializeFrame",value:function(e,t){var n=this,i=t.options.identifier,o=this._frameManager.getFrameByIdentifier(i);if(!o)return v.h.warn("Deserializer","Unknown frame `"+i+"`. Skipping frame."),m.a.resolve();var r=new C.a(this._ui,o);return r.load().then(function(){n._editor.operations.getOrCreate("frame",{frame:r.getFrame()})})}},{key:"_deserializeOverlay",value:function(e,t){var n=this,i=t.options,o=i.blendMode,r=i.intensity,a=i.identifier,s=this._overlayManager.getOverlayByIdentifier(a);if(!s)return v.h.warn("Deserializer","Unknown overlay `"+a+"`. Skipping overlay."),m.a.resolve();var l=this._editor.getUI().getAssetPath(s.image);return E.a.load(l).then(function(e){n._editor.operations.getOrCreate("overlay",{alpha:r,identifier:a,blendMode:parseInt(R[o||s.blendMode],10),image:e})})}},{key:"_createBrushForPath",value:function(e){var n=O(t.prototype.__proto__||g()(t.prototype),"_createBrushForPath",this).call(this,e);return void 0!==e.hardness&&n.hasOption("hardness")&&n.setHardness(e.hardness),n}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=v.p.Operations.SpriteOperation,o=t.options,r=this._stickerManager.getStickerByIdentifier(o.identifier),a=w.a.getURLForSticker(r,"base");if(!r)return v.h.warn("Deserializer","Unknown sticker `"+o.identifier+"`. Skipping sprite."),m.a.resolve();var s=e.getInputDimensions(!1);return new m.a(function(t,l){var u=new window.Image;u.addEventListener("load",function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,a=o.rotation,l=o.flipHorizontally,c=o.flipVertically,f={identifier:o.identifier,image:u,position:v.v.fromObject(o.position),dimensions:v.v.fromObject(o.dimensions).multiply(s.min()),rotation:a,flipHorizontally:l,flipVertically:c,adjustments:{}};void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==o.adjustments[e]&&(f.adjustments[e]=o.adjustments[e]+n[e].default)}),void 0!==o.tintColor&&void 0!==r.tintMode&&(f.tintColor=v.c.fromArray(o.tintColor),f.tintMode=r.tintMode),t(e.createSticker(f))}),u.crossOrigin="Anonymous",u.src=n._editor.getUI().getAssetPath(a)})}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.identifier)?this._filterManager.instantiateFilterWithIdentifier(n.identifier).then(function(e){var i=t._editor.operations.getOrCreate("filter");if(i)return i.set({identifier:n.identifier,filter:e,intensity:n.intensity}),i}):(v.h.warn("Deserializer","Unknown filter `"+n.identifier+"`"),m.a.resolve())}},{key:"_deserializeFocusOperation",value:function(e){var n=e.options,i=n.options;if("radial"!==n.type)return O(t.prototype.__proto__||g()(t.prototype),"_deserializeFocusOperation",this).call(this,e);var o=i.start,r=i.end,a=i.gradientRadius,s=i.blurRadius,l=v.v.fromObject(r).subtract(v.v.fromObject(o)).len();return m.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:v.v.fromObject(o),radius:l,gradientRadius:a,blurRadius:s}))}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,o=n.lineHeight,r=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,f=new S.a(this._ui),p=this._fontManager.getVariationByIdentifier(r);return p?f.setFonts([p.getFont()]):p=this._fontManager.getDefaultFont(),f.load().then(function(){var t=e.getInputDimensions(!1),r=l*t.min()/t.x;return e.createText({fontSize:i,lineHeight:o,fontFamily:p.getFontFamily(),fontWeight:p.getFontWeight(),fontIdentifier:p.getIdentifier(),alignment:a,rotation:s,maxWidth:r,text:n.text,color:v.c.fromArray(u),backgroundColor:v.c.fromArray(c),position:v.v.fromObject(n.position)})})}}]),t}(y.a);t.a=D,D.version="2.0.0"},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(4),v=n(48),y=n(239),b=n(22),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},C=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(s)));return u._needsStyleFixes=!0,u._bindAll("_onZoom","_onZoomDone","_onCanvasDrag","_onCanvasDragStart","_onCanvasDragStop","_onCanvasClick","_onCanvasClickDisabled","_onCanvasClickEnabled"),u._initialRerender=!0,u._events=(n={},i(n,g.d.EVENTS.ZOOM,u._onZoom),i(n,g.d.EVENTS.ZOOM_DONE,u._onZoomDone),n),u.state={canvasClickDisabled:!1,displayHeader:!0},u}return a(t,e),k(t,[{key:"setSharedState",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w(t.prototype.__proto__||_()(t.prototype),"setSharedState",this).call(this,e,n),i&&this.props.controls.updateSharedState()}},{key:"fixStyles",value:function(){if(g.u.Browser.isIElte(11)){var e=this._outerContainer.offsetHeight;this._container.style.height=e+"px"}}},{key:"componentDidMount",value:function(){w(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this),this._initialRerender&&this.forceUpdate()}},{key:"_performHitTest",value:function(e){var t=this.context.appComponent.getBounds(),n=e.subtract(t.left,t.top),i=this.context.editor,o=i.controls.getAvailable();if(this.props.controls){var r=this.props.controls.constructor.clickAtPosition(e,i);if(r)return this.setSharedState(r),!0}for(var a in o){var s=o[a],l=s.clickAtPosition(n,i);if(l)return l.selectedSprite===this.getSharedState("selectedSprite")||(this.context.screen.switchToControls(a,l),!0)}return!1}},{key:"_onCanvasClickDisabled",value:function(){this.setState({canvasClickDisabled:!0})}},{key:"_onCanvasClickEnabled",value:function(){var e=this;Object(g.z)(function(){e.setState({canvasClickDisabled:!1})})}},{key:"_onCanvasClick",value:function(e){var t=g.u.getEventPosition(e);this._performHitTest(t)}},{key:"_onZoom",value:function(){this.forceUpdate()}},{key:"_onZoomDone",value:function(){this.forceUpdate()}},{key:"_onCanvasDragStart",value:function(){var e=this.context.editor;this._initialOffset=e.offset.clone()}},{key:"_onCanvasDrag",value:function(e){var t=this.context.editor,n=t.offset;t.offset=n.copy(this._initialOffset).add(e),t.render()}},{key:"_onCanvasDragStop",value:function(){this.forceUpdate()}},{key:"getImageBoundingRect",value:function(){var e=this.context.editor,t=e.getSDK(),n=t.getContainer(),i=t.getSprite(),o=n.getPosition(),r=i.getTexture(),a=t.getTextureScale();if(!r)return new g.n;var s=r.getDimensions().clone().divide(a).multiply(e.zoom.level),l=this._outerContainer.getBoundingClientRect(),u=this.context.appComponent.getBounds();return new g.n(Math.floor(o.x-s.x/2-(l.left-u.left)),Math.floor(o.y-s.y/2-(l.top-u.top)),Math.ceil(s.x),Math.ceil(s.y))}},{key:"getContainerOffset",value:function(){var e=this._outerContainer.getBoundingClientRect();return new g.v(e.left,e.top)}},{key:"_getContainerStyle",value:function(){var e=this.getImageBoundingRect();return{left:e.x,top:e.y,width:e.width,height:e.height}}},{key:"_renderControls",value:function(){var e=this,t=this._imageContainer&&this._getContainerStyle();return g.l.createElement(S,{innerRef:function(t){e._imageContainer=t},style:t,onClick:this._onCanvasClick})}},{key:"render",value:function(){var e=this,t=this.context.editor;return g.l.createElement(E,{draggable:!t.isShallow&&t.isDraggable,className:void 0,innerRef:function(t){e._outerContainer=t}},g.l.createElement(b.a,{disabled:t.isShallow||!t.isDraggable,onStart:this._onCanvasDragStart,onDrag:this._onCanvasDrag,onStop:this._onCanvasDragStop},g.l.createElement("div",null,g.l.createElement(x,{innerRef:function(t){e._container=t}},this.state.displayHeader&&g.l.createElement(y.a,null),this._renderControls()))))}},{key:"container",get:function(){return this._container}}]),t}(v.a);C.contextTypes=v.a.contextTypes,C.propTypes={options:g.k.object},t.a=C;var S=g.w.div("55byom","Container"),E=g.w.div("1ebx3lr",{draggable:"ovipzq"},"CanvasControls"),x=g.w.div("1h6ank1","CanvasControlsContainer")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(22),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||m()(t)).call(this));return e.constructor.NATIVE_SCROLLBAR_WIDTH||(e.constructor.NATIVE_SCROLLBAR_WIDTH=_.u.getScrollbarWidth()),e._isDragging=!1,e._bindAll("_onButtonDragStart","_onButtonDrag","_onButtonDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop","_onListScroll"),e.state={buttonSize:0,buttonPosition:0,buttonVisible:!1},e}return r(t,e),v(t,[{key:"componentDidMount",value:function(){y(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this.update()}},{key:"_onListScroll",value:function(){if(!this._isDragging){var e=this._getDirection(),n=void 0,i=void 0,o=void 0;e===t.HORIZONTAL?(n=this._list.scrollWidth-this._list.offsetWidth,i=this._list.scrollLeft,o=this._root.offsetWidth-this.state.buttonSize):e===t.VERTICAL&&(n=this._list.scrollHeight-this._list.offsetHeight,i=this._list.scrollTop,o=this._root.offsetHeight-this.state.buttonSize);var r=i/n;this.setState({buttonPosition:o*r}),this.props.onScroll&&this.props.onScroll(i)}}},{key:"_onButtonDragStart",value:function(e){this._isDragging=!0,this._initialButtonPosition=this.state.buttonPosition||0}},{key:"_onButtonDrag",value:function(e){var n=this._getDirection(),i=void 0;n===t.HORIZONTAL?i=this._initialButtonPosition+e.x:n===t.VERTICAL&&(i=this._initialButtonPosition+e.y),this._setButtonPosition(i)}},{key:"_onButtonDragStop",value:function(){this._isDragging=!1}},{key:"_onBarDragStart",value:function(e){var n=_.u.getEventPosition(e);this._initialPosition=n.clone();var i=this._root.getBoundingClientRect(),o=new _.v(i.left,i.top),r=n.clone().subtract(o),a=this._getDirection();a===t.HORIZONTAL?this._setButtonPosition(r.x-this.state.buttonSize/2):a===t.VERTICAL&&this._setButtonPosition(r.y-this.state.buttonSize/2),document.addEventListener("mousemove",this._onBarDrag),document.addEventListener("touchmove",this._onBarDrag),document.addEventListener("mouseup",this._onBarDragStop),document.addEventListener("touchend",this._onBarDragStop)}},{key:"_onBarDrag",value:function(e){var n=_.u.getEventPosition(e),i=this._root.getBoundingClientRect(),o=new _.v(i.left,i.top),r=n.clone().subtract(o),a=this._getDirection();a===t.HORIZONTAL?this._setButtonPosition(r.x-this.state.buttonSize/2):a===t.VERTICAL&&this._setButtonPosition(r.y-this.state.buttonSize/2)}},{key:"_onBarDragStop",value:function(){document.removeEventListener("mousemove",this._onBarDrag),document.removeEventListener("touchmove",this._onBarDrag),document.removeEventListener("mouseup",this._onBarDragStop),document.removeEventListener("touchend",this._onBarDragStop)}},{key:"_setButtonPosition",value:function(e){var n=this._getDirection(),i=void 0,o=void 0;n===t.HORIZONTAL?(i=this._root.offsetWidth-this.state.buttonSize,o=this._list.scrollWidth-this._list.offsetWidth):n===t.VERTICAL&&(i=this._root.offsetHeight-this.state.buttonSize,o=this._list.scrollHeight-this._list.offsetHeight),e=Math.max(0,e),e=Math.min(e,i),this.setState({buttonPosition:e});var r=e/i,a=o*r;n===t.HORIZONTAL?this._list.scrollLeft=a:n===t.VERTICAL&&(this._list.scrollTop=a),this.props.onScroll&&this.props.onScroll(a)}},{key:"_updateButtonSize",value:function(e){var n=0,i=!1,o=void 0,r=void 0,a=this._getDirection();a===t.HORIZONTAL?(o=this._list.clientWidth,r=this._list.scrollWidth):a===t.VERTICAL&&(o=this._list.offsetHeight,r=this._list.scrollHeight),n=o/r*o,i=r>o,this.setState({buttonSize:n,buttonVisible:i},e)}},{key:"_updateListSize",value:function(){if(this._list){var e=this._getDirection();if(e===t.HORIZONTAL){this._list.style.height="";var n=this._getFullListDimensions();this._listSize=n.y}else if(e===t.VERTICAL){this._list.style.width="";var i=this._getFullListDimensions();this._listSize=i.x}}}},{key:"_getFullListDimensions",value:function(){var e=this._list.getBoundingClientRect();return new _.v(e.width,e.height)}},{key:"update",value:function(){var e=this;if(!_.u.isMobile()){if(_.u.Browser.isIElte(11)){var n=this._container.offsetHeight;this._list.style.height=n+"px"}var i=this._getDirection();this._updateButtonSize(function(){e._listSize||e._updateListSize();var n=e._listSize;e.state.buttonVisible&&(n+=e.constructor.NATIVE_SCROLLBAR_WIDTH),i===t.HORIZONTAL?(e._root.style.top=e._listSize-12+"px",e._root.style.width=e._list.offsetWidth+"px"):i===t.VERTICAL&&(e._list.style.width=n+"px",e._root.style.left=e._listSize-12+"px",e._root.style.height=e._list.offsetHeight+"px")}),this._list.addEventListener("scroll",this._onListScroll)}}},{key:"_getDirection",value:function(){return this.props.direction||"horizontal"}},{key:"_getGradientOpacity",value:function(){if(!this._list)return!1;var e=this._getDirection(),n=void 0;return n=e===t.HORIZONTAL?this._list.scrollWidth-this._list.offsetWidth-this._list.scrollLeft:this._list.scrollHeight-this._list.offsetHeight-this._list.scrollTop,Math.min(Math.max(n/15,0),1)}},{key:"_getButtonStyle",value:function(){return"horizontal"===this._getDirection()?{left:this.state.buttonPosition,width:this.state.buttonSize}:{top:this.state.buttonPosition,height:this.state.buttonSize}}},{key:"getList",value:function(){return this.refs.list}},{key:"getRoot",value:function(){return this.refs.root}},{key:"_renderChild",value:function(e){var t=this;return _.l.cloneElement(e,{innerRef:function(n){e.props.innerRef&&e.props.innerRef(n),t._list=n}})}},{key:"render",value:function(){var e=this;if(_.u.isMobile())return this.props.children;var n=this._getButtonStyle(),i=this._renderChild(this.props.children),o=this._getDirection(),r=this._getGradientOpacity();return _.l.createElement(k,{innerRef:function(t){e._container=t},styles:this.props.styles},i,this.props.noGradient||0===r?null:_.l.createElement(S,{style:{opacity:r},horizontal:o===t.HORIZONTAL,vertical:o===t.VERTICAL}),_.l.createElement(w,{innerRef:function(t){e._root=t},onMouseDown:this._onBarDragStart,onTouchStart:this._onBarDragStart,vertical:"vertical"===this.props.direction,horizontal:"horizontal"===this.props.direction},_.l.createElement(g.a,{onStart:this._onButtonDragStart,onDrag:this._onButtonDrag,onStop:this._onButtonDragStop},_.l.createElement(C,{style:n,visible:this.state.buttonVisible,onMouseDown:this._onButtonDown,vertical:"vertical"===this.props.direction,horizontal:"horizontal"===this.props.direction}))))}}]),t}(_.b);b.HORIZONTAL="horizontal",b.VERTICAL="vertical",b.contextTypes=_.b.contextTypes,t.a=b;var k=_.w.div("120drhm","ScrollbarContainer");b.RootElement=k;var w=_.w.div("1s3c4f0",{vertical:"1dvqwqc",horizontal:"1hu63yp"},"Scrollbar"),C=_.w.div("zxujnb",{vertical:"gma9v3",horizontal:"1h5ccdj",visible:"2jlos"},"ScrollbarButton"),S=_.w.div("pc5361",{horizontal:"felmtl",vertical:"1enskgl"},"Gradient")},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(4),o=i.w.css("nsck4j","Input")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(262),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(48),v=n(49),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onInputLiveChange","_onInputChange"),s.state={value:s.props.value},s}return r(t,e),y(t,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.state.value&&this.setState({value:e.value})}},{key:"_onInputLiveChange",value:function(e){this.setState({value:e.target.value})}},{key:"_onInputChange",value:function(e){var t=parseFloat(e.target.value);if(h()(t))return this.setState({value:this.props.value});var n=this.props,i=n.minValue,o=n.maxValue;t=_.u.toFixed(Math.max(i,Math.min(t,o)),1),this.props.onValueChange&&this.props.onValueChange(t),this.setState({value:t})}},{key:"_renderRightPart",value:function(){var e=this;return _.l.createElement(E,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:void 0,innerRef:function(t){e._input=t},disabled:this.props.disabled})}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.inputLabel,i=e.className,o=e.disabled,r=e.styles,a="function"==typeof this._renderLeftPart;return _.l.createElement(k,{styles:r,className:i,disabled:o},_.l.createElement(w,null,a&&_.l.createElement(C,null,t&&_.l.createElement(S,{left:!0},t),this._renderLeftPart()),_.l.createElement(C,null,n&&_.l.createElement(S,null,n||" "),this._renderRightPart())))}}]),t}(g.a);b.contextTypes=g.a.contextTypes,t.a=b;var k=_.w.div("12okzzb",{disabled:"1voy7lm"},"ValueSelection");b.RootElement=k;var w=_.w.div("15u7gri","Row"),C=_.w.div("1hy9z1m",{bottomAligned:"17xdalt"},"Column"),S=_.w.div("ts1901",{left:"1ff3rj6"},"Title"),E=Object(_.w)(v.a)("myl4ow",{disabled:"18if3pn"},"InputField")},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a});var i=n(4),o=i.w.css("1ht9t4w","CircleSlider"),r=i.w.css("1ldv9bx","CircleSliderBackground"),a=i.w.css("7g0rty","CircleSliderKnob")},function(e,t,n){"use strict";function i(e,t,n){return t in e?c()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=_()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(d.a?d()(e,t):e.__proto__=t)}var s=n(13),l=n.n(s),u=n(0),c=n.n(u),f=n(6),p=n.n(f),h=n(1),d=n.n(h),m=n(2),_=n.n(m),g=n(3),v=n.n(g),y=n(7),b=(n.n(y),n(5)),k=(n.n(b),n(298)),w=n(299),C=n(300),S=l.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function e(t,n,i){null===t&&(t=Function.prototype);var o=p()(t,n);if(void 0===o){var r=v()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},T=y.Math.Vector2,O=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=r(this,(e=t.__proto__||v()(t)).call.apply(e,[this].concat(s)));return u._bindAll("_onZoomDone","_onWindowResize","_onHistoryChange","_onAfterTransform"),u._events=(n={},i(n,b.Constants.EVENTS.ZOOM_DONE,u._onZoomDone),i(n,b.Constants.EVENTS.WINDOW_RESIZE,u._onWindowResize),i(n,b.Constants.EVENTS.HISTORY_UNDO,u._onHistoryChange),i(n,b.Constants.EVENTS.HISTORY_REDO,u._onHistoryChange),n),u.state=y.Utils.extend(u.state,{visible:!1,canvasClickDisabled:!1}),u}return a(t,e),E(t,[{key:"componentDidMount",value:function(){x(t.prototype.__proto__||v()(t.prototype),"componentDidMount",this).call(this),this.forceUpdate()}},{key:"_onAfterTransform",value:function(e){var t="sprite-transform-"+e.getId();this.props.controls.addLocalHistorySnapshot(t,!0)}},{key:"_onHistoryChange",value:function(){var e=this.getSharedState("operation");if(e){var t=this.getSharedState("selectedSprite");-1===e.getSprites().indexOf(t)&&this._selectNextSprite()}}},{key:"_onWindowResize",value:function(){var e=this;this.context.editor.once("rendered",function(){e.forceUpdate()})}},{key:"_onZoomDone",value:function(){this.context.editor.render(),this.setState({visible:!0})}},{key:"_onItemBlur",value:function(){}},{key:"_onCanvasClick",value:function(e){if(!this.state.canvasClickDisabled){this._performHitTest(b.Utils.getEventPosition(e))||(this.getSharedState("selectedSprite")&&this._onItemBlur(),this.context.screen.switchToControls("default"))}}},{key:"_onSpriteDelete",value:function(e){this.getSharedState("operation").removeSprite(e),e.dispose(),this._selectNextSprite(),this.props.controls.addLocalHistorySnapshot("sprite-deletion",!1),this.context.editor.render()}},{key:"_onSpriteTakeToFront",value:function(e){this.getSharedState("operation").takeSpriteToFront(e),this.props.controls.addLocalHistorySnapshot("sprite-order",!1),this.forceUpdate(),this.context.editor.render()}},{key:"_onSpriteFlipHorizontally",value:function(e,t){t.stopPropagation(),e.setFlipHorizontally(!e.getFlipHorizontally()),this.props.controls.addLocalHistorySnapshot("sprite-flip-horizontally",!1),this.forceUpdate(),this.context.editor.render()}},{key:"_onSpriteDuplicate",value:function(e,t){t.stopPropagation();var n=this.getSharedState("operation"),i=e.serializeOptions();delete i.id,delete i.type,e.hasOption("image")&&(i.image=e.getImage());var o=n.getInputDimensions();i.position.add(new T(10,10).divide(o));var r=this._createSprite(i);this.setSharedState({selectedSprite:r}),n.addSprite(r),this.props.controls.addLocalHistorySnapshot("sprite-creation",!1),this.context.editor.render()}},{key:"_selectNextSprite",value:function(){var e=this.getSharedState("operation"),t=e.getSprites(),n=t[t.length-1];n?this.setSharedState({selectedSprite:n}):(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default"))}},{key:"_getComponentTypeForSprite",value:function(e){var t=y.Operations.SpriteOperation;switch(e.constructor){case t.StickerSprite:return k.a;case t.TextSprite:return w.a;case t.BrushSprite:return C.a}}},{key:"_getPropsForSprite",value:function(e){var t={};return t.hideContent=!0,t}},{key:"_renderSpriteItems",value:function(e){var t=this,n=this.getSharedState("selectedSprite");return e.map(function(e){var i=t._getComponentTypeForSprite(e),o=t._getPropsForSprite(e),r=n===e;return b.React.createElement(i,S({sprite:e,selected:r,onClick:t._onCanvasClick,onAfterChange:t._onAfterTransform.bind(t,e),onCanvasClickDisabled:t._onCanvasClickDisabled,onCanvasClickEnabled:t._onCanvasClickEnabled,onDelete:t._onSpriteDelete.bind(t,e),onTakeToFront:t._onSpriteTakeToFront.bind(t,e),onFlipHorizontally:t._onSpriteFlipHorizontally.bind(t,e),onDuplicate:t._onSpriteDuplicate.bind(t,e),snapRotation:t.props.options.snapRotation,snapRotationTolerance:t.props.options.snapRotationTolerance,canvasControls:t,key:e.getId()},o))})}},{key:"_renderOverlayControls",value:function(){return null}},{key:"_renderControls",value:function(){var e=this;if(this.state.visible){var t=this.getSharedState("operation"),n=t.getSprites(),i=this._container&&this._getContainerStyle();return b.React.createElement(R,{className:void 0},b.React.createElement(D,{innerRef:function(t){e._innerContainer=t},style:i,className:void 0},!this.state.canvasClickDisabled&&b.React.createElement(I,{onClick:this._onCanvasClick}),b.React.createElement("div",null,this._renderSpriteItems(n),this._renderOverlayControls())))}}}]),t}(b.CanvasControlsComponent);O.contextTypes=b.CanvasControlsComponent.contextTypes,t.a=O;var R=b.adonis.div("120drhm","CanvasControls"),D=b.adonis.div("1anj0of","Container"),I=b.adonis.div("o35414","ClickHandlerForInternetExplorer")},function(e,t,n){"use strict";function i(e,t,n){return t in e?c()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(13),l=n.n(s),u=n(0),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(5)),y=(n.n(v),l.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=g.Math.Vector2,w=void 0;g.Operations.SpriteOperation&&(w=g.Operations.SpriteOperation.TextSprite);var C=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(i)));return s._bindAll("_onDragStart","_onDrag","_onDragStop","_onRotateDragStart","_onRotateDrag","_onRotateDragStop","_onCornerDrag","_onCornerDragStop","_onSpriteUpdate","_onTakeToFront","_onFlipHorizontally","_onDuplicate","_onDelete"),s}return a(t,e),b(t,[{key:"componentDidMount",value:function(){this.props.sprite.on("update",this._onSpriteUpdate)}},{key:"componentWillUnmount",value:function(){this.props.sprite.off("update",this._onSpriteUpdate)}},{key:"componentWillReceiveProps",value:function(e){this.props.sprite.off("update",this._onSpriteUpdate),e.sprite.on("update",this._onSpriteUpdate)}},{key:"_onSpriteUpdate",value:function(){this.forceUpdate()}},{key:"_onTakeToFront",value:function(e){e.stopPropagation(),this.props.onTakeToFront&&this.props.onTakeToFront(e)}},{key:"_onFlipHorizontally",value:function(e){e.stopPropagation(),this.props.onFlipHorizontally&&this.props.onFlipHorizontally(e)}},{key:"_onDelete",value:function(e){e.stopPropagation(),this.props.onDelete&&this.props.onDelete(e)}},{key:"_onDuplicate",value:function(e){e.stopPropagation(),this.props.onDuplicate&&this.props.onDuplicate(e)}},{key:"_onBeforeScale",value:function(){}},{key:"_onScale",value:function(e){}},{key:"_onRotateDragStart",value:function(){this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onRotateDrag",value:function(e,t){var n=this.context.editor,i=this.props.sprite,o=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),r=o.clone(),a=t.clone().subtract(this._containerOffset).subtract(r),s=Math.atan2(a.y,a.x)-Math.PI/2,l=this.props,u=l.snapRotation,c=l.snapRotationTolerance,f=Math.round(180*s/Math.PI),p=Math.round(f/u)*u,h=f-p;Math.abs(h)<c&&(s=p*Math.PI/180),i.setRotation(s),n.render(),this.forceUpdate()}},{key:"_onRotateDragStop",value:function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_onCornerDragStart",value:function(e,t,n,i){var o=this.context.editor,r=this.props.sprite,a=r.getDimensions(o.getSDK(),o.getOutputDimensions()),s=a.x;this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var l=r.getPivot(),u=r.getAnchor(),c=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),f=r.getDimensions(o.getSDK(),o.getOutputDimensions()),p=new k(f.width,f.height),h=c.clone().subtract(p.clone().multiply(u)).add(p.clone().multiply(l)).round(),d=i.clone().subtract(this._containerOffset).subtract(h);this._initialScaleSettings={width:s,mouseDistanceFromPivot:d},this._onBeforeScale(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onCornerDrag",value:function(e){var t=this.context.editor,n=this.props.sprite,i=n.getRotation(),o=this._initialScaleSettings,r=o.width,a=o.mouseDistanceFromPivot,s=a.clone().add(e),l=Math.cos(i),u=Math.sin(i),c=Math.max(Math.abs(2*(s.x*l+s.y*u)),this.constructor.MIN_WIDTH),f=c/r;t.render(),this._onScale(f)}},{key:"_onCornerDragStop",value:function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_isDraggingDisabled",value:function(){return!this.props.selected}},{key:"_onDragStart",value:function(){var e=this.props.sprite;this._initialPosition=e.getPosition(),this.props.onBeforeChange&&this.props.onBeforeChange()}},{key:"_onDrag",value:function(e){var t=this.props.sprite,n=this.context.editor,i=n.getOutputDimensions(),o=this._initialPosition.clone().add(e.divide(i));t.setPosition(o),n.render(),this.forceUpdate()}},{key:"_onDragStop",value:function(){this.props.onAfterChange&&this.props.onAfterChange()}},{key:"_getAbsoluteSpritePosition",value:function(){var e=this.context.editor,t=e.getOutputDimensions();return this.props.sprite.getPosition().clone().multiply(t)}},{key:"_getContainerStyle",value:function(){return{}}},{key:"_renderKnobs",value:function(){var e=this,t=[];return["top","bottom"].forEach(function(n){["left","right"].forEach(function(o){var r=n+"-"+o,a=i({},r,!0);t.push(v.React.createElement(v.DraggableComponent,{key:r,onStart:e._onCornerDragStart.bind(e,n,o),onDrag:e._onCornerDrag,onStop:e._onCornerDragStop},v.React.createElement(I,a)))})}),t}},{key:"_getSpriteDimensions",value:function(){var e=this.context.editor,t=this.props.sprite,n=e.getOutputDimensions();return t.getDimensions(e.getSDK(),n)}},{key:"_getOverlayPosition",value:function(){var e=this.context.editor,t=this.props.sprite,n=e.getOutputDimensions(),i=this._getSpriteDimensions(),o=t.getPosition().clone().multiply(n),r=t.getRotation(),a=Math.sin(r),s=Math.cos(r),l=new k(Math.abs(i.x*s)+Math.abs(i.y*a),Math.abs(i.x*a)+Math.abs(i.y*s));return new k(o.x,o.y-l.y/2-70).clamp(new k(80,20),n.clone().subtract(80,70))}},{key:"_renderOverlayControls",value:function(){if(this.props.selected)return v.React.createElement(v.CanvasOverlayControlsComponent,{takeToFront:!0,flipHorizontally:!(this.props.sprite instanceof w),duplicate:!0,delete:!0,position:this._getOverlayPosition(),onTakeToFront:this._onTakeToFront,onFlipHorizontally:this._onFlipHorizontally,onDuplicate:this._onDuplicate,onDelete:this._onDelete})}},{key:"_getItemControlsProps",value:function(){return{}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,i=t.sprite,o=this.state.editing,r=!o,a=[this._renderKnobs(),v.React.createElement(O,{key:"rotateControls"},v.React.createElement(v.DraggableComponent,{onStart:this._onRotateDragStart,onDrag:this._onRotateDrag,onStop:this._onRotateDragStop},v.React.createElement(D,null)))],s=this._getItemControlsProps(),l=v.React.createElement(x,y({style:this._getContainerStyle()},s),a);return v.React.createElement(v.DraggableComponent,{onStart:this._onDragStart,onStop:this._onDragStop,onDrag:this._onDrag,disabled:this._isDraggingDisabled()},v.React.createElement(S,{onClick:this.props.onClick,"data-type":i.constructor.type,"data-selected":n,className:void 0},this._renderOverlayControls(),v.React.createElement(E,{style:this._getContainerStyle(),editing:n&&o,innerRef:function(t){e._container=t},className:void 0},v.React.createElement(T,null,this._renderContent()),n&&!r&&a),n&&r&&l))}}]),t}(v.BaseComponent);C.contextTypes=v.BaseComponent.contextTypes,C.MIN_WIDTH=1,C.defaultProps={snapRotation:90,snapRotationTolerance:5},t.a=C;var S=v.adonis.div("120drhm","OuterContainer"),E=v.adonis.div("bkf7u8",{editing:"64zghi"},"Container"),x=v.adonis.div("36haff","ItemControls"),T=v.adonis.div("120drhm","Content"),O=v.adonis.div("77tiy3","RotateControl"),R=v.adonis.div("mznefm","Knob"),D=Object(v.adonis)(R)("1en5760","RotateKnob"),I=Object(v.adonis)(R)("bdmepn",{"top-left":"1dtvxe8","top-right":"1tu191k","bottom-left":"1we5ut6","bottom-right":"f2wva1"},"CornerKnob")},function(e,t,n){"use strict";var i=n(7),o=(n.n(i),i.Engine.Filters.OverlayFilter);t.a={normal:o.BLEND_MODES.NORMAL,overlay:o.BLEND_MODES.OVERLAY,hardLight:o.BLEND_MODES.HARD_LIGHT,softLight:o.BLEND_MODES.SOFT_LIGHT,multiply:o.BLEND_MODES.MULTIPLY,darken:o.BLEND_MODES.DARKEN,lighten:o.BLEND_MODES.LIGHTEN,screen:o.BLEND_MODES.SCREEN,colorBurn:o.BLEND_MODES.COLOR_BURN}},function(e,t,n){e.exports=!n(18)&&!n(24)(function(){return 7!=Object.defineProperty(n(50)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(21),o=n(20),r=n(138)(!1),a=n(57)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~r(u,n)||u.push(n));return u}},function(e,t,n){var i=n(12).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(21),o=n(30),r=n(57)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(147),o=n.n(i),r=o.a;o.a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(32),g=n.n(_),v=n(38),y=n.n(v),b=n(7),k=(n.n(b),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),w=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._events={},s._needsStyleFixes=!1,s._bindAll("fixStyles"),s}return r(t,e),k(t,[{key:"fixStyles",value:function(){return h.a.resolve()}},{key:"componentDidMount",value:function(){this._bindEvents(),this._needsStyleFixes&&(this.fixStyles(),this.context.options.responsive&&window.addEventListener("resize",this.fixStyles))}},{key:"componentWillUnmount",value:function(){this._unbindEvents(),(this.context&&this.context.options||this.props.options).responsive&&this._needsStyleFixes&&window.removeEventListener("resize",this.fixStyles)}},{key:"_bindAll",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){if("function"!=typeof e[t])throw new Error("_bindAll: `"+e.constructor.name+"."+t+"` is not a function.");e[t]=e[t].bind(e)})}},{key:"_t",value:function(e,t){return this.context.ui.translate(e,t)}},{key:"_getAssetPath",value:function(){var e;return(e=this.context.ui).getAssetPath.apply(e,arguments)}},{key:"_bindEvents",value:function(){for(var e in this._events){var t=this._events[e];this.context.mediator.on(e,t)}}},{key:"_unbindEvents",value:function(){for(var e in this._events){var t=this._events[e];this.context.mediator.off(e,t)}}},{key:"_emitEvent",value:function(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(t=this.context.mediator).emit.apply(t,[e].concat(i))}},{key:"render",value:function(){return g.a.createElement("div",null)}}]),t}(g.a.Component);w.contextTypes={appComponent:y.a.object,editor:y.a.object,ui:y.a.object,options:y.a.object,mediator:y.a.object,screen:y.a.object,theme:y.a.object},t.a=w},function(e,t){},function(e,t,n){"use strict";var i=n(39),o=n(11),r=n(89),a=n(19),s=n(21),l=n(25),u=n(151),c=n(40),f=n(84),p=n(10)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,m,_,g,v){u(n,t,m);var y,b,k,w=function(e){if(!h&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",S="values"==_,E=!1,x=e.prototype,T=x[p]||x["@@iterator"]||_&&x[_],O=!h&&T||w(_),R=_?S?w("entries"):O:void 0,D="Array"==t?x.entries||T:T;if(D&&(k=f(D.call(new e)))!==Object.prototype&&k.next&&(c(k,C,!0),i||s(k,p)||a(k,p,d)),S&&T&&"values"!==T.name&&(E=!0,O=function(){return T.call(this)}),i&&!v||!h&&!E&&x[p]||a(x,p,O),l[t]=O,l[C]=d,_)if(y={values:S?O:w("values"),keys:g?O:w("keys"),entries:R},v)for(b in y)b in x||r(x,b,y[b]);else o(o.P+o.F*(h||E),t,y);return y}},function(e,t,n){e.exports=n(19)},function(e,t,n){var i=n(14);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&i(r.call(e)),t}}},function(e,t,n){var i=n(25),o=n(10)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||r[o]===e)}},function(e,t,n){var i=n(14),o=n(35),r=n(10)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||void 0==(n=i(a)[r])?t:o(n)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(14),o=n(17),r=n(64);e.exports=function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=r.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(10)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},e(r)}catch(e){}return n}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&h&&(m=!1,h.length?d=h.concat(d):_=-1,d.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=d.length;t;){for(h=d,d=[];++_<t;)h&&h[_].run();_=-1,t=d.length}h=null,m=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,f,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var h,d=[],m=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new l(e,t)),1!==d.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){var i=n(82),o=n(59).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){e.exports={default:n(195),__esModule:!0}},function(e,t,n){e.exports={default:n(197),__esModule:!0}},function(e,t,n){"use strict";t.a={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_analog",defaultName:"Analog",filters:[{identifier:"imgly_lut_cool",defaultName:"Cool",lutImage:"filters/imgly_lut_cool_5_5_128.png"},{identifier:"imgly_lut_blues",defaultName:"Blues",lutImage:"filters/imgly_lut_blues_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Blue Shadows",lutImage:"filters/imgly_lut_blueshadows_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"KDynamic",lutImage:"filters/imgly_lut_kdynamic_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"}]},{identifier:"imgly_filters_bw",defaultName:"Black & White",filters:[{identifier:"imgly_lut_sin",defaultName:"Sin",lutImage:"filters/imgly_lut_sin_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"B & W",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Plate",lutImage:"filters/imgly_lut_plate_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"X400",lutImage:"filters/imgly_lut_x400_5_5_128.png"}]},{identifier:"imgly_filters_retro",defaultName:"Retro",filters:[{identifier:"imgly_lut_celsius",defaultName:"Celsius",lutImage:"filters/imgly_lut_celsius_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_k2",defaultName:"K2",lutImage:"filters/imgly_lut_k2_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia High",lutImage:"filters/imgly_lut_sepiahigh_5_5_128.png"},{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Eighties",lutImage:"filters/imgly_lut_eighties_5_5_128.png"},{identifier:"imgly_lut_elder",defaultName:"Elder",lutImage:"filters/imgly_lut_elder_5_5_128.png"},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Orchid",lutImage:"filters/imgly_lut_orchid_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"}]},{identifier:"imgly_filters_special",defaultName:"Special",filters:[{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Cotton Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"High Contrast",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_nogreen",defaultName:"No Green",lutImage:"filters/imgly_lut_nogreen_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Pola 669",lutImage:"filters/imgly_lut_pola669_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"}]},{identifier:"imgly_filters_summer",defaultName:"Summer",filters:[{identifier:"imgly_lut_texas",defaultName:"Texas",lutImage:"filters/imgly_lut_texas_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_chest",defaultName:"Chest",lutImage:"filters/imgly_lut_chest_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Evening",lutImage:"filters/imgly_lut_evening_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Fall",lutImage:"filters/imgly_lut_fall_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Front",lutImage:"filters/imgly_lut_front_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_sunset",defaultName:"Sunset",lutImage:"filters/imgly_lut_sunset_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"}]},{identifier:"imgly_filters_winter",defaultName:"Winter",filters:[{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_bleached",defaultName:"Bleached",lutImage:"filters/imgly_lut_bleached_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Bleached Blue",lutImage:"filters/imgly_lut_bleachedblue_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Breeze",lutImage:"filters/imgly_lut_breeze_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lenin",lutImage:"filters/imgly_lut_lenin_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_winter",defaultName:"Winter",lutImage:"filters/imgly_lut_winter_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"],width:62,height:64}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"],width:62,height:59}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"],width:60,height:63}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"],width:63,height:55}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"],width:62,height:61}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"],width:64,height:60}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"],width:64,height:60}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"],width:64,height:64}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"],width:64,height:62}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"],width:62,height:54}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"],width:64,height:58}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"],width:63,height:41}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"],width:65,height:47}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"],width:62,height:64}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"],width:62,height:59}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"],width:64,height:64}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"],width:62,height:60}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(e,t,n){(function(t){(function(){var n,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},i=t.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},o=n()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n(96))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(7),_=(n.n(m),n(208)),g=n(210),v=n(211),y=n(214),b=n(215),k=n(216),w=n(218),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function(e){function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i(this,t);var s=o(this,(t.__proto__||h()(t)).call(this));if(s._ui=e,s._options=n,s._mediator=r,s._ready=!1,s._padding=[0,0,0,0],s._offset=new d.v(0,0),s._shallow=a,a||(s._initSDK(),s._onZoom=s._onZoom.bind(s),s._onUndo=s._onUndo.bind(s),s._onRedo=s._onRedo.bind(s),s.history=new w.a(s,s._sdk,s._mediator),s.history.on("undo",s._onUndo),s.history.on("redo",s._onRedo),s.zoom=new k.a(s,s._sdk,s._mediator),s.zoom.on("set",s._onZoom),s._initSerializers()),s.operations=new v.a(s,s._sdk,s._mediator),s.controls=new y.a(s,s._sdk,s._mediator),s.features=new b.a(s,s._sdk,s._mediator),s._sdk){var l=[];for(var u in s._operations)l.push(s._operations[u]);s._sdk.registerOperations(l)}return s._running=!1,s._renderRequested=!0,s._renderCallbacks=[],s._animationFrameRequest=null,s.render=s.render.bind(s),s._tick=s._tick.bind(s),s}return r(t,e),C(t,[{key:"setImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._sdk.getRenderer(),o=new d.v(t.naturalWidth,t.naturalHeight),r=1e6*this.getMaxMegapixels(),a=i.getMaxDimensions();n&&this.reset();var s=new g.a(t,r,a),l=null,u=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,i=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],void 0),r=void 0;e._sdk.getImage()&&(i=e.getInputDimensions(),r=n.clone().divide(i)),e._setImage(t,l,n),r&&e.broadcastScale(r),e._initWatermark(),e._ready=!0,e.emit("ready")};s.needsResize()?(this.emit("resize"),l=this._sdk.parseExif(t),s.resize().then(function(t){var n=t.canvas,i=t.dimensions,o=t.reason;n.src="data:image/jpeg;base64,",e.emit("resized",{dimensions:i,reason:o}),u(n,i,o)})):u(t)}},{key:"_initWatermark",value:function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}},{key:"_initSDK",value:function(){var e=this._options,t=e.logLevel,n=e.displayWelcomeMessage,i=e.debug,o=e.license,r=this._options.editor,a=r.smoothDownscaling,s=r.smoothUpscaling,l=r.preferredRenderer,u=r.pixelRatio,c={logLevel:t,debug:i,displayWelcomeMessage:n,pixelRatio:u,smoothDownscaling:a,smoothUpscaling:s,transparent:!0,license:o};this._sdk=new d.p(l,c)}},{key:"_onZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.fixOffset(),this.render(function(){t&&t()})}},{key:"fixOffset",value:function(){this._offset=this._clampOffset(this._offset)}},{key:"_onUndo",value:function(){this.render()}},{key:"_onRedo",value:function(){this.render()}},{key:"getRotation",value:function(){return this._sdk.getRotation()}},{key:"setRotation",value:function(e){this._sdk.setRotation(e)}},{key:"getSpriteScale",value:function(){return this._sdk.getSpriteScale()}},{key:"setSpriteScale",value:function(e){this._sdk.setSpriteScale(e)}},{key:"isToolAllowed",value:function(e){return!!this._shallow||this._sdk._l.isToolAllowed(e)}},{key:"isToolEnabled",value:function(e){return-1!==this._options.editor.tools.indexOf(e)}},{key:"getMaxMegapixels",value:function(){var e=this._options.editor.maxMegaPixels;return d.u.isMobile()?e.mobile:e.desktop}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(e)}},{key:"getOutputTextureDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(e)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(e)}},{key:"getCanvasDimensions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._sdk.getCanvas(),n=new d.v(t.offsetWidth,t.offsetHeight);return e&&n.subtract(this._padding[1]+this._padding[3],this._padding[0]+this._padding[2]),n}},{key:"_setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t,n),this.zoom.auto(!0,!0),this.emit("new-image")}},{key:"export",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty();var n=this._options.editor.export;return new _.a(this._sdk,n,t).export().then(function(t){return e.emit("export",t),e._mediator.emit(d.d.EVENTS.EXPORT,t,e),e._watermarkOperation&&(e._watermarkOperation.setEnabled(!0),e._sdk.render()),e._sdk.setAllOperationsToDirty(),t})}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":n(222).default,"1.0.1":n(228).default,"2.0.0":n(229).default,"2.0.1":n(230).default,"3.0.0":n(233).default}}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.0.0",n=this._serializers[t];return n?new n(this).serialize(e):d.j.reject(new Error("No serializer for version "+t+" found."))}},{key:"deserialize",value:function(e){var t=this,n=this._serializers[e.version];return n?new n(this).deserialize(e).then(function(){t.zoom.auto(!0,!0)}):d.j.reject(new Error("No serializer for version "+e.version+" found."))}},{key:"_applyOffset",value:function(){var e=this._offset.clone();e.x-=this._padding[1]/2,e.x+=this._padding[3]/2,e.y-=this._padding[2]/2,e.y+=this._padding[0]/2,this._sdk.setOffset(e)}},{key:"start",value:function(){this._animationFrameRequest=Object(d.z)(this._tick)}},{key:"stop",value:function(){this._running=!1,this._animationFrameRequest&&(Object(d.x)(this._animationFrameRequest),this._renderCallbacks=[])}},{key:"render",value:function(e){this._renderRequested=!0,e&&this._renderCallbacks.push(e)}},{key:"_tick",value:function(){var e=this;if(this.zoom.tick(),this._renderRequested){var t=this._renderCallbacks.slice(0);this._renderCallbacks=[],this._render().then(function(){t.forEach(function(e){return e()}),e._animationFrameRequest=Object(d.z)(e._tick)}),this._renderRequested=!1}else this._animationFrameRequest=Object(d.z)(this._tick)}},{key:"_render",value:function(){var e=this;return this._ready?(this._applyOffset(),this._sdk.render().then(function(){e._lastOutputBounds=e._sdk.getSprite().getBounds(),e.emit("rendered")}).catch(function(t){d.h.error(e.constructor.name,"An error occurred while rendering: "+t.message),d.h.printError(t),e.emit("render-error",t)})):d.j.resolve()}},{key:"reset",value:function(){this._sdk.reset(),this.history.reset(),this.operations.reset(),this.features.reset(),this.emit("reset")}},{key:"dispose",value:function(){this.stop(),this._sdk.dispose()}},{key:"isReady",value:function(){return this._ready}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getPadding",value:function(){return this._padding}},{key:"setPadding",value:function(e){this._padding=e||[0,0,0,0]}},{key:"getImage",value:function(){return this._options.editor.image}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"broadcastScale",value:function(e){var t=this;["sprite"].forEach(function(n){var i=t.operations.get(n);i&&i.scale(e)})}},{key:"broadcastTransform",value:function(e,t){var n=this,i=new d.p.Operations.TransformOperation.TransformChange(e,t);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(function(e){var t=n.operations.get(e);t&&t.transform(i)})}},{key:"broadcastFlip",value:function(e){var t=this;["mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(n){var i=t.operations.get(n);i&&i.flip(e)})}},{key:"broadcastRotate",value:function(e){var t=this;["transform","mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(n){var i=t.operations.get(n);i&&i.rotate(e)})}},{key:"_clampOffset",value:function(e){var t=this.getCanvasDimensions(),n=this._sdk.getOutputDimensions(!1),i=t.clone().subtract(n).divide(2).clamp(null,new d.v(0,0)),o=n.clone().subtract(t).divide(2).clamp(new d.v(0,0),null);return e.clone().clamp(i,o).round()}},{key:"getSnapshot",value:function(){return{operations:this.operations.getSnapshot(),zoom:this.zoom.getSnapshot(),canvasDimensions:this.getCanvasDimensions()}}},{key:"restoreSnapshot",value:function(e){this.operations.restoreSnapshot(e.operations),this.zoom.restoreSnapshot(e.zoom),e.canvasDimensions.equals(this.getCanvasDimensions())||this.zoom.auto(!0,!0)}},{key:"getMediator",value:function(){return this._mediator}},{key:"addSticker",value:function(e,t){var n=this._options.editor,i=m.Utils.getDeepProperty(n,["controlsOptions","sticker","categories"]);if(!i)return!1;var o=m.Utils.getDeepProperty(i,[function(t){return t.filter(function(t){return t.identifier===e})[0]},"stickers"]);return!!o&&(o.push(t),this._mediator.emit(d.d.EVENTS.ADDED_STICKER,i),!0)}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=this._clampOffset(e)}},{key:"isDraggable",get:function(){var e=this.zoom.targetLevel>this.zoom.defaultLevel;return this.features.isEnabled("drag")&&e}},{key:"isShallow",get:function(){return this._shallow}}]),t}(d.e);t.a=S},function(e,t,n){e.exports={default:n(212),__esModule:!0}},function(e,t,n){e.exports={default:n(219),__esModule:!0}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(8),s=n.n(a),l=n(4),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=2*Math.PI,f=function(){function e(t){i(this,e),this._editor=t,this._serializeOperations=this._serializeOperations.bind(this)}return u(e,[{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=l.q.defaults(e,{image:!0});var t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(e){var t=this._editor.getImage(),n=t.width,i=t.height;if(!this._options.image)return e.inputImage={width:n,height:i},s.a.resolve(e);var o=l.q.createCanvas();o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(t,0,0);var r=o.toDataURL(l.f.PNG);return e.inputImage={type:l.f.PNG,data:r.replace(/^data:image\/(.*?);base64,/,""),width:n,height:i},s.a.resolve(e)}},{key:"_serializeOperations",value:function(e){var t=this,n=[];return this._editor.operations.getStack().forEach(function(e){var i=t._serializeOperation(e,n);i&&n.push(i)}),e.operations=n.filter(function(e){return e}),s.a.resolve(e)}},{key:"_serializeOperation",value:function(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:l.h.warn("Unable to serialize operation of type "+e.constructor.identifier)}}},{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+c)%c,{type:"crop",options:t}}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(e){return"identity"===e.getIdentifier()?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(e){var t=e.availableOptions,n=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],i={};return n.forEach(function(n){var o=t[n],r=e.getOption(n),a=o.minValue,s=o.midValue,l=o.maxValue;i[n]=r<=s?(r-a)/(s-a)-1:(r-s)/(l-s)}),{type:"adjustments",options:i}}},{key:"_serializeSpriteOperation",value:function(e,t){var n=this,i=t.filter(function(e){return"sprite"===e.type}),o=void 0,r=!0;if(i.length?(o=i.pop(),r=!1):o={type:"sprite",options:{sprites:[]}},e.getSprites().forEach(function(t){var i=null;t instanceof e.constructor.StickerSprite?i=n._serializeSticker(e,t):t instanceof e.constructor.TextSprite?i=n._serializeText(e,t):t instanceof e.constructor.BrushSprite&&(i=n._serializeBrush(e,t)),i&&o.options.sprites.push(i)}),r)return o}},{key:"_serializeSticker",value:function(e,t){var n=t.getAdjustments(),i=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);i.name=i.identifier,delete i.identifier,i.rotation=(i.rotation+c)%c;var o=n.availableOptions;return i.adjustments={brightness:n.getBrightness()-o.brightness.default,saturation:n.getSaturation()-o.saturation.default,contrast:n.getContrast()-o.contrast.default},{type:"sticker",options:i}}},{key:"_serializeText",value:function(e,t){var n=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return n.rotation=(n.rotation+c)%c,{type:"text",options:n}}},{key:"_serializeBrush",value:function(e,t){var n=this;return{type:"brush",options:{paths:t.getPaths().map(function(e){return n._serializePath(e)})}}}},{key:"_serializePath",value:function(e){var t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map(function(e){return e.getPosition().toObject()}),t}},{key:"_serializeRadialFocusOperation",value:function(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))}),n}}]),e}();t.a=f,f.version="1.0.0"},function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(1),s=n.n(a),l=n(2),u=n.n(l),c=n(0),f=n.n(c),p=n(3),h=n.n(p),d=n(8),m=n.n(d),_=n(4),g=n(107),v=n(47),y=n(108),b=n(109),k=n(69),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),f()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=void 0;void 0!==_.p.Operations.SpriteOperation&&(C=_.p.Operations.SpriteOperation.BrushSprite);var S=function(){function e(t,n){r(this,e),this._editor=t,this._ui=this._editor.getUI(),this._data=n,this._filterManager=new g.a(this._ui,this._getOptions("filter")),this._stickerManager=new v.a(this._ui,this._getOptions("sticker")),this._brushManager=new y.a(this._ui,this._getOptions("brush")),this._fontManager=new b.a(this._ui,this._getOptions("text"))}return w(e,[{key:"_getOptions",value:function(e){var t=this._editor.controls,n={};t&&t.get(e)&&(n=t.get(e).defaultOptions);var i=this._editor.getOptions();return _.q.deepDefaults({},i.editor.controlsOptions[e]||{},n)}},{key:"deserialize",value:function(){var e=this;return this._validateVersion().then(function(){return e._deserializeInputImage()}).then(function(){return e._deserializeOperations()})}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?m.a.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version)):m.a.resolve()}},{key:"_deserializeInputImage",value:function(){var e=this;return new m.a(function(t,n){var i=e._data.inputImage,o=i.data,r=i.type;if(o&&r){var a=new window.Image;a.addEventListener("load",function(){e._editor.setImage(a),t()}),a.src="data:"+r+";base64,"+o}else t()})}},{key:"_deserializeOperations",value:function(){var e=this,t=this._data.operations.map(function(t){return e._deserializeOperation(t).then(function(t){return t&&e._editor.getMediator().emit(_.d.EVENTS.OPERATION_UPDATED,t),t})});return m.a.all(t)}},{key:"_deserializeOperation",value:function(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=_.v.fromObject(t.start),o=_.v.fromObject(t.end);n>Math.PI&&(n-=2*Math.PI);var r={start:i,end:o};void 0!==n&&(r.rotation=n);var a=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(a,r),a.set(r),m.a.resolve(a)}},{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(t),m.a.resolve(n)):m.a.resolve()}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.name)?this._filterManager.instantiateFilterWithIdentifier(n.name).then(function(e){var i=t._editor.operations.getOrCreate("filter");return i.set({identifier:n.name,filter:e,intensity:n.intensity}),i}):(_.h.warn("Deserializer","Unknown filter `"+n.name+"`"),m.a.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(e){var t=_.p.Operations.AdjustmentsOperation,n=e.options,i=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],o={};return i.forEach(function(e){if(void 0!==n[e]){var i=t.prototype.availableOptions[e],r=i.minValue,a=i.midValue,s=i.maxValue,l=n[e];l=l<0?a+(a-r)*l:a+(s-a)*l,o[e]=l}}),m.a.resolve(this._editor.operations.getOrCreate("adjustments",o))}},{key:"_deserializeSpriteOperation",value:function(e){var t=this,n=e.options,i=this._editor.operations.getOrCreate("sprite");if(!i)return m.a.resolve();var o=n.sprites.map(function(e){return t._deserializeSprite(i,e)}).filter(function(e){return e});return m.a.all(o).then(function(e){return i.setSprites(e.filter(function(e){return e})),i})}},{key:"_deserializeSprite",value:function(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t)}}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=_.p.Operations.SpriteOperation,o=t.options,r=this._stickerManager.getStickerByIdentifier(o.name),a=this._stickerManager.getURLForSticker(r);return r?new m.a(function(t,r){var s=new window.Image;s.addEventListener("load",function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,r=o.rotation,a=o.flipHorizontally,l=o.flipVertically,u={identifier:o.name,image:s,position:_.v.fromObject(o.position),dimensions:_.v.fromObject(o.dimensions),rotation:r,flipHorizontally:a,flipVertically:l,adjustments:{}};void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==o.adjustments[e]&&(u.adjustments[e]=o.adjustments[e]+n[e].default)}),t(e.createSticker(u))}),s.crossOrigin="Anonymous",s.src=n._editor.getUI().getAssetPath(a)}):(_.h.warn("Deserializer","Unknown sticker '"+o.name+"'. Skipping sprite."),m.a.resolve())}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,o=n.lineHeight,r=n.fontFamily,a=n.fontWeight,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor,p=new k.a(this._ui),h=this._fontManager.getFontByFontFamily(r);return h||(h=this._fontManager.getDefaultFont()),p.setFonts([h]),p.load().then(function(){return e.createText({fontSize:i,lineHeight:o,fontFamily:r,fontWeight:a,alignment:s,rotation:l,maxWidth:u,text:n.text,color:_.c.fromArray(c),backgroundColor:_.c.fromArray(f),position:_.v.fromObject(n.position)})})}},{key:"_deserializeBrush",value:function(e,t){var n=this,i=t.options,o=i.paths,r=e.createBrush();return o.forEach(function(e){n._deserializeBrushPath(r,e)}),m.a.resolve(r)}},{key:"_deserializeBrushPath",value:function(e,t){var n=t.points,i=this._createBrushForPath(t),o=e.createPath(i);o.setClosed(!0),n.forEach(function(e){o.addControlPoint(_.v.fromObject(e))})}},{key:"_createBrushForPath",value:function(e){var t=e.color,n=e.size,a=_.c.fromArray(t),s={color:a,size:n},l=this._brushManager.getFirstBrush();if(l.prototype&&l.prototype instanceof C){return new l(s)}var u=_.q.extend({},l);delete u.image;var c=function(e){function t(){return r(this,t),i(this,(t.__proto__||h()(t)).apply(this,arguments))}return o(t,e),t}(C);return c.identifier=l.identifier,new c(_.q.extend({},u,s))}},{key:"_deserializeFocusOperation",value:function(e){var t=e.options.options;switch(e.options.type){case"radial":var n=t.position,i=t.radius,o=t.gradientRadius,r=t.blurRadius;return m.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:_.v.fromObject(n),radius:i,gradientRadius:o,blurRadius:r}));case"linear":var a=t.start,s=t.end,l=t.size,u=t.gradientSize,c=t.blurRadius;return m.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:_.v.fromObject(a),end:_.v.fromObject(s),size:l,gradientSize:u,blurRadius:c}))}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))}),n}}]),e}();t.a=S,S.version="1.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(8),s=n.n(a),l=n(4),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(t,n){i(this,e),this._ui=t,this._options=n,this._categoriesById={},this._filtersByIdentifier={identity:l.p.Operations.FilterOperation.Filters.IdentityFilter},this._categories=l.r.DEFAULTS.FILTERS.slice(0),this._initCategories()}return u(e,[{key:"instantiateFilterWithIdentifier",value:function(e){var t=this,n=this.getFilterByIdentifier(e);if(!n)return s.a.reject(new Error("Unknown filter with identifier `"+e+"`!"));if(n.prototype instanceof l.p.Operations.FilterOperation.Filter)return s.a.resolve(new n);var i=n.lutImage,o=n.resolution,r=n.horizontalTileCount,a=n.verticalTileCount,u=void 0;this._ui.getPreloader&&(u=this._ui.getPreloader().getAsset(i));var c=void 0;return c=u?s.a.resolve(u):l.g.load(this._ui.getAssetPath(i)),c.then(function(e){return l.g.load(t._ui.getAssetPath(i)).then(function(e){return new l.p.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:e,resolution:o,horizontalTileCount:r,verticalTileCount:a})})})}},{key:"_initCategories",value:function(){var e=this;if(this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=l.u.mergeCategories(this._categories,this._options.categories,"filters")),this._options.availableFilters){var t=[];this._categories.forEach(function(n){var i=n.filters.filter(function(t){return-1!==e._options.availableFilters.indexOf(t.identifier)});i.length>0&&t.push({identifier:n.identifier,defaultName:n.defaultName,filters:i})}),this._categories=t}var n={identifier:"all",defaultName:"All",filters:this._categories.length<=0?[]:this._categories.map(function(e){return e.filters}).reduce(function(e,t){return e.concat(t)})};this._categories.unshift(n),this._categoriesById.all=n,this._categories.forEach(function(t){e._categoriesById[t.identifier]=t}),n.filters.forEach(function(t){e._filtersByIdentifier[t.identifier]=t})}},{key:"getFiltersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown filter category '"+e+"'");return this._categoriesById[e].filters}},{key:"getFilterByIdentifier",value:function(e){return this._filtersByIdentifier[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(e){return this._categoriesById[e]}}]),e}();t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n){i(this,e),this._ui=t,this._options=n,this._brushes=[],this._brushesById={},this._addBrushes(a.d.DEFAULTS.BRUSHES);var o=this._options,r=o.brushes,s=o.replaceBrushes,l=o.availableBrushes;this._options.brushes&&this._addBrushes(r,s),l&&(this._brushes=this._brushes.filter(function(e){return-1!==l.indexOf(e.identifier)}))}return s(e,[{key:"_addBrushes",value:function(e,t){var n=this;t&&(this._brushes=[],this._brushesById={}),e.forEach(function(e){n._brushes.push(e),n._brushesById[e.identifier]=e})}},{key:"getBrushByIdentifier",value:function(e){return this._brushesById[e]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:function(){return this._brushes[0]}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=n(223),l=n(65),u=n(110),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(t,n){i(this,e),this._ui=t,this._options=n,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return c(e,[{key:"_initFonts",value:function(){var e=this,t=this._options,n=t.fonts,i=t.replaceFonts,o=t.availableVariations,r=a.d.DEFAULTS.FONTS;r=i?n:r.concat(n||[]);var c=void 0;r=r.map(function(t){var n=t.fontFamily,i=t.variations;if(o&&(i=i.filter(function(e){return-1!==o.indexOf(e.identifier)})),0===i.length)return null;var r=new s.a({fontFamily:n});return i=i.map(function(t){var i=new u.a(t);return i.setFontFamily(n),i.setFont(r),t.default&&!c&&(c=i),null==i.getTextMetrics()&&l.a.warn("Missing font metrics for "+i.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details."),e._variationsByIdentifier[i.getIdentifier()]=i,i}),r.setVariations(i),e._fontsByFontFamily[n]=r,r}).filter(function(e){return e}),c||(c=r[0].getVariations()[0]),this._defaultVariation=c,this._fonts=r}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(e){return this._fontsByFontFamily[e]}},{key:"getVariationByIdentifier",value:function(e){return this._variationsByIdentifier[e]}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}]),e}();t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(7),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},g=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"getLabel",value:function(){var e=_[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic"}return e}}]),t}(d.Configurable);t.a=g,g.prototype.availableOptions={identifier:{type:d.OptionType.STRING,required:!0},fontFamily:{type:d.OptionType.STRING,required:!0},fontWeight:{type:d.OptionType.ALL,default:400},fontStyle:{type:d.OptionType.STRING,default:"normal"},textMetrics:{type:d.OptionType.OBJECT,default:null},provider:{type:d.OptionType.STRING,available:["google","file"]},filePath:{type:d.OptionType.STRING},default:{type:d.OptionType.BOOLEAN,default:!1},font:{type:d.OptionType.OBJECT}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(8),s=n.n(a),l=n(225),u=n(7),c=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),f=function(){function e(t){i(this,e),this._ui=t,this._fonts=[],this._observers=[]}return c(e,[{key:"add",value:function(e){this._fonts.push(e)}},{key:"load",value:function(){var e=this;return 0===this._fonts.length?s.a.resolve():(this._observers=[],this._fonts.forEach(function(t){e._observers.push(new l.a(t))}),u.Utils.executePromises(this._observers.map(function(e){return e.observe()})))}},{key:"dispose",value:function(){this._observers.forEach(function(e){return e.dispose()})}}]),e}();t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(105),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=2*Math.PI,g=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+_)%_,1!==t.textureScale&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}}]),t}(d.a);t.a=g,g.version="1.0.1"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(8),m=n.n(d),_=n(3),g=n.n(_),v=n(4),y=n(106),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=function(e){function t(){return i(this,t),o(this,(t.__proto__||g()(t)).apply(this,arguments))}return r(t,e),b(t,[{key:"_deserializeOperation",value:function(e){return"selective-blur"===e.type?this._deserializeSelectiveBlurOperation(e):k(t.prototype.__proto__||g()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=v.v.fromObject(t.start),o=v.v.fromObject(t.end),r=t.dimensions?v.v.fromObject(t.dimensions):null;n>Math.PI&&(n-=2*Math.PI);var a={start:i,end:o};void 0!==n&&(a.rotation=n);var s=this._editor.operations.getOrCreate("transform");if(!s)return m.a.resolve();if(this._editor.broadcastTransform(s,a),s.set(a),r){var l=o.clone().subtract(i),u=s.getInputDimensions(!1).multiply(l);s.setTextureScale(r.x/u.x)}return m.a.resolve(s)}}]),t}(y.a);t.a=w,w.version="1.0.1"},function(e,t,n){"use strict";function i(e,t,n){return t in e?a()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,r=n(0),a=n.n(r),s=n(4),l=s.p.Engine.Filters.OverlayFilter;t.a=(o={},i(o,l.BLEND_MODES.NORMAL,"normal"),i(o,l.BLEND_MODES.OVERLAY,"overlay"),i(o,l.BLEND_MODES.HARD_LIGHT,"hard light"),i(o,l.BLEND_MODES.SOFT_LIGHT,"soft light"),i(o,l.BLEND_MODES.MULTIPLY,"multiply"),i(o,l.BLEND_MODES.DARKEN,"darken"),i(o,l.BLEND_MODES.LIGHTEN,"lighten"),i(o,l.BLEND_MODES.SCREEN,"screen"),i(o,l.BLEND_MODES.COLOR_BURN,"color burn"),o)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n){i(this,e),this._ui=t,this._options=n,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(a.r.DEFAULTS.FRAME_CATEGORIES);var o=this._options,r=o.categories,s=o.replaceCategories;this._options.categories?this._addCategories(r,s):this._updateAllCategory()}return s(e,[{key:"_addCategories",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=n?e.slice(0):a.u.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach(function(e){t._categoriesById[e.identifier]=e});var i=this._options.availableFrames;i&&this._categories.forEach(function(e){e.frames=e.frames.filter(function(e){return-1!==i.indexOf(e.identifier)})}),this._categories.forEach(function(e){e.frames.forEach(function(e){t._framesById[e.identifier]=e})}),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(function(e){return e.frames}).reduce(function(e,t){return e.concat(t)},[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown frame category '"+e+"'");return this._categoriesById[e].frames}},{key:"getFrameByIdentifier",value:function(e){return this._framesById[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n){var o=this;i(this,e),this._ui=t,this._options=n,this._overlays=a.r.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={},n.overlays&&(n.replaceOverlays?this._overlays=n.overlays:this._overlays=this._overlays.concat(n.overlays)),n.availableOverlays&&(this._overlays=this._overlays.filter(function(e){return-1!==n.availableOverlays.indexOf(e.identifier)})),this._overlays.forEach(function(e){o._overlaysByIdentifier[e.identifier]=e})}return s(e,[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(e){return this._overlaysByIdentifier[e]}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=_.p.OptionType,y=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||m()(t)).call(this,n));return r._loaded=!1,r._loading=!1,r._ui=e,r._frame=_.p.Utils.deepClone(r._options),r}return r(t,e),g(t,[{key:"load",value:function(){var e=this;if(this._loaded)return h.a.resolve();if(this._loading)return h.a.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var t=this._frame.imageGroups,n=[];return["top","left","right","bottom"].forEach(function(i){if(i in t){var o=t[i];["start","mid","end"].forEach(function(t){t in o&&n.push(e._loadPart(i,t))})}}),h.a.all(n).then(function(){e._loaded=!0,e._loading=!1}).catch(function(t){e._loaded=!1,e._loading=!1})}},{key:"_loadPart",value:function(e,t){var n=this;return new h.a(function(i,o){var r=n._frame.imageGroups,a=r[e][t],s=a;"string"!=typeof a&&"image"in a&&(s=a.image);var l=new window.Image;l.addEventListener("load",function(){"string"!=typeof a?n._frame.imageGroups[e][t].image=l:n._frame.imageGroups[e][t]=l,i(l)}),l.addEventListener("error",function(){o(new Error("Failed to load image at "+s))}),l.src=n._ui.getAssetPath(s)})}},{key:"getFrame",value:function(){return this._frame}}]),t}(_.p.Configurable);t.a=y,y.prototype.availableOptions={identifier:{type:v.STRING,required:!0},defaultName:{type:v.STRING},thumbnail:{type:v.STRING},tintable:{type:v.BOOLEAN,default:!1},layoutMode:{type:v.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:v.OBJECT,required:!0}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){i(this,e),this._options=t,this._categoriesById={},this._categories=[],this._initCategories()}return s(e,[{key:"_initCategories",value:function(){var e=this,t=this._options,n=t.replaceCategories,i=t.categories,o=a.d.DEFAULTS.TRANSFORM_RATIO_CATEGORIES;this._categories=i?n?a.u.cloneCategories(i,"ratios"):a.u.mergeCategories(o,i,"ratios"):a.u.cloneCategories(o,"ratios"),this._categoriesById={},this._categories.forEach(function(t){e._categoriesById[t.name]=t})}},{key:"getCategories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._categories.slice(0);if(e){var n={name:"all",ratios:this._categories.map(function(e){return e.ratios}).reduce(function(e,t){return e.concat(t)})};t.unshift(n)}return t}},{key:"getRatiosForCategory",value:function(e){var t=this._options.availableRatios;return t?e.ratios.filter(function(e){return-1!==t.indexOf(e.identifier)}):e.ratios}},{key:"hasRatioValue",value:function(e){var t=this,n=!1;return this._categories.forEach(function(i){t.getRatiosForCategory(i).forEach(function(t){if(t.ratio)"*"===t.ratio?n=!0:t.ratio===e&&(n=!0);else if(t.dimension){var i=t.dimension.y/t.dimension.x;i===e&&(n=!0)}})}),n}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=_()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(d.a?d()(e,t):e.__proto__=t)}var s=n(13),l=n.n(s),u=n(0),c=n.n(u),f=n(6),p=n.n(f),h=n(1),d=n.n(h),m=n(2),_=n.n(m),g=n(8),v=n.n(g),y=n(3),b=n.n(y),k=n(4),w=n(48),C=l.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function e(t,n,i){null===t&&(t=Function.prototype);var o=p()(t,n);if(void 0===o){var r=b()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},x=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,(e=t.__proto__||b()(t)).call.apply(e,[this].concat(i)));return s._bindAll("_onBackButtonClick"),s._needsStyleFixes=!0,s.state={backButton:!1},s}return a(t,e),S(t,[{key:"_onBackButtonClick",value:function(){}},{key:"setSharedState",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];E(t.prototype.__proto__||b()(t.prototype),"setSharedState",this).call(this,e,n),i&&this.props.controls.updateSharedState()}},{key:"fixStyles",value:function(){var e=this;return k.u.Browser.isIElte(10)?(this._table&&(this._table.style.height="100%"),this._container&&(this._container.style.height="100%"),new v.a(function(t){Object(k.z)(function(){if(e._root){var n=e._root.offsetHeight;if(e._container&&e._header){var i=e._header.offsetHeight;e._container.style.height=n-i+"px"}e._table&&(e._table.style.height=n+"px"),e._scrollbar&&e._scrollbar.update(),t()}},1e3)})):(this._scrollbar&&this._scrollbar.update(),v.a.resolve())}},{key:"_getRootProps",value:function(){return{}}},{key:"_renderContent",value:function(){return k.l.createElement("div",null)}},{key:"render",value:function(){var e=this,t=this.constructor.RootElement,n=this._getRootProps(),o=i(n,[]),r=this.context.screen.state.currentControl,a=null===r,s={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",!0)+"')"};return k.l.createElement(T,{innerRef:function(t){o.innerRef&&o.innerRef(t),e._root=t}},k.l.createElement(O,{innerRef:function(t){e._table=t}},!a&&k.l.createElement(R,{innerRef:function(t){e._header=t}},this.state.backButton&&k.l.createElement(P,{style:s,onClick:this._onBackButtonClick}),k.l.createElement(I,null,this._t("editor.controls."+r+".title"))),k.l.createElement(D,null,k.l.createElement(t,C({},o,{innerRef:function(t){e._container=t},className:void 0}),this._renderContent()))))}},{key:"container",get:function(){return this._container}}]),t}(w.a);x.contextTypes=w.a.contextTypes,x.propTypes={options:k.k.object},t.a=x;var T=k.w.div("ku10ek","ControlsComponentRoot"),O=k.w.div("rfecls","ControlsComponentTable"),R=k.w.div("1tkmkv6","ControlsComponentHeader"),D=k.w.div("vkb8c9","RootElementContainer");x.RootElement=k.w.div("rfecls",{withBorderTop:"120drhm"},"ControlsComponent");var I=k.w.div("1ru8sfa","ControlsComponentTitle"),P=k.w.button("gyx1pn","BackButton")},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(1),c=n.n(u),f=n(2),p=n.n(f),h=n(3),d=n.n(h),m=n(4),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return o(this,t),r(this,(t.__proto__||d()(t)).apply(this,arguments))}return a(t,e),_(t,[{key:"render",value:function(){var e=this.constructor.RootElement,t=i(this.props,[]);return m.l.createElement(e,t)}}]),t}(m.b);g.contextTypes=m.b.contextTypes,t.a=g,g.RootElement=m.w.li("11o197p",{disabled:"16s6vgr"},"CanvasHeaderButtonComponent")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(22),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onKnobDragStart","_onKnobDrag","_onKnobDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop"),s.state={value:s.props.value||0,sliderPosition:0,foregroundLeft:0,foregroundWidth:0},s}return r(t,e),_(t,[{key:"componentDidMount",value:function(){var e=this;Object(d.z)(function(){e._setValue(e.state.value,!1)})}},{key:"componentWillReceiveProps",value:function(e){e.value!==this.state.value&&this._setValue(e.value,!1)}},{key:"_onKnobDragStart",value:function(e){this._previousValue=this.state.value,this._initialSliderPosition=this.state.sliderPosition,this._initialPosition=e}},{key:"_onKnobDrag",value:function(e){var t=this._bar.offsetWidth,n=this._initialSliderPosition+e.x;n=Math.max(0,Math.min(n,t));var i=n/t,o=this.props.minValue+(this.props.maxValue-this.props.minValue)*i;this._setValue(o)}},{key:"_onKnobDragStop",value:function(){this._setValue(this.state.value,!0,!0)}},{key:"_onBarDragStart",value:function(e){this._previousValue=this.state.value,this._initialPosition=e.clone();var t=this._bar.offsetWidth,n=e.x/t,i=this.props.minValue+(this.props.maxValue-this.props.minValue)*n;this._setValue(i)}},{key:"_onBarDrag",value:function(e){var t=this._initialPosition.clone().add(e),n=this._bar.offsetWidth,i=t.x/n,o=this.props.minValue+(this.props.maxValue-this.props.minValue)*i;o=Math.max(this.props.minValue,Math.min(this.props.maxValue,o)),this._setValue(o)}},{key:"_onBarDragStop",value:function(){this._setValue(this.state.value,!0,!0)}},{key:"_getKnobStyle",value:function(){return{left:this.state.sliderPosition}}},{key:"_getForegroundStyle",value:function(){return{left:this.state.foregroundLeft,width:this.state.foregroundWidth}}},{key:"_setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.props,o=i.minValue,r=i.maxValue,a=(e-o)/(r-o),s=this._bar.offsetWidth,l=s*a,u=a*s,c=0;this.props.middleDot&&(u=Math.abs(a-.5)*s,c=a<.5?.5*s-u:"50%"),this.setState({value:e,sliderPosition:l,foregroundWidth:u,foregroundLeft:c}),t&&this.props.onChange&&this.props.onChange(e,this._previousValue,n)}},{key:"_buildValue",value:function(e){return e%1!=0&&(e=e.toFixed(2)),this.props.positiveValuePrefix&&e>=0&&(e=""+this.props.positiveValuePrefix+e),this.props.valueUnit&&(e+=this.props.valueUnit),e}},{key:"render",value:function(){var e=this,t={style:this._getForegroundStyle()};return d.l.createElement(v,{disabled:this.props.disabled},d.l.createElement(m.a,{onStart:this._onBarDragStart,onDrag:this._onBarDrag,onStop:this._onBarDragStop,disabled:this.props.disabled},d.l.createElement(E,null,d.l.createElement(y,{ref:"foo",innerRef:function(t){e._bar=t}},d.l.createElement("div",null,d.l.createElement(k,{darkBackground:this.props.darkBackground}),d.l.createElement(w,t),d.l.createElement(m.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag,onStop:this._onKnobDragStop,disabled:this.props.disabled},d.l.createElement(S,{style:this._getKnobStyle(),className:void 0},d.l.createElement(C,{idle:0===this.state.value}))))))))}}]),t}(d.b);g.propTypes={value:d.k.number.isRequired,minValue:d.k.number.isRequired,maxValue:d.k.number.isRequired,middleDot:d.k.bool,onChange:d.k.func,positiveValuePrefix:d.k.string,valueUnit:d.k.string,label:d.k.string},g.contextTypes=d.b.contextTypes,t.a=g;var v=d.w.div("jc3w8i",{disabled:"1voy7lm"},"Slider"),y=d.w.div("1pvw1zw","Bar"),b=d.w.div("8gacw5","BarSection"),k=Object(d.w)(b)("120drhm",{darkBackground:"120drhm"},"BarBackgroundSection"),w=Object(d.w)(b)("1apine2","BarForegroundSection"),C=d.w.div("8i3bvo",{idle:"6eg4rp"},"Knob"),S=d.w.div("xsaflu","KnobTouchTarget"),E=d.w.div("1ssoezr","BarContainer")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ControlGroupList",function(){return o}),n.d(t,"ControlGroup",function(){return r}),n.d(t,"ControlGroupTitle",function(){return a});var i=n(4),o=i.w.css("1f3fuxn","ControlGroupList"),r=i.w.css("1bxndxk","ControlGroup"),a=i.w.css("12fzsea","ControlGroupTitle")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(75),_=n(49),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),g(t,[{key:"_renderRightPart",value:function(){var e=this,t=[];return this.props.inputClassName&&t.push(this.props.inputClassName),d.l.createElement(y,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:t.join(" "),innerRef:function(t){e._input=t},disabled:this.props.disabled})}},{key:"render",value:function(){var e=this.props,t=e.inputLabel,n=e.className,i=e.disabled,o=e.styles;return d.l.createElement(b,{styles:o,className:n,disabled:i},d.l.createElement(k,null,d.l.createElement(w,null,t&&d.l.createElement(C,null,t||" "),this._renderRightPart())))}}]),t}(m.a);v.contextTypes=m.a.contextTypes,t.a=v;var y=Object(d.w)(_.a)("12dz026","InputField"),b=Object(d.w)(m.a.RootElement)("9ngfap","ColorComponentInput"),k=d.w.div("15u7gri","Row"),w=d.w.div("1hy9z1m",{bottomAligned:"17xdalt"},"Column"),C=d.w.div("szltve","Title")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.PlainControlItem,g=d.ControlsStyles.PlainControlItemBackground,v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onWebcamClick","_onDropZoneClick","_onDropZoneDragEnter","_onDropZoneDragLeave","_onDropZoneDragOver","_onDropZoneDrop","_onImage"),s._dragCounter=0,s.state={dropZoneHovered:!1},s}return r(t,e),m(t,[{key:"_onWebcamClick",value:function(){this.props.onWebcamActivated&&this.props.onWebcamActivated()}},{key:"_onImage",value:function(e){this.props.onImage&&this.props.onImage(e)}},{key:"_onDropZoneClick",value:function(){this.refs.upload.open()}},{key:"_onDropZoneDragEnter",value:function(e){e.preventDefault(),this._dragCounter++,this.setState({dropZoneHovered:!0})}},{key:"_onDropZoneDragLeave",value:function(e){e.preventDefault(),0===--this._dragCounter&&this.setState({dropZoneHovered:!1})}},{key:"_onDropZoneDragOver",value:function(e){e.preventDefault()}},{key:"_onDropZoneDrop",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),e=e.nativeEvent,e.returnValue=!1,this.setState({dropZoneHovered:!1},function(){if(e.target||e.dataTransfer){var n=e.target.files||e.dataTransfer.files;if(n&&!(n.length<=0))return n[0].type.match(/^image\//i)?void t._handleFile(n[0]):d.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.invalidFileType.text",{fileType:n[0].type}))}})}},{key:"_handleFile",value:function(e){var t=this,n=new window.FileReader;n.onload=function(){return function(e){var n=e.target.result,i=new window.Image;i.addEventListener("load",function(){t._onImage(i)}),i.addEventListener("error",function(e){return d.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.imageLoadingError.text"))}),i.src=n}}(),n.readAsDataURL(e)}},{key:"render",value:function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return d.React.createElement(y,null,d.React.createElement(d.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onImage}),d.React.createElement(b,null,d.React.createElement(k,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone")),!this.state.dropZoneHovered&&this.props.webcamEnabled&&d.React.createElement(w,{style:e,className:void 0,onClick:this._onWebcamClick})))}}]),t}(d.BaseComponent);t.a=v;var y=Object(d.adonis)(_).li("fujban","Container"),b=Object(d.adonis)(g).div("17hsmc4","Background"),k=d.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),w=d.adonis.div("1y2fyfw","WebcamButton")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(8),s=n.n(a),l=n(15),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,e),this._queue=[],this._pendingPromises=0,this._maxConcurrency=t,this._maxQueueLength=n,this._minDelay=o,this._tick=this._tick.bind(this),this._lastPromiseDone=Date.now(),this._running=!0,this._animationFrameRequest=null,Object(l.b)(this._tick)}return u(e,[{key:"_tick",value:function(){if(this._running){Date.now()-this._lastPromiseDone>this._minDelay&&this._pendingPromises<this._maxConcurrency&&this._queue.length&&this._dequeue(),this._animationFrameRequest=Object(l.b)(this._tick)}}},{key:"add",value:function(e){var t=this;return new s.a(function(n,i){if(t._queue.length>=t._maxQueueLength)return i(new Error("Max queue length reached"));t._queue.push({fn:e,resolve:n,reject:i})})}},{key:"_promisify",value:function(e){return void 0!==e&&"function"==typeof e.then?e:s.a.resolve(e)}},{key:"_dequeue",value:function(){var e=this,t=this._queue.shift(),n=Date.now();this._pendingPromises++;try{this._promisify(t.fn()).then(function(i){e._lastPromiseDone=n,e._pendingPromises--,t.resolve(i)}).catch(function(i){e._lastPromiseDone=n,e._pendingPromises--,t.reject(i)})}catch(e){this._lastPromiseDone=n,this._pendingPromises--,t.reject(e)}return!0}},{key:"dispose",value:function(){this._running=!1,this._animationFrameRequest&&Object(l.a)(this._animationFrameRequest)}}]),e}();t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=n.n(d),_=n(305),g=n(307),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"_onEnter",value:function(){var e=this.context.editor;e.zoom.auto(!0,!1,function(){e.features.disable("zoom","drag")},!1)}},{key:"_onLeave",value:function(){this.context.editor.features.enable("zoom","drag")}}],[{key:"mapOperationsToSharedState",value:function(e){var n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],t.FOCUS_OPERATIONS.map(function(t){return e.get(t)}).reduce(function(e,t){return e||t})),i=n&&n.getInputDimensions(!1),o=n?n.constructor.identifier:null,r=t.getItemByOperationIdentifier(o),a=r?r.identifier:"none";return{operation:n||null,inputDimensions:i,operationIdentifier:o,selectedFocus:a,selectedFocusItem:r,blurRadius:n?n.getBlurRadius():0,linearFocus:"linear-focus"===o?{controlPoint1:n.getControlPoint1(),controlPoint2:n.getControlPoint2()}:null,mirroredFocus:"mirrored-focus"===o?{start:n.getStart(),end:n.getEnd(),size:n.getSize(),gradientSize:n.getGradientSize()}:null,radialFocus:"radial-focus"===o?{position:n.getPosition(),radius:n.getRadius(),gradientRadius:n.getGradientRadius()}:null,setSelectedFocus:function(t){t.operationIdentifier!==o&&(o&&e.remove(o),t.operationIdentifier&&e.getOrCreate(t.operationIdentifier))},setBlurRadius:function(e){n&&n.setBlurRadius(e)},setControlPoint1:function(e){"linear-focus"===o&&n.setControlPoint1(e)},setControlPoint2:function(e){"linear-focus"===o&&n.setControlPoint2(e)},setStart:function(e){"mirrored-focus"===o&&n.setStart(e)},setEnd:function(e){"mirrored-focus"===o&&n.setEnd(e)},setPosition:function(e){"radial-focus"===o&&n.setPosition(e)},setRadius:function(e){"radial-focus"===o&&n.setRadius(e)},setOperationOptions:function(e){n&&n.set(e)}}}},{key:"getPreloadAssets",value:function(e){var t=[];return this.ITEMS.forEach(function(e){t.push(e.backgroundImagePath),t.push(e.activeBackgroundImagePath)}),t}},{key:"isEnabled",value:function(e){return e.isToolAllowed("focus")&&e.isToolEnabled("focus")}},{key:"getItemByIdentifier",value:function(e){return t.ITEMS.filter(function(t){return t.identifier===e})[0]}},{key:"getItemByOperationIdentifier",value:function(e){return t.ITEMS.filter(function(t){return t.operationIdentifier===e})[0]}}]),t}(d.BaseControls);y.clickAtPosition=d.BaseControls.clickAtPosition,y.ITEMS=[{identifier:"none",operationIdentifier:null,backgroundImagePath:"editor/controls/focus/none.png",activeBackgroundImagePath:"editor/controls/focus/none-active.png"},{identifier:"radial",operationIdentifier:"radial-focus",backgroundImagePath:"editor/controls/focus/radial.png",activeBackgroundImagePath:"editor/controls/focus/radial-active.png"},{identifier:"mirrored",operationIdentifier:"mirrored-focus",backgroundImagePath:"editor/controls/focus/mirrored.png",activeBackgroundImagePath:"editor/controls/focus/mirrored-active.png"},{identifier:"linear",operationIdentifier:"linear-focus",backgroundImagePath:"editor/controls/focus/linear.png",activeBackgroundImagePath:"editor/controls/focus/linear-active.png"},{identifier:"gaussian",operationIdentifier:"blur",backgroundImagePath:"editor/controls/focus/gaussian.png",activeBackgroundImagePath:"editor/controls/focus/gaussian-active.png"}],y.FOCUS_OPERATIONS=y.ITEMS.map(function(e){return e.operationIdentifier}).filter(function(e){return e}),y.identifier="focus",y.controlsComponent=_.a,y.canvasControlsComponent=g.a,y.iconPath="editor/controls/focus/icon.png",y.activeIconPath="editor/controls/focus/icon-active.png",y.defaultOptions={availableModes:null},y.requiredOperations=y.ITEMS.map(function(e){return e.operationIdentifier}).filter(function(e){return e}),y.updatableOperations=y.ITEMS.map(function(e){return e.operationIdentifier}).filter(function(e){return e}),y.switchToDefaultControlsOnRemoval=!1,m.a.Controls.FocusControls=y,t.a=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.PlainControlItem,g=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"_onStickerClick",value:function(e){this.props.onStickerClick&&this.props.onStickerClick(e)}},{key:"_renderListItems",value:function(){var e=this,t=this.props.stickers,n=void 0,i=this.sharedState.selectedSprite;return i&&(n=i.getIdentifier()),t.map(function(t){var i=d.StickerManager.getURLForSticker(t,"thumb"),o=e._getAssetPath(i),r={background:"url('"+o+"') no-repeat center center",backgroundSize:"contain"};return d.React.createElement(y,{selected:t.identifier===n,key:t.identifier,onClick:e._onStickerClick.bind(e,t),className:void 0,threeColumns:!0},d.React.createElement(b,{style:r}))})}},{key:"render",value:function(){return d.React.createElement(v,null,this._renderListItems())}}]),t}(d.SharedStateComponent);g.contextTypes=d.SharedStateComponent.contextTypes,t.a=g;var v=d.adonis.ul("18qztam","StickerList"),y=Object(d.adonis)(_).li("m4lnou","StickerListItem"),b=d.adonis.div("7r0ke8","StickerImage")},function(e,t,n){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
var i=n(7),o=n(5);n(279),i.UI.DesktopUI=o,e.exports=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(199),_=n(73),g=n(42),v=n(121),y=n(85),b=n(244),k=n(245),w=n(69),C=n(246),S=n(247),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function(e){return d.q.byteArrayToString(d.a.decode(e))};Object(b.a)(d.w,".pesdk-desktop-editor"),Object(k.a)(d.w);var T=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||h()(t)).call(this));return n._mediator=new d.e,n._fontLoader=new w.a(n),n._options=e,n._initOptions(),n._initLanguage(),n._initEvents(),n._disposed=!1,n._preloader=new C.a(n,n._options,n._mediator),d.h.setLevel(n._options.logLevel),n._v()&&n.run(),n}return r(t,e),E(t,[{key:"run",value:function(){this._theme=this._options.theme,this._injectWebFonts(),this._options.container.style.position="relative",this._options.container.className+=" pesdk-desktop-editor",this._render()}},{key:"_render",value:function(){var e=d.l.createElement(m.a,{ui:this,mediator:this._mediator,options:this._options});if(this._options.renderReturnsComponent)return e;this._component=d.m.render(e,this._options.container)}},{key:"export",value:function(){var e;return(e=this._component).export.apply(e,arguments)}},{key:"serialize",value:function(){var e;return(e=this.getEditor()).serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return this.getEditor().deserialize(e)}},{key:"getEditor",value:function(){return this._component.getEditor()}},{key:"_initOptions",value:function(){this._options=d.q.defaults(this._options,{language:"en",logLevel:"warn",editor:{},assets:{},responsive:!1,preloader:!0,theme:y.a}),this._options.editor=d.q.defaults(this._options.editor||{},{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",displayResizeMessage:!0,maxMegaPixels:{},enableDrag:!0,enableZoom:!0,displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,tools:["transform","filter","adjustments","focus","text","sticker","brush","frame","overlay","library"],controlsOrder:[["library"],["transform","filter","adjustments","focus"],["text","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{}}),this._options.editor.maxMegaPixels=d.q.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=d.q.defaults(this._options.editor.export||{},{format:"image/png",type:d.o.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.extensions=d.q.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=d.q.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null})}},{key:"_injectWebFonts",value:function(){var e=[];for(var t in this._theme.fonts){var n=this._theme.fonts[t],i=this.getAssetPath(n.src,!0,!0);e.push('\n        @font-face {\n          font-family: "'+n.fontFamily+"\";\n          src: url('"+i+"') format('woff');\n          font-weight: "+n.fontWeight+";\n          font-style: "+n.fontStyle+";\n        }\n      ")}var o="\n      /* Injected by PhotoEditorSDK */\n      "+e.join("\n")+"\n    ";d.w.global(o,!0)}},{key:"_v",value:function(){return!!this[x("X29wdGlvbnM=")][x("bGljZW5zZQ==")]||(d.h.error(x("TGljZW5zaW5n"),x("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),d.h.error(x("TGljZW5zaW5n"),x("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function(){this._mediator.unpipeEvents(this)}},{key:"_initLanguage",value:function(){this._languages=d.q.deepDefaults(this._options.extensions.languages,{de:n(277),en:n(278)}),this._language=this._languages[this._options.language],this._language||d.h.error(this.constructor.name,"Language `"+this._options.language+"` not found!")}},{key:"translate",value:function(e,t){return d.u.translate(this._language,e,t)}},{key:"setImage",value:function(e){this._component&&this._component.setImage(e)}},{key:"getAssetPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._options.assets,o=i.baseUrl,r=i.resolver,a=o+"/"+e;if(e.match(/(ftp|http|https):\/\//)&&(a=e),t){if(!n){if(("undefined"!=typeof window&&window.devicePixelRatio||1)>1){var s=/\.[\w?=]+$/;e=e.replace(s,function(e){return"@2x"+e})}}a=o+"/ui/desktop/"+e}return void 0!==r&&null!==r&&(a=r(a)),a}},{key:"getTheme",value:function(){return this._theme}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"getPreloader",value:function(){return this._preloader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,d.m.unmountComponentAtNode(this._options.container),this._disposeEvents()}}]),t}(d.e);T.prototype.identifier="react",T.BaseComponent=d.b,T.React=d.l,T.adonis=d.w,T.SharedState=d.s,T.Constants=d.d,T.Utils=d.u,T.ScrollbarComponent=_.a,T.JSONLoader=g.a,T.SliderComponent=v.a;var O=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),E(t,[{key:"componentDidMount",value:function(){this._ui=new T(d.q.extend({},this.props,{container:this.refs.container}))}},{key:"render",value:function(){var e=d.q.extend({},this.props.style||{});return d.l.createElement("div",{style:e,ref:"container"})}},{key:"ui",get:function(){return this._ui}}]),t}(d.l.Component);T.ReactComponent=O,T.Controls={};for(var R in S)T[R]=S[R];d.p.UI=d.p.UI||{},d.p.UI.DesktopUI=T,t.default=T},function(e,t,n){n(131);var i=n(9).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(11);i(i.S+i.F*!n(18),"Object",{defineProperty:n(16).f})},function(e,t,n){n(133),e.exports=n(9).Object.setPrototypeOf},function(e,t,n){var i=n(11);i(i.S,"Object",{setPrototypeOf:n(134).set})},function(e,t,n){var i=n(17),o=n(14),r=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(23)(Function.call,n(52).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:r}},function(e,t,n){n(136);var i=n(9).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(11);i(i.S,"Object",{create:n(54)})},function(e,t,n){var i=n(16),o=n(14),r=n(29);e.exports=n(18)?Object.defineProperties:function(e,t){o(e);for(var n,a=r(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(20),o=n(55),r=n(139);e.exports=function(e){return function(t,n,a){var s,l=i(t),u=o(l.length),c=r(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(56),o=Math.max,r=Math.min;e.exports=function(e,t){return e=i(e),e<0?o(e+t,0):r(e,t)}},function(e,t,n){n(141),e.exports=n(9).Object.getPrototypeOf},function(e,t,n){var i=n(30),o=n(84);n(60)("getPrototypeOf",function(){return function(e){return o(i(e))}})},function(e,t){e.exports=n},function(e,t,n){"use strict";var i=n(144),o=n(145),r=n(146);e.exports=function(){function e(e,t,n,i,a,s){s!==r&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";function i(e){return function(){return e}}var o=function(){};o.thatReturns=i,o.thatReturnsFalse=i(!1),o.thatReturnsTrue=i(!0),o.thatReturnsNull=i(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";function i(e,t,n,i,r,a,s,l){if(o(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,a,s,l],f=0;u=new Error(t.replace(/%s/g,function(){return c[f++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var o=function(e){};e.exports=i},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var n={firasansmedium:{fontFamily:"firasansmedium",fontWeight:"500",fontStyle:"normal",src:"fonts/FiraSans-Medium.woff"},firasansregular:{fontFamily:"firasansregular",fontWeight:"400",fontStyle:"normal",src:"fonts/FiraSans-Regular.woff"},sourcesansprobold:{fontFamily:"sourcesansprobold",fontWeight:"bolder",fontStyle:"normal",src:"fonts/SourceSansPro-Bold.woff"},sourcesansprosemibold:{fontFamily:"sourcesansprosemibold",fontWeight:"bold",fontStyle:"normal",src:"fonts/SourceSansPro-Semibold.woff"}};e.exports={primaryColor:"#2D7BFF",primaryColorRGB:"45, 123, 255",backgroundColor:"#141415",backgroundColorRGB:"20, 20, 21",controlsKnobColor:"white",controlsBackgroundColor:"#232326",controlsBackgroundColorRGB:"35, 35, 38",controlsLightBackgroundColor:"#2a2a2e",controlsOutlineColor:"rgba(255, 255, 255, 0.6)",controlsSeparatorColor:"#1b1b1d",navigationBackgroundColor:"#202022",navigationBackgroundColorRGB:"32, 32, 34",textColor:"#FFFFFF",dimmedTextColor:"#888888",dimmedTextColorRGB:"136, 136, 136",filterItemBackgroundColor:"#4b4b4c",secondaryControlsBackgroundColor:"#2a2a2e",secondaryControlsBackgroundColorRGB:"42, 42, 46",focusItemBackgroundColor:"#343437",sliderBackgroundColor:"rgba(255,255,255,0.24)",darkSliderBackgroundColor:"#1B1B1E",sliderKnobColor:"#b5b5be",sliderCircleKnobColor:"#c8c8d2",highlightColor:"#2675F8",highlightColorRGB:"38, 117, 253",darkHighlightColorRGB:"15, 47, 101",buttonBorderColor:"#303034",defaultShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.60)",modalErrorColor:"#C23A3A",modalWarningColor:"#C18226",modalLoadingColor:"#2D7BFF",zIndex:function(e){return 5*["background","controls","controlsOverlays","overlays","navigation"].indexOf(e)},transitionDuration:.3,listItemSlideInDelay:100,scrollbarGradientSize:64,uppercaseBoldFontFamily:"sourcesansprobold",uppercaseSemiBoldFontFamily:"sourcesansprosemibold",regularFontFamily:"firasansregular",mediumFontFamily:"firasansmedium",fonts:n}},function(e,t,n){!function(t,i){e.exports=i(n(32))}(0,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeProvider=t.withTheme=void 0;var o=n(1),r=i(o),a=n(27),s=i(a),l=n(28),u=i(l),c=n(29),f=i(c),p=n(30),h=i(p);t.default=function(e){var t=new r.default(e),n=function(e){if(e instanceof u.default){var n=e,i={};return s.default.forEach(function(e){i[e]=function(i,o,r){return"string"==typeof o&&(r=o,o=void 0),t.createComponent(e,{styles:i,variations:o,name:r,baseStyles:n})}}),i}return function(n,i,o){return"string"==typeof i&&(o=i,i=void 0),t.createComponent(e,{styles:n,variations:i,name:o})}};return s.default.forEach(function(e){n[e]=function(n,i,o){return"string"==typeof i&&(o=i,i=void 0),t.createComponent(e,{styles:n,variations:i,name:o})}}),n.global=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.getOptions(),o=i.injection,r=i.theme;if(o||n){"function"==typeof e&&(e=e(r));var a=t.getStylesBuffer();a.bufferCSS(e),a.flushToStyleTag(n)}},n.css=function(e,n,i){return"string"==typeof n&&(i=n,n=void 0),new u.default(t,{styles:e,variations:n,name:i||"baseStyles"})},["renderToStatic"].forEach(function(e){n[e]=t[e].bind(t)}),n},t.withTheme=f.default,t.ThemeProvider=h.default},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(3),s=i(a),l=n(5),u=i(l),c=n(4),f=void 0!==e&&"production"===e.env.NODE_ENV,p=function(){function e(t){o(this,e),this._options=(0,c.defaults)(t,{injection:!0,batchInjection:!0,minified:!1,autoPrefix:!0,cssSelectorPrefix:"",classNamePrefix:"",hashSeparator:"-",nameSeparator:"__",variationSeparator:"--",styleNode:null,injectionMode:f?"fast":"debug",hashedStyles:!1}),this._stylesBuffer=new s.default(this),this._componentFactory=new u.default(this,this._options)}return r(e,[{key:"createComponent",value:function(e,t){return this._componentFactory.createComponent(e,t)}},{key:"renderToStatic",value:function(e){this._stylesBuffer.disableInjection();var t=e(),n=this._stylesBuffer.flushToString(!0);return this._stylesBuffer.enableInjection(),{css:{content:n},html:t}}},{key:"getStylesBuffer",value:function(){return this._stylesBuffer}},{key:"getOptions",value:function(){return this._options}}]),e}();t.default=p}).call(t,n(2))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&h&&(m=!1,h.length?d=h.concat(d):_=-1,d.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=d.length;t;){for(h=d,d=[];++_<t;)h&&h[_].run();_=-1,t=d.length}h=null,m=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,f,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var h,d=[],m=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new l(e,t)),1!==d.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),s=function(){function e(t){i(this,e),this._adonis=t,this._injectionEnabled=!0,this._bufferedSelectors={},this._buffer=[],this._styleNode=this._findStyleNode(),this._sheet=this._findSheet()}return r(e,[{key:"_findSheet",value:function(){if(this._styleNode){if(this._styleNode.sheet)return this._styleNode.sheet;for(var e=document,t=e.styleSheets,n=0;n<t.length;n++){var i=t[n];if(i.ownerNode===this._styleNode)return i}}}},{key:"_findStyleNode",value:function(){var e=this._adonis.getOptions(),t=e.styleNode;return t||("undefined"==typeof document?null:(t=document.createElement("style"),t.setAttribute("data-adonis",!0),document.head.appendChild(t),t))}},{key:"bufferCSS",value:function(e){this._buffer.push(e)}},{key:"bufferRulesets",value:function(e){var t=this;e.forEach(function(e){var n=o(e,2),i=n[0];n[1];t._bufferedSelectors[i]=!0}),Array.prototype.push.apply(this._buffer,e.map(function(e){return o(e,2)[1]}))}},{key:"isSelectorBuffered",value:function(e){return this._bufferedSelectors[e]}},{key:"disableInjection",value:function(){this._injectionEnabled=!1}},{key:"enableInjection",value:function(){this._injectionEnabled=!0}},{key:"flushToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._adonis.getOptions(),n=t.minified,i=this._buffer.join(n?"":"\n\n");return this._buffer=[],e&&(this._bufferedSelectors={}),i}},{key:"_injectFast",value:function(){var e=this;this._buffer.forEach(function(t){e._sheet.insertRule(t,e._sheet.cssRules.length)})}},{key:"_injectDebug",value:function(){var e=this.flushToString();if(e){var t=this._adonis.getOptions(),n=t.minified,i=this._styleNode.innerHTML.length>0;this._styleNode.appendChild(document.createTextNode((n||!i?"":"\n\n")+e))}}},{key:"_flushToStyleTag",value:function(){var e=this._adonis.getOptions(),t=e.injectionMode;if("fast"===t&&this._sheet.insertRule)this._injectFast();else{if("debug"!==t)throw new Error("Unknown CSS injection mode: `"+t+"`");this._injectDebug()}this._buffer=[]}},{key:"flushToStyleTag",value:function(){var e=this;if(this._injectionEnabled){var t=this._adonis.getOptions(),n=t.batchInjection;!this._nextTick&&n?this._nextTick=(0,a.requestAnimationFrame)(function(){e._nextTick=null,e._flushToStyleTag()}):n||this._flushToStyleTag()}}}]),e}();t.default=s},function(e,t){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(t.defaults=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o={};for(var r in e)o[r]=e[r];for(var a=0;a<n.length;a++){var s=n[a];for(var l in s)void 0===o[l]&&(o[l]=s[l])}return o},t.hashObject=function(e){for(var t=JSON.stringify(e),n=t.length,i=n,o=0,r=void 0;n>=4;)r=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^r,n-=4,++o;switch(n){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i^=255&t.charCodeAt(o),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)}return i^=i>>>13,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>15,(i>>>0).toString(36)},t.flatten=function e(t){return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e(n):n)},[])},t.toStaticStyles=function e(t){var i={};for(var o in t){var r=t[o];"object"===(void 0===r?"undefined":n(r))?i[o]=e(r):"function"!=typeof r&&(i[o]=r)}return i},t.deepMerge=function e(t,i){var o={};for(var r in t)o[r]=t[r];for(var a in i)"object"===n(i[a])&&t[a]?o[a]=e(t[a],i[a]):o[a]=i[a];return o});t.deepMergeAll=function(e){return e.reduce(function(e,t){return i(e,t)},{})},t.resolveStylesObject=function e(t,i){var o={};for(var r in t){var a=t[r];if("object"===(void 0===a?"undefined":n(a)))o[r]=e(a,i);else if("function"==typeof a){if(!i)throw new Error("Trying to resolve a dynamic property without a `theme` given.");o[r]=a(i)}else o[r]=a}return o},t.findAllCombinations=function(e){return function e(t,n){var i=t[0];if(void 0===i)return n;for(var o=0,r=n.length;o<r;++o)n.push(n[o].concat(i));return e(t.slice(1),n)}(e,[[]]).slice(1)},t.requestAnimationFrame=function(){for(var t=0,n=void 0===e?window:e,i=n.requestAnimationFrame,o=["ms","moz","webkit","o"],r=0;r<o.length&&!i;++r)i=n[o[r]+"RequestAnimationFrame"];return!i&&void 0!==n&&n.setImmediate&&(i=n.setImmediate),i&&(i=i.bind(n)),i||(i=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),o=setTimeout(function(){e(n+i)},i);return t=n+i,o}),i}()}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),u=i(l),c=n(4),f=n(7),p=i(f),h=n(16),d=i(h),m=n(17),_=i(m),g=n(26),v=i(g),y=function(){function e(t,n){a(this,e),this._adonis=t,this._options=n}return s(e,[{key:"_getName",value:function(e){return"string"==typeof e?e:e.name?e.name:"adonis"}},{key:"_getTargetStyles",value:function(e,t){var n=[e.adonisBaseStyles,e.adonisStyles];return e.adonisTarget&&n.unshift(this._getTargetStyles(e.adonisTarget)),e.RootElement&&n.unshift(this._getTargetStyles(e.RootElement)),(0,c.flatten)(n).filter(function(e){return e})}},{key:"createComponent",value:function(e,t){var n=this._adonis,i=t.name;i||(i=this._getName(e));var f="string"==typeof e,h=e.prototype instanceof p.default,m=!h&&e.prototype instanceof l.Component,g=t.styles,y=t.variations,b=t.baseStyles;y=y||{};var k=new d.default(n,{styles:g,variations:y,name:i}),w=n.getOptions(),C=w.injection,S=w.theme,E=w.hashedStyles;if("pre"===C&&!E){var x=this._getTargetStyles(e,i),T=void 0,O=void 0;T=x.concat([b,k]).filter(function(e){return e}),O=new v.default(n,T,S),O.bufferRulesets();n.getStylesBuffer().flushToStyleTag()}var R=function(l){function p(){var e;a(this,p);for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var s=o(this,(e=p.__proto__||Object.getPrototypeOf(p)).call.apply(e,[this].concat(i)));return s._updateStylesManager(),s._adonis=n,s}return r(p,l),s(p,[{key:"_updateStylesManager",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this._allStyles=[b,k].concat(e.styles||[]).filter(function(e){return e});var t=this._getActiveVariationsFromProps(e);this._stylesManager=new _.default(n,this._allStyles,t,this.context.theme)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.styles!==this.props.styles,i=!1;(0,c.flatten)(this._allStyles.map(function(e){return e.getVariations()})).forEach(function(n){e[n]!==t.props[n]&&(i=!0)}),(n||i)&&this._updateStylesManager(e)}},{key:"_cloneProps",value:function(){var e=this,t={};return Object.keys(this.props).forEach(function(n){t[n]=e.props[n]}),t}},{key:"_getActiveVariationsFromProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t={};return this._allStyles.forEach(function(e){return e.getVariations().forEach(function(e){return t[e]=!0})}),Object.keys(t).filter(function(t){return!0===e[t]}).sort()}},{key:"_buildClassName",value:function(){var e=this.props.className,t=[];t.push(e);var n=this._stylesManager.getClassName();return t.push(n),{className:t.filter(function(e){return e}).join(" ")}}},{key:"_shouldInjectCSS",value:function(){return!(!C||E)&&(f||m&&!h)}},{key:"render",value:function(){var n=this._cloneProps(),i=this._buildClassName(),o=i.className,r=this._adonis.getStylesBuffer();if(this._shouldInjectCSS()&&(this._stylesManager.bufferRulesets(),!0!==C||E||r.flushToStyleTag()),f){var a=t.variations;a&&Object.keys(a).forEach(function(e){delete n[e]}),this.props._activeParentVariations&&this.props._activeParentVariations.forEach(function(e){delete n[e]}),b&&b.getVariations().forEach(function(e){delete n[e]})}f?n.className=o:(n.styles=(0,c.flatten)([k].concat(this.props.styles||[])),n._activeParentVariations=Object.keys(y||{}).concat(this.props._activeParentVariations||[]));var s=this.props,l=s.children,p=s.innerRef;return p&&(m||f?n.ref=p:h&&(n.innerRef=p)),f&&(delete n.styles,delete n.innerRef,delete n._activeParentVariations),u.default.createElement(e,n,l)}}],[{key:"name",get:function(){return i}}]),p}(p.default);return R.contextTypes=p.default.contextTypes,R.adonisTarget=e,R.adonisStyles=k,R.adonisBaseStyles=b,R}}]),e}();t.default=y},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),s=n(8),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),t}(a.Component);t.default=u,u.contextTypes={theme:l.default.object}},function(e,t,n){(function(t){if("production"!==t.env.NODE_ENV){var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,o=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i};e.exports=n(9)(o,!0)}else e.exports=n(15)()}).call(t,n(2))},function(e,t,n){(function(t){"use strict";var i=n(10),o=n(11),r=n(12),a=n(13),s=n(14);e.exports=function(e,n){function l(e){var t=e&&(E&&e[E]||e[x]);if("function"==typeof t)return t}function u(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function c(e){this.message=e,this.stack=""}function f(e){function i(i,u,f,p,h,d,m){if(p=p||T,d=d||f,m!==a)if(n)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var _=p+":"+f;!s[_]&&l<3&&(r(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",d,p),s[_]=!0,l++)}return null==u[f]?i?new c(null===u[f]?"The "+h+" `"+d+"` is marked as required in `"+p+"`, but its value is `null`.":"The "+h+" `"+d+"` is marked as required in `"+p+"`, but its value is `undefined`."):null:e(u,f,p,h,d)}if("production"!==t.env.NODE_ENV)var s={},l=0;var u=i.bind(null,!1);return u.isRequired=i.bind(null,!0),u}function p(e){function t(t,n,i,o,r,a){var s=t[n];if(k(s)!==e)return new c("Invalid "+o+" `"+r+"` of type `"+w(s)+"` supplied to `"+i+"`, expected `"+e+"`.");return null}return f(t)}function h(e){function t(t,n,i,o,r){if("function"!=typeof e)return new c("Property `"+r+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new c("Invalid "+o+" `"+r+"` of type `"+k(s)+"` supplied to `"+i+"`, expected an array.")}for(var l=0;l<s.length;l++){var u=e(s,l,i,o,r+"["+l+"]",a);if(u instanceof Error)return u}return null}return f(t)}function d(e){function t(t,n,i,o,r){if(!(t[n]instanceof e)){var a=e.name||T;return new c("Invalid "+o+" `"+r+"` of type `"+S(t[n])+"` supplied to `"+i+"`, expected instance of `"+a+"`.")}return null}return f(t)}function m(e){function n(t,n,i,o,r){for(var a=t[n],s=0;s<e.length;s++)if(u(a,e[s]))return null;return new c("Invalid "+o+" `"+r+"` of value `"+a+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?f(n):("production"!==t.env.NODE_ENV&&r(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull)}function _(e){function t(t,n,i,o,r){if("function"!=typeof e)return new c("Property `"+r+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var s=t[n],l=k(s);if("object"!==l)return new c("Invalid "+o+" `"+r+"` of type `"+l+"` supplied to `"+i+"`, expected an object.");for(var u in s)if(s.hasOwnProperty(u)){var f=e(s,u,i,o,r+"."+u,a);if(f instanceof Error)return f}return null}return f(t)}function g(e){function n(t,n,i,o,r){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,i,o,r,a))return null}return new c("Invalid "+o+" `"+r+"` supplied to `"+i+"`.")}if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&r(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var o=0;o<e.length;o++){var s=e[o];if("function"!=typeof s)return r(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",C(s),o),i.thatReturnsNull}return f(n)}function v(e){function t(t,n,i,o,r){var s=t[n],l=k(s);if("object"!==l)return new c("Invalid "+o+" `"+r+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");for(var u in e){var f=e[u];if(f){var p=f(s,u,i,o,r+"."+u,a);if(p)return p}}return null}return f(t)}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var n=l(t);if(!n)return!1;var i,o=n.call(t);if(n!==t.entries){for(;!(i=o.next()).done;)if(!y(i.value))return!1}else for(;!(i=o.next()).done;){var r=i.value;if(r&&!y(r[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function k(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function w(e){if(void 0===e||null===e)return""+e;var t=k(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function C(e){var t=w(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function S(e){return e.constructor&&e.constructor.name?e.constructor.name:T}var E="function"==typeof Symbol&&Symbol.iterator,x="@@iterator",T="<<anonymous>>",O={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return f(i.thatReturnsNull)}(),arrayOf:h,element:function(){function t(t,n,i,o,r){var a=t[n];if(!e(a)){return new c("Invalid "+o+" `"+r+"` of type `"+k(a)+"` supplied to `"+i+"`, expected a single ReactElement.")}return null}return f(t)}(),instanceOf:d,node:function(){function e(e,t,n,i,o){return y(e[t])?null:new c("Invalid "+i+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return f(e)}(),objectOf:_,oneOf:m,oneOfType:g,shape:v};return c.prototype=Error.prototype,O.checkPropTypes=s,O.PropTypes=O,O}}).call(t,n(2))},function(e,t){"use strict";function n(e){return function(){return e}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){(function(t){"use strict";function n(e,t,n,o,r,a,s,l){if(i(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,r,a,s,l],f=0;u=new Error(t.replace(/%s/g,function(){return c[f++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var i=function(e){};"production"!==t.env.NODE_ENV&&(i=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=n}).call(t,n(2))},function(e,t,n){(function(t){"use strict";var i=n(10),o=i;"production"!==t.env.NODE_ENV&&function(){var e=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=0,r="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(r);try{throw new Error(r)}catch(e){}};o=function(t,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!t){for(var i=arguments.length,o=Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];e.apply(void 0,[n].concat(o))}}}(),e.exports=o}).call(t,n(2))},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){(function(t){"use strict";function i(e,n,i,l,u){if("production"!==t.env.NODE_ENV)for(var c in e)if(e.hasOwnProperty(c)){var f;try{o("function"==typeof e[c],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",l||"React class",i,c),f=e[c](n,c,l,i,null,a)}catch(e){f=e}if(r(!f||f instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",l||"React class",i,c,typeof f),f instanceof Error&&!(f.message in s)){s[f.message]=!0;var p=u?u():"";r(!1,"Failed %s type: %s%s",i,f.message,null!=p?p:"")}}}if("production"!==t.env.NODE_ENV)var o=n(11),r=n(12),a=n(13),s={};e.exports=i}).call(t,n(2))},function(e,t,n){"use strict";var i=n(10),o=n(11),r=n(13);e.exports=function(){function e(e,t,n,i,a,s){s!==r&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(4),a=function(){function e(t,n){i(this,e),this._adonis=t,this._options=(0,r.defaults)(n,{variations:[],styles:{},name:"Unnamed"});var o=this._adonis.getOptions(),a=o.hashedStyles;if(a&&"string"!=typeof this._options.styles)throw new Error("Passing style objects with `hashedStyles` set to true is invalid.");this._hash=a?this._options.styles:(0,r.hashObject)(this._options.styles),this._variationHashes=this._hashVariations()}return o(e,[{key:"_hashVariations",value:function(){var e={},t=this._adonis.getOptions(),n=t.hashedStyles,i=this._options.variations;for(var o in i){var a=i[o];e[o]=n?a:(0,r.hashObject)(a)}return e}},{key:"getIdentifierForVariations",value:function(e){var t=this,n=this._options.name,i=this._adonis.getOptions(),o=i.hashSeparator,r=i.variationSeparator,a=""+n+o+this._hash;return e.sort().forEach(function(e){var n=t._variationHashes[e];n&&(a+=""+r+e+o+n)}),a}},{key:"getStyles",value:function(){return this._options.styles}},{key:"getVariationStyles",value:function(e){var t=this._options.variations;return e?e.map(function(e){return t[e]}).filter(function(e){return e}):t}},{key:"getVariations",value:function(){return Object.keys(this._options.variations||{})}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(4),a=n(18),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t,n,o,r){i(this,e),this._adonis=t,this._styles=n,this._theme=r,this._activeVariations=o,this._className=this._generateClassName(this._activeVariations),this._baseSelector="."+this._className,this._rulesets=this._generateRulesets()}return o(e,[{key:"generateCSS",value:function(){return this._rulesets.map(function(e){return e.toCSS()}).filter(function(e){return e})}},{key:"bufferRulesets",value:function(){var e=this._adonis.getStylesBuffer(),t=this._rulesets.filter(function(t){return!e.isSelectorBuffered(t.getSelector())&&t.hasDeclarations()}).map(function(e){return[e.getSelector(),e.toCSS()]});e.bufferRulesets(t)}},{key:"_getCombinedStyles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,r.flatten)(this._styles.map(function(t){return[t.getStyles(),t.getVariationStyles(e)]}));return(0,r.deepMergeAll)(t)}},{key:"_generateClassName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._adonis.getOptions(),n=t.nameSeparator;return t.classNamePrefix+this._styles.map(function(t){return t.getIdentifierForVariations(e)}).join(n)}},{key:"_generateRulesets",value:function(){var e=new s.default(this._adonis,this._baseSelector,this._getCombinedStyles(this._activeVariations),{theme:this._theme});return(0,r.flatten)([e,e.getSubRulesets()])}},{key:"getClassName",value:function(){return this._className}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),s=n(19),l=i(s),u=n(21),c=i(u),f=function(){function e(t,n,i,r){o(this,e),this._options=r,this._adonis=t,this._selector=n,this._styles=i,this._resolvedStyles=(0,a.resolveStylesObject)(this._styles,this._options.theme);var s=this._adonis.getOptions(),l=s.hashedStyles;this._hash=l?this._styles:(0,a.hashObject)(this._styles);var u=this._parseStyles(),c=u.subRulesets,f=u.declarations;this._subRulesets=c,this._declarations=f}return r(e,[{key:"_getSubRuleset",value:function(t,n){for(var i=this,o=this._adonis.getOptions(),r=o.minified,s=null,l=function(t,o){var r=(0,a.deepMerge)(i._options,{parentSelector:o});s=new e(i._adonis,t,n,r)},u=0;u<c.default.length;u++){if((0,c.default[u])(t,this._selector,l,r),s)return s}}},{key:"_parseStyles",value:function(){var e=[],t=[];for(var n in this._resolvedStyles){var i=this._resolvedStyles[n],o=this._getSubRuleset(n,i);o?e.push(o,o.getSubRulesets()):t.push(new l.default(this._adonis,n,i))}return{subRulesets:e,declarations:t}}},{key:"toCSS",value:function(){var e=this._options.parentSelector,t=this._adonis.getOptions(),n=t.minified,i=t.cssSelectorPrefix;if(0===this._declarations.length)return null;var o=e&&e.match(/^@/),r="",a="";e?(i&&!o&&(r+=i),r+=e+(n?"{":" {\n"),a="  "):r+=i;var s="";return i&&o&&(s+=i),s+=this._selector,r+=a+s+(n?"{":" {\n"),this._declarations.forEach(function(e){r+=a+e.toCSS()+(n?"":"\n")}),r+=a+"}",e&&(r+=n?"}":"\n}"),r}},{key:"getSubRulesets",value:function(){return this._subRulesets}},{key:"hasDeclarations",value:function(){return 0!==this._declarations.length}},{key:"getSelector",value:function(){return this._selector}}]),e}();t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(20),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t,n,o){i(this,e),this._adonis=t,this.key=n,this.value=o,this.cssKey=this.key.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()})}return r(e,[{key:"_getAutoPrefixedKeyPairs",value:function(){var e=this,t=s.default[this.key],n=[];return t&&t.forEach(function(t){n.push(["-"+t+"-"+e.cssKey,e.value])}),n}},{key:"toCSS",value:function(){var e=this._adonis.getOptions(),t=e.minified,n=e.autoPrefix,i=[[this.cssKey,this.value]];return n&&(i=i.concat(this._getAutoPrefixedKeyPairs())),i.map(function(e){var n=o(e,2),i=n[0],r=n[1];return(t?"":"  ")+i+":"+(t?"":" ")+r+";"}).join(t?"":"\n")}}]),e}();t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="webkit",i="moz",o="ms";t.default={appearance:[n,i],userSelect:[n,i,o],textEmphasisPosition:[n],textEmphasis:[n],textEmphasisStyle:[n],textEmphasisColor:[n],boxDecorationBreak:[n],clipPath:[n],maskImage:[n],maskMode:[n],maskRepeat:[n],maskPosition:[n],maskClip:[n],maskOrigin:[n],maskSize:[n],maskComposite:[n],mask:[n],maskBorderSource:[n],maskBorderMode:[n],maskBorderSlice:[n],maskBorderWidth:[n],maskBorderOutset:[n],maskBorderRepeat:[n],maskBorder:[n],maskType:[n],textDecorationStyle:[n],textDecorationSkip:[n],textDecorationLine:[n],textDecorationColor:[n],filter:[n],fontFeatureSettings:[n],breakAfter:[n,i,o],breakBefore:[n,i,o],breakInside:[n,i,o],columnCount:[n,i],columnFill:[n,i],columnGap:[n,i],columnRule:[n,i],columnRuleColor:[n,i],columnRuleStyle:[n,i],columnRuleWidth:[n,i],columns:[n,i],columnSpan:[n,i],columnWidth:[n,i],flex:[n],flexBasis:[n],flexDirection:[n],flexGrow:[n],flexFlow:[n],flexShrink:[n],flexWrap:[n],alignContent:[n],alignItems:[n],alignSelf:[n],justifyContent:[n],order:[n],transform:[n],transformOrigin:[n],transformOriginX:[n],transformOriginY:[n],backfaceVisibility:[n],perspective:[n],perspectiveOrigin:[n],transformStyle:[n],transformOriginZ:[n],animation:[n],animationDelay:[n],animationDirection:[n],animationFillMode:[n],animationDuration:[n],animationIterationCount:[n],animationName:[n],animationPlayState:[n],animationTimingFunction:[n],backdropFilter:[n],fontKerning:[n],scrollSnapType:[n,o],scrollSnapPointsX:[n,o],scrollSnapPointsY:[n,o],scrollSnapDestination:[n,o],scrollSnapCoordinate:[n,o],shapeImageThreshold:[n],shapeImageMargin:[n],shapeImageOutside:[n],hyphens:[n,i,o],flowInto:[n,o],flowFrom:[n,o],regionFragment:[n,o],textAlignLast:[i],tabSize:[i],wrapFlow:[o],wrapThrough:[o],wrapMargin:[o],gridTemplateColumns:[o],gridTemplateRows:[o],gridTemplateAreas:[o],gridTemplate:[o],gridAutoColumns:[o],gridAutoRows:[o],gridAutoFlow:[o],grid:[o],gridRowStart:[o],gridColumnStart:[o],gridRowEnd:[o],gridRow:[o],gridColumn:[o],gridColumnEnd:[o],gridColumnGap:[o],gridRowGap:[o],gridArea:[o],gridGap:[o],textSizeAdjust:[n,o],transitionDelay:[n],transitionDuration:[n],transitionProperty:[n],transitionTimingFunction:[n]}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=i(o),a=n(23),s=i(a),l=n(24),u=i(l),c=n(25),f=i(c);t.default=[r.default,s.default,u.default,f.default]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){if(e=e.trim(),">"!==e[0])return null;e=e.slice(1).trim();var o=t;return i||(o+=" "),o+=">",i||(o+=" "),o+=e,n(o)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){if(e=e.trim(),"&"!==e[0])return null;var o=!e.match(/^&\s+/);return e=e.replace(/^&/,""),n(e.split(",").map(function(e){return e.trim()}).map(function(e,n){return t+(0===n&&o?"":" ")+e}).join(", "))}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){return e=e.trim(),":"!==e[0]?null:n(t+e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){return e=e.trim(),"@"!==e[0]?null:n(t,e)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(4),u=n(18),c=i(u),f=n(17),p=i(f),h=function(e){function t(e,n,i){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,[],i))}return a(t,e),s(t,[{key:"_generateVariationRulesets",value:function(){var e=this,t=(0,l.flatten)(this._styles.map(function(e){return e.getVariations()}));return(0,l.findAllCombinations)(t).map(function(t){var n=e._generateClassName(t),i="."+n,o=new c.default(e._adonis,i,e._getCombinedStyles(t),{theme:e._theme});return[o,o.getSubRulesets()]})}},{key:"_generateRulesets",value:function(){var e=new c.default(this._adonis,this._baseSelector,this._getCombinedStyles(),{theme:this._theme}),t=[e,e.getSubRulesets()];return t.push(this._generateVariationRulesets()),(0,l.flatten)(t)}}]),t}(p.default);t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),t}(s.default);t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),u=i(l),c=n(8),f=i(c);t.default=function(e){var t=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),s(n,[{key:"_cloneProps",value:function(){var e=this,t={};return Object.keys(this.props).forEach(function(n){t[n]=e.props[n]}),t}},{key:"render",value:function(){var t=this._cloneProps(),n=t.innerRef;return n&&(t.ref=n),delete t.innerRef,u.default.createElement(e,t)}}]),n}(u.default.Component);return t.contextTypes={theme:f.default.object},t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),u=i(l),c=n(8),f=i(c),p=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"getChildContext",value:function(){var e={};for(var t in this.context)e[t]=this.context;return e.theme=this.props.theme,e}},{key:"render",value:function(){return this.props.children?u.default.Children.only(this.props.children):null}}]),t}(l.Component);t.default=p,p.childContextTypes={theme:f.default.object.isRequired},p.contextTypes={theme:f.default.object}}])})},function(e,t,n){n(87),n(33),n(41),n(155),n(162),n(163),e.exports=n(9).Promise},function(e,t,n){var i=n(56),o=n(53);e.exports=function(e){return function(t,n){var r,a,s=String(o(t)),l=i(n),u=s.length;return l<0||l>=u?e?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):r:e?s.slice(l,l+2):a-56320+(r-55296<<10)+65536)}}},function(e,t,n){"use strict";var i=n(54),o=n(27),r=n(40),a={};n(19)(a,n(10)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:o(1,n)}),r(e,t+" Iterator")}},function(e,t,n){"use strict";var i=n(153),o=n(154),r=n(25),a=n(20);e.exports=n(88)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var i,o,r,a,s=n(39),l=n(12),u=n(23),c=n(61),f=n(11),p=n(17),h=n(35),d=n(156),m=n(157),_=n(92),g=n(63).set,v=n(159)(),y=n(64),b=n(93),k=n(94),w=l.TypeError,C=l.process,S=l.Promise,E="process"==c(C),x=function(){},T=o=y.f,O=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[n(10)("species")]=function(e){e(x,x)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),R=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var i=e._v,o=1==e._s,r=0;n.length>r;)!function(t){var n,r,a=o?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{a?(o||(2==e._h&&j(e),e._h=1),!0===a?n=i:(u&&u.enter(),n=a(i),u&&u.exit()),n===t.promise?l(w("Promise-chain cycle")):(r=R(n))?r.call(n,s,l):s(n)):l(i)}catch(e){l(e)}}(n[r++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(l,function(){var t,n,i,o=e._v,r=P(e);if(r&&(t=b(function(){E?C.emit("unhandledRejection",o,e):(n=l.onunhandledrejection)?n({promise:e,reason:o}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",o)}),e._h=E||P(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},P=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(e){g.call(l,function(){var t;E?C.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},B=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},A=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=R(e))?v(function(){var i={_w:n,_d:!1};try{t.call(e,u(A,i,1),u(B,i,1))}catch(e){B.call(i,e)}}):(n._v=e,n._s=1,D(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};O||(S=function(e){d(this,S,"Promise","_h"),h(e),i.call(this);try{e(u(A,this,1),u(B,this,1))}catch(e){B.call(this,e)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(160)(S.prototype,{then:function(e,t){var n=T(_(this,S));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=E?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i;this.promise=e,this.resolve=u(A,e,1),this.reject=u(B,e,1)},y.f=T=function(e){return e===S||e===a?new r(e):o(e)}),f(f.G+f.W+f.F*!O,{Promise:S}),n(40)(S,"Promise"),n(161)("Promise"),a=n(9).Promise,f(f.S+f.F*!O,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!O),"Promise",{resolve:function(e){return k(s&&this===a?S:this,e)}}),f(f.S+f.F*!(O&&n(95)(function(e){S.all(e).catch(x)})),"Promise",{all:function(e){var t=this,n=T(t),i=n.resolve,o=n.reject,r=b(function(){var n=[],r=0,a=1;m(e,!1,function(e){var s=r++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||i(n))},o)}),--a||i(n)});return r.e&&o(r.v),n.promise},race:function(e){var t=this,n=T(t),i=n.reject,o=b(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(23),o=n(90),r=n(91),a=n(14),s=n(55),l=n(62),u={},c={},t=e.exports=function(e,t,n,f,p){var h,d,m,_,g=p?function(){return e}:l(e),v=i(n,f,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(r(g)){for(h=s(e.length);h>y;y++)if((_=t?v(a(d=e[y])[0],d[1]):v(e[y]))===u||_===c)return _}else for(m=g.call(e);!(d=m.next()).done;)if((_=o(m,v,d.value,t))===u||_===c)return _};t.BREAK=u,t.RETURN=c},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(12),o=n(63).set,r=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(28)(a);e.exports=function(){var e,t,n,u=function(){var i,o;for(l&&(i=a.domain)&&i.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(u)};else if(!r||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve();n=function(){c.then(u)}}else n=function(){o.call(i,u)};else{var f=!0,p=document.createTextNode("");new r(u).observe(p,{characterData:!0}),n=function(){p.data=f=!f}}return function(i){var o={fn:i,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var i=n(19);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:i(e,o,t[o]);return e}},function(e,t,n){"use strict";var i=n(12),o=n(9),r=n(16),a=n(18),s=n(10)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:i[e];a&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var i=n(11),o=n(9),r=n(12),a=n(92),s=n(94);i(i.P+i.R,"Promise",{finally:function(e){var t=a(this,o.Promise||r.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var i=n(11),o=n(64),r=n(93);i(i.S,"Promise",{try:function(e){var t=o.f(this),n=r(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";var i=n(7),o=n.n(i),r=n(65),a=n(165),s=n(42),l=o.a.Utils,u=o.a.Math.Vector2,c={getInnerDimensionsForElement:function(e){var t=new u(e.offsetWidth,e.offsetHeight),n=window.getComputedStyle(e,null);return t.x-=parseInt(n.getPropertyValue("padding-left"),10),t.x-=parseInt(n.getPropertyValue("padding-right"),10),t.y-=parseInt(n.getPropertyValue("padding-top"),10),t.y-=parseInt(n.getPropertyValue("padding-bottom"),10),t},getEventPosition:function(e){var t=e.clientX,n=e.clientY;if(-1!==e.type.indexOf("touch")){if(!e.touches.length)return;t=e.touches[0].clientX,n=e.touches[0].clientY}return new u(t,n)},createTransparentPatternCanvas:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=10,e.height=10,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#cccccc",t.fillRect(0,0,e.width/2,e.height/2),t.fillRect(e.width/2,e.height/2,e.width,e.height),e},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.fetch(e,t);if(!i)return r.a.info("Utils#translate","Unable to translate `"+t+"`"),null;for(var o in n)i=i.replace("${"+o+"}",n[o]);return i},fetch:function(e,t,n){t=t.replace(/\[(\w+)]/g,".$1"),t=t.replace(/^\./,"");for(var i=t.split("."),o=0;o<i.length;o++){if(!(e=e[i[o]]))break}return void 0!==e&&e},isMobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},select:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=function(e){return e});var i=[];return t.forEach(function(t){e.forEach(function(e){n(e)===t&&i.push(e)})}),i},getJSONP:function(e){return new s.a(e).load()},cloneCategories:function(e,t){return e.map(function(e){return e=l.clone(e),e[t]=e[t].slice(0),e})},mergeCategories:function(e,t,n){e=this.cloneCategories(e,n);var i=null;return t.forEach(function(t){e.forEach(function(e){t.identifier===e.identifier&&(i=e)}),i?i[n]=i[n].concat(t[n]):e.push(t)}),e},getStyleObject:function(e){var t=window.getComputedStyle(e),n={};for(var i in t){var o=t.getPropertyValue(i),r=i.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});""!==o&&(n[r]=o)}return n},styleElement:function(e,t){for(var n in t)e.style[n]=t[n]},debounce:function(e,t,n){var i;return function(){var o=this,r=arguments,a=function(){i=null,n||e.apply(o,r)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(this,r)}},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},findIntegerFraction:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Number.MAX_VALUE,i=0,o=0,r=1,a=1,s=0;s<t;s++){var l=r/a-e;if(l<0)r++;else{if(!(l>0))return new u(r,a);a++}var c=Math.abs(r/a-e);c<n&&(n=c,i=r,o=a)}return new u(i,o)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toFixed(t);return parseFloat(n)},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},flipObject:function(e){var t={};for(var n in e)t[e[n]]=n;return t},Browser:a.a};t.a=c},function(e,t,n){"use strict";t.a={getIEVersion:function(){var e=navigator,t=e.userAgent,n=e.appVersion;return-1!==n.indexOf("MSIE")?n.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==t.indexOf("Trident")&&t.match(/rv:([0-9]+)/i)[1]},isIE10:function(){var e=this.getIEVersion();return!1!==e&&10===e},isIE11:function(){var e=this.getIEVersion();return!1!==e&&11===e},isIElte:function(e){var t=this.getIEVersion();return!1!==t&&t<=e}}},function(e,t,n){"use strict";(function(e){var i=n(43),o=n.n(i),r=n(44),a=n.n(r),s=n(8),l=n.n(s),u=n(0),c=n.n(u),f=n(176),p=n.n(f),h="function"==typeof a.a&&"symbol"==typeof o.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},d=void 0===e?window:e,m=void 0!==l.a?l.a:function(){function e(e,t){m.add(e,t),d||(d=g(m.drain))}function t(e){var t,n=void 0===e?"undefined":h(e);return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)i(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function i(e,n,i){var o,r;try{!1===n?i.reject(e.msg):(o=!0===n?e.msg:n.call(void 0,e.msg),o===i.promise?i.reject(TypeError("Promise-chain cycle")):(r=t(o))?r.call(o,i.resolve,i.reject):i.resolve(o))}catch(e){i.reject(e)}}function o(i){var a,l=this;if(!l.triggered){l.triggered=!0,l.def&&(l=l.def);try{(a=t(i))?e(function(){var e=new s(l);try{a.call(i,function(){o.apply(e,arguments)},function(){r.apply(e,arguments)})}catch(t){r.call(e,t)}}):(l.msg=i,l.state=1,l.chain.length>0&&e(n,l))}catch(e){r.call(new s(l),e)}}}function r(t){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=t,i.state=2,i.chain.length>0&&e(n,i))}function a(e,t,n,i){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){n(o,e)},i)}(o)}function s(e){this.def=e,this.triggered=!1}function l(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var i=new l(this);this.then=function(t,o){var r={success:"function"!=typeof t||t,failure:"function"==typeof o&&o};return r.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t}),i.chain.push(r),0!==i.state&&e(n,i),r.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){o.call(i,e)},function(e){r.call(i,e)})}catch(e){r.call(i,e)}}var f,d,m,_=Object.prototype.toString,g=void 0!==p.a?function(e){return p()(e)}:setTimeout;try{Object.defineProperty({},"x",{}),f=function(e,t,n,i){return c()(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(e){f=function(e,t,n){return e[t]=n,e}}m=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,i;return{add:function(o,r){i=new e(o,r),n?n.next=i:t=i,n=i,i=void 0},drain:function(){var e=t;for(t=n=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var v=f({},"constructor",u,!1);return u.prototype=v,f(v,"__NPO__",0,!1),f(u,"resolve",function(e){var t=this;return e&&"object"==(void 0===e?"undefined":h(e))&&1===e.__NPO__?e:new t(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),f(u,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),f(u,"all",function(e){var t=this;return"[object Array]"!=_.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var o=e.length,r=Array(o),s=0;a(t,e,function(e,t){r[e]=t,++s===o&&n(r)},i)})}),f(u,"race",function(e){var t=this;return"[object Array]"!=_.call(e)?t.reject(TypeError("Not an array")):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");a(t,e,function(e,t){n(t)},i)})}),u}();d.Promise=d.Promise||m,t.a=m}).call(t,n(31))},function(e,t,n){n(33),n(41),e.exports=n(66).f("iterator")},function(e,t,n){n(169),n(87),n(174),n(175),e.exports=n(9).Symbol},function(e,t,n){"use strict";var i=n(12),o=n(21),r=n(18),a=n(11),s=n(89),l=n(170).KEY,u=n(24),c=n(58),f=n(40),p=n(37),h=n(10),d=n(66),m=n(67),_=n(171),g=n(172),v=n(14),y=n(17),b=n(20),k=n(51),w=n(27),C=n(54),S=n(173),E=n(52),x=n(16),T=n(29),O=E.f,R=x.f,D=S.f,I=i.Symbol,P=i.JSON,j=P&&P.stringify,B=h("_hidden"),A=h("toPrimitive"),M={}.propertyIsEnumerable,F=c("symbol-registry"),N=c("symbols"),z=c("op-symbols"),L=Object.prototype,V="function"==typeof I,U=i.QObject,W=!U||!U.prototype||!U.prototype.findChild,H=r&&u(function(){return 7!=C(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=O(L,t);i&&delete L[t],R(e,t,n),i&&e!==L&&R(L,t,i)}:R,q=function(e){var t=N[e]=C(I.prototype);return t._k=e,t},G=V&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},K=function(e,t,n){return e===L&&K(z,t,n),v(e),t=k(t,!0),v(n),o(N,t)?(n.enumerable?(o(e,B)&&e[B][t]&&(e[B][t]=!1),n=C(n,{enumerable:w(0,!1)})):(o(e,B)||R(e,B,w(1,{})),e[B][t]=!0),H(e,t,n)):R(e,t,n)},Z=function(e,t){v(e);for(var n,i=_(t=b(t)),o=0,r=i.length;r>o;)K(e,n=i[o++],t[n]);return e},Q=function(e,t){return void 0===t?C(e):Z(C(e),t)},Y=function(e){var t=M.call(this,e=k(e,!0));return!(this===L&&o(N,e)&&!o(z,e))&&(!(t||!o(this,e)||!o(N,e)||o(this,B)&&this[B][e])||t)},J=function(e,t){if(e=b(e),t=k(t,!0),e!==L||!o(N,t)||o(z,t)){var n=O(e,t);return!n||!o(N,t)||o(e,B)&&e[B][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=D(b(e)),i=[],r=0;n.length>r;)o(N,t=n[r++])||t==B||t==l||i.push(t);return i},$=function(e){for(var t,n=e===L,i=D(n?z:b(e)),r=[],a=0;i.length>a;)!o(N,t=i[a++])||n&&!o(L,t)||r.push(N[t]);return r};V||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===L&&t.call(z,n),o(this,B)&&o(this[B],e)&&(this[B][e]=!1),H(this,e,w(1,n))};return r&&W&&H(L,e,{configurable:!0,set:t}),q(e)},s(I.prototype,"toString",function(){return this._k}),E.f=J,x.f=K,n(97).f=S.f=X,n(36).f=Y,n(68).f=$,r&&!n(39)&&s(L,"propertyIsEnumerable",Y,!0),d.f=function(e){return q(h(e))}),a(a.G+a.W+a.F*!V,{Symbol:I});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ne=T(h.store),ie=0;ne.length>ie;)m(ne[ie++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return o(F,e+="")?F[e]:F[e]=I(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!V,"Object",{create:Q,defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:X,getOwnPropertySymbols:$}),P&&a(a.S+a.F*(!V||u(function(){var e=I();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t=i[1],(y(t)||void 0!==e)&&!G(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),i[1]=t,j.apply(P,i)}}),I.prototype[A]||n(19)(I.prototype,A,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){var i=n(37)("meta"),o=n(17),r=n(21),a=n(16).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(24)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},p=function(e,t){if(!r(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},h=function(e){return u&&d.NEED&&l(e)&&!r(e,i)&&c(e),e},d=e.exports={KEY:i,NEED:!1,fastKey:f,getWeak:p,onFreeze:h}},function(e,t,n){var i=n(29),o=n(68),r=n(36);e.exports=function(e){var t=i(e),n=o.f;if(n)for(var a,s=n(e),l=r.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var i=n(28);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(20),o=n(97).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?s(e):o(i(e))}},function(e,t,n){n(67)("asyncIterator")},function(e,t,n){n(67)("observable")},function(e,t,n){e.exports={default:n(177),__esModule:!0}},function(e,t,n){n(178),e.exports=n(9).setImmediate},function(e,t,n){var i=n(11),o=n(63);i(i.G+i.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&u.isObject(e)&&e instanceof i)return e;var o=new i;return o.parse(e,t,n),o}function r(e){return u.isString(e)&&(e=o(e)),e instanceof i?e.format():i.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}var l=n(180),u=n(182);t.parse=o,t.resolve=a,t.resolveObject=s,t.format=r,t.Url=i;var c=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(h),m=["'"].concat(d),_=["%","/","?",";","#"].concat(m),g=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=n(183);i.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=-1!==i&&i<e.indexOf("#")?"?":"#",r=e.split(o),a=/\\/g;r[0]=r[0].replace(a,"/"),e=r.join(o);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var f=p.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?C.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=c.exec(s);if(h){h=h[0];var d=h.toLowerCase();this.protocol=d,s=s.substr(h.length)}if(n||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===s.substr(0,2);!S||h&&k[h]||(s=s.substr(2),this.slashes=!0)}if(!k[h]&&(S||h&&!w[h])){for(var E=-1,x=0;x<g.length;x++){var T=s.indexOf(g[x]);-1!==T&&(-1===E||T<E)&&(E=T)}var O,R;R=-1===E?s.lastIndexOf("@"):s.lastIndexOf("@",E),-1!==R&&(O=s.slice(0,R),s=s.slice(R+1),this.auth=decodeURIComponent(O)),E=-1;for(var x=0;x<_.length;x++){var T=s.indexOf(_[x]);-1!==T&&(-1===E||T<E)&&(E=T)}-1===E&&(E=s.length),this.host=s.slice(0,E),s=s.slice(E),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var I=this.hostname.split(/\./),x=0,P=I.length;x<P;x++){var j=I[x];if(j&&!j.match(v)){for(var B="",A=0,M=j.length;A<M;A++)j.charCodeAt(A)>127?B+="x":B+=j[A];if(!B.match(v)){var F=I.slice(0,x),N=I.slice(x+1),z=j.match(y);z&&(F.push(z[1]),N.unshift(z[2])),N.length&&(s="/"+N.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=l.toASCII(this.hostname));var L=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+L,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!b[d])for(var x=0,P=m.length;x<P;x++){var U=m[x];if(-1!==s.indexOf(U)){var W=encodeURIComponent(U);W===U&&(W=escape(U)),s=s.split(U).join(W)}}var H=s.indexOf("#");-1!==H&&(this.hash=s.substr(H),s=s.slice(0,H));var q=s.indexOf("?");if(-1!==q?(this.search=s.substr(q),this.query=s.substr(q+1),t&&(this.query=C.parse(this.query)),s=s.slice(0,q)):t&&(this.search="",this.query={}),s&&(this.pathname=s),w[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",G=this.search||"";this.path=L+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,r="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(r=C.stringify(this.query));var a=this.search||r&&"?"+r||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||w[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+i},i.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(u.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,o=Object.keys(this),r=0;r<o.length;r++){var a=o[r];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(n[c]=e[c])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!w[e.protocol]){for(var f=Object.keys(e),p=0;p<f.length;p++){var h=f[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||k[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",_=n.search||"";n.path=m+_}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=v||g||n.host&&e.pathname,b=y,C=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!w[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),y=y&&(""===d[0]||""===C[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=d;else if(d.length)C||(C=[]),C.pop(),C=C.concat(d),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(S){n.hostname=n.host=C.shift();var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=C.slice(-1)[0],T=(n.host||e.host||C.length>1)&&("."===x||".."===x)||""===x,O=0,R=C.length;R>=0;R--)x=C[R],"."===x?C.splice(R,1):".."===x?(C.splice(R,1),O++):O&&(C.splice(R,1),O--);if(!y&&!b)for(;O--;O)C.unshift("..");!y||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),T&&"/"!==C.join("/").substr(-1)&&C.push("");var D=""===C[0]||C[0]&&"/"===C[0].charAt(0);if(S){n.hostname=n.host=D?"":C.length?C.shift():"";var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return y=y||n.host&&C.length,y&&!D&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,i){var o;!function(r){function a(e){throw new RangeError(P[e])}function s(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function l(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(I,"."),i+s(e.split("."),t).join(".")}function u(e){for(var t,n,i=[],o=0,r=e.length;o<r;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<r?(n=e.charCodeAt(o++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--)):i.push(t);return i}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=A(e>>>10&1023|55296),e=56320|1023&e),t+=A(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:k}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var i=0;for(e=n?B(e/E):e>>1,e+=B(e/t);e>j*C>>1;i+=k)e=B(e/j);return B(i+(j+1)*e/(e+S))}function d(e){var t,n,i,o,r,s,l,u,p,d,m=[],_=e.length,g=0,v=T,y=x;for(n=e.lastIndexOf(O),n<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&a("not-basic"),m.push(e.charCodeAt(i));for(o=n>0?n+1:0;o<_;){for(r=g,s=1,l=k;o>=_&&a("invalid-input"),u=f(e.charCodeAt(o++)),(u>=k||u>B((b-g)/s))&&a("overflow"),g+=u*s,p=l<=y?w:l>=y+C?C:l-y,!(u<p);l+=k)d=k-p,s>B(b/d)&&a("overflow"),s*=d;t=m.length+1,y=h(g-r,t,0==r),B(g/t)>b-v&&a("overflow"),v+=B(g/t),g%=t,m.splice(g++,0,v)}return c(m)}function m(e){var t,n,i,o,r,s,l,c,f,d,m,_,g,v,y,S=[];for(e=u(e),_=e.length,t=T,n=0,r=x,s=0;s<_;++s)(m=e[s])<128&&S.push(A(m));for(i=o=S.length,o&&S.push(O);i<_;){for(l=b,s=0;s<_;++s)(m=e[s])>=t&&m<l&&(l=m);for(g=i+1,l-t>B((b-n)/g)&&a("overflow"),n+=(l-t)*g,t=l,s=0;s<_;++s)if(m=e[s],m<t&&++n>b&&a("overflow"),m==t){for(c=n,f=k;d=f<=r?w:f>=r+C?C:f-r,!(c<d);f+=k)y=c-d,v=k-d,S.push(A(p(d+y%v,0))),c=B(y/v);S.push(A(p(c,0))),r=h(n,g,i==o),n=0,++i}++n,++t}return S.join("")}function _(e){return l(e,function(e){return R.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return l(e,function(e){return D.test(e)?"xn--"+m(e):e})}var v=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof i&&i);var y,b=2147483647,k=36,w=1,C=26,S=38,E=700,x=72,T=128,O="-",R=/^xn--/,D=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=k-w,B=Math.floor,A=String.fromCharCode;y={version:"1.4.1",ucs2:{decode:u,encode:c},decode:d,encode:m,toASCII:g,toUnicode:_},void 0!==(o=function(){return y}.call(t,n,t,e))&&(e.exports=o)}()}).call(t,n(181)(e),n(31))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(184),t.encode=t.stringify=n(185)},function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,r){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;r&&"number"==typeof r.maxKeys&&(l=r.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var f,p,h,d,m=e[c].replace(s,"%20"),_=m.indexOf(n);_>=0?(f=m.substr(0,_),p=m.substr(_+1)):(f=m,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),i(a,h)?o(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function i(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(a(e),function(a){var s=encodeURIComponent(o(a))+n;return r(e[a])?i(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+n+encodeURIComponent(o(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";var i=n(187),o=n(188);t.a={EVENTS:i.a,DEFAULTS:o.a}},function(e,t,n){"use strict";t.a={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",WINDOW_RESIZE:"window:resize",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:updated",HISTORY_BEFORE_UNDO:"history:before-undo",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_REAPPLY_RATIO:"transform:reapply-ratio",ADDED_STICKER:"sticker:added-sticker"}},function(e,t,n){"use strict";var i=n(7),o=n.n(i),r=n(189),a=n(190),s=[];void 0!==o.a.Operations.SpriteOperation&&s.push(o.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),t.a={TRANSFORM_RATIO_CATEGORIES:a.a,FONTS:r.a,BRUSHES:s}},function(e,t,n){"use strict";t.a=[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.woff",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.woff",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.woff",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.woff",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}},{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.woff",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}]},function(e,t,n){"use strict";var i=n(7),o=n.n(i);t.a=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",ratio:1},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:new o.a.Math.Vector2(1200,627)},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:new o.a.Math.Vector2(940,788)},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:new o.a.Math.Vector2(851,315)}]}]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=g()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(m.a?m()(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),l=n(43),u=n.n(l),c=n(44),f=n.n(c),p=n(0),h=n.n(p),d=n(1),m=n.n(d),_=n(2),g=n.n(_),v=n(3),y=n.n(v),b=n(7),k=n.n(b),w=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C="function"==typeof f.a&&"symbol"==typeof u.a?function(e){return typeof e}:function(e){return e&&"function"==typeof f.a&&e.constructor===f.a&&e!==f.a.prototype?"symbol":typeof e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),h()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=k.a.EventEmitter,x=k.a.Log,T=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||y()(t)).call(this));return n.setMaxListeners(50),n._canBroadcast=!0,n.state=e,n}return r(t,e),S(t,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"object"!==(void 0===e?"undefined":C(e))&&x.info("SharedState#set expects an object as first parameter");var n=w({},this.state,e),i=w({},this.state);this.state=n,t&&this.broadcastUpdate(i,n)}},{key:"get",value:function(e){return this.state[e]}},{key:"getState",value:function(){return this.state}},{key:"broadcastUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._canBroadcast&&this.emit("update",e,t)}},{key:"enableBroadcast",value:function(){this._canBroadcast=!0}},{key:"disableBroadcast",value:function(){this._canBroadcast=!1}},{key:"clear",value:function(){var e=this.state;this.state={},this.broadcastUpdate(e,this.state)}}]),t}(E);t.a=T},function(e,t,n){n(193),e.exports=n(9).Object.assign},function(e,t,n){var i=n(11);i(i.S+i.F,"Object",{assign:n(194)})},function(e,t,n){"use strict";var i=n(29),o=n(68),r=n(36),a=n(30),s=n(81),l=Object.assign;e.exports=!l||n(24)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=o.f,f=r.f;l>u;)for(var p,h=s(arguments[u++]),d=c?i(h).concat(c(h)):i(h),m=d.length,_=0;m>_;)f.call(h,p=d[_++])&&(n[p]=h[p]);return n}:l},function(e,t,n){n(41),n(33),e.exports=n(196)},function(e,t,n){var i=n(61),o=n(10)("iterator"),r=n(25);e.exports=n(9).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||r.hasOwnProperty(i(t))}},function(e,t,n){n(41),n(33),e.exports=n(198)},function(e,t,n){var i=n(14),o=n(62);e.exports=n(9).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=m()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),l=n(0),u=n.n(l),c=n(6),f=n.n(c),p=n(1),h=n.n(p),d=n(2),m=n.n(d),_=n(3),g=n.n(_),v=n(4),y=n(34),b=n(202),k=n(207),w=n(243),C=n(86),S=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function e(t,n,i){null===t&&(t=Function.prototype);var o=f()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},T={loading:w.a,editor:k.a},O=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(r)));s._bindAll("_onLoadingDone","_onPreloaderDone","_onImageDone");var l=s.props,u=l.options,c=l.ui,f=u.editor.image;s._preloaderIsComplete=!u.preloader,u.preloader&&(s._preloader=c.getPreloader(),s._preloader.on("done",s._onPreloaderDone)),s._imageIsComplete=f.complete,f.addEventListener("load",s._onImageDone);var p=!s._preloaderIsComplete||!s._imageIsComplete,h=p?w.a:k.a;return s.state={theme:s.props.ui.getTheme(),screen:h,screenOptions:{}},s}return r(t,e),E(t,[{key:"componentDidMount",value:function(){x(t.prototype.__proto__||g()(t.prototype),"componentDidMount",this).call(this),this._preloader&&this._preloader.load()}},{key:"componentWillUnmount",value:function(){x(t.prototype.__proto__||g()(t.prototype),"componentWillUnmount",this).call(this),this._preloader&&this._preloader.off("done",this._onPreloaderDone)}},{key:"_onImageDone",value:function(){this._imageIsComplete=!0,this._onLoadingDone()}},{key:"_onPreloaderDone",value:function(){this._preloaderIsComplete=!0,this._onLoadingDone()}},{key:"_onLoadingDone",value:function(){this._preloaderIsComplete&&this._imageIsComplete&&this.setState({screen:k.a,screenOptions:{}})}},{key:"getChildContext",value:function(){return{ui:this.props.ui,options:this.props.options,mediator:this.props.mediator,appComponent:this}}},{key:"switchToScreen",value:function(e){this.setState({screen:T[e],screenOptions:{}})}},{key:"getEditor",value:function(){return this._currentScreen.getEditor()}},{key:"export",value:function(){var e;return(e=this._currentScreen).export.apply(e,arguments)}},{key:"serialize",value:function(){var e;return(e=this._currentScreen).serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return this._currentScreen.deserialize(e)}},{key:"getBounds",value:function(){return this._container.getBoundingClientRect()}},{key:"setImage",value:function(e){this.getEditor().setImage(e)}},{key:"_renderCurrentScreen",value:function(){var e=this,t=this.state,n=t.screen,i=t.screenOptions;return v.l.createElement(n,S({},i,{innerRef:function(t){e._currentScreen=t}}))}},{key:"render",value:function(){var e=this;return v.l.createElement(v.t,{theme:this.state.theme},v.l.createElement(R,{className:"photoeditorsdk-editor",innerRef:function(t){e._container=t}},v.l.createElement(b.a,{modalManager:y.a.instance}),this._renderCurrentScreen()))}}]),t}(C.a);O.childContextTypes={ui:v.k.object.isRequired,mediator:v.k.object.isRequired,options:v.k.object.isRequired,appComponent:v.k.object.isRequired},O.propTypes={ui:v.k.object.isRequired,mediator:v.k.object.isRequired,options:v.k.object.isRequired},t.a=O;var R=v.w.div("wspo5c","AppContainer")},function(e,t,n){n(201);var i=n(9).Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var i=n(20),o=n(52).f;n(60)("getOwnPropertyDescriptor",function(){return function(e,t){return o(i(e),t)}})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(203),v=n(204),y=n(205),b=n(206),k=n(46),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},S=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._modalManager=s.props.modalManager,s._bindAll("_onModalManagerUpdate"),s.state={overlayVisible:!1},s}return r(t,e),w(t,[{key:"componentDidMount",value:function(){C(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this._modalManager.on("update",this._onModalManagerUpdate)}},{key:"componentWillUnmount",value:function(){C(t.prototype.__proto__||m()(t.prototype),"componentWillUnmount",this).call(this),this._modalManager.off("update",this._onModalManagerUpdate)}},{key:"_onModalManagerUpdate",value:function(){var e=this._modalManager.getModals(),t=e.filter(function(e){return e.visible}).filter(function(e){return!!e.overlay}).length>0;this.state.overlayVisible=t,this.forceUpdate()}},{key:"_onModalClosed",value:function(e){this._modalManager.removeModal(e)}},{key:"_renderModals",value:function(){var e=this;return this._modalManager.getModals().map(function(t){var n=void 0;switch(t.type){case"loading":n=g.a;break;case"warning":n=v.a;break;case"error":n=y.a;break;case"progress":n=b.a}return _.l.createElement(n,{modal:t,key:t.id,onClose:e._onModalClosed.bind(e,t)})})}},{key:"render",value:function(){return _.l.createElement(x,null,_.l.createElement(k.a,{active:this.state.overlayVisible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},_.l.createElement(E,null)),_.l.createElement("div",null,this._renderModals()))}}]),t}(_.b);S.contextTypes=_.b.contextTypes,t.a=S;var E=_.w.div("ovs9m3",{visible:"zgbg08",rendered:"2jlos"},"Overlay"),x=_.w.div("8gacw5","Container")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(2),u=n.n(l),c=n(3),f=n.n(c),p=n(4),h=n(45),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||f()(t)).apply(this,arguments))}return r(t,e),t}(h.a);d.contextTypes=p.b.contextTypes,t.a=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(45),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._buttons=s.props.modal.data.buttons||["OK"],s}return r(t,e),_(t,[{key:"_onButtonClick",value:function(e){this.props.modal.emit("button",e),this.props.modal.close()}}]),t}(m.a);g.contextTypes=d.b.contextTypes,t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(45),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._buttons=["Okay"],s}return r(t,e),_(t,[{key:"_onButtonClick",value:function(e){0===e&&this.props.modal.close()}}]),t}(m.a);g.contextTypes=d.b.contextTypes,t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(2),u=n.n(l),c=n(3),f=n.n(c),p=n(45),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||f()(t)).apply(this,arguments))}return r(t,e),t}(p.a);h.contextTypes=p.a.contextTypes,t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=m()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),l=n(0),u=n.n(l),c=n(6),f=n.n(c),p=n(1),h=n.n(p),d=n(2),m=n.n(d),_=n(8),g=n.n(_),v=n(3),y=n.n(v),b=n(4),k=n(102),w=n(236),C=n(238),S=n(34),E=n(118),x=n(119),T=n(72),O=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),D=function e(t,n,i){null===t&&(t=Function.prototype);var o=f()(t,n);if(void 0===o){var r=y()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},I=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||y()(t)).call.apply(e,[this].concat(r)));s._bindAll("_onRenderError","_onImageResize","_startEditor","_onEditorReset");var l=s.context,u=l.ui,c=l.options,f=l.mediator;return s._editor=new k.a(u,c,f),s._editor.on("ready",s._startEditor),s._editor.on("render-error",s._onRenderError),s._editor.on("resize",s._onImageResize),s._editor.on("reset",s._onEditorReset),s._onWindowResize=b.u.debounce(s._onWindowResize.bind(s),250),s._originalToolsOption=null,s._needsForceCrop=!1,s.state={sharedState:new b.s,controls:null,controlsOptions:{},currentControl:null},s}return r(t,e),R(t,[{key:"componentDidMount",value:function(){var e=this;D(t.prototype.__proto__||y()(t.prototype),"componentDidMount",this).call(this),this.context.options.responsive&&window.addEventListener("resize",this._onWindowResize),this._editor.isReady()?!this._hasSwitchedControls&&this.switchToInitialControls():this._editor.once("ready",function(){!e._hasSwitchedControls&&e.switchToInitialControls()})}},{key:"componentWillUnmount",value:function(){D(t.prototype.__proto__||y()(t.prototype),"componentWillUnmount",this).call(this),this.context.options.responsive&&window.removeEventListener("resize",this._onWindowResize)}},{key:"_onEditorReset",value:function(){"library"!==this.state.currentControl&&this.switchToInitialControls()}},{key:"_onImageResize",value:function(){var e=this,t=S.a.instance.displayLoading(this._t("loading.resizing"));this._editor.once("resized",function(n){var i=n.dimensions,o=n.reason;t.close(),e.context.options.editor.displayResizeMessage&&S.a.instance.displayWarning(e._t("warnings.imageResized_"+o+".title"),e._t("warnings.imageResized_"+o+".text",{maxMegaPixels:e._editor.getMaxMegapixels(),width:i.x,height:i.y}))})}},{key:"_onRenderError",value:function(e){S.a.instance.displayError(this._t("errors.title"),this._t("errors.renderingError.text"),!0)}},{key:"_onWindowResize",value:function(){this._emitEvent(b.d.EVENTS.WINDOW_RESIZE);var e=new b.v(this._container.offsetWidth,this._container.offsetHeight);this._emitEvent(b.d.EVENTS.EDITOR_RESIZE,e)}},{key:"switchToInitialControls",value:function(e){var t=this.context.options,n=!1;if(t.editor.forceCrop&&this._editor.controls.isEnabled("transform")&&!this._hasSwitchedControls){var i=this._editor.getInputDimensions(),o=new E.a(t.editor.controlsOptions.transform||{}),r=i.x/i.y;n=!o.hasRatioValue(r)}n?(this._needsForceCrop=!0,this.switchToForceCropControls(e)):(this._needsForceCrop=!1,this.switchToDefaultControls(e))}},{key:"switchToDefaultControls",value:function(e){var t=this.context.options,n=t.editor.defaultControl;this._originalToolsOption&&(t.editor.tools=this._originalToolsOption,this._originalToolsOption=null),this._editor.controls.isEnabled(n)||(b.h.warn("Trying to switch to default control `"+n+"` which is not available. Falling back to first available control."),n=this._editor.controls.getFirstEnabledControlName()),this.switchToControls(n,null,null,e)}},{key:"switchToForceCropControls",value:function(e){var t=this.context.options,n=t.editor.tools;this._originalToolsOption||(this._originalToolsOption=n,t.editor.tools=b.q.Array.remove(n,function(e){return"transform"!==e&&"library"!==e})),this.switchToControls("transform",null,null,e)}},{key:"switchToControls",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=arguments[2],o=arguments[3];if(this.state.currentControl===e)return o&&o();this._hasSwitchedControls=!0;var r=this.state.sharedState;if("default"===e)return this.switchToDefaultControls(o);if(!this._editor.controls.isEnabled(e))return b.h.warn("Tried to open control `"+e+"` which is not available.");var a=this._editor.controls.getAvailable(),s=a[e];if(!s&&"overview"!==e)return b.h.error("Control `"+e+"` does not exist!");var l=g.a.resolve(!0);this.state.controls&&(l=this.state.controls.onLeave()),l.then(function(a){if(a){r.disableBroadcast(),r.disableBroadcast(),r.clear(),r.set(O({},t,{forceCrop:n._needsForceCrop}));var l=b.q.defaults(i||n.context.options.editor.controlsOptions[s.identifier],s.defaultOptions),u=new s(n.getChildContext(),n.state.sharedState,l);u.onEnter(),r.enableBroadcast(),n.setState({controls:u,controlsOptions:l,currentControl:e},o)}})}},{key:"_startEditor",value:function(){var e=this.context.options;this._editor.start(),e.editor.forceCrop&&(this._hasSwitchedControls=!1,this.switchToInitialControls())}},{key:"getChildContext",value:function(){return{editor:this._editor,ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,sharedState:this.state.sharedState,screen:this,appComponent:this.context.appComponent}}},{key:"render",value:function(){var e=this,t=this.state,n=t.controls,i=t.controlsOptions,o=void 0,r=void 0;if(n){var a=n.constructor,s=a.controlsComponent,l=a.canvasControlsComponent;o=s?b.l.createElement(s,{options:i,controls:n}):b.l.createElement("div",null),r=l?b.l.createElement(l,{options:i,controls:n}):b.l.createElement("div",null)}else o=b.l.createElement(x.a,null),r=b.l.createElement(T.a,null);return b.l.createElement(P,{innerRef:function(t){t&&(e._container=t)},className:void 0},b.l.createElement(C.a,{ref:"canvas"}),b.l.createElement(j,{innerRef:function(t){e._tableContainer=t}},b.l.createElement(w.a,{onControlSwitch:this.switchToControls.bind(this),currentControl:this.state.currentControl}),o,r))}},{key:"getEditor",value:function(){return this._editor}},{key:"export",value:function(){var e;return(e=this._editor).export.apply(e,arguments)}},{key:"serialize",value:function(){var e;return(e=this._editor).serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return this._editor.deserialize(e)}}]),t}(b.b);I.contextTypes=b.b.contextTypes,I.childContextTypes={ui:b.k.object.isRequired,editor:b.k.object.isRequired,mediator:b.k.object.isRequired,options:b.k.object.isRequired,sharedState:b.k.object.isRequired,screen:b.k.object.isRequired,appComponent:b.k.object.isRequired};var P=b.w.div("5x8wsv","Container"),j=b.w.div("1b28xzz","TableContainer");t.a=Object(b.A)(I)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=n(209),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t,n,o){i(this,e),this._sdk=t,this._options=n,this._download=o}return l(e,[{key:"export",value:function(){var e=this,t=this._getRenderType();return this._sdk.export(t,this._options.format,this._options.quality).then(function(n){return e._download&&e._downloadData(t,n),n})}},{key:"_downloadData",value:function(e,t){switch(e){case a.o.DATAURL:s.a.downloadDataURL(t,this._options.fileBasename);break;case a.o.MSBLOB:s.a.downloadMSBlob(t,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var e=this._options;return e.type===a.o.IMAGE&&this._download?a.u.supportsMSBlob()?a.o.MSBLOB:a.o.DATAURL:e.type}}]),e}();t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(){i(this,e)}return s(e,null,[{key:"downloadDataURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",n=this.createBlobURLFromDataURL(e),i=this.getExtensionFromDataURL(e),o=document.createElement("a");o.download=t+"."+i,o.href=n,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},{key:"downloadMSBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob(e,t+".png")}},{key:"getExtensionFromDataURL",value:function(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(e){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return e;for(var t=a.a.decode(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i),r=0;r<t.length;r++)o[r]=t[r];var s=new window.Blob([i],{type:n});return window.URL.createObjectURL(s)}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n,o){i(this,e),this._image=t,this._maxPixels=n,this._maxDimensions=o}return s(e,[{key:"needsResize",value:function(){var e=new a.v(this._image.width,this._image.height),t=e.x*e.y,n=t>this._maxPixels,i=null!==this._maxDimensions&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return n||i}},{key:"resize",value:function(){var e=this,t=null,n=null,i=this._maxDimensions;return new a.j(function(o,r){window.setTimeout(function(){var r=new a.v(e._image.width,e._image.height),s=r.clone();if(s.x*s.y>e._maxPixels&&(s.copy(e._getDimensionsByMaxPixels()),t="maxMegaPixels"),null!==i&&(s.x>i||s.y>i)){var l=Math.min(i/s.x,i/s.y);s.multiply(l),t="maxDimensions"}s.floor(),n=e._createResizedImageCanvas(s),o({canvas:n,dimensions:s,reason:t})},1e3)})}},{key:"_createResizedImageCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this._image,i=document.createElement("canvas");i.width=e.x,i.height=e.y;var o=e.clone().subtract(t).divide(2);return i.getContext("2d").drawImage(n,0,0,n.width,n.height,o.x,o.y,t.x,t.y),i}},{key:"_getDimensionsByMaxPixels",value:function(){var e=this._image,t=this._maxPixels,n=e.width/e.height,i=e.height/e.width;return new a.v(Math.sqrt(t*n),Math.sqrt(t*i)).floor()}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(43),r=n.n(o),a=n(44),s=n.n(a),l=n(0),u=n.n(l),c=n(103),f=n.n(c),p=n(7),h=n.n(p),d=n(4),m="function"==typeof s.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":typeof e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(){function e(t,n,o){i(this,e),this._editor=t,this._sdk=n,this._mediator=o,this._map={},this._stack=this._sdk&&this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._available={};var r=h.a.Operations;for(var a in r){var s=r[a];this._available[s.identifier]=s}var l=t.getOptions(),u=l.extensions.operations;for(var c in u){var f=u[c];this._available[f.identifier]=f}this._stack&&this._fixStack()}return _(e,[{key:"exists",value:function(e){return!!this._map[e]}},{key:"add",value:function(e){var t=this,n=e.constructor.identifier;e.on("update",function(){t._mediator.emit(d.d.EVENTS.OPERATION_UPDATED,e)});var i=this._preferredOrder.indexOf(n);if(-1===i)throw new Error("EditorOperations#add: `"+n+"` does not appear in `operationsOrder`");this._stack.set(i,e),this._map[n]=e,this._mediator.emit(d.d.EVENTS.OPERATION_CREATED,e)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="object"===(void 0===e?"undefined":m(e))?e.constructor.identifier:e,i=this._stack.getStack();e=this.get(n),delete this._map[n];var o=i.map(function(e){return e.constructor.identifier}).indexOf(n);if(-1!==o){this._stack.removeAt(o);for(var r=o+1;r<i.length;r++){var a=i[r];a&&a.setDirty(!0)}t&&this._mediator.emit(d.d.EVENTS.OPERATION_REMOVED,e)}}},{key:"get",value:function(e){return this._map[e]}},{key:"getOrCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[e]){var n=this._map[e];return n.set(t,!1),n}var i=this._available[e];if(void 0===i)return d.h.warn("Trying to create an operation of type `"+e+"` that is not available."),null;var o=new i(this._sdk,t);return this.add(o),o}},{key:"getStack",value:function(){return this._stack}},{key:"getSnapshot",value:function(){var e=this,t={};return f()(this._map).forEach(function(n){var i=e._map[n];t[n]=i.serializeOptions()}),t}},{key:"removeUnused",value:function(){var e=this;f()(this._map).forEach(function(t){var n=e._map[t];n.hasChanges()||e.remove(n)})}},{key:"hasChanges",value:function(e){var t=this,n=!1;return f()(this._map).forEach(function(t){e[t]||(n=!0)}),!!n||(f()(e).forEach(function(i){var o=t.get(i);if(!o)return void(n=!0);o.optionsEqual(e[i])||(n=!0)}),n)}},{key:"restoreSnapshot",value:function(e){var t=this;f()(e).forEach(function(n){var i=t.getOrCreate(n);i.optionsEqual(e[n])||(i.restoreSnapshot?i.restoreSnapshot(e[n]):i.set(e[n]))}),f()(this._map).forEach(function(n){e[n]||t.remove(n)})}},{key:"isAvailable",value:function(e){return!!this._available[e]}},{key:"getAvailable",value:function(){return this._available}},{key:"reset",value:function(){this._map={}}},{key:"_fixStack",value:function(){var e=this,t=this._stack.getStack().slice();this._stack.clear(),t.forEach(function(t){e.add(t)})}}]),e}();t.a=g},function(e,t,n){n(213),e.exports=n(9).Object.keys},function(e,t,n){var i=n(30),o=n(29);n(60)("keys",function(){return function(e){return o(i(e))}})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(7),s=n.n(a),l=n(4),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(t,n,o){var r=this;i(this,e),this._editor=t,this._sdk=n,this._mediator=o,this._options=this._editor.getOptions(),this._invalidOperationsSeen=[],this._available={};var a=s.a.UI.DesktopUI.Controls;for(var l in a){var u=a[l];this._available[u.identifier]=u}(this._options.extensions.controls||[]).forEach(function(e){r._available[e.identifier]=e})}return u(e,[{key:"getFirstEnabledControlName",value:function(){for(var e in this._available)if(this.isEnabled(e))return e;return null}},{key:"isEnabled",value:function(e){var t=this,n=this.get(e);if(!n)return l.h.info("EditorControls#isEnabled: Unknown control: "+e),!1;var i=n.requiredOperations||[],o=[];return i.forEach(function(e){t._editor.operations.isAvailable(e)||o.push(e)}),o.length?(-1===this._invalidOperationsSeen.indexOf(e)&&(this._invalidOperationsSeen.push(e),l.h.error("Control `"+e+"` can not be used because "+(1===o.length?"operation is":"operations are")+" missing: "+o.map(function(e){return"`"+e+"`"}).join(", "))),!1):n.isEnabled(this._editor)}},{key:"get",value:function(e){return this._available[e]}},{key:"getAvailable",value:function(){return this._available}}]),e}();t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(4),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n,o){i(this,e),this._editor=t,this._sdk=n,this._mediator=o,this._options=this._editor.getOptions(),this.reset()}return s(e,[{key:"isEnabled",value:function(e){return this._features[e]&&this.isEnabledByOptions(e)}},{key:"isEnabledByOptions",value:function(e){var t=e.charAt(0).toUpperCase()+e.slice(1),n=this._options.editor["enable"+t];return void 0===n&&(n=!0),n}},{key:"enable",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){e._features[t]=!0}),this._mediator.emit(a.d.EVENTS.FEATURES_ENABLED,n),this._mediator.emit(a.d.EVENTS.FEATURES_UPDATED,n)}},{key:"disable",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){e._features[t]=!1}),this._mediator.emit(a.d.EVENTS.FEATURES_DISABLED,n),this._mediator.emit(a.d.EVENTS.FEATURES_UPDATED,n)}},{key:"reset",value:function(){this._features={drag:this._options.editor.enableDrag,zoom:this._options.editor.enableZoom,export:!0,new:!0}}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(217),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||h()(t)).call(this));return a._editor=e,a._sdk=n,a._mediator=r,a._isDefaultZoom=!1,a._zoom=a._sdk.getZoom(),a._targetZoom=a._zoom,a._options=a._editor.getOptions(),a._zoomLevels=[1,2,3,4,5,6.25,8.33,12.5,16.66,25,33.33,50,66.66,100,200,300,400,500,600,700,800,1200,1600,3200].map(function(e){return e/100}),a._editor.on("ready",function(){a._defaultLevel=a._calculateDefaultZoomLevel()}),a}return r(t,e),_(t,[{key:"auto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];e&&(this._defaultLevel=this._calculateDefaultZoomLevel()),this.set(this._defaultLevel,t,n)}},{key:"in",value:function(e){var t=this._getClosestZoomLevel(this._targetZoom+.001,1);t=this._clamp(t),this.set(t,e)}},{key:"out",value:function(e){var t=this._getClosestZoomLevel(this._targetZoom-.001,-1);t=this._clamp(t),this.set(t,e)}},{key:"_clamp",value:function(e){var t=this._calculateDefaultZoomLevel(),n=Math.max(1,2*t),i=this.minimum;return Math.max(i,Math.min(n,e))}},{key:"set",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2];this._targetZoom=e,this._mediator.emit(d.d.EVENTS.ZOOM,e),this._zoom===this._targetZoom&&(n=!0),this._transition&&(this._transition.stop(),this._transition=null);var o=function(e){t._set(e,function(){i&&i(),t._mediator.emit(d.d.EVENTS.ZOOM_DONE,t._zoom)}),t._transition=null,t._sdk.setTextureQuality(Math.min(t._zoom,1))};if(n)return o(e);this._transition=new m.a({zoom:this._zoom},{zoom:e},{duration:300,easing:"easeOutQuart",onUpdate:function(e){t._set(e.zoom)},onDone:function(e){o(e.zoom)}}),this._transition.start()}},{key:"tick",value:function(){this._transition&&this._transition.update()}},{key:"_getClosestZoomLevel",value:function(e,t){var n=void 0;return-1===t?(n=this._zoomLevels.filter(function(t){return t<e}).pop())||(n=this._zoomLevels[this._zoomLevels.length-1]):1===t&&((n=this._zoomLevels.filter(function(t){return t>e})[0])||(n=this._zoomLevels[0])),n}},{key:"undo",value:function(){this._previousZoom&&(this.set(this._previousZoom),this._previousZoom=null)}},{key:"_set",value:function(e,t){this._zoom=e,this._sdk.setZoom(this._zoom),this._mediator.emit(d.d.EVENTS.ZOOM_CHANGED,this._zoom),this.emit("set",this._zoom,t)}},{key:"_calculateDefaultZoomLevel",value:function(){var e=this._editor.getFinalDimensions(!1),t=this._editor.getCanvasDimensions();return d.q.resizeVectorToFit(e,t).divide(e).x}},{key:"getSnapshot",value:function(){return{zoom:this._targetZoom}}},{key:"restoreSnapshot",value:function(e){this.set(e.zoom,!0)}},{key:"minimum",get:function(){var e=this._editor.getFinalDimensions();return d.q.resizeVectorToFit(e,new d.v(300,300)).divide(e).x}},{key:"level",get:function(){return this._zoom}},{key:"defaultLevel",get:function(){return this._defaultLevel}},{key:"targetLevel",get:function(){return this._targetZoom}}]),t}(d.e);t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(7),s=(n.n(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),l={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},u=function(){function e(t,n,o){i(this,e),this._obj=t,this._initialObj=a.Utils.clone(t),this._targetValues=n,this._options=a.Utils.defaults(o,{duration:1e3,easing:"easeOutQuad",onUpdate:function(){},onDone:function(){}}),this._startedAt=null,this._running=!1}return s(e,[{key:"start",value:function(){this._startedAt=+new Date,this._running=!0}},{key:"update",value:function(){if(this._running){var e=+new Date-this._startedAt,t=l[this._options.easing],n=Math.min(1,e/this._options.duration),i=t(n);for(var o in this._initialObj){var r=this._initialObj[o],a=this._targetValues[o];this._obj[o]=r+(a-r)*i}this._options.onUpdate(this._obj),n>=1&&(this._options.onDone(this._obj),this.stop())}}},{key:"stop",value:function(){this._running=!1}}]),e}();t.a=u},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return l()(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(104),l=n.n(s),u=n(0),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(4)),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e,n,i){o(this,t);var a=r(this,(t.__proto__||_()(t)).call(this));return a._editor=e,a._sdk=n,a._mediator=i,a._undoItems=[],a._redoItems=[],a}return a(t,e),y(t,[{key:"hasInitialState",value:function(){return g.Utils.flatten(this.getUndoItems()).length>0}},{key:"isUndoAvailable",value:function(){return g.Utils.flatten(this.getUndoItems()).length>1}},{key:"isRedoAvailable",value:function(){return g.Utils.flatten(this.getRedoItems()).length>0}},{key:"addSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this._editor.getSnapshot(),a={snapshot:r,scope:e,identifier:n,controls:i,data:o},s=g.Utils.Array.last(this._undoItems);s&&t&&a.identifier===s.identifier&&this._undoItems.pop(),this._undoItems.push(a),this._mediator.emit(v.d.EVENTS.HISTORY_UPDATED,a.operation),this._redoItems=[]}},{key:"undo",value:function(){var e=this._undoItems,t=e.pop(),n=g.Utils.Array.last(e);n&&t&&(this._editor.restoreSnapshot(n.snapshot),this._mediator.emit(v.d.EVENTS.HISTORY_UNDO,n,t),this._redoItems.push(t),this.emit("undo"))}},{key:"redo",value:function(){var e=this._redoItems,t=e.pop();t&&(this._editor.restoreSnapshot(t.snapshot),this._mediator.emit(v.d.EVENTS.HISTORY_REDO,t),this._undoItems.push(t),this.emit("redo"))}},{key:"remove",value:function(e){var t=e.scope,n=e.identifier,i=e.controls,o=function(e,o,r){return!(t&&t!==e.scope||n&&n!==e.identifier||i&&i!==e.controls)};this._undoItems=g.Utils.Array.remove(this._undoItems,o),this._redoItems=g.Utils.Array.remove(this._redoItems,o)}},{key:"removeLocal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove({scope:"local",identifier:e,controls:t})}},{key:"removeGlobal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove({scope:"global",identifier:e,controls:t})}},{key:"removeControls",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.remove({scope:t,controls:e,identifier:n})}},{key:"reset",value:function(){this._undoItems=[],this._redoItems=[]}},{key:"getUndoItems",value:function(){return[].concat(i(this._undoItems))}},{key:"getItems",value:function(){return this.getUndoItems()}},{key:"getRedoItems",value:function(){return[].concat(i(this._redoItems))}}]),t}(v.e);t.a=b},function(e,t,n){n(33),n(220),e.exports=n(9).Array.from},function(e,t,n){"use strict";var i=n(23),o=n(11),r=n(30),a=n(90),s=n(91),l=n(55),u=n(221),c=n(62);o(o.S+o.F*!n(95)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,f,p=r(e),h="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,_=void 0!==m,g=0,v=c(p);if(_&&(m=i(m,d>2?arguments[2]:void 0,2)),void 0==v||h==Array&&s(v))for(t=l(p.length),n=new h(t);t>g;g++)u(n,g,_?m(p[g],g):p[g]);else for(f=v.call(p),n=new h;!(o=f.next()).done;g++)u(n,g,_?a(f,m,[o.value,g],!0):o.value);return n.length=g,n}})},function(e,t,n){"use strict";var i=n(16),o=n(27);e.exports=function(e,t,n){t in e?i.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n.n(o),a=n(105),s=n(106),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){i(this,e),this._editor=t}return l(e,[{key:"serialize",value:function(){var e=new a.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new s.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="1.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(2),u=n.n(l),c=n(3),f=n.n(c),p=n(7),h=(n.n(p),function(e){function t(){return i(this,t),o(this,(t.__proto__||f()(t)).apply(this,arguments))}return r(t,e),t}(p.Configurable));t.a=h,h.prototype.availableOptions={fontFamily:{type:p.OptionType.STRING,required:!0},variations:{type:p.OptionType.ARRAY,required:!0}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(111),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},y={italic:"i"},b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),g(t,[{key:"load",value:function(){return this._fonts.length&&this._addStylesheetTag(),v(t.prototype.__proto__||m()(t.prototype),"load",this).call(this)}},{key:"_addStylesheetTag",value:function(){var e=this._getFamiliesString(),t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css?family="+e,document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_getFamiliesString",value:function(){var e={};this._fonts.forEach(function(t){var n=t.getFontFamily(),i=t.getFontStyle(),o=t.getFontWeight();e[n]=e[n]||[],void 0!==o?e[n].push(""+o+(y[i]||"")):e[n].push(400)});var t=[];for(var n in e){var i=e[n],o=i.length?":"+i.join(","):"",r=n.replace(" ","+")+o;t.push(r)}return t.join("|")}}]),t}(_.a);t.a=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(8),s=n.n(a),l=n(226),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(101),f=function(){function e(t){i(this,e),this._fontVariation=t,this._defaultFontRuler=new l.a,this._customFontRuler=new l.a(this._fontVariation)}return u(e,[{key:"observe",value:function(){var e=this,t=c();return new s.a(function(n,i){var o=window.setInterval(function(){if(e._defaultFontRuler.getWidth()!==e._customFontRuler.getWidth())return window.clearInterval(o),n();if(c()-t>=5e3){var r=new Error("Failed to load font "+e._fontVariation.getFontFamily()+".");return r.font=e._fontVariation,i(r)}},50)})}},{key:"dispose",value:function(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}]),e}();t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(110),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){i(this,e),this._fontVariation=t||new a.a({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}return s(e,[{key:"_createRuler",value:function(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()}},{key:"_setRulerStyle",value:function(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: "+this._fontVariation.getFontStyle()+" "+this._fontVariation.getFontWeight()+" 30px "+this._fontVariation.getFontFamily()+";\n    "}},{key:"setFontVariation",value:function(e){this._fontVariation=e,this._setRulerStyle()}},{key:"getWidth",value:function(){return this._ruler?this._ruler.offsetWidth:-1}},{key:"dispose",value:function(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(111),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"load",value:function(){var e=this,n=[];return this._fonts.forEach(function(t){var i=e._ui.getAssetPath(t.getFilePath(),!1,!0);n.push('@font-face {\n        font-family: "'+t.getFontFamily()+"\";\n        src: url('"+i+"') format('woff');\n        font-weight: "+t.getFontWeight()+";\n        font-style: "+t.getFontStyle()+";\n      }")}),_.w.global(n.join("\n"),!0),y(t.prototype.__proto__||m()(t.prototype),"load",this).call(this)}}]),t}(g.a);t.a=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n.n(o),a=n(112),s=n(113),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){i(this,e),this._editor=t}return l(e,[{key:"serialize",value:function(){var e=new a.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new s.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="1.0.1"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n.n(o),a=n(70),s=n(71),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){i(this,e),this._editor=t}return l(e,[{key:"serialize",value:function(){var e=new a.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new s.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="2.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n.n(o),a=n(231),s=n(232),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){i(this,e),this._editor=t}return l(e,[{key:"serialize",value:function(){var e=new a.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new s.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="2.0.1"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(2),u=n.n(l),c=n(3),f=n.n(c),p=n(70),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||f()(t)).apply(this,arguments))}return r(t,e),t}(p.a);t.a=h,h.version="2.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(2),u=n.n(l),c=n(3),f=n.n(c),p=n(71),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||f()(t)).apply(this,arguments))}return r(t,e),t}(p.a);t.a=h,h.version="2.0.1"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n.n(o),a=n(234),s=n(235),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){i(this,e),this._editor=t}return l(e,[{key:"serialize",value:function(){var e=new a.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new s.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(70),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"serialize",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(t.prototype.__proto__||m()(t.prototype),"serialize",this).call(this,n).then(function(t){return t.meta={platform:"html5",version:e._editor.getSDK().version,createdAt:_.q.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t})}},{key:"_serializeSticker",value:function(e,n){var i=y(t.prototype.__proto__||m()(t.prototype),"_serializeSticker",this).call(this,e,n);return i.options.alpha=n.getAlpha(),i.options.tintColor&&(i.options.tintColor={rgba:i.options.tintColor}),i}},{key:"_serializeText",value:function(e,n){var i=y(t.prototype.__proto__||m()(t.prototype),"_serializeText",this).call(this,e,n);return i.options.color={rgba:i.options.color},i.options.backgroundColor={rgba:i.options.backgroundColor},i.options.flipHorizontally=!1,i.options.flipVertically=!1,delete i.options.fontWeight,i}},{key:"_serializePath",value:function(e){var n=y(t.prototype.__proto__||m()(t.prototype),"_serializePath",this).call(this,e);delete n.hardness,delete n.size,delete n.color;var i=e.getBrush();n.brush=i.serializeOptions(["identifier","size","color"],!0),void 0===n.brush.identifier&&delete n.brush.identifier,n.brush.color={rgba:n.brush.color};var o=i.getOption("hardness");return"undefined"!==o&&(n.brush.hardness=o),n}},{key:"_serializeFrameOperation",value:function(e,n){y(t.prototype.__proto__||m()(t.prototype),"_serializeFrameOperation",this).call(this,e,n);var i=n.filter(function(e){return"sprite"===e.type}),o=void 0;if(i.length){o=i.pop();var r=o.options.sprites.filter(function(e){return"frame"===e.type})[0];e.getTintColor().equals(new _.c(1,1,1,0))||(r.options.tintColor={rgba:e.serializeOption("tintColor",!0)});var a=e.serializeOptions(["scale","alpha"],!0);r.options=_.q.extend(r.options,a),r.options.size=r.options.scale,delete r.options.scale}}},{key:"_serializeTransformOperation",value:function(e){var n=y(t.prototype.__proto__||m()(t.prototype),"_serializeTransformOperation",this).call(this,e);return e._ratio&&(n.options.meta={identifier:e._ratio.identifier}),delete n.options.scale,n}},{key:"_serializeAdjustmentsOperation",value:function(e){var n=y(t.prototype.__proto__||m()(t.prototype),"_serializeAdjustmentsOperation",this).call(this,e),i=e.availableOptions,o=i.gamma,r=e.getGamma(),a=o.minValue,s=o.midValue,l=o.maxValue;return n.options.gamma=r<=s?(r-a)/(s-a)-1:(r-s)/(l-s),n}},{key:"_serializeOperation",value:function(e,n){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return y(t.prototype.__proto__||m()(t.prototype),"_serializeOperation",this).call(this,e,n)}}},{key:"_serializeMirroredFocusOperation",value:function(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){var t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}},{key:"_serializeBlurOperation",value:function(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}}]),t}(g.a);t.a=b,b.version="3.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(8),m=n.n(d),_=n(3),g=n.n(_),v=n(4),y=n(71),b=n(47),k=n(26),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},S=void 0;void 0!==v.p.Operations.SpriteOperation&&(S=v.p.Operations.SpriteOperation.BrushSprite.Brush);var E=function(e){function t(){return i(this,t),o(this,(t.__proto__||g()(t)).apply(this,arguments))}return r(t,e),w(t,[{key:"_deserializeSticker",value:function(e,t){var n=v.p.Operations.SpriteOperation,i=t.options,o=this._stickerManager.getStickerByIdentifier(i.identifier);if(!o)return v.h.warn("Deserializer","Unknown sticker `"+i.identifier+"`. Skipping sprite."),m.a.resolve();var r=b.a.getURLForSticker(o,"base"),a=this._editor.getUI().getAssetPath(r),s=e.getInputDimensions(!1);return k.a.load(a).then(function(t){var r=n.StickerSprite.prototype.availableOptions.adjustments.structure,a=i.rotation,l=i.flipHorizontally,u=i.flipVertically,c={identifier:i.identifier,image:t,position:v.v.fromObject(i.position),dimensions:v.v.fromObject(i.dimensions).multiply(s.min()),rotation:a||0,flipHorizontally:l,flipVertically:u,adjustments:{}};return void 0!==i.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==i.adjustments[e]&&(c.adjustments[e]=i.adjustments[e]+r[e].default)}),void 0!==i.tintColor&&void 0!==o.tintMode&&(c.tintColor=v.c.fromArray(i.tintColor.rgba),c.tintMode=o.tintMode),void 0!==i.alpha&&(c.alpha=i.alpha),e.createSticker(c)})}},{key:"_deserializeTransformOperation",value:function(e){return C(t.prototype.__proto__||g()(t.prototype),"_deserializeTransformOperation",this).call(this,e).then(function(e){if(e)return e._ratio=null,e})}},{key:"_deserializeInputImage",value:function(){var e=this,t=this._data.image,n=t.data,i=t.type,o=t.uri;return n&&i&&(o="data:"+i+";base64,"+n),o?k.a.load(o).then(function(t){e._editor.setImage(t)}):m.a.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(e){var n=v.p.Operations.AdjustmentsOperation;return C(t.prototype.__proto__||g()(t.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then(function(t){if(!t)return null;var i=e.options;if(void 0!==i.gamma){var o=n.prototype.availableOptions.gamma,r=o.minValue,a=o.midValue,s=o.maxValue;t.setGamma(i.gamma<0?a+(a-r)*i.gamma:a+(s-a)*i.gamma)}return t})}},{key:"_deserializeFocusOperation",value:function(e){var n=e.options.options;switch(e.options.type){case"radial":return C(t.prototype.__proto__||g()(t.prototype),"_deserializeFocusOperation",this).call(this,e);case"linear":var i=n.start,o=n.end,r=n.blurRadius;return m.a.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:v.v.fromObject(i),controlPoint2:v.v.fromObject(o),blurRadius:r}));case"mirrored":var a=n.start,s=n.end,l=n.size,u=n.gradientSize,c=n.blurRadius;return m.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:v.v.fromObject(a),end:v.v.fromObject(s),size:l,gradientSize:u,blurRadius:c}));case"gaussian":var f=n.blurRadius;return m.a.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:f}))}}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,o=n.lineHeight,r=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,f=this._ui.getFontLoader(),p=this._fontManager.getVariationByIdentifier(r);return p?f.setFonts([p.getFont()]):p=this._fontManager.getDefaultVariation(),f.load().then(function(){var t=e.getInputDimensions(!1),r=l*t.min()/t.x;return e.createText({fontSize:i,lineHeight:o,fontFamily:p.getFontFamily(),fontWeight:p.getFontWeight(),fontIdentifier:p.getIdentifier(),textMetrics:p.getTextMetrics(),alignment:a,rotation:s,maxWidth:r,text:n.text,color:v.c.fromArray(u.rgba),backgroundColor:v.c.fromArray(c.rgba),position:v.v.fromObject(n.position)})})}},{key:"_createBrushForPath",value:function(e){var t=e.brush,n=t.identifier,a=t.color,s=t.size,l=t.hardness,u=v.c.fromArray(a.rgba),c={color:u,size:s};void 0!==l&&(c.hardness=l);var f=this._brushManager.getBrushByIdentifier(n);if(f||(f=this._brushManager.getFirstBrush()),f.prototype&&f.prototype instanceof S){return new f(c)}var p=v.q.extend({},f);delete p.image;var h=function(e){function t(){return i(this,t),o(this,(t.__proto__||g()(t)).apply(this,arguments))}return r(t,e),t}(S);return h.identifier=f.identifier,new h(v.q.extend({},p,c))}},{key:"_deserializeFrame",value:function(e,n){var i=this;return C(t.prototype.__proto__||g()(t.prototype),"_deserializeFrame",this).call(this,e,n).then(function(){var e=i._editor.operations.get("frame"),t=n.options,o=t.size,r=t.alpha,a=t.tintColor,s={};void 0!==o&&(s.scale=o),void 0!==r&&(s.alpha=r),void 0!==a&&(s.tintColor=v.c.fromArray(a.rgba)),e.set(s)})}}]),t}(y.a);t.a=E,E.version="3.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(237),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._needsStyleFixes=!0,s._bindAll("_onMouseEnter","_onMouseLeave"),s.state={isHovering:!1},s}return r(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.currentControl!==this.props.currentControl||t.isHovering!==this.state.isHovering}},{key:"_onItemClick",value:function(e){this.props.disabled||(this._onMouseLeave(),this.props.onControlSwitch(e))}},{key:"_onMouseEnter",value:function(){this.props.disabled||this.setState({isHovering:!0})}},{key:"_onMouseLeave",value:function(){this.props.disabled||this.setState({isHovering:!1})}},{key:"fixStyles",value:function(){if(d.u.Browser.isIElte(10)){var e=this._navigation.offsetHeight;this._gradient.style.height=e+"px"}}},{key:"_getItemCount",value:function(e){var t=this;return e.reduce(function(e,n){return Array.isArray(n)?e+t._getItemCount(n):e+1},0)}},{key:"_renderListItems",value:function(){var e=this,t=this.context.editor,n=this.state.isHovering,i=function(i,o,r){var a=t.controls.get(i),s=i===e.props.currentControl;return d.l.createElement(m.a,{key:i,title:i,showTitle:n,iconPath:e._getAssetPath(a.iconPath,!0),activeIconPath:e._getAssetPath(a.activeIconPath,!0),selected:s,onClick:e._onItemClick.bind(e,i),animationDelay:.02*o,maxAnimationDelay:.02*r,disabled:e.props.disabled})},o=function(e){return d.l.createElement(m.a,{key:e,isSeparator:!0})},r=[],a=this.context.options.editor.controlsOrder,s=this._getItemCount(a)-1;return a.forEach(function(e,n){if(Array.isArray(e))e.forEach(function(e){t.controls.isEnabled(e)&&r.push(i(e,r.length,s))}),n!==a.length-1&&r.length&&r.push(o("separator-"+n));else{if(!t.controls.isEnabled(e))return;r.push(i(e,r.length,s))}}),r}},{key:"render",value:function(){var e=this,t=this.state.isHovering,n=this._getAssetPath("editor/navigation/nav-gradient.png",!0),i={backgroundImage:"url("+n+")"};return d.l.createElement(v,{onMouseLeave:this._onMouseLeave,innerRef:function(t){e._navigation=t}},d.l.createElement(y,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,disabled:this.props.disabled},this._renderListItems()),d.l.createElement(b,{className:void 0,innerRef:function(t){e._gradient=t},style:i,visible:t}))}}]),t}(d.b);g.contextTypes=d.b.contextTypes,t.a=g;var v=d.w.div("1y776sn","NavigationContainer"),y=d.w.ul("9phbku","Navigation"),b=d.w.div("5jr86g",{visible:"1aw31yo"},"NavigationOverlay")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.showTitle!==this.props.showTitle||e.selected!==this.props.selected}},{key:"render",value:function(){if(this.props.isSeparator)return d.l.createElement(y,null);var e={transitionDelay:(this.props.showTitle?this.props.animationDelay:this.props.maxAnimationDelay-this.props.animationDelay)+"s"};return d.l.createElement(v,{onClick:this.props.onClick,selected:this.props.selected,className:void 0,"data-identifier":this.props.title,disabled:this.props.disabled},d.l.createElement(k,{src:this.props.iconPath,selected:this.props.selected}),d.l.createElement(w,{src:this.props.activeIconPath,selected:this.props.selected}),d.l.createElement(C,{style:e,withTitle:this.props.showTitle},d.l.createElement(S,null,this._t("editor.controls."+this.props.title+".title"))))}}]),t}(d.b);_.contextTypes=d.b.contextTypes,t.a=_;var g=d.w.li("175e5wy","BaseItem"),v=Object(d.w)(g)("djzsp",{selected:"b4k2au",disabled:"kcb0uq"},"NavigationItem"),y=Object(d.w)(g)("w5rgvu","SeparatorItem"),b=d.w.img("1ew58rj","Icon"),k=Object(d.w)(b)("vd96gg",{selected:"1cfz9kz"},"InactiveIcon"),w=Object(d.w)(b)("8p00lh",{selected:"zgbg08"},"ActiveIcon"),C=d.w.div("124navh",{withTitle:"1j7o6on"},"TitleContainer"),S=d.w.div("pw4had","Title")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(4),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){var e;o(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a)));return l._bindAll("_onEditorResize"),l._events=i({},g.d.EVENTS.EDITOR_RESIZE,l._onEditorResize),l}return a(t,e),v(t,[{key:"_onEditorResize",value:function(e){var t=this.context.editor;t.getSDK().resizeTo(e),t.zoom.auto(!0,!0)}},{key:"componentDidMount",value:function(){y(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this);var e=this.context,n=e.editor,i=e.options,o=this._canvas.offsetWidth,r=this._canvas.offsetHeight,a=n.getSDK().getRenderer();a.setCanvas(this._canvas),a.resizeTo(new g.v(o,r));var s=i.editor.image;n.setPadding([55,30,55,315]),n.setImage(s,!1)}},{key:"render",value:function(){var e=this;return g.l.createElement(k,{innerRef:function(t){e._canvas=t}})}}]),t}(g.b);b.contextTypes=g.b.contextTypes,t.a=b;var k=g.w.canvas("8gacw5","Canvas")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(1),c=n.n(u),f=n(2),p=n.n(f),h=n(3),d=n.n(h),m=n(4),_=n(34),g=n(240),v=n(241),y=n(242),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=r(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s)));return u._bindAll("_onUndoClick","_onExportClick","_onCloseClick","_onHistoryUpdated","_onFeaturesUpdated","_onRedoClick"),u._events=(n={},i(n,m.d.EVENTS.HISTORY_UPDATED,u._onHistoryUpdated),i(n,m.d.EVENTS.FEATURES_UPDATED,u._onFeaturesUpdated),n),u}return a(t,e),b(t,[{key:"_onHistoryUpdated",value:function(){this.forceUpdate()}},{key:"_onFeaturesUpdated",value:function(){this.forceUpdate()}},{key:"_onUndoClick",value:function(){this.context.editor.history.undo(),this.forceUpdate()}},{key:"_onRedoClick",value:function(){this.context.editor.history.redo(),this.forceUpdate()}},{key:"_onCloseClick",value:function(){this.context.mediator.emit(m.d.EVENTS.CLOSE)}},{key:"_onExportClick",value:function(){var e=this,t=this.context,n=t.options,i=t.editor,o=t.screen,r=n.editor.export,a=_.a.instance.displayLoading(this._t("loading.exporting"));o.switchToControls("default",null,{},function(){setTimeout(function(){i.export(r.download).then(function(){a.close()}).catch(function(t){_.a.instance.displayError(e._t("errors.title"),t.message),a.close()})},100)})}},{key:"_renderItems",value:function(){var e=this.context.editor,t=e.history,n=e.features,i=e.getOptions().editor.displayCloseButton,o=m.l.createElement(v.a,{disabled:!t.isUndoAvailable(),src:this._getAssetPath("editor/canvas-header/undo.png",!0),onClick:this._onUndoClick,className:void 0}),r=m.l.createElement(v.a,{disabled:!t.isRedoAvailable(),src:this._getAssetPath("editor/canvas-header/redo.png",!0),onClick:this._onRedoClick,className:void 0});return[m.l.createElement(S,{key:"left",left:!0},o,r),m.l.createElement(C,{key:"center"},n.isEnabledByOptions("zoom")&&m.l.createElement(y.a,null)),m.l.createElement(S,{key:"right",right:!0},n.isEnabled("export")&&m.l.createElement(g.a,{title:this._t("editor.export"),onClick:this._onExportClick,className:void 0}),i&&m.l.createElement(g.a,{title:this._t("editor.close"),onClick:this._onCloseClick,className:void 0}))]}},{key:"render",value:function(){return m.l.createElement(w,{className:this.props.className},this._renderItems())}}]),t}(m.b);k.contextTypes=m.b.contextTypes,t.a=k;var w=m.w.div("1vo3slj","CanvasHeaderControls"),C=m.w.div("h5xlzy","CenteredControlGroup"),S=m.w.ul("17ty59f",{left:"1elyhsq",right:"1l7kz3k"},"ControlGroup")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(120),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),_(t,[{key:"render",value:function(){return d.l.createElement(m.a,{onClick:this.props.onClick,className:this.props.className},d.l.createElement(v,{disabled:this.props.disabled},this.props.title))}}]),t}(m.a);g.contextTypes=m.a.contextTypes,t.a=g;var v=d.w.div("1d3mv64",{disabled:"1wcaxw7"},"Button");g.Button=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(120),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),_(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.className,i=e.disabled;return d.l.createElement(m.a,{disabled:i,onClick:i?void 0:t,className:n},d.l.createElement(v,{disabled:i,src:this.props.src}))}}]),t}(m.a);g.contextTypes=m.a.contextTypes,t.a=g;var v=d.w.img("1y2itdu",{disabled:"vxlu5c"},"Image")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(4),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(s)));return u._bindAll("_onZoomInClick","_onZoomOutClick","_onZoom","_onFeaturesUpdated"),u._events=(n={},i(n,g.d.EVENTS.ZOOM,u._onZoom),i(n,g.d.EVENTS.FEATURES_UPDATED,u._onFeaturesUpdated),n),u}return a(t,e),v(t,[{key:"componentDidMount",value:function(){y(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this),this._renderZoomLevel&&this._renderZoomLevel!==this.context.editor.zoom.targetLevel&&this.forceUpdate()}},{key:"_onFeaturesUpdated",value:function(){this.forceUpdate()}},{key:"_onZoom",value:function(){this.forceUpdate()}},{key:"_onZoomInClick",value:function(){if(!this._isZoomDisabled()){this.context.editor.zoom.in()}}},{key:"_onZoomOutClick",value:function(){if(!this._isZoomDisabled()){this.context.editor.zoom.out()}}},{key:"_isZoomDisabled",value:function(){return!this.context.editor.features.isEnabled("zoom")}},{key:"render",value:function(){var e=this.context.editor,t=Math.round(100*e.zoom.targetLevel);return this._renderZoomLevel=e.zoom.targetLevel,g.l.createElement(k,{className:void 0},g.l.createElement(w,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomOutClick,className:void 0},"-"),g.l.createElement(C,null,t," %"),g.l.createElement(w,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomInClick,className:void 0},"+"))}}]),t}(g.b);b.contextTypes=g.b.contextTypes,t.a=b;var k=g.w.div("12hdgpj","ZoomControl"),w=g.w.div("eqhwwg",{disabled:"10fa721"},"Button"),C=g.w.div("64aub5","Label")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll(),s._canHideAfterLoaded=!1,s.state={startImageVisible:!0,idleImageVisible:!1,indicatorVisible:!0},s}return r(t,e),g(t,[{key:"componentDidMount",value:function(){var e=this;v(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this._imageSwitchTimeout=window.setTimeout(function(){e.setState({startImageVisible:!1,idleImageVisible:!0}),e._imageSwitchTimeout=null},1300)}},{key:"componentWillUnmount",value:function(){v(t.prototype.__proto__||m()(t.prototype),"componentWillUnmount",this).call(this),this._imageSwitchTimeout&&(window.clearTimeout(this._imageSwitchTimeout),this._imageSwitchTimeout=null)}},{key:"getChildContext",value:function(){return{ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,appComponent:this.context.appComponent}}},{key:"render",value:function(){var e=this,t=this.state,n=t.startImageVisible,i=t.idleImageVisible,o=t.indicatorVisible;return _.l.createElement(b,{innerRef:function(t){e._container=t},className:void 0},_.l.createElement(k,{hidden:!o},_.l.createElement(C,{visible:n,src:this._getAssetPath("loading/start-solid.gif",!0)}),_.l.createElement(S,{visible:i,src:this._getAssetPath("loading/idle-solid.gif",!0)})))}}]),t}(_.b);y.contextTypes=_.b.contextTypes,y.childContextTypes={ui:_.k.object.isRequired,mediator:_.k.object.isRequired,options:_.k.object.isRequired,appComponent:_.k.object.isRequired};var b=_.w.div("121fa7f","Container"),k=_.w.div("110xr2i",{hidden:"qbdcep"},"ImageContainer"),w=_.w.img("1gqfg7n",{visible:"zgbg08"},"Image"),C=Object(_.w)(w)("120drhm","StartImage"),S=Object(_.w)(w)("120drhm","IdleImage");t.a=Object(_.A)(y)},function(e,t,n){"use strict";t.a=function(e,t){e.global(t+" html,"+t+" body,"+t+" div,"+t+" span,"+t+" applet,"+t+" object,"+t+" iframe,"+t+" h1,"+t+" h2,"+t+" h3,"+t+" h4,"+t+" h5,"+t+" h6,"+t+" p,"+t+" blockquote,"+t+" pre,"+t+" a,"+t+" abbr,"+t+" acronym,"+t+" address,"+t+" big,"+t+" cite,"+t+" code,"+t+" del,"+t+" dfn,"+t+" em,"+t+" img,"+t+" ins,"+t+" kbd,"+t+" q,"+t+" s,"+t+" samp,"+t+" small,"+t+" strike,"+t+" strong,"+t+" sub,"+t+" sup,"+t+" tt,"+t+" var,"+t+" b,"+t+" u,"+t+" i,"+t+" center,"+t+" dl,"+t+" dt,"+t+" dd,"+t+" ol,"+t+" ul,"+t+" li,"+t+" fieldset,"+t+" form,"+t+" label,"+t+" legend,"+t+" table,"+t+" caption,"+t+" tbody,"+t+" tfoot,"+t+" thead,"+t+" tr,"+t+" th,"+t+" td,"+t+" article,"+t+" aside,"+t+" canvas,"+t+" details,"+t+" embed,"+t+" figure,"+t+" figcaption,"+t+" footer,"+t+" header,"+t+" hgroup,"+t+" menu,"+t+" nav,"+t+" output,"+t+" ruby,"+t+" section,"+t+" summary,"+t+" time,"+t+" mark,"+t+" audio,"+t+" video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}"+t+" html{line-height:1}"+t+" ol,"+t+" ul{list-style:none}"+t+" table{border-collapse:collapse;border-spacing:0}"+t+" caption,"+t+" th,"+t+" td{text-align:left;font-weight:400;vertical-align:middle}"+t+" q,"+t+" blockquote{quotes:none}"+t+" q:before,"+t+" q:after,"+t+" blockquote:before,"+t+' blockquote:after{content:"";content:none}'+t+" a img{border:none}"+t+" article,"+t+" aside,"+t+" details,"+t+" figcaption,"+t+" figure,"+t+" footer,"+t+" header,"+t+" hgroup,"+t+" main,"+t+" menu,"+t+" nav,"+t+" section,"+t+" summary{display:block}@media only screen and (min-width: 768px){"+t+"{-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;-o-border-radius:5px;border-radius:5px}}"+t+","+t+" *{box-sizing:border-box}")}},function(e,t,n){"use strict";t.a=function(e,t){e.global("\n    @-webkit-keyframes bouncingLoadingIndicator {\n      0% {\n        transform: translateY(0);\n      }\n      40% {\n        transform: translateY(10px);\n      }\n      60% {\n        transform: translateY(-5px);\n      }\n      80%{\n        transform: translateY(0);\n      }\n    }\n  ")}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(102),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||h()(t)).call(this));return a._ui=e,a._options=n,a._mediator=r,a._assets={},a._editor=new m.a(e,n,r,!0),a._assets=["editor/canvas-header/undo.png","editor/navigation/nav-gradient.png","editor/controls/shared/checkbox.png","editor/controls/shared/checkbox-active.png","editor/controls/shared/tiled-background.png"],a._appendControlsAssets(),a}return r(t,e),_(t,[{key:"_appendControlsAssets",value:function(){var e=this._editor.controls.getAvailable();for(var t in e){var n=e[t];this._editor.controls.isEnabled(t)&&(this._assets=this._assets.concat(n.getPreloadAssets(this._editor)),this._assets.push(n.iconPath),this._assets.push(n.activeIconPath))}}},{key:"load",value:function(){var e=this,t=this._assets.slice(),n=t.length,i=0,o=function(){i++,e.emit("progress",i/n),i===n&&e.emit("done")},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timed out";d.h.warn("Preloader",e+" "+t+"."),o()},a=function(e){return window.setTimeout(function(){r(e)},5e3)};t.forEach(function(t){var n=!0;Array.isArray(t)&&(n=t[1],t=t[0]);var i=!0;d.q.isArray(t)&&(i=t[1],t=t[0]);var s=e._ui.getAssetPath(t,n,!i),l=new window.Image,u=a(s);l.addEventListener("load",function(){window.clearTimeout(u),e._assets[t]=l,o()}),l.addEventListener("error",function(){window.clearTimeout(u),r(s,"was not found")}),l.crossOrigin="Anonymous",l.src=s})}},{key:"getAsset",value:function(e){return this._assets[e]}}]),t}(d.e);t.a=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(248),o=n(34),r=n(252),a=n(122),s=n(253),l=n(117),u=n(109),c=n(47),f=n(108),p=n(107),h=n(115),d=n(116),m=n(118),_=n(254),g=n(255),v=n(256),y=n(48),b=n(119),k=n(258),w=n(260),C=n(261),S=n(72),E=n(75),x=n(265),T=n(271),O=n(272),R=n(273),D=n(22),I=n(274),P=n(276),j=n(46);n.d(t,"Frame",function(){return l.a}),n.d(t,"SharedStateComponent",function(){return y.a}),n.d(t,"ControlsComponent",function(){return b.a}),n.d(t,"CollapseSectionComponent",function(){return k.a}),n.d(t,"ScrollableListComponent",function(){return w.a}),n.d(t,"SliderControlComponent",function(){return C.a}),n.d(t,"CanvasControlsComponent",function(){return S.a}),n.d(t,"ValueSelectionComponent",function(){return E.a}),n.d(t,"ColorSelectionComponent",function(){return x.a}),n.d(t,"ButtonComponent",function(){return T.a}),n.d(t,"DropdownComponent",function(){return O.a}),n.d(t,"TextInputComponent",function(){return R.a}),n.d(t,"DraggableComponent",function(){return D.a}),n.d(t,"InvisibleUploadComponent",function(){return I.a}),n.d(t,"CanvasOverlayControlsComponent",function(){return P.a}),n.d(t,"Transition",function(){return j.a}),n.d(t,"Library",function(){return i}),n.d(t,"ModalManager",function(){return o.a}),n.d(t,"DelayedJobQueue",function(){return r.a}),n.d(t,"GroupedControlsStyles",function(){return a}),n.d(t,"ControlsStyles",function(){return s}),n.d(t,"FontManager",function(){return u.a}),n.d(t,"StickerManager",function(){return c.a}),n.d(t,"BrushManager",function(){return f.a}),n.d(t,"FilterManager",function(){return p.a}),n.d(t,"FrameManager",function(){return h.a}),n.d(t,"OverlayManager",function(){return d.a}),n.d(t,"TransformRatioManager",function(){return m.a}),n.d(t,"BaseControls",function(){return _.a}),n.d(t,"LoadingIndicatorComponent",function(){return g.a}),n.d(t,"SuffixedTextInputComponent",function(){return v.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(249);n.d(t,"Provider",function(){return i.a});var o=n(250);n.d(t,"Category",function(){return o.a});var r=n(251);n.d(t,"Image",function(){return r.a})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(8),s=n.n(a),l=n(4),u=n(42),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(){i(this,e)}return c(e,[{key:"_loadJSON",value:function(e){return new u.a(e).load()}},{key:"getCategories",value:function(){return l.h.warn(this.constructor.name,"`getCategories` is abstract and not implemented."),s.a.resolve([])}},{key:"searchImages",value:function(e){return l.h.warn(this.constructor.name,"`searchImages` is abstract and not implemented."),s.a.resolve([])}}]),e}();t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._coverImage=null,s._coverImageLoaded=!1,s}return r(t,e),g(t,[{key:"loadCoverImage",value:function(){var e=this;return new h.a(function(t,n){var i=new window.Image;i.addEventListener("load",function(){e._coverImageLoaded=!0,t(i)}),i.addEventListener("error",function(){n(new Error("Failed to load image at "+e.getCoverImage()))}),i.src=e.getCoverImage(),e._coverImage=i})}},{key:"isCoverImageLoaded",value:function(){return this._coverImage&&this._coverImageLoaded}}]),t}(_.p.Configurable);t.a=v,v.prototype.availableOptions={name:{type:_.i.STRING,required:!0},coverImage:{type:_.i.STRING,required:!0}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._thumbImage=null,s._thumbImageLoaded=!1,s}return r(t,e),g(t,[{key:"loadThumb",value:function(){var e=this;return new h.a(function(t,n){var i=new window.Image;i.addEventListener("load",function(){e._thumbImageLoaded=!0,t(i)}),i.addEventListener("error",function(){n(new Error("Failed to load image at "+e.getThumbUrl()))}),i.src=e.getThumbUrl(),e._thumbImage=i})}},{key:"isThumbLoaded",value:function(){return this._thumbImage&&this._thumbImageLoaded}},{key:"getThumbImage",value:function(){return this._thumbImage}}]),t}(_.p.Configurable);t.a=v,v.prototype.availableOptions={category:{type:_.i.OBJECT,required:!0},title:{type:_.i.STRING},rawUrl:{type:_.i.STRING,required:!0},thumbUrl:{type:_.i.STRING},authorName:{type:_.i.STRING},authorAvatar:{type:_.i.STRING}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||h()(t)).call(this));return r._jobs=e,r._options=d.q.defaults(n,{minDelay:400}),r._running=!1,r._currentJob=null,r._currentJobIndex=0,r._tick=r._tick.bind(r),r}return r(t,e),m(t,[{key:"start",value:function(){this._running=!0,this._lastJobFinished=Object(d.y)(),this._tick()}},{key:"_tick",value:function(){var e=this;if(this._running){if(!this._currentJob){if(this._currentJob=this._jobs[this._currentJobIndex],!this._currentJob)return this.emit("done"),void this.stop();this._currentJob.fn().then(function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=function(){e.emit.apply(e,["job-done",e._currentJob].concat(n)),e._lastJobFinished=Object(d.y)(),e._currentJob=null};if(Object(d.y)()-e._lastJobFinished<e._options.minDelay){var r=e._options.minDelay-(Object(d.y)()-e._lastJobFinished);setTimeout(o,r)}else o()}).catch(function(t){e.emit("error",e._currentJob,t),e._currentJob=null}),this._currentJobIndex++}Object(d.z)(this._tick)}}},{key:"stop",value:function(){this._running=!1}},{key:"dispose",value:function(){this._jobs=[],this._running=!1}}]),t}(d.e);t.a=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FullContainer",function(){return o}),n.d(t,"ControlItem",function(){return r}),n.d(t,"ControlItemTextStyles",function(){return a}),n.d(t,"ControlItemTitle",function(){return s}),n.d(t,"ControlItemActiveOverlay",function(){return l}),n.d(t,"ControlItemOverlay",function(){return u}),n.d(t,"Knob",function(){return c}),n.d(t,"PlainControlItem",function(){return f}),n.d(t,"PlainControlItemBackground",function(){return p});var i=n(4),o=i.w.css("vl6nc6","FullContainer"),r=i.w.css("gxhkr8",{animated:"1cekd0y",selected:"10th7ra",visible:"qtjcwg"},"ControlItem"),a=i.w.css("1us1ll5","ControlItemTextStyles"),s=i.w.css("d17ppx",{hovered:"zgbg08"},"ControlItemTitle"),l=i.w.css("x1p1ki",{visible:"zgbg08",rendered:"2jlos"},"ControlItemActiveOverlay"),u=i.w.css("1kza12c","ControlItemOverlay"),c=i.w.css("ywjahx","Knob"),f=i.w.css("9ej9h0",{threeColumns:"14meo64",twoColumns:"4nk392",withText:"rbroui",selected:"eb0k9a"},"PlainControlItem"),p=i.w.css("1lmjuk",{selected:"q4p805"},"PlainControlItemBackground")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(13),r=n.n(o),a=n(0),s=n.n(a),l=n(8),u=n.n(l),c=n(4),f=n(7),p=(n.n(f),n(72)),h=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(t,n,o){i(this,e),this.context=t,this.sharedState=n,this._options=o,this._mediator=t.mediator,this.skipHistory=!1,this._initialOptions={},this._onOperationRemoved=this._onOperationRemoved.bind(this),this._onOperationUpdated=this._onOperationUpdated.bind(this)}return d(e,[{key:"_getAssetPath",value:function(){var e;return(e=this.context.ui).getAssetPath.apply(e,arguments)}},{key:"_t",value:function(e,t){return this.context.ui.translate(e,t)}},{key:"_onOperationRemoved",value:function(e){var t=e.constructor.identifier;this.constructor.updatableOperations.indexOf(t)>=0&&(this.constructor.switchToDefaultControlsOnRemoval?(this.skipHistory=!0,this.context.screen.switchToControls("default")):(this.onOperationRemoved(e),this.updateSharedState(!0),this.context.editor.render()))}},{key:"onOperationRemoved",value:function(e){}},{key:"_onOperationUpdated",value:function(e,t){var n=e.constructor.identifier;this.constructor.updatableOperations.indexOf(n)>=0&&this.onOperationUpdated(e,t)}},{key:"updateSharedState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.context.editor,n=this.constructor.mapOperationsToSharedState(t.operations,e,h({},this.sharedState.getState()));this.sharedState.set(n)}},{key:"onOperationUpdated",value:function(e){var t=this.context.editor;this.updateSharedState(!1),t.render()}},{key:"onEnter",value:function(){var e=this.context.editor,t=e.history,n=this.sharedState.get("forceCrop");t.hasInitialState()||n||t.addSnapshot("global"),this._saveOperationsOptions(),this.updateSharedState(!0),this._onEnter(),this.updateSharedState(!1),this._mediator.on(c.d.EVENTS.OPERATION_REMOVED,this._onOperationRemoved),this._mediator.on(c.d.EVENTS.OPERATION_UPDATED,this._onOperationUpdated),this._mediator.on(c.d.EVENTS.OPERATION_CREATED,this._onOperationUpdated)}},{key:"_saveOperationsOptions",value:function(){var e=this,t=this.context.editor.operations;this._initialOptions={},this.constructor.updatableOperations.forEach(function(n){var i=t.get(n);i&&(e._initialOptions[n]=i.serializeOptions())})}},{key:"_shouldAddGlobalHistorySnapshot",value:function(){var e=this,t=this.context.editor,n=t.history,i=t.operations,o=f.Utils.Array.last(n.getItems().filter(function(e){return"global"===e.scope})),r=function(e,t){return!(!e&&!t)&&(!(!e||t||!e.hasChanges())||(!(e||!t)||!(!e||!t||e.optionsEqual(t))))};return this.constructor.updatableOperations.some(function(t){var n=e._initialOptions[t],a=o?o.snapshot.operations[t]:null,s=i.get(t);return r(s,n)&&r(s,a)})}},{key:"_onEnter",value:function(){}},{key:"onLeave",value:function(){var e=this;return this.onBeforeLeave().then(function(t){"boolean"==typeof t&&(t={leave:t});var n=t,i=n.leave,o=n.data;if(!i)return!1;e._mediator.off(c.d.EVENTS.OPERATION_REMOVED,e._onOperationRemoved),e._mediator.off(c.d.EVENTS.OPERATION_UPDATED,e._onOperationUpdated),e._mediator.off(c.d.EVENTS.OPERATION_CREATED,e._onOperationUpdated),e._onLeave(o||{});var r=e.context.options,a=e.context.editor,s=a.history,l=a.operations;if(e._shouldAddGlobalHistorySnapshot()){var u=e._getGlobalHistoryData?e._getGlobalHistoryData():null;e.addGlobalHistorySnapshot(void 0,!1,u)}return l.removeUnused(),"global"===r.editor.undoMode&&s.removeControls(e.constructor.identifier,"local"),"local"===r.editor.undoMode&&s.removeControls(e.constructor.identifier,"global"),!0})}},{key:"_getGlobalHistoryData",value:function(){}},{key:"_onLeave",value:function(){}},{key:"onBeforeLeave",value:function(){return this._onBeforeLeave()}},{key:"_onBeforeLeave",value:function(){return u.a.resolve(!0)}},{key:"addLocalHistorySnapshot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.context.editor.history.addSnapshot("local",t,e,this.constructor.identifier,n)}},{key:"addGlobalHistorySnapshot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.context.editor.history.addSnapshot("global",t,e,this.constructor.identifier,n)}}],[{key:"mapOperationsToSharedState",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"getPreloadAssets",value:function(){return[]}},{key:"clickAtPosition",value:function(e){return!1}},{key:"isEnabled",value:function(e){var t=this.constructor.identifier;return e.isToolEnabled(t)&&e.isToolAllowed(t)}}]),e}();m.identifier=null,m.controlsComponent=null,m.canvasControlsComponent=p.a,m.defaultOptions={},m.requiredOperations=[],m.updatableOperations=[],m.switchToDefaultControlsOnRemoval=!0,t.a=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"render",value:function(){var e=function(e){return{animationDelay:.1*e+"s"}};return d.l.createElement(g,{styles:this.props.styles},d.l.createElement(v,{style:e(0)}),d.l.createElement(v,{style:e(1)}),d.l.createElement(v,{style:e(2)}))}}]),t}(d.b);_.contextTypes=d.b.contextTypes,t.a=_;var g=d.w.div("eurrvc","LoadingIndicatorContainer");_.RootElement=g;var v=d.w.div("vyyzkw","Ball")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(257),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onClick"),s}return r(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.value!==e.value||this.props.disabled!==e.disabled}},{key:"_onClick",value:function(){this._input.focus()}},{key:"render",value:function(){var e=this;return d.l.createElement(v,{className:this.props.className,onClick:this._onClick},d.l.createElement(b,{value:this.props.value,onLiveChange:this.props.onLiveChange,onChange:this.props.onChange,disabled:this.props.disabled,innerRef:function(t){e._input=t},name:this.props.name}),d.l.createElement(y,null,this.props.suffix))}}]),t}(d.b);g.contextTypes=d.b.contextTypes,t.a=g;var v=d.w.div("1bubov","Container");g.RootElement=v;var y=d.w.div("1ua5bzq","Suffix"),b=Object(d.w)(m.a)("6ekjfo","Input")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(49),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s.state.width=0,s}return r(t,e),v(t,[{key:"_onInputChange",value:function(e){y(t.prototype.__proto__||m()(t.prototype),"_onInputChange",this).call(this,e),this._adjustWidth(e.target.value)}},{key:"shouldComponentUpdate",value:function(e,n){return y(t.prototype.__proto__||m()(t.prototype),"shouldComponentUpdate",this).call(this,e,n)||this.state.width!==n.width}},{key:"componentWillReceiveProps",value:function(e){this._adjustWidth(e.value)}},{key:"componentDidMount",value:function(){y(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this._textRuler=document.createElement("div"),_.u.styleElement(this._textRuler,{position:"absolute",top:"0",left:"0",display:"inline-block",zIndex:10}),this._adjustWidth(this.props.value)}},{key:"_getInputStyle",value:function(){var e=this.state.width;return{width:e,minWidth:e}}},{key:"_adjustWidth",value:function(e){document.body.appendChild(this._textRuler);var t=_.u.getStyleObject(this._input);_.u.styleElement(this._textRuler,{font:t.font}),this._textRuler.innerText=e,this.setState({width:this._textRuler.offsetWidth}),this._textRuler.parentNode.removeChild(this._textRuler)}}]),t}(g.a);b.contextTypes=_.b.contextTypes,t.a=b,b.RootElement=Object(_.w)(g.a.RootElement)("n0hw7r","AutoSizeNumericInputComponent")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(122),_=n(46),g=n(259),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s.state={expanded:s.props.expanded||s.props.alwaysExpanded||!1},s}return r(t,e),v(t,[{key:"_onClick",value:function(){var e=!this.state.expanded;this.props.alwaysExpanded||this.setState({expanded:e}),this.props.onToggle&&this.props.onToggle(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.expanded!==e.expanded&&this.setState({expanded:e.expanded})}},{key:"render",value:function(){var e=this.props,t=e.alwaysExpanded,n=e.toggleable,i=e.className,o=this.state.expanded;return d.l.createElement(b,{styles:this.props.styles,className:i},d.l.createElement(w,{onClick:this._onClick.bind(this)},!t&&!n&&d.l.createElement(S,{turnUp:!o}),n&&d.l.createElement(E,{checked:o,className:void 0}),d.l.createElement(k,null,this.props.title)),d.l.createElement(_.a,{active:o,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},d.l.createElement(C,{"data-expanded":o,className:void 0},this.props.children)))}}]),t}(d.b);y.contextTypes=d.b.contextTypes,t.a=y;var b=Object(d.w)(m.ControlGroup).div("1pofx54","Section");y.RootElement=b;var k=Object(d.w)(m.ControlGroupTitle).div("1b0fixa","SectionTitle"),w=d.w.div("1b4y7iu","SectionHeader"),C=d.w.div("10cp0qa",{rendered:"2jlos",visible:"82svov"},"SectionContent"),S=d.w.div("1bagiey",{turnUp:"gucvcl"},"ArrowDown"),E=Object(d.w)(g.a)("15tfhjl","Checkbox")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"render",value:function(){var e=this._getAssetPath("editor/controls/shared/checkbox.png",!0),t=this._getAssetPath("editor/controls/shared/checkbox-active.png",!0),n=this.props,i=n.styles,o=n.className,r=n.checked;return d.l.createElement(g,{styles:i,className:o,style:{backgroundImage:"url("+(r?t:e)+")"}})}}]),t}(d.b);t.a=_;var g=d.w.div("5nuoh","Checkbox");_.RootElement=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(73),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"_renderChild",value:function(e){return y(t.prototype.__proto__||m()(t.prototype),"_renderChild",this).call(this,React.createElement(k,{innerRef:this.props.innerListRef},e))}}]),t}(g.a);b.RootElement=g.a.RootElement,b.contextTypes=g.a.contextTypes;var k=_.w.div("1jtk1eb","ListWrapper"),w=Object(_.w)(b)("x597uk","ScrollableList");t.a=w},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(13),l=n.n(s),u=n(0),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(4),v=n(75),y=n(121),b=l.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){return o(this,t),r(this,(t.__proto__||_()(t)).apply(this,arguments))}return a(t,e),k(t,[{key:"_buildSliderProps",value:function(){var e=this.props,t=e.minValue,n=e.maxValue,i=e.middleDot,o=e.onSliderValueChange;return{minValue:t,maxValue:n,value:e.value,middleDot:i,onChange:o,disabled:e.disabled}}},{key:"_renderLeftPart",value:function(){var e=this._buildSliderProps(),t=i(e,[]);return g.l.createElement(y.a,b({},t,{darkBackground:!0}))}}]),t}(v.a);w.contextTypes=v.a.contextTypes,t.a=w},function(e,t,n){e.exports={default:n(263),__esModule:!0}},function(e,t,n){n(264),e.exports=n(9).Number.isNaN},function(e,t,n){var i=n(11);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(266),_=n(46),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onDocumentClick","_onColorChange"),s.state={colorPickerVisible:!1,colors:s._getDefaultColors(s.props.value.clone()),selectedColorIndex:0},s}return r(t,e),g(t,[{key:"componentWillReceiveProps",value:function(e){if(!this.state.colorPickerVisible&&!this.props.value.equals(e.value)){var t=-1;this.state.colors.forEach(function(n,i){n.equals(e.value)&&(t=i)}),-1===t?this.setState({selectedColorIndex:0,colors:this._getDefaultColors(e.value.clone())}):this.setState({selectedColorIndex:t})}}},{key:"componentDidMount",value:function(){document.addEventListener("click",this._onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._onDocumentClick)}},{key:"_onDocumentClick",value:function(e){var t=this;if(this.state.colorPickerVisible){for(var n=e.target;n;n=n.parentNode)if(n===this._root)return;this.setState({colorPickerVisible:!1},function(){t.props.onColorPickerToggle&&t.props.onColorPickerToggle(!1)})}}},{key:"_onClick",value:function(e){var t=this,n={colorPickerVisible:this.state.colorPickerVisible,selectedColorIndex:e};e===this.state.selectedColorIndex?n.colorPickerVisible=!this.state.colorPickerVisible:n.colorPickerVisible=!1,this.props.onChange&&this.props.onChange(this.state.colors[e]),this.setState(n,function(){t.props.onColorPickerToggle&&t.props.onColorPickerToggle(n.colorPickerVisible)})}},{key:"_onColorChange",value:function(e){this.props.onChange&&this.props.onChange(e),this.state.colors[this.state.selectedColorIndex].copy(e),this.forceUpdate()}},{key:"_getDefaultColors",value:function(e){return[e,d.c.fromHex("6688FA"),d.c.fromHex("8767FA"),d.c.fromHex("DC67FA"),d.c.fromHex("FE68C9"),d.c.fromHex("FE6788"),d.c.fromHex("FE896B")]}},{key:"_renderColorBubbles",value:function(){var e=this,t=this._getAssetPath("editor/controls/shared/tiled-background.png",!0),n=[];return this.state.colors.forEach(function(i,o){var r=o===e.state.selectedColorIndex;n.push(d.l.createElement(b,{key:o,selected:r,className:void 0},d.l.createElement(k,null,d.l.createElement(w,{style:{backgroundImage:"url("+t+")"}}),d.l.createElement(C,{style:{backgroundColor:i.toRGBA()},onClick:e._onClick.bind(e,o),className:void 0},d.l.createElement(S,{selected:r}),d.l.createElement(S,{selected:r}),d.l.createElement(S,{selected:r}))),d.l.createElement(_.a,{active:r&&e.state.colorPickerVisible,enterProp:"rendered",enterDuration:1e3*e.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*e.context.theme.transitionDuration,leaveDuration:1e3*e.context.theme.transitionDuration},d.l.createElement(m.a,{color:i,onChange:e._onColorChange}))))}),n}},{key:"render",value:function(){var e=this;return d.l.createElement(y,{className:void 0,styles:this.props.styles,innerRef:function(t){e._root=t}},this._renderColorBubbles())}}]),t}(d.b);v.contextTypes=d.b.contextTypes,v.propTypes={colors:d.k.array,value:d.k.object.isRequired},t.a=v;var y=d.w.div("9xkrp7","ColorSelection");v.RootElement=y;var b=d.w.div("qt3fol",{selected:"18i7ofo"},"ColorSelectionBubble"),k=d.w.div("11cgycr","ColorSelectionPreview"),w=d.w.div("id1aww","ColorSelectionPreviewContent"),C=Object(d.w)(w)("nahwei","ColorSelectionBubbleContent"),S=d.w.div("11la9rb",{selected:"xfn5qu"},"Dot")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=g()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(m.a?m()(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),l=n(98),u=n.n(l),c=n(99),f=n.n(c),p=n(0),h=n.n(p),d=n(1),m=n.n(d),_=n(2),g=n.n(_),v=n(3),y=n.n(v),b=n(4),k=n(267),w=n(268),C=n(269),S=n(123),E=n(270),x=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=f()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(u()(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),h()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),R=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||y()(t)).call.apply(e,[this].concat(r)));s._bindAll("_onHexValueChange","_onAlphaChange","_onHueChange","_onSaturationBrightnessChange");var l=s.props.color.clone(),u=l.toHSV(),c=T(u,3),f=c[0],p=c[1],h=c[2];return s.state={color:l,hue:f,saturation:p,brightness:h},s}return r(t,e),O(t,[{key:"_onHexValueChange",value:function(e){if(!e.match(/^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i))return this.forceUpdate();3===e.length&&(e+=e);var t=b.c.fromHex(e),n=this.state.color;n.copy(t),this.props.onChange&&this.props.onChange(n.clone());var i=n.toHSV(),o=T(i,3),r=o[0],a=o[1],s=o[2];this.setState({hue:r,saturation:a,brightness:s})}},{key:"_onAlphaChange",value:function(e){var t=this.state.color;t.a=e,this.props.onChange&&this.props.onChange(t.clone()),this.forceUpdate()}},{key:"_onHueChange",value:function(e){var t=this.state.color,n=t.toHSV(),i=T(n,3),o=i[1],r=i[2],a=t.a;t.fromHSV(e,o,r),t.a=a,this.props.onChange&&this.props.onChange(t.clone()),this.setState({color:t,hue:e})}},{key:"_onSaturationBrightnessChange",value:function(e,t){var n=this.state.color,i=n.a;n.fromHSV(this.state.hue,e,t),n.a=i,this.props.onChange&&this.props.onChange(n.clone()),this.setState({color:n,saturation:e,brightness:t})}},{key:"_changeColorComponent",value:function(e,t){var n=this.state.color;n[e]=t/255,this.props.onChange&&this.props.onChange(n.clone());var i=n.toHSV(),o=T(i,3),r=o[0],a=o[1],s=o[2];this.setState({hue:r,saturation:a,brightness:s})}},{key:"_renderContent",value:function(){var e=this.state,t=e.hue,n=e.saturation,i=e.brightness,o=e.color,r={hue:t,saturation:n,brightness:i};return[b.l.createElement(I,{key:"arrow"}),b.l.createElement(P,{key:"colorPicker",className:void 0},b.l.createElement(j,x({},r,{onChange:this._onSaturationBrightnessChange})),b.l.createElement(B,x({},r,{onChange:this._onHueChange})),b.l.createElement(A,{value:o.a,color:o,onChange:this._onAlphaChange}),b.l.createElement(M,null,b.l.createElement(E.a,{inputLabel:"Hex",value:o.toHex().substr(1),inputClassName:void 0,onValueChange:this._onHexValueChange}),b.l.createElement(S.a,{inputLabel:"R",value:o.toRGB()[0],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"r")}),b.l.createElement(S.a,{inputLabel:"G",value:o.toRGB()[1],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"g")}),b.l.createElement(S.a,{inputLabel:"B",value:o.toRGB()[2],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"b")})))]}},{key:"render",value:function(){var e=this.props,t=e.rendered,n=e.visible;return b.l.createElement(D,{rendered:t,visible:n},t&&this._renderContent())}}]),t}(b.b);R.contextTypes=b.b.contextTypes,t.a=R;var D=b.w.div("fko51h",{rendered:"2jlos",visible:"zgbg08"},"ColorPickerContainer"),I=b.w.div("xfcvqs","TopArrow"),P=b.w.div("1gzvppb","ColorPicker"),j=Object(b.w)(C.a)("120drhm","SaturationValueSlider"),B=Object(b.w)(k.a)("1cbv91b","HueSlider"),A=Object(b.w)(w.a)("tnkwnw","OpacitySlider"),M=b.w.div("142apfo","ColorValueInputs")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(22),v=n(76),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},k=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onKnobDragStart","_onKnobDrag","_setValue"),s.state={value:s.props.hue},s}return r(t,e),y(t,[{key:"componentDidMount",value:function(){b(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this._renderCanvas()}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.hue})}},{key:"_onKnobDragStart",value:function(e,t,n){this._sliderWidth=this._slider.offsetWidth,n.target===this._knob?this._initialValue=this.state.value:(this._initialValue=e.x/this._sliderWidth,this._setValue(this._initialValue))}},{key:"_onKnobDrag",value:function(e){var t=this._initialValue+e.x/this._sliderWidth;this._setValue(t)}},{key:"_setValue",value:function(e){var t=Math.min(1,Math.max(0,e));this.setState({value:t}),this.props.onChange&&this.props.onChange(t),this.forceUpdate()}},{key:"_renderCanvas",value:function(){var e=this._canvas,t=e.getContext("2d");e.width=e.offsetWidth,e.height=e.offsetHeight;for(var n=0;n<e.width;n++){var i=n/e.width,o=_.c.fromHSV(i,1,1);t.strokeStyle=o.toRGBA(),t.beginPath(),t.moveTo(n,0),t.lineTo(n,e.height),t.stroke()}}},{key:"render",value:function(){var e=this;return _.l.createElement(g.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},_.l.createElement(w,{styles:this.props.styles,innerRef:function(t){e._slider=t},className:void 0},_.l.createElement(S,{innerRef:function(t){e._canvas=t}}),_.l.createElement(C,{style:this._getKnobStyle(),innerRef:function(t){e._knob=t},className:void 0})))}},{key:"_getKnobStyle",value:function(){return{left:(100*this.props.hue).toFixed(2)+"%"}}}]),t}(_.b);k.contextTypes=_.b.contextTypes,t.a=k;var w=Object(_.w)(v.a).div("120drhm","HueSlider");k.RootElement=w;var C=Object(_.w)(v.c).div("120drhm","Knob"),S=Object(_.w)(v.b).canvas("u98vhm","Background")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(22),_=n(76),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onKnobDragStart","_onKnobDrag","_updateBackgroundColors","_setValue"),s.state={color:s.props.color.clone(),value:s.props.value},s}return r(t,e),g(t,[{key:"_updateBackgroundColors",value:function(){this._transparentColor=this.state.color.clone(),this._transparentColor.a=0,this._opaqueColor=this.state.color.clone(),this._opaqueColor.a=1}},{key:"componentWillReceiveProps",value:function(e){this.setState({color:e.color.clone(),value:e.value})}},{key:"_onKnobDragStart",value:function(e,t,n){this._sliderWidth=this._slider.offsetWidth,n.target===this._knob?this._initialValue=this.state.value:(this._initialValue=1-e.x/this._sliderWidth,this._setValue(this._initialValue))}},{key:"_onKnobDrag",value:function(e,t){var n=this._initialValue-e.x/this._sliderWidth;this._setValue(n)}},{key:"_setValue",value:function(e){var t=Math.min(1,Math.max(0,e));this.props.onChange&&this.props.onChange(t),this.setState({value:t}),this.forceUpdate()}},{key:"render",value:function(){var e=this;this._updateBackgroundColors();var t=this._getAssetPath("editor/controls/shared/tiled-background.png",!0);return d.l.createElement(m.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},d.l.createElement(y,{styles:this.props.styles,innerRef:function(t){e._slider=t},className:void 0},d.l.createElement(w,{style:{backgroundImage:"url("+t+")"}}),d.l.createElement(k,{style:{backgroundImage:"linear-gradient(90deg, "+this._opaqueColor.toRGBA()+" 0%, "+this._transparentColor.toRGBA()+" 100%)"}}),d.l.createElement(b,{style:this._getKnobStyle(),innerRef:function(t){e._knob=t},className:void 0})))}},{key:"_getKnobStyle",value:function(){return{left:(100*(1-this.state.value)).toFixed(2)+"%"}}}]),t}(d.b);v.contextTypes=d.b.contextTypes,t.a=v;var y=Object(d.w)(_.a).div("120drhm","OpacitySlider");v.RootElement=y;var b=Object(d.w)(_.c).div("120drhm","Knob"),k=Object(d.w)(_.b).div("120drhm","Background"),w=Object(d.w)(k)("m87q12","TiledBackground")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(22),v=n(76),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},k=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onKnobDragStart","_onKnobDrag"),s._lastHue=null,s}return r(t,e),y(t,[{key:"componentDidMount",value:function(){b(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this._renderCanvas()}},{key:"componentDidUpdate",value:function(){this.props.hue!==this._lastHue&&this._renderCanvas()}},{key:"_onKnobDragStart",value:function(e,t,n){n.target===this._knob?(this._initialBrightness=this.props.brightness,this._initialSaturation=this.props.saturation):(this._initialSaturation=e.x/this._canvas.offsetWidth,this._initialBrightness=1-e.y/this._canvas.offsetHeight,this.props.onChange&&this.props.onChange(this._initialSaturation,this._initialBrightness))}},{key:"_onKnobDrag",value:function(e){if(null!=this._canvas){var t=this._canvas.offsetWidth,n=this._canvas.offsetHeight,i=this._initialSaturation+e.x/t;i=Math.max(0,Math.min(1,i));var o=this._initialBrightness+e.y/n*-1;o=Math.max(0,Math.min(1,o)),this.props.onChange&&this.props.onChange(i,o)}}},{key:"_renderCanvas",value:function(){var e=this._canvas,t=e.getContext("2d");e.width=e.offsetWidth,e.height=e.offsetHeight;for(var n=t.getImageData(0,0,e.width,e.height),i=0;i<e.height;i++)for(var o=(e.height-i)/e.height,r=0;r<e.width;r++){var a=r/e.width,s=_.c.fromHSV(this.props.hue,a,o),l=s.r,u=s.g,c=s.b,f=s.a,p=4*(i*e.width+r);n.data[p]=255*l,n.data[p+1]=255*u,n.data[p+2]=255*c,n.data[p+3]=255*f}t.putImageData(n,0,0),this._lastHue=this.props.hue}},{key:"render",value:function(){var e=this;return _.l.createElement(g.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},_.l.createElement(w,{styles:this.props.styles,innerRef:function(t){e._slider=t},className:void 0},_.l.createElement(S,{innerRef:function(t){e._canvas=t}}),_.l.createElement(C,{style:this._getKnobStyle(),innerRef:function(t){e._knob=t},className:void 0})))}},{key:"_getKnobStyle",value:function(){return{left:(100*this.props.saturation).toFixed(2)+"%",top:(100*(1-this.props.brightness)).toFixed(2)+"%"}}}]),t}(_.b);k.contextTypes=_.b.contextTypes,t.a=k;var w=Object(_.w)(v.a).div("1jf8fwr","SaturationValueSlider");k.RootElement=w;var C=Object(_.w)(v.c).div("icy3f1","Knob"),S=Object(_.w)(v.b).canvas("15alfoa","Background")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(123),_=n(49),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),g(t,[{key:"_onInputChange",value:function(e){var t=e.target.value;if(t.match(/^#([A-Fa-f0-9]{6})$/))return this.setState({value:this.props.value});this.props.onValueChange&&this.props.onValueChange(t),this.setState({value:t})}},{key:"_renderRightPart",value:function(){var e=this,t=[];return this.props.inputClassName&&t.push(this.props.inputClassName),d.l.createElement(y,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:t.join(" "),innerRef:function(t){e._input=t},disabled:this.props.disabled})}}]),t}(m.a);v.contextTypes=m.a.contextTypes,t.a=v;var y=Object(d.w)(_.a)("t0ruqq","InputField")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"render",value:function(){return d.l.createElement(g,{onClick:this.props.disabled?void 0:this.props.onClick,disabled:this.props.disabled,className:this.props.className},this.props.title)}}]),t}(d.b);_.contextTypes=d.b.contextTypes,t.a=_;var g=d.w.button("7lpbp3",{disabled:"1iaw3op"},"Button")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(4),g=n(74),v=n(73),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},k=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onDropdownClick","_onDocumentClick"),s.state={expanded:!1},s}return r(t,e),y(t,[{key:"componentDidMount",value:function(){b(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),document.addEventListener("click",this._onDocumentClick)}},{key:"componentWillUnmount",value:function(){b(t.prototype.__proto__||m()(t.prototype),"componentWillUnmount",this).call(this),document.removeEventListener("click",this._onDocumentClick)}},{key:"_onDocumentClick",value:function(e){if(this.state.expanded){for(var t=e.target;t;t=t.parentNode)if(t===this._root)return;this.setState({expanded:!1})}}},{key:"_onDropdownClick",value:function(){var e=this.state.expanded;this.setState({expanded:!e})}},{key:"_onItemClick",value:function(e){this.props.onChange&&this.props.onChange(e),this.setState({expanded:!1})}},{key:"_renderDropdownItems",value:function(){var e=this;return this.props.children.map(function(t){var n=_.q.extend({},t.props,{onClick:e._onItemClick.bind(e,t.props.value),selected:e.props.value===t.props.value,className:void 0});return _.l.cloneElement(t,n)})}},{key:"render",value:function(){var e=this,t=null;this.props.children.forEach(function(n){n.props.value===e.props.value&&(t=n.props.children)});var n=this.props.enableMenu;return _.l.createElement(w,{innerRef:function(t){e._root=t},className:this.props.className},_.l.createElement(C,{onClick:n?this._onDropdownClick:null,styles:this.props.styles,style:this.props.style},t,n?_.l.createElement(x,null):null),this.state.expanded&&_.l.createElement(S,{className:void 0},_.l.createElement(v.a,{direction:"vertical",noGradient:!0},_.l.createElement(E,null,this._renderDropdownItems()))))}}]),t}(_.b);k.contextTypes=_.b.contextTypes,k.propTypes={enableMenu:_.k.bool,styles:_.k.object,style:_.k.object,onChange:_.k.func},k.defaultProps={enableMenu:!0},t.a=k;var w=_.w.div("13hv8io","DropdownContainer"),C=Object(_.w)(g.a).div("13hv8io","Dropdown");k.RootElement=C;var S=_.w.div("1fqdopp","DropdownOverlay"),E=_.w.ul("zy0cu9","DropdownList"),x=_.w.div("7w2heg",{turnUp:"gucvcl"},"ArrowDown"),T=_.w.li("cibatp",{selected:"60ro2s"},"DropdownItem");k.Item=T,k.RootElement=Object(_.w)(g.a).input("120drhm","DropdownComponent")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(74),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onKeyDown","_onInputBlur","_onInputChange"),s.state={value:""},s}return r(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.value!==e.value||this.props.disabled!==e.disabled||this.state.value!==t.value}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"_onInputChange",value:function(e){this.setState({value:e.target.value}),this.props.onLiveChange&&this.props.onLiveChange(e)}},{key:"_onInputBlur",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"_onKeyDown",value:function(e){13!==e.keyCode&&27!==e.keyCode||this._input.blur(),this.props.onKeyDown&&this.props.onKeyDown()}},{key:"focus",value:function(){this._input.focus()}},{key:"_getInputStyle",value:function(){return{}}},{key:"render",value:function(){var e=this,t=this.constructor.RootElement;return d.l.createElement(t,{value:this.state.value,placeholder:this.props.placeholder,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function(t){e._input=t},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})}}]),t}(d.b);g.contextTypes=d.b.contextTypes,t.a=g,g.RootElement=Object(d.w)(m.a).input("120drhm","TextInputComponent")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(275),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onNewFile"),s}return r(t,e),_(t,[{key:"componentDidMount",value:function(){this._fileLoader=new m.a(this._fileInput),this._fileLoader.on("file",this._onNewFile)}},{key:"componentWillUnmount",value:function(){this._fileLoader.off("file",this._onNewFile),this._fileLoader.dispose(),this._fileLoader=null}},{key:"_onNewFile",value:function(e){this.props.onNewFile&&this.props.onNewFile(e)}},{key:"open",value:function(){this._fileLoader.open()}},{key:"render",value:function(){var e=this;return React.createElement(v,{type:"file",accept:"image/*",innerRef:function(t){e._fileInput=t}})}}]),t}(d.b);g.contextTypes=d.b.contextTypes,t.a=g;var v=d.w.input("19u9mq5","HiddenFileInput")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=n(34),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||h()(t)).call(this));return n._input=e,n._onFileChange=n._onFileChange.bind(n),n._input.addEventListener("change",n._onFileChange),n}return r(t,e),_(t,[{key:"open",value:function(){this._input.value=null,this._input.click()}},{key:"_handleFile",value:function(e){var t=this,n=new window.FileReader;n.onload=function(){return function(e){var n=e.target.result,i=new window.Image;i.addEventListener("load",function(){t.emit("file",i)}),i.addEventListener("error",function(e){return m.a.instance.displayError(t._t("errors.title"),t._t("errors.imageLoadingError.text"))}),i.src=n}}(),n.readAsDataURL(e)}},{key:"_onFileChange",value:function(){var e=this._input.files;e.length&&this._handleFile(e[0])}},{key:"dispose",value:function(){this._input.removeEventListener("change",this._onFileChange)}}]),t}(d.e);t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"_cancelEvent",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"_onClick",value:function(e,t){t.stopPropagation(),t.preventDefault(),e(t)}},{key:"_renderControlItem",value:function(e,t){var n=this,i=this._getAssetPath("editor/controls/shared/canvas-overlay-controls/"+e+".png",!0),o=function(e){n._onClick(t,e)};return d.l.createElement(v,{style:{backgroundImage:"url("+i+")"},onClick:o,onTouchEnd:o,className:void 0,"data-identifier":e})}},{key:"render",value:function(){var e=this.props.position;return d.l.createElement(g,{style:{left:e.x,top:e.y},onMouseDown:this._cancelEvent,onTouchStart:this._cancelEvent,className:void 0},this.props.takeToFront&&this._renderControlItem("to-front",this.props.onTakeToFront),this.props.flipHorizontally&&this._renderControlItem("flip-horizontal",this.props.onFlipHorizontally),this.props.duplicate&&this._renderControlItem("duplicate",this.props.onDuplicate),this.props.delete&&this._renderControlItem("delete",this.props.onDelete))}}]),t}(d.b);_.contextTypes=d.b.contextTypes,t.a=_;var g=d.w.div("1lf1r1r","CanvasOverlayControl"),v=d.w.div("1l53y3r","ControlItem")},function(e,t){e.exports={editor:{new:"Neu",export:"Exportieren",cancel:"Abbrechen",close:"Schließen",controls:{library:{title:"Bibliothek",search:"Bibliothek durchsuchen",fileDropZone:"Datei hier hin ziehen oder klicken zum Durchsuchen.",fileDropZoneHovered:"Zum Hochladen loslassen.",noResults:"Keine Ergebnisse"},transform:{title:"Zuschneiden",reset:"Zurücksetzen",dimensions:{width:"b",height:"h"},ratios:{imgly_transforms_common:{name:"Standard",ratios:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",ratios:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profilbild"}}}},filter:{title:"Filter",filters:{identity:"Kein Filter",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400"}},adjustments:{title:"Korrekturen",reset:"Zurücksetzen",sections:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",contrast:"Kontrast",saturation:"Sättigung",exposure:"Belichtung",gamma:"Gamma",shadows:"Schatten",highlights:"Lichter",clarity:"Klarheit"}},focus:{title:"Weichzeichnen",items:{none:"Original",radial:"Kreisförmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gaußsch"}},text:{title:"Text",defaultText:"Doppelklick zum Bearbeiten!",new:"Neuer Text",font:"Schriftart",size:"Größe",spacing:"Abstand",line:"Zeile",background:"Hintergrund"},sticker:{title:"Sticker",new:"Neuer Sticker",fill:"Einfärben",opacity:"Transparenz",replace:"Ersetzen",stickerCategories:{},stickers:{}},brush:{title:"Malen",settings:"Pinseleinstellungen",width:"Dicke",hardness:"Härte"},frame:{title:"Rahmen",opacity:"Transparenz",width:"Dicke",replace:"Ersetzen",fill:"Einfärben",frames:{none:"Kein Rahmen"}},overlay:{title:"Overlay",blendModes:{normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},overlays:{none:"Kein Overlay",imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}}}},loading:{loading:"Lade...",exporting:"Exportiere...",resizing:"Bild wird bearbeitet...",fonts:"Lade Schriftarten..."},warnings:{imageResized_maxMegaPixels:{title:"Bild verkleinert",text:"Da dein Bild die maximale Größe von ${maxMegaPixels} Megapixeln überschreitet, wurde es auf ${width}x${height} Pixel verkleinert."},imageResized_maxDimensions:{title:"Bild verkleinert",text:"Aufgrund von Hardware-Beschränkungen wurde das Bild auf ${width}x${height} Pixel verkleinert."},newImage_changesLost:{title:"Neues Bild",text:"Alle nicht gespeicherten Änderungen gehen verloren. Fortfahren?",buttons:{yes:"Ja",no:"Nein"}},discardChanges:{title:"Änderungen verwerfen?",text:"Sind Sie sicher, dass Sie die Änderungen verwerfen wollen?",buttons:{cancel:"Abbrechen",keep:"Änderungen beibehalten",discard:"Änderungen verwerfen"}}},errors:{title:"Fehler",renderingError:{text:"Beim Rendern des Bildes ist ein Fehler aufgetreten."},stickerLoadingError:{text:"Laden des Stickers ${path} fehlgeschlagen."},imageLoadingError:{text:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gründe haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterstützt."},fontLoadingError:{title:"Laden von Schriftarten ist fehlgeschlagen.",text:"Die folgenden Schriftarten konnten nicht geladen werden: ${fonts}."},webcamNotSupported:{text:"Dein Browser unterstützt das Webcam-Feature leider noch nicht."},webcamUnavailable:{text:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})"},invalidFileType:{text:"Der Dateityp ${fileType} wird nicht unterstützt."}}}},function(e,t){e.exports={editor:{new:"New",export:"Export",cancel:"Cancel",close:"Close",controls:{library:{title:"Library",search:"Search Library",fileDropZone:"Drag image here or click to browse for one.",fileDropZoneHovered:"Drop to upload.",noResults:"No results"},transform:{title:"Transform",reset:"Reset Default",dimensions:{width:"w",height:"h"},ratios:{imgly_transforms_common:{name:"Common Crops",ratios:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",ratios:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profile Pic"}}}},filter:{title:"Filters",filters:{identity:"None",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400"}},adjustments:{title:"Adjust",reset:"Reset Default",sections:{basics:"Basics",refinements:"Refinements"},items:{brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",shadows:"Shadows",highlights:"Highlights",clarity:"Clarity"}},focus:{title:"Focus",items:{none:"None",radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"}},text:{title:"Text",defaultText:"Double-click to edit!",new:"New Text",font:"Font",size:"Size",spacing:"Spacing",line:"Line",background:"Background"},sticker:{title:"Stickers",new:"New Sticker",fill:"Fill",opacity:"Opacity",replace:"Replace",stickerCategories:{},stickers:{}},brush:{title:"Brush",settings:"Brush Settings",width:"Width",hardness:"Hardness"},frame:{title:"Frames",opacity:"Opacity",width:"Width",replace:"Replace",fill:"Fill",frames:{none:"None"}},overlay:{title:"Overlays",blendModes:{none:"None",normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},overlays:{none:"None",imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}}}},loading:{loading:"Loading...",exporting:"Exporting...",resizing:"Resizing...",fonts:"Loading fonts..."},warnings:{imageResized_maxMegaPixels:{title:"Image resized",text:"Your image exceeds the maximum size of ${maxMegaPixels} megapixels and has therefore been resized to ${width}x${height} pixels."},imageResized_maxDimensions:{title:"Image resized",text:"Due to hardware limitations your image has been resized to ${width}x${height} pixels."},newImage_changesLost:{title:"New Image",text:"Any unsaved changes will be lost. Continue?",buttons:{yes:"Yes",no:"No"}},discardChanges:{title:"Discard changes?",text:"You have unsaved changes. Are you sure you want to discard the changes?",buttons:{cancel:"Cancel",keep:"Keep changes",discard:"Discard changes"}}},errors:{title:"Error",renderingError:{text:"An error has occurred while rendering the image."},stickerLoadingError:{text:"Failed to load sticker ${path}."},imageLoadingError:{text:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported."},fontLoadingError:{title:"Failed to load font",text:"The following fonts could not be loaded: ${fonts}."},webcamNotSupported:{text:"The webcam feature is not supported by your browser."},webcamUnavailable:{text:"Unable to display webcam image (Error: ${error})"},invalidFileType:{text:"The file type ${fileType} is not supported."}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=n.n(i),r=n(280),a=n(291),s=n(294),l=n(301),u=n(126),c=n(311),f=n(316),p=n(320),h=n(327),d=n(333),m=[r.a,a.a,s.a,l.a,u.a,c.a,f.a,p.a,h.a,d.a];o.a.AllControls=m,t.default=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=n.n(_),v=n(281),y=n(287),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),b(t,[{key:"shouldKeepChanges",value:function(){var e=this,t=this.context,n=t.editor,i=t.ui;return void 0===this.keepChanges&&!n.isShallow&&n.history.isUndoAvailable()?new h.a(function(t,n){_.ModalManager.instance.displayWarning(i.translate("warnings.discardChanges.title"),i.translate("warnings.discardChanges.text"),[i.translate("warnings.discardChanges.buttons.keep"),i.translate("warnings.discardChanges.buttons.discard")],!0).on("button",function(n){var i=0===n;e.keepChanges=i,t(i)})}):h.a.resolve(this.keepChanges)}},{key:"onImage",value:function(e){var t=this;this.shouldKeepChanges().then(function(n){if(t._options.switchScreenOnImage)t.context.options.editor.image=e,t.context.appComponent.switchToScreen("editor");else{t.context.editor.setImage(e,!n)}t.sharedState.get("webcamEnabled")&&(t.sharedState.set({webcamEnabled:!1}),t.context.options.editor.forceCrop||t.context.screen.switchToControls("default"))})}},{key:"_onEnter",value:function(){this.sharedState.set({webcamEnabled:!1})}}],[{key:"hasLibraryProvider",value:function(e){var t=e.getOptions().editor.controlsOptions;if(void 0===t.library)return!0;var n=t.library;return!!(n.provider||n.enableWebcam||n.enableUpload)}},{key:"isEnabled",value:function(e){return t.hasLibraryProvider(e)&&e.isToolEnabled("library")}}]),t}(_.BaseControls);k.clickAtPosition=_.BaseControls.clickAtPosition,k.getPreloadAssets=_.BaseControls.getPreloadAssets,k.identifier="library",k.controlsComponent=v.a,k.canvasControlsComponent=y.a,k.iconPath="editor/controls/library/icon.png",k.activeIconPath="editor/controls/library/icon-active.png",k.defaultOptions={enableWebcam:!0,enableUpload:!0,displayUploadInCanvas:!1,switchScreenOnImage:!1},t.a=k,g.a.Controls.LibraryControls=k},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(282)),v=n(284),y=n(286),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w={ROOT:0,SEARCH:1},C=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r))),l=s.props.options.provider;return l&&(s._library=new l),s._bindAll("_onCategorySelect","_onImageSelect","_onSearchQueryChange","_onWebcamActivated"),s.state.currentPanel=w.ROOT,s.state.searchQuery="",s}return r(t,e),b(t,[{key:"_onBackButtonClick",value:function(){this.setState({currentPanel:w.ROOT,searchQuery:"",backButton:!1})}},{key:"_onCategorySelect",value:function(e){this.setState({currentPanel:w.SEARCH,searchQuery:e.getName(),backButton:!0})}},{key:"_onImageSelect",value:function(e){var t=this;this.setSharedState({webcamEnabled:!1});var n=new window.Image,i=void 0,o=setTimeout(function(){i=_.ModalManager.instance.displayLoading(t._t("loading.loading"))},200);n.addEventListener("load",function(){i&&i.close(),o&&(clearTimeout(o),o=null),t.props.controls.onImage(n)}),n.addEventListener("error",function(){i&&i.close(),o&&(clearTimeout(o),o=null),_.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.imageLoadingError.text"))}),n.crossOrigin="Anonymous",n.src=e.getRawUrl()}},{key:"_onSearchQueryChange",value:function(e){this.setState({searchQuery:e,currentPanel:w.SEARCH})}},{key:"_onWebcamActivated",value:function(e){this.setSharedState({webcamEnabled:!0})}},{key:"fixStyles",value:function(){var e=this;if(this._list)return this._list.style.height="100%",k(t.prototype.__proto__||m()(t.prototype),"fixStyles",this).call(this).then(function(){if(_.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})}},{key:"_renderCurrentPanel",value:function(){var e=this;switch(this.state.currentPanel){case w.ROOT:return _.React.createElement(g.a,{controls:this.props.controls,innerRef:function(t){e._list=t},library:this._library,onCategorySelect:this._onCategorySelect,onWebcamActivated:this._onWebcamActivated,options:this.props.options,key:"panel",ref:"panel"});case w.SEARCH:return _.React.createElement(v.a,{innerRef:function(t){e._list=t},library:this._library,onImageSelect:this._onImageSelect,searchQuery:this.state.searchQuery,key:"panel",ref:"panel"})}}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!1}}},{key:"_renderContent",value:function(){var e=[];return this._library&&e.push(_.React.createElement(y.a,{key:"searchHeader",onChange:this._onSearchQueryChange,searchQuery:this.state.searchQuery})),e.push(this._renderCurrentPanel()),e}}]),t}(_.ControlsComponent);C.contextTypes=_.ControlsComponent.contextTypes,C.propTypes=_.ControlsComponent.propTypes,C.RootElement=_.ControlsComponent.RootElement,t.a=C},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(8),m=n.n(d),_=n(3),g=n.n(_),v=n(5),y=(n.n(v),n(283)),b=n(124),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},C=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onImage"),s.state={loading:!0,categories:[]},s}return r(t,e),k(t,[{key:"fixStyles",value:function(){var e=this;return m.a.resolve().then(function(){v.Utils.Browser.isIElte(10)?Object(v.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})}},{key:"componentDidMount",value:function(){w(t.prototype.__proto__||g()(t.prototype),"componentDidMount",this).call(this),this._loadCategories()}},{key:"componentWillUnmount",value:function(){w(t.prototype.__proto__||g()(t.prototype),"componentWillUnmount",this).call(this),this._loadCoverImagesQueue&&this._loadCoverImagesQueue.dispose(),this._disposed=!0}},{key:"_onCategoryClick",value:function(e){this.props.onCategorySelect&&this.props.onCategorySelect(e)}},{key:"_onImage",value:function(e){this.props.controls.onImage(e)}},{key:"_loadCoverImages",value:function(e){var t=this,n=this.context.theme,i=e.map(function(e){return{fn:function(){return e.loadCoverImage()},index:e}});this._loadCoverImagesQueue=new v.DelayedJobQueue(i,{minDelay:n.listItemSlideInDelay}),this._loadCoverImagesQueue.on("job-done",function(e){t._disposed||(t.forceUpdate(),t._scrollbar.update())}),this._loadCoverImagesQueue.start()}},{key:"_loadCategories",value:function(){var e=this;return this.props.library?this.props.library.getCategories().then(function(t){e._loadCoverImages(t),e.setState({loading:!1,categories:t})}):(this.setState({loading:!1,categories:[]}),m.a.resolve())}},{key:"_renderListItems",value:function(){var e=this;return this.state.categories.map(function(t){return v.React.createElement(y.a,{key:t.getName(),category:t,visible:t.isCoverImageLoaded(),onClick:e._onCategoryClick.bind(e,t)})})}},{key:"render",value:function(){var e=this;if(this.state.loading)return v.React.createElement(v.LoadingIndicatorComponent,null);var t=this.props.options,n=t.enableUpload,i=t.displayUploadInCanvas,o=this.props.innerRef;return v.React.createElement(S,{innerRef:function(t){o&&o(t),e._wrapper=t},className:void 0},v.React.createElement(v.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},v.React.createElement(E,null,n&&!i&&v.React.createElement(b.a,{controls:this.props.controls,onImage:this._onImage,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this.props.onWebcamActivated}),this._renderListItems())))}}]),t}(v.BaseComponent);t.a=C;var S=v.adonis.div("rfecls","RootPanelWrapper"),E=v.adonis.ul("5jg0ou","CategoryList")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.ControlItem,g=d.ControlsStyles.ControlItemTitle,v=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.category,n=e.onClick,i=e.visible,o={backgroundImage:"url('"+t.getCoverImage()+"')"};return d.React.createElement(y,{animated:!0,style:o,visible:i,className:void 0,onClick:n},d.React.createElement(b,null,t.getName()))}}]),t}(d.BaseComponent);t.a=v;var y=Object(d.adonis)(_).li("prcvvt","ListItem"),b=Object(d.adonis)(g).div("1ler8h7","ListItemTitle")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(8),m=n.n(d),_=n(3),g=n.n(_),v=n(5),y=(n.n(v),n(285)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(r)));return s.state={loading:!0,images:[]},s}return r(t,e),b(t,[{key:"fixStyles",value:function(){var e=this;return m.a.resolve().then(function(){v.Utils.Browser.isIElte(10)?Object(v.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})}},{key:"componentDidMount",value:function(){k(t.prototype.__proto__||g()(t.prototype),"componentDidMount",this).call(this),this._loadImages(this.props.searchQuery)}},{key:"componentWillReceiveProps",value:function(e){this.props.searchQuery!==e.searchQuery&&this._loadImages(e.searchQuery)}},{key:"componentWillUnmount",value:function(){k(t.prototype.__proto__||g()(t.prototype),"componentWillUnmount",this).call(this),this._loadThumbsQueue.stop(),this._loadThumbsQueue.dispose(),this._disposed=!0}},{key:"_onImageClick",value:function(e){this.props.onImageSelect&&this.props.onImageSelect(e)}},{key:"_loadThumbs",value:function(e){var t=this,n=this.context.theme,i=e.map(function(e){return{fn:function(){return e.loadThumb()},index:e}});this._loadThumbsQueue=new v.DelayedJobQueue(i,{minDelay:n.listItemSlideInDelay}),this._loadThumbsQueue.on("job-done",function(e){t._disposed||(t.forceUpdate(),t._scrollbar&&t._scrollbar.update())}),this._loadThumbsQueue.start()}},{key:"_loadImages",value:function(e){var t=this;return e.trim()||this.setState({loading:!1,images:[]},function(){return t._scrollbar&&t._scrollbar.update()}),this.setState({loading:!0}),this.props.library.searchImages(e).then(function(e){t._loadThumbs(e),t.setState({loading:!1,images:e},function(){return t._scrollbar.update()})})}},{key:"_renderListItems",value:function(){var e=this,t=this.context.editor,n=t.getImage();return 0===this.state.images.length?v.React.createElement(E,null,this._t("editor.controls.library.noResults")):this.state.images.map(function(t){return v.React.createElement(y.a,{key:t.getThumbUrl(),image:t,selected:t.getRawUrl()===(n&&n.src),visible:t.isThumbLoaded(),onClick:e._onImageClick.bind(e,t)})})}},{key:"render",value:function(){var e=this;if(this.state.loading)return v.React.createElement(v.LoadingIndicatorComponent,null);var t=this.props.innerRef;return v.React.createElement(C,{innerRef:function(n){t&&t(n),e._wrapper=n},className:void 0},v.React.createElement(v.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},v.React.createElement(S,null,this._renderListItems())))}}]),t}(v.BaseComponent);t.a=w;var C=v.adonis.div("rfecls","RootPanelWrapper"),S=v.adonis.ul("5jg0ou","ImageList"),E=v.adonis.div("6kl290","NoResultsText")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.ControlItem,g=d.ControlsStyles.ControlItemActiveOverlay,v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s.state={isPortrait:!1,hovered:!1},s}return r(t,e),m(t,[{key:"componentWillReceiveProps",value:function(e){if(this.props.visible!==e.visible){var t=this.props.image.getThumbImage();t.height>t.width&&this.setState({isPortrait:!0})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.image,i=t.onClick,o=t.selected,r=t.visible,a={backgroundImage:"url('"+n.getThumbUrl()+"')"},s=n.getAuthorAvatar(),l=this.context.theme.transitionDuration,u=[void 0,o&&"is-selected"].filter(function(e){return e});return d.React.createElement(y,{animated:!0,style:a,selected:o,visible:r,className:u.join(" "),onClick:i,portrait:this.state.isPortrait,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},d.React.createElement(d.Transition,{active:this.state.hovered,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},d.React.createElement(C,{selected:o},s&&d.React.createElement(k,{src:s}),d.React.createElement(w,null,n.getAuthorName()))),d.React.createElement(d.Transition,{active:o,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},d.React.createElement(b,{selected:!0})))}}]),t}(d.BaseComponent);t.a=v;var y=Object(d.adonis)(_).li("1a5mxw5",{portrait:"otbyv0"},"ListItem"),b=Object(d.adonis)(g).div("120drhm","ListItemOverlay"),k=d.adonis.img("1owxkzt","AuthorAvatar"),w=d.adonis.div("1jylqsv","AuthorName"),C=d.adonis.div("mchu36",{rendered:"2jlos",visible:"1fmxelx"},"Author")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=250,g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onInputChange"),s._onDebouncedInputChange=d.Utils.debounce(s._onDebouncedInputChange,_),s.state={searchQueryInputValue:""},s}return r(t,e),m(t,[{key:"componentWillReceiveProps",value:function(e){this.props.searchQuery!==e.searchQuery&&this.setState({searchQueryInputValue:e.searchQuery})}},{key:"componentWillUnmount",value:function(){this._disposed=!0}},{key:"_onDebouncedInputChange",value:function(e){this._disposed||this.props.onChange&&this.props.onChange(e)}},{key:"_onInputChange",value:function(e){var t=e.target.value;this.setState({searchQueryInputValue:t}),this._onDebouncedInputChange(t)}},{key:"render",value:function(){return d.React.createElement(v,{key:"header"},d.React.createElement(y,null,d.React.createElement(b,{placeholder:this._t("editor.controls.library.search"),onLiveChange:this._onInputChange,className:void 0,value:this.state.searchQueryInputValue})))}}]),t}(d.BaseComponent);t.a=g;var v=d.adonis.div("1tkmkv6","Header"),y=d.adonis.div("mz0a5q","InputContainer"),b=Object(d.adonis)(d.TextInputComponent)("py3uvl","TextInput")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),n(288)),_=n(290),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onImage","_onWebcamBack","_onWebcamActivated"),s.state.displayHeader=!1,s}return r(t,e),g(t,[{key:"_onImage",value:function(e){this.props.controls.onImage(e)}},{key:"_onWebcamBack",value:function(){this.setSharedState({webcamEnabled:!1})}},{key:"_onWebcamActivated",value:function(e){this.setSharedState({webcamEnabled:!0})}},{key:"_renderControls",value:function(){var e=this.getSharedState("webcamEnabled"),t=this.props.options.displayUploadInCanvas;return e?d.React.createElement(m.a,{onImage:this._onImage,onBack:this._onWebcamBack}):t?d.React.createElement(y,null,d.React.createElement(_.a,{large:!0,controls:this.props.controls,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this._onWebcamActivated,onImage:this._onImage})):void 0}}]),t}(d.CanvasControlsComponent);v.contextTypes=d.CanvasControlsComponent.contextTypes,t.a=v;var y=d.adonis.div("1up9ikz","LibraryUploadContainer")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(7),m=(n.n(d),n(5)),_=(n.n(m),n(289)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onWebcamReady","_onWebcamError","_onButtonClick","_onCancelClick"),s.state={webcamReady:!1},s}return r(t,e),g(t,[{key:"_onWebcamReady",value:function(){this.props.onReady&&this.props.onReady(),this.setState({webcamReady:!0})}},{key:"_onWebcamError",value:function(e){var t=this;m.ModalManager.instance.displayError(this._t("errors.title"),this._t("errors.webcamUnavailable.text",{error:e})).on("close",function(){return t.props.onBack()})}},{key:"_onButtonClick",value:function(e){e.preventDefault(),this._takePhoto()}},{key:"_onCancelClick",value:function(e){e.preventDefault(),this.props.onBack&&this.props.onBack()}},{key:"_takePhoto",value:function(){var e=this;this.state.webcamReady&&this._webcam.capture().then(function(t){e.props.onImage&&e.props.onImage(t)})}},{key:"render",value:function(){var e=this;return m.React.createElement(y,null,m.React.createElement(b,null,m.React.createElement(k,{onClick:this._onCancelClick},this._t("editor.cancel"))),m.React.createElement(w,null,m.React.createElement(C,{innerRef:function(t){e._videoContainer=t}},m.React.createElement(_.a,{flashURL:this._getAssetPath("fallback/webcam.swf"),ref:function(t){e._webcam=t},onWebcamError:this._onWebcamError,onWebcamAvailable:this._onWebcamReady}),m.React.createElement(S,{onClick:this._onButtonClick}))))}}]),t}(m.BaseComponent);t.a=v;var y=m.adonis.div("dehn6v","Container"),b=m.adonis.div("4d756t","Gradient"),k=m.adonis.div("1p4kwwq","CancelButton"),w=m.adonis.div("1j41msh","OuterVideoContainer"),C=m.adonis.div("1g72uw9","VideoContainer"),S=(m.adonis.video("1btv3tg",{visible:"jsuk9w"},"Video"),m.adonis.div("1fkab7z","Button"))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(38),g=n.n(_),v=n(32),y=n.n(v),b=n(5),k=(n.n(b),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),w=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||m()(t)).call(this,e));return n._bindAll("_onLoadedMetadata"),n.state={webcamAvailable:!1,useFlashFallback:!1},n._getUserMedia=null,n._webcamStream=null,n}return r(t,e),k(t,[{key:"componentDidMount",value:function(){var e=this;if(this._initGetUserMedia(),this._getUserMedia)this._getUserMedia({video:{optional:[{minWidth:320},{minWidth:640},{minWidth:1024},{minWidth:1280},{minWidth:1920},{minWidth:2560}]},audio:!1}).then(function(t){e._webcamStream=t;var n=e._videoElement;"srcObject"in n?n.srcObject=t:n.src=window.URL.createObjectURL(t)}).catch(function(t){e.props.onWebcamError&&e.props.onWebcamError(t)});else{var t=!1;window.Webcam||(window.Webcam={},t=!0),window.Webcam.flashNotify=function(n,i){switch(n){case"cameraLive":e.setState({webcamAvailable:!0},function(){e.props.onWebcamAvailable&&e.props.onWebcamAvailable()}),delete window.Webcam.flashNotify,t&&delete window.Webcam;break;case"error":e.props.onWebcamError&&e.props.onWebcamError(i),delete window.Webcam.flashNotify,t&&delete window.Webcam}}}}},{key:"componentWillUnmount",value:function(){this._disposeWebcam()}},{key:"_initGetUserMedia",value:function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this._getUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)),!this._getUserMedia){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;e&&(this._getUserMedia=function(t){return new h.a(function(n,i){return e.call(navigator,t,n,i)})})}this._getUserMedia||this.setState({useFlashFallback:!0})}},{key:"_disposeWebcam",value:function(){if(this._webcamStream){var e=this._webcamStream,t=e.getTracks()[0];t?t.stop():e.stop&&e.stop()}else this._flashWebcam&&this._flashWebcam._releaseCamera()}},{key:"capture",value:function(){var e=this;return this.state.webcamAvailable?this._videoElement&&!this._flashWebcam?new h.a(function(t,n){var i=e._videoElement;if(0===i.readyState)n(new Error("Webcam video not available"));else{var o=document.createElement("canvas");o.width=i.videoWidth,o.height=i.videoHeight;o.getContext("2d").drawImage(i,0,0);var r=new window.Image;r.addEventListener("load",function(){t(r)}),r.src=o.toDataURL("image/jpeg")}}):this._flashWebcam?new h.a(function(t,n){var i=e._flashWebcam._snap(),o=new Image;o.onload=function(){t(o)},o.src="data:image/jpeg;base64,"+i}):h.a.reject(new Error("Webcam video not available")):h.a.reject(new Error("Webcam video not available"))}},{key:"_getFlashFallbackComponent",value:function(){var e=this,t=this._container,n=t.offsetWidth,i=t.offsetHeight,o=640,r=480;i>n?(o=n||640,r=.75*n):(o=4/3*i,r=i||480);var a="width="+o+"&height="+r+"&dest_width=1024&dest_height=768&jpeg_quality=100&fps=24";return y.a.createElement("object",{classID:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-shockwave-flash",width:o,height:r,ref:function(t){e._flashWebcam=t},align:"middle"},y.a.createElement("param",{name:"wmode",value:"transparent"}),y.a.createElement("param",{name:"allowScriptAccess",value:"always"}),y.a.createElement("param",{name:"allowFullScreen",value:"false"}),y.a.createElement("param",{name:"movie",value:this.props.flashURL}),y.a.createElement("param",{name:"loop",value:"false"}),y.a.createElement("param",{name:"menu",value:"false"}),y.a.createElement("param",{name:"quality",value:"best"}),y.a.createElement("param",{name:"bgcolor",value:"#ffffff"}),y.a.createElement("param",{name:"flashvars",value:a}))}},{key:"_onLoadedMetadata",value:function(){var e=this;this.setState({webcamAvailable:!0},function(){e.props.onWebcamAvailable&&e.props.onWebcamAvailable()})}},{key:"render",value:function(){var e=this,t=this.state.useFlashFallback?this._getFlashFallbackComponent():y.a.createElement(C,{autoPlay:!0,visible:this.state.webcamAvailable&&!this.state.useFlashFallback,innerRef:function(t){e._videoElement=t},onLoadedMetadata:this._onLoadedMetadata});return y.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"},ref:function(t){e._container=t}},t)}}]),t}(b.BaseComponent);w.propTypes={flashURL:g.a.string,onWebcamAvailable:g.a.func,onWebcamError:g.a.func},t.a=w;var C=b.adonis.video("145pu2m",{visible:"jsuk9w"},"Video")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),n(124)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=d.ControlsStyles.PlainControlItem,v=d.ControlsStyles.PlainControlItemBackground,y=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),_(t,[{key:"render",value:function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return d.React.createElement(b,null,d.React.createElement(k,null,d.React.createElement(S,null,d.React.createElement(w,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},d.React.createElement(d.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onNewFile}),this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone"))),!this.state.dropZoneHovered&&this.props.webcamEnabled&&d.React.createElement(S,null,d.React.createElement(C,{style:e,className:void 0,onClick:this._onWebcamClick}))))}}]),t}(m.a);t.a=y;var b=Object(d.adonis)(g).div("1xesje3","Container"),k=Object(d.adonis)(v).div("z914p5","Background"),w=d.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),C=d.adonis.div("1jg5y1q","WebcamButton"),S=d.adonis.div("15u7gri","Row")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=n.n(d),_=n(292),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),g(t,null,[{key:"mapOperationsToSharedState",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.getOrCreate("adjustments"));return{brightness:t.getBrightness(),saturation:t.getSaturation(),contrast:t.getContrast(),gamma:t.getGamma(),exposure:t.getExposure(),shadows:t.getShadows(),highlights:t.getHighlights(),clarity:t.getClarity(),setBrightness:function(e){t.setBrightness(e)},setSaturation:function(e){t.setSaturation(e)},setContrast:function(e){t.setContrast(e)},setGamma:function(e){t.setGamma(e)},setExposure:function(e){t.setExposure(e)},setShadow:function(e){t.setShadow(e)},setHighlights:function(e){t.setHighlights(e)},setClarity:function(e){t.setClarity(e)},reset:function(){t.resetOptions()},setOperationOptions:function(e){t.set(e)}}}},{key:"isEnabled",value:function(e){return e.isToolAllowed("adjustment")&&e.isToolEnabled("adjustments")}}]),t}(d.BaseControls);v.clickAtPosition=d.BaseControls.clickAtPosition,v.getPreloadAssets=d.BaseControls.getPreloadAssets,v.identifier="adjustments",v.controlsComponent=_.a,v.canvasControlsComponent=d.BaseControls.canvasControlsComponent,v.iconPath="editor/controls/adjustments/icon.png",v.activeIconPath="editor/controls/adjustments/icon-active.png",v.requiredOperations=["adjustments"],v.defaultOptions={availableAdjustments:null},v.updatableOperations=["adjustments"],v.switchToDefaultControlsOnRemoval=!1,v.SECTIONS=[{identifier:"basics",items:["brightness","saturation","contrast","gamma"]},{identifier:"refinements",items:["clarity","exposure","shadows","highlights"]}],m.a.Controls.AdjustmentsControls=v,t.a=v},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(1),c=n.n(u),f=n(2),p=n.n(f),h=n(3),d=n.n(h),m=n(5),_=(n.n(m),n(293)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=m.GroupedControlsStyles.ControlGroupList,y=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return s._bindAll("_onResetDefaultClick"),s}return a(t,e),g(t,[{key:"_isAdjustmentAvailable",value:function(e){var t=this.props.options.availableAdjustments;return null===t||-1!==t.indexOf(e)}},{key:"_onResetDefaultClick",value:function(){this.sharedState.reset(),this.props.controls.addLocalHistorySnapshot("reset",!0)}},{key:"_onValueChange",value:function(e,t){this.sharedState.setOperationOptions(i({},e,t)),this.props.controls.addLocalHistorySnapshot(e,!0)}},{key:"_renderAdjustmentsControls",value:function(){var e=this,t=function(t){return m.React.createElement(m.CollapseSectionComponent,{key:t.identifier,title:e._t("editor.controls.adjustments.sections."+t.identifier),alwaysExpanded:!0},m.React.createElement(k,{className:void 0+t.identifier},n(t.items)))},n=function(t){return t.filter(function(t){return e._isAdjustmentAvailable(t)}).map(function(t){return e._makeItem(t)})};return this.props.controls.constructor.SECTIONS.filter(function(t){return t.items.filter(function(t){return e._isAdjustmentAvailable(t)}).length>0}).map(t)}},{key:"_makeItem",value:function(e){var t=this.sharedState[e];return m.React.createElement(_.a,{item:e,value:t,onValueChange:this._onValueChange.bind(this,e),className:void 0,key:e})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var e=this;return m.React.createElement(m.ScrollableListComponent,{direction:"vertical",innerListRef:function(t){e._list=t},innerRef:function(t){e._scrollbar=t}},m.React.createElement(b,null,m.React.createElement(w,null,m.React.createElement(m.ButtonComponent,{title:this._t("editor.controls.adjustments.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderAdjustmentsControls()))}}]),t}(m.ControlsComponent);y.contextTypes=m.ControlsComponent.contextTypes,y.RootElement=m.ControlsComponent.RootElement,t.a=y;var b=Object(m.adonis)(v).ul("x32ss4","SectionList"),k=m.adonis.ul("gz4y54","SectionItemList"),w=m.adonis.div("7abnmv","BottomSection")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(7),m=n.n(d),_=n(5),g=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),v=m.a.Operations.AdjustmentsOperation,y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onValueChange"),s._option=v.prototype.availableOptions[s.props.item],s}return r(t,e),g(t,[{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value}},{key:"_onValueChange",value:function(e){var t=this._option,n=t.minValue,i=t.midValue,o=t.maxValue;e=e<0?i+(i-n)*e/100:i+(o-i)*e/100,this.props.onBeforeValueChange&&this.props.onBeforeValueChange(e),this.context.editor.render(),this.setState({value:e}),this.props.onValueChange&&this.props.onValueChange(e)}},{key:"render",value:function(){var e=this._option,t=e.minValue,n=e.midValue,i=e.maxValue,o=this.props.value,r=100*(o<=n?(o-t)/(n-t)-1:(o-n)/(i-n));return o===t&&(r=-100),_.React.createElement(_.SliderControlComponent,{key:this.props.item,label:this._t("editor.controls.adjustments.items."+this.props.item),minValue:-100,maxValue:100,value:parseInt(r),onSliderValueChange:this._onValueChange,onValueChange:this._onValueChange,className:this.props.className,middleDot:!0})}}]),t}(_.SharedStateComponent);y.contextTypes=_.SharedStateComponent.contextTypes,t.a=y},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return l()(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(104),l=n.n(s),u=n(0),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(5)),y=n.n(v),b=n(295),k=n(297),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=g.Operations.SpriteOperation?g.Operations.SpriteOperation:{},S=C.BrushSprite,E=function(e){function t(e,n,i){o(this,t);var a=r(this,(t.__proto__||_()(t)).call(this,e,n,i));return a._onOperationRemoved=a._onOperationRemoved.bind(a),a}return a(t,e),w(t,[{key:"_onEnter",value:function(){var e=this,t=this.context.editor,n=t.operations.getOrCreate("sprite"),i=n.createBrush();n.addSprite(i),t.zoom.auto(!1,!1,function(){t.features.disable("zoom","drag");var n=t.getOutputDimensions(),i=Math.max(.05*n.min(),1);e._options.widthPresets&&e._options.widthPresets.length>0&&(i=e._options.sizePresets[0]),e.sharedState.set({brushSize:Math.round(i)})}),this.sharedState.set({operation:n,brushSprite:i,brushColor:g.Color.WHITE,brushSize:.1,brushHardness:50})}},{key:"_onLeave",value:function(){var e=this.context.editor,t=e.operations.get("sprite");if(t){[].concat(i(t.getSprites())).forEach(function(e){e instanceof S&&e.getPaths().length<=0&&t.removeSprite(e)})}e.features.enable("zoom","drag"),e.render()}},{key:"_onOperationRemoved",value:function(e){if(e===this.sharedState.get("operation")){var t=this.context.editor.operations.getOrCreate("sprite"),n=t.createBrush();t.addSprite(n),this.sharedState.set({operation:t,brushSprite:n})}}}],[{key:"mapOperationsToSharedState",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{operation:e.getOrCreate("sprite")}}},{key:"isEnabled",value:function(e){return e.isToolAllowed("brush")&&e.isToolEnabled("brush")}}]),t}(v.BaseControls);E.clickAtPosition=v.BaseControls.clickAtPosition,E.getPreloadAssets=v.BaseControls.getPreloadAssets,E.identifier="brush",E.controlsComponent=b.a,E.canvasControlsComponent=k.a,E.iconPath="editor/controls/brush/icon.png",E.activeIconPath="editor/controls/brush/icon-active.png",E.requiredOperations=["sprite"],E.defaultOptions={brushes:[],replaceBrushes:!1,availableBrushes:null},E.updatableOperations=["sprite"],E.switchToDefaultControlsOnRemoval=!1,y.a.Controls.BrushControls=E,t.a=E},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(8),_=n.n(m),g=n(3),v=n.n(g),y=n(7),b=(n.n(y),n(5)),k=(n.n(b),n(296)),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=v()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},S=y.Operations.SpriteOperation,E=void 0;S&&(E=y.Operations.SpriteOperation.BrushSprite.Brush);var x=b.GroupedControlsStyles.ControlGroupTitle,T=b.GroupedControlsStyles.ControlGroup,O=function(e){function t(){var e;o(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=r(this,(e=t.__proto__||v()(t)).call.apply(e,[this].concat(a)));return l._bindAll("_onBrushColorChanged","_onBrushHardnessChanged","_onBrushWidthChanged","_onOperationUpdated"),l._events=i({},b.Constants.EVENTS.OPERATION_UPDATED,l._onOperationUpdated),l._initBrushManager(),l}return a(t,e),w(t,[{key:"componentDidMount",value:function(){C(t.prototype.__proto__||v()(t.prototype),"componentDidMount",this).call(this),this._onBrushSelect(this._brushManager.getBrushes()[0])}},{key:"_initBrushManager",value:function(){this._brushManager=new b.BrushManager(this.context.ui,this.props.options)}},{key:"_onBrushColorChanged",value:function(e){var t=this.getSharedState("brushInstance").clone();t.setColor(e.clone()),this.setSharedState({brushInstance:t})}},{key:"_onBrushHardnessChanged",value:function(e){var t=this.getSharedState("brushInstance").clone();t.setHardness(e/100),this.setSharedState({brushInstance:t,brushHardness:Math.round(e)})}},{key:"sharedStateDidChange",value:function(e,t){e.brushSize!==t.brushSize&&this._onBrushWidthChanged(t.brushSize)}},{key:"_onBrushWidthChanged",value:function(e){var t=this.context.editor,n=t.getOutputDimensions(),i=this.getSharedState("brushInstance").clone();i.setSize(e/n.min()),this.setSharedState({brushInstance:i,brushSize:Math.round(e)})}},{key:"_onOperationUpdated",value:function(e){var t=this.context.editor;if(e===this.getSharedState("operation")){var n=this.getSharedState("brushSprite");if(n){var i=e.getSprites().filter(function(e){return e.getId()===n.getId()})[0];this.setSharedState({brushSprite:i})}t.render()}}},{key:"_onBrushSelect",value:function(e){var t=this,n=this.context.editor,i=n.getOutputDimensions(),s=this.getSharedState("brushSize")/i.min(),l=this.getSharedState("brushHardness")/100,u=this.getSharedState("brushColor"),c={size:s,color:u},f=void 0;if(e.prototype&&e.prototype instanceof E){f=new e(c)}else{var p=y.Utils.extend({},e);delete p.image;var h=function(e){function t(){return o(this,t),r(this,(t.__proto__||v()(t)).apply(this,arguments))}return a(t,e),t}(E);h.identifier=e.identifier,f=new h(y.Utils.extend({},p,c))}f.hasOption("hardness")&&f.setHardness(l),this._loadBrush(e,f).then(function(){t.setSharedState({brushInstance:f,brush:e})})}},{key:"_loadBrush",value:function(e,t){var n=this;return new _.a(function(i,o){if(e.constructor===Object){var r=new window.Image;r.addEventListener("load",function(){t.setImage(r),i()}),r.addEventListener("error",function(){o(new Error("Failed to load image at "+r.src))}),r.src=n._getAssetPath(e.image),r.crossOrigin="Anonymous"}else i()})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderBrushItems",value:function(){var e=this,t=this._brushManager.getBrushes();return t.length<=1?null:t.map(function(t){return b.React.createElement(k.a,{key:t.identifier,brush:t,selected:e.getSharedState("brush")===t,onClick:e._onBrushSelect.bind(e,t)})})}},{key:"_renderContent",value:function(){var e=this,t=this.getSharedState("brushInstance");return b.React.createElement(b.ScrollableListComponent,{direction:"vertical",innerListRef:function(t){e._list=t},innerRef:function(t){e._scrollbar=t}},b.React.createElement(D,null,b.React.createElement(I,null,this._t("editor.controls.brush.settings")),b.React.createElement(P,null,b.React.createElement(b.ColorSelectionComponent,{value:this.getSharedState("brushColor"),onChange:this._onBrushColorChanged})),b.React.createElement(R,{label:this._t("editor.controls.brush.width"),minValue:1,maxValue:100,value:this.getSharedState("brushSize"),onSliderValueChange:this._onBrushWidthChanged,onValueChange:this._onBrushWidthChanged,className:void 0}),b.React.createElement(R,{label:this._t("editor.controls.brush.hardness"),minValue:0,maxValue:100,disabled:!(t&&t.hasOption("hardness")),value:this.getSharedState("brushHardness"),onSliderValueChange:this._onBrushHardnessChanged,onValueChange:this._onBrushHardnessChanged})),b.React.createElement(j,null,b.React.createElement(b.ScrollbarComponent,{direction:"vertical"},b.React.createElement(B,null,this._renderBrushItems()))))}}]),t}(b.ControlsComponent);O.contextTypes=b.ControlsComponent.contextTypes,O.RootElement=b.ControlsComponent.RootElement,t.a=O;var R=Object(b.adonis)(b.SliderControlComponent)("6vpx1b","SliderControl"),D=Object(b.adonis)(T).div("r92vc7","Settings"),I=Object(b.adonis)(x).div("120drhm","SettingsTitle"),P=b.adonis.div("yzsuxp","ColorSelection"),j=b.adonis.div("16dil83","Brushes"),B=b.adonis.ul("1lb1mg4","BrushList")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(8),m=n.n(d),_=n(3),g=n.n(_),v=n(7),y=(n.n(v),n(5)),b=(n.n(y),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=y.ControlsStyles.PlainControlItemBackground,C=v.Operations.SpriteOperation,S=void 0,E=void 0;C&&(S=C.BrushSprite.Brush,E=C.BrushSprite.Path);var x=v.Math.Vector2,T=function(e){function t(){return i(this,t),o(this,(t.__proto__||g()(t)).apply(this,arguments))}return r(t,e),b(t,[{key:"_loadBrush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush;return new m.a(function(n,i){if(t.constructor===Object){var o=new window.Image;o.addEventListener("load",function(){e._brush.setImage(o),n()}),o.addEventListener("error",function(){i(new Error("Failed to load image at "+o.src))}),o.src=e._getAssetPath(t.image),o.crossOrigin="Anonymous"}else n()})}},{key:"_drawBrush",value:function(){var e=new E(null,{brush:this._brush},this._canvas);e.addControlPoint(new x(.1,.5)),e.addControlPoint(new x(.9,.5)),e.render(new x(this._canvas.width,this._canvas.height))}},{key:"_instantiateBrush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush,t={color:v.Color.WHITE,size:.25};if(e.prototype&&e.prototype instanceof S){var n=e;this._brush=new n(t)}else{var a=v.Utils.extend({},e);delete a.image;var s=function(e){function t(){return i(this,t),o(this,(t.__proto__||g()(t)).apply(this,arguments))}return r(t,e),t}(S);s.identifier=e.identifier,this._brush=new s(v.Utils.extend({},a,t))}}},{key:"componentDidMount",value:function(){var e=this;k(t.prototype.__proto__||g()(t.prototype),"componentDidMount",this).call(this),this._instantiateBrush();var n=this._canvas,i=n.offsetWidth,o=n.offsetHeight;this._canvas.width=i,this._canvas.height=o,this._loadBrush().then(function(t){e._drawBrush()})}},{key:"render",value:function(){var e=this;return y.React.createElement(O,{onClick:this.props.onClick,selected:this.props.selected,className:void 0,"data-selected":this.props.selected},y.React.createElement(R,{innerRef:function(t){e._canvas=t}}))}}]),t}(y.BaseComponent);t.a=T;var O=Object(y.adonis)(w).li("8908c2",{selected:"120drhm"},"BrushListItem"),R=y.adonis.canvas("1ssoezr","Canvas")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(7),g=(n.n(_),n(5)),v=(n.n(g),n(77)),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},k=_.Operations.SpriteOperation?_.Operations.SpriteOperation:{},w=k.BrushSprite,C=_.Math.Vector2,S=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onMouseEnter","_onMouseLeave","_onMouseMove","_onDrawStart","_onDraw","_onDrawStop"),s.state=_.Utils.extend(s.state,{cursorPosition:new C(0,0),canvasClickDisabled:!0}),s}return r(t,e),y(t,[{key:"_selectNextSprite",value:function(){}},{key:"_onDrawStart",value:function(e){var t=this.context.editor,n=t.getOutputDimensions();this._initialDrawPosition=e.clone();var i=this.getSharedState("brushSprite"),o=this.getSharedState("brushInstance"),r=this.getSharedState("operation");i||(i=r.createBrush(),r.addSprite(i),this.setSharedState({brushSprite:i})),this._currentPath=i.createPath(o),this._currentPath.addControlPoint(e.clone().divide(n)),this._lastDrawPosition=this._initialDrawPosition.clone(),this._lastCursorPosition=this._initialDrawPosition.clone()}},{key:"_onDraw",value:function(e,t,n){var i=this.context.editor,o=i.getOutputDimensions(),r=i.getOutputTextureDimensions(),a=this._lastCursorPosition.clone().add(n),s=i.zoom.level,l=this.getSharedState("brushSize");a.clone().subtract(this._lastDrawPosition).abs().len()/s>=l/10&&(this._currentPath.addControlPoint(a.clone().divide(o)),this.getSharedState("brushSprite").render(r),this._lastDrawPosition.copy(a)),this._lastCursorPosition.copy(a)}},{key:"_onDrawStop",value:function(){this._currentPath.setClosed(!0);var e=this.context.editor,t=e.getOutputTextureDimensions();this.getSharedState("brushSprite").render(t),this.props.controls.addLocalHistorySnapshot(),this._currentPath=null}},{key:"_onMouseEnter",value:function(){this.setState({cursorVisible:!0})}},{key:"_onMouseLeave",value:function(){this.setState({cursorVisible:!1})}},{key:"_onMouseMove",value:function(e){var t=g.Utils.getEventPosition(e),n=this._innerContainer.getBoundingClientRect();t.subtract(n.left,n.top),this.setState({cursorPosition:t})}},{key:"_getPropsForSprite",value:function(e){var n=b(t.prototype.__proto__||m()(t.prototype),"_getPropsForSprite",this).call(this,e);return e instanceof w&&(n.hideContent=!1),n}},{key:"_getCursorStyle",value:function(){return{width:this.getSharedState("brushSize")+8,height:this.getSharedState("brushSize")+8,left:this.state.cursorPosition.x,top:this.state.cursorPosition.y,marginLeft:-.5*(this.getSharedState("brushSize")+8),marginTop:-.5*(this.getSharedState("brushSize")+8)}}},{key:"_renderOverlayControls",value:function(){return g.React.createElement(g.DraggableComponent,{onStart:this._onDrawStart,onDrag:this._onDraw,onStop:this._onDrawStop},g.React.createElement(E,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseMove:this._onMouseMove,className:void 0},g.React.createElement(x,{style:this._getCursorStyle(),visible:this.state.cursorVisible})))}}]),t}(v.a);S.contextTypes=v.a.contextTypes,t.a=S;var E=g.adonis.div("1sc5z35","BrushCanvasControls"),x=g.adonis.div("y4v90o",{visible:"2jlos"},"Cursor")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=m()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),l=n(0),u=n.n(l),c=n(6),f=n.n(c),p=n(1),h=n.n(p),d=n(2),m=n.n(d),_=n(3),g=n.n(_),v=n(5),y=(n.n(v),n(78)),b=n(26),k=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function e(t,n,i){null===t&&(t=Function.prototype);var o=f()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},S=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(r)));return s.state={renderAsSVG:!1,svgAttributes:{}},s}return r(t,e),w(t,[{key:"componentDidMount",value:function(){var e=this;if(C(t.prototype.__proto__||g()(t.prototype),"componentDidMount",this).call(this),this.props.hideContent)return null;var n=this.props.sprite;n.getImage().src.match(/\w+\.svg(?=\?|$)/i)&&"none"!==n.getTintMode()&&b.a.loadXHR(n.getImage().src,"image/svg+xml").then(function(t){for(var n=t.responseXML.documentElement.attributes,i={},o=0;o<n.length;o++){var r=n[o],a=r.name,s=r.value;"xmlns:xlink"===a&&(a="xmlnsXlink"),i[a]=s}var l=t.responseText.match(/<svg\b[^>]*>([\s\S]*?)<\/svg>/im)[1];l=l.replace(/\s+?fill=["'].*?["']/gi,""),e.setState({renderAsSVG:!0,svgContent:l,svgAttributes:i})})}},{key:"_onBeforeScale",value:function(){var e=this.props.sprite;this._initialOptions={dimensions:e.getDimensions().clone()}}},{key:"_onScale",value:function(e){var t=this.context.editor,n=this._initialOptions.dimensions;this.props.sprite.set({dimensions:n.clone().multiply(e/t.zoom.level)}),this.forceUpdate(),t.render()}},{key:"_getSpriteDimensions",value:function(){var e=this.context.editor;return this.props.sprite.getDimensions().clone().multiply(e.zoom.level)}},{key:"_getContainerStyle",value:function(){var e=this.context.editor,t=e.getOutputDimensions(),n=this.props.sprite,i=n.getPosition().clone().multiply(t),o=180*n.getRotation()/Math.PI,r="rotateZ("+o.toFixed(2)+"deg)",a=n.getDimensions().clone().multiply(e.zoom.level);return{width:a.x,height:a.y,left:i.x,top:i.y,marginLeft:-.5*a.x,marginTop:-.5*a.y,transform:r,MozTransform:r,msTransform:r,WebkitTransform:r,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}}},{key:"_getContentStyle",value:function(){var e=this.props.sprite,t="rotateY("+(e.getFlipHorizontally()?180:0)+"deg) rotateX("+(e.getFlipVertically()?180:0)+"deg)",n={opacity:e.getAlpha(),transform:t,MozTransform:t,msTransform:t,WebkitTransform:t};return this.state.renderAsSVG&&(n.fill=e.getTintColor().toRGBA()),n}},{key:"_renderContent",value:function(){if(this.props.hideContent)return null;var e=this.props.sprite,t=this.state.svgAttributes;return this.state.renderAsSVG?React.createElement(x,k({style:this._getContentStyle(),dangerouslySetInnerHTML:{__html:this.state.svgContent}},t)):React.createElement(E,{src:e.getImage().src,style:this._getContentStyle()})}}]),t}(y.a);S.contextTypes=y.a.contextTypes,S.MIN_WIDTH=y.a.MIN_WIDTH,t.a=S;var E=v.adonis.img("1ssoezr","Image"),x=v.adonis.svg("1ssoezr","SVGImage")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(5)),y=(n.n(v),n(78)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=g.Math.Vector2,C=function(e){function t(){var e;o(this,t);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(i)));return s._bindAll("_onTextChange","_onBlur","_onItemDoubleClick","_onWidthDrag","_onWidthDragStop"),s.state={editing:!1,updateBecauseIESucks:!1},s}return a(t,e),b(t,[{key:"_isDraggingDisabled",value:function(){return k(t.prototype.__proto__||_()(t.prototype),"_isDraggingDisabled",this).call(this)||this.state.editing}},{key:"enterEditMode",value:function(){var e=this,t=this.context.editor,n=this.props.sprite;n.setVisible(!1),t.render(),this.setState({editing:!0},function(){n._edited||(n.setText(""),e._textField.value="",n._edited=!0,e.forceUpdate()),e._textField.focus(),e._textField.select()})}},{key:"leaveEditMode",value:function(){var e=this.context.editor;this.props.sprite.setVisible(!0),e.render(),this.setState({editing:!1})}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"_onTakeToFront",value:function(){var e;this.leaveEditMode();for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];(e=k(t.prototype.__proto__||_()(t.prototype),"_onTakeToFront",this)).call.apply(e,[this].concat(i))}},{key:"_onFlipHorizontally",value:function(){var e;this.leaveEditMode();for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];(e=k(t.prototype.__proto__||_()(t.prototype),"_onFlipHorizontally",this)).call.apply(e,[this].concat(i))}},{key:"_onDuplicate",value:function(){var e;this.leaveEditMode();for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];(e=k(t.prototype.__proto__||_()(t.prototype),"_onDuplicate",this)).call.apply(e,[this].concat(i))}},{key:"_onSpriteUpdate",value:function(e,n){var i=this;v.Utils.Browser.isIElte(10)&&n.alignment&&e.getAlignment()!==n.alignment&&this.setState({updateBecauseIESucks:!0},function(){Object(v.requestAnimationFrame)(function(){i.setState({updateBecauseIESucks:!1})})}),k(t.prototype.__proto__||_()(t.prototype),"_onSpriteUpdate",this).call(this)}},{key:"_onWidthDragStart",value:function(e,t,n){var i=this.context.editor,o=this.props.sprite,r=o.getAnchor();this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var a=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),s=o.getDimensions(i.getSDK(),i.getOutputDimensions()),l=new w(s.width,s.height),u=a.clone().subtract(l.clone().multiply(r)).add(l.clone().multiply(.5)).round(),c=n.clone().subtract(this._containerOffset).subtract(u);this._initialScaleSettings={maxWidth:o.getMaxWidth(),mouseDistanceFromCenter:c},this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onWidthDrag",value:function(e){var t=this.props.sprite,n=t.getRotation(),i=this._initialScaleSettings.mouseDistanceFromCenter,o=i.clone().add(e),r=Math.cos(n),a=Math.sin(n),s=Math.max(Math.abs(2*(o.x*r+o.y*a)),50)/this._imageBoundingBox.width;t.setMaxWidth(s),this.context.editor.render()}},{key:"_onWidthDragStop",value:function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_onBlur",value:function(){this.leaveEditMode();var e=this.props.sprite;e&&""===e.getText()&&(e.setText(this._t("editor.controls.text.defaultText")),e._edited=!1)}},{key:"_onTextChange",value:function(e){this.props.sprite.setText(e.target.value),this.forceUpdate()}},{key:"_onItemDoubleClick",value:function(){this.props.selected&&this.enterEditMode()}},{key:"_onBeforeScale",value:function(){var e=this.props.sprite;this._initialOptions={maxWidth:e.getMaxWidth(),fontSize:e.getFontSize()}}},{key:"_onScale",value:function(e){var t=this._initialOptions,n=t.maxWidth,i=t.fontSize,o=this.props.sprite;o.set({maxWidth:n*e,fontSize:i*e}),this.context.mediator.emit(v.Constants.EVENTS.TEXT_SCALED,o),this.forceUpdate()}},{key:"_getContainerStyle",value:function(){var e=this.context.editor,t=e.getOutputDimensions(),n=this.props.sprite,i=n.getPosition().clone().multiply(t),o=180*n.getRotation()/Math.PI,r="rotateZ("+o.toFixed(2)+"deg)",a=n.getMaxWidth()*t.x,s=n.getDimensions(e.getSDK(),t).y;return{width:a,height:s,left:i.x,top:i.y,marginLeft:-.5*a,marginTop:-.5*s,transform:r,MozTransform:r,msTransform:r,WebkitTransform:r,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}}},{key:"_getTextStyle",value:function(){var e=this.context.editor,t=this.props.sprite,n=e.getSDK(),i=e.getOutputDimensions(),o=t.getDOMStyle(n,i),r=this._getAbsoluteSpritePosition(),a=t.getDimensions(n,i);return o.height=Math.min(a.y,i.y-r.y+a.y/2),o}},{key:"_renderKnobs",value:function(){var e=this,n=k(t.prototype.__proto__||_()(t.prototype),"_renderKnobs",this).call(this);return["left","right"].forEach(function(t){var o="width-"+t,r=i({},t,!0);n.push(v.React.createElement(v.DraggableComponent,{key:o,onStart:e._onWidthDragStart.bind(e,t),onDrag:e._onWidthDrag,onStop:e._onWidthDragStop},v.React.createElement(x,r)))}),n}},{key:"_getItemControlsProps",value:function(){return{onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd}}},{key:"_renderContent",value:function(){var e=this,t=this.props,n=t.sprite,i=t.selected,o=this.state,r=o.editing,a=o.updateBecauseIESucks,s=[];return this.props.hideContent&&!this.state.editing||s.push(v.React.createElement(S,{key:"text-field",editing:r,innerRef:function(t){e._textField=t},style:this._getTextStyle(),defaultValue:n.getText(),onBlur:this._onBlur,onChange:this._onTextChange,updateBecauseIESucks:a})),this.state.editing||s.push(v.React.createElement(E,{key:"disabled-overlay",className:void 0,selected:i})),s}}]),t}(y.a);C.contextTypes=y.a.contextTypes,C.MIN_WIDTH=100,t.a=C;var S=v.adonis.textarea("12u5t8c",{updateBecauseIESucks:"ckktkq",editing:"15kzu1c"},"TextField"),E=v.adonis.div("8gacw5","DisabledOverlay"),x=v.adonis.div("jqmmm4",{left:"tr97e1",right:"1llojum"},"WidthControl")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(78)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"componentDidMount",value:function(){y(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this);var e=this.props.sprite.getCanvas();this._brush&&this._appendCanvas(e)}},{key:"componentWillReceiveProps",value:function(e){if(e.sprite!==this.props.sprite){var t=this.props.sprite.getCanvas();if(t.parentNode.removeChild(t),this._brush){var n=e.sprite.getCanvas();this._appendCanvas(n)}}}},{key:"_appendCanvas",value:function(e){e.style.width="100%",e.style.height="100%",this._brush.appendChild(e)}},{key:"_renderOverlayControls",value:function(){return null}},{key:"render",value:function(){var e=this;return this.props.hideContent?null:_.React.createElement(k,{innerRef:function(t){e._brush=t}})}}]),t}(g.a);t.a=b;var k=_.adonis.div("8gacw5","BrushItem")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(7),m=(n.n(d),n(5)),_=n.n(m),g=n(302),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),v(t,null,[{key:"mapOperationsToSharedState",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.getOrCreate("filter"));return{intensity:t?100*t.getIntensity():100,identifier:t?t.getIdentifier():null,filter:t?t.filter:null,setIntensity:function(e){t&&t.setIntensity(e/100)},setFilter:function(e){t&&t.setFilter(e)},setIdentifier:function(e){t&&t.setIdentifier(e)},setOperationOptions:function(e){t.set(e)}}}},{key:"isEnabled",value:function(e){return e.isToolEnabled("filter")&&e.isToolAllowed("filter")}},{key:"getPreloadAssets",value:function(e){var t=[],n=e.getOptions(),i=d.Utils.defaults(n.editor.controlsOptions.filter,this.defaultOptions);return new m.FilterManager(e.getUI(),i).getFiltersForCategory("all").forEach(function(e){void 0!==e.lutImage&&t.push([e.lutImage,!1])}),t}}]),t}(m.BaseControls);y.clickAtPosition=m.BaseControls.clickAtPosition,y.identifier="filter",y.controlsComponent=g.a,y.canvasControlsComponent=m.BaseControls.canvasControlsComponent,y.iconPath="editor/controls/filter/icon.png",y.activeIconPath="editor/controls/filter/icon-active.png",y.requiredOperations=["filter","transform"],y.updatableOperations=["filter"],y.switchToDefaultControlsOnRemoval=!1,y.defaultOptions={categories:[],replaceCategories:!1,availableFilters:null},_.a.Controls.FilterControls=y,t.a=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(8),m=n.n(d),_=n(3),g=n.n(_),v=n(7),y=n.n(v),b=n(5),k=(n.n(b),n(125)),w=n(15),C=n(303),S=n(304),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=g()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},T=void 0;v.Operations.FilterOperation&&(T=v.Operations.FilterOperation.Filters.IdentityFilter);var O=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(r)));s._bindAll("_onIntensityChanged","_onListScroll");var l=s.context,u=l.ui,c=l.editor,f=l.theme;return s._loadedFilters=[],s._filterPreviewRenderer=new S.a(c),s._renderQueue=new k.a(1,1/0,f.listItemSlideInDelay),s._filterManager=new b.FilterManager(u,s.props.options),s._filterPreviewQueue=[],s._filterPreviews=[],s._category="all",s}return r(t,e),E(t,[{key:"fixStyles",value:function(){var e=this;return x(t.prototype.__proto__||g()(t.prototype),"fixStyles",this).call(this).then(function(){e._onListScroll()})}},{key:"componentDidMount",value:function(){var e=this;x(t.prototype.__proto__||g()(t.prototype),"componentDidMount",this).call(this),this._filterPreviewRenderer.init(),this._renderPreviewsAnimationFrame=Object(w.b)(function(){e._renderPreviews()})}},{key:"componentWillUnmount",value:function(){x(t.prototype.__proto__||g()(t.prototype),"componentWillUnmount",this).call(this),this._renderPreviewsAnimationFrame&&Object(w.a)(this._renderPreviewsAnimationFrame),this._renderQueue.dispose(),this._filterPreviewRenderer.dispose(),this._disposed=!0,window.clearInterval(this._interval)}},{key:"_renderPreviews",value:function(){var e=this,t=this.context.editor,n=t.getSDK().getRenderer(),i=this._getVisibleFilters().filter(function(t){return-1===e._loadedFilters.indexOf(t)});n.isOfType(y.a.RendererType.WEBGL)?i.forEach(function(t){e._loadedFilters.push(t),e._renderQueue.add(function(){return e._filterManager.instantiateFilterWithIdentifier(t.identifier).then(function(n){if(!e._disposed)return e._filterPreviewRenderer.render(n).then(function(n){e._filterPreviews[t.identifier]=n,e.forceUpdate()})})})}):(this._loadedFilters=this._loadedFilters.concat(i),i.forEach(function(t){e._renderQueue.add(function(){return new m.a(function(n){e._filterPreviews[t.identifier]=e._getAssetPath("editor/controls/filter/filters/"+t.identifier+".png",!0),e.forceUpdate(),n()})})}))}},{key:"_getVisibleFilters",value:function(){for(var e=[T].concat(this._filterManager.getFiltersForCategory(this._category)),t=[],n=this._container.getBoundingClientRect(),i=0,o=e.length;i<o;i++){var r=e[i],a=this.refs["filter-"+r.identifier].container,s=a.getBoundingClientRect();if(!(s.top>n.bottom+n.height||s.bottom<n.top))t.push(r);else if(t.length)break}return t}},{key:"_onListScroll",value:function(e){this._renderPreviews()}},{key:"_onItemClick",value:function(e){var t=this;this.sharedState.identifier!==e&&this._filterManager.instantiateFilterWithIdentifier(e).then(function(n){t.sharedState.setOperationOptions({filter:n,identifier:e,intensity:1}),t.context.editor.render()})}},{key:"_onIntensityChanged",value:function(e){this.sharedState.setIntensity(e)}},{key:"_renderListItems",value:function(){var e=this,t=this._filterManager.getFiltersForCategory(this._category),n=this.sharedState.identifier,i=this.sharedState.intensity,o=this._filterPreviews;return[T].concat(t).map(function(r,a){var s=r.identifier,l=!o[s]&&a===e._loadedFilters.length,u=s===n;return b.React.createElement(D,{key:s,"data-selected":u,"data-identifier":s,className:void 0},b.React.createElement(C.a,{ref:"filter-"+s,filter:r,identifier:s,lastChild:r===t[t.length-1],onClick:e._onItemClick.bind(e,s),selected:u,intensity:i,displaySlider:r!==T,onIntensityChanged:e._onIntensityChanged,visible:!!o[s],previewUrl:o[s]}),l&&b.React.createElement(I,null))})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var e=this;return b.React.createElement(b.ScrollableListComponent,{direction:"vertical",onScroll:this._onListScroll,innerRef:function(t){e._scrollbar=t}},b.React.createElement(R,null,this._renderListItems()))}}]),t}(b.ControlsComponent);O.contextTypes=b.ControlsComponent.contextTypes,O.propTypes=b.ControlsComponent.propTypes,O.RootElement=b.ControlsComponent.RootElement,t.a=O;var R=b.adonis.ul("9uviv9","List"),D=b.adonis.li("13hv8io","ListItemContainer"),I=Object(b.adonis)(b.LoadingIndicatorComponent)("11ztmqh","LoadingIndicator")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),l=n(0),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=_.ControlsStyles.ControlItem,b=_.ControlsStyles.ControlItemActiveOverlay,k=_.ControlsStyles.ControlItemTitle,w=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s.state={hovered:!1},s}return r(t,e),v(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.previewUrl!==e.previewUrl||this.props.selected!==e.selected||this.props.visible!==e.visible||this.state.hovered!==t.hovered||this.props.filter!==e.filter||!(this.props.intensity===e.intensity||!e.selected)}},{key:"render",value:function(){var e=this,t=this.props,n=t.lastChild,i=t.onClick,o=t.onIntensityChanged,r=t.selected,a=t.intensity,s=t.displaySlider,l=t.visible,u=t.filter,c=null;this.props.previewUrl&&(c=_.React.createElement(T,{src:this.props.previewUrl}));var f=this.context.theme.transitionDuration,p={lastChild:n,onClick:i,visible:l};return _.React.createElement(C,g({},p,{animated:!0,innerRef:function(t){e._container=t},onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}}),_.React.createElement(E,{selected:r},c,_.React.createElement(_.Transition,{active:r&&s,enterProp:"rendered",enterDuration:1e3*f,appearProp:"visible",appearDuration:1e3*f,leaveDuration:1e3*f},r&&s&&_.React.createElement(S,null,_.React.createElement(_.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:a,onChange:o}))),_.React.createElement(x,{hovered:this.state.hovered},this._t("editor.controls.filter.filters."+u.identifier)||u.defaultName),_.React.createElement(_.Transition,{active:r,enterProp:"rendered",enterDuration:1e3*f,appearProp:"visible",appearDuration:1e3*f,leaveDuration:1e3*f},_.React.createElement(O,{selected:r}))))}},{key:"container",get:function(){return this._container}}]),t}(_.BaseComponent);w.contextTypes=_.BaseComponent.contextTypes,t.a=w;var C=Object(_.adonis)(y).div("120drhm",{lastChild:"229bd5"},"Item"),S=_.adonis.div("19g9ike",{visible:"zgbg08",rendered:"2jlos"},"Slider"),E=_.adonis.div("rf12k1","ItemContainer"),x=Object(_.adonis)(k).span("hpn4lp","ItemTitle"),T=_.adonis.img("3x5zfy","Preview"),O=Object(_.adonis)(b).div("120drhm","Overlay")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(0),r=n.n(o),a=n(7),s=n.n(a),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=a.Math.Vector2,c=new u(180,80),f=function(){function e(t){i(this,e),this._editor=t,this._disposed=!1}return l(e,[{key:"init",value:function(){this._initSDK()}},{key:"render",value:function(e){var t=this;return this._filterOperation.setFilter(e),this._sdk.render().then(function(){return t._sdk.getCanvas().toDataURL("image/png")})}},{key:"_initSDK",value:function(){var e=this._editor.getOptions(),t=e.logLevel,n=e.debug,i=e.license,o=e.editor,r=o.smoothDownscaling,a=o.smoothUpscaling,l=o.preferredRenderer,u={logLevel:t,debug:n,pixelRatio:1,smoothDownscaling:r,smoothUpscaling:a,transparent:!0,license:i,image:this._editor.getSDK().getImage(),renderMode:"export",versionCheck:!1,displayWelcomeMessage:!1};this._sdk=new s.a(l,u),this._sdk.resizeTo(c),this._filterOperation=this._sdk.createOperation("filter"),this._transformOperation=this._sdk.createOperation("transform");var f=this._calculateTransformOptions(),p=f.start,h=f.end,d=f.textureScale;this._transformOperation.set({start:p,end:h,textureScale:d}),this._sdk.render()}},{key:"_calculateTransformOptions",value:function(){var e=this._transformOperation.getInputDimensions(),t=e.x/e.y,n=new u,i=new u,o=c.x/c.y;if(t<=o){var r=1/e.y*(e.x/o);n.set(0,(1-r)/2),i.set(1,1-n.y)}else{var a=1/e.x*(o*e.y);n.set((1-a)/2,0),i.set(1-n.x,1)}var s=i.clone().subtract(n),l=e.clone().multiply(s),f=c.x/l.x;return{dimensions:c,start:n,end:i,textureScale:f}}},{key:"dispose",value:function(){this._sdk&&this._sdk.dispose()}},{key:"isDisposed",value:function(){return this._disposed}}]),e}();t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),n(306)),_=(n(126),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onBlurRadiusChanged"),s}return r(t,e),_(t,[{key:"_isModeAvailable",value:function(e){var t=this.props.options.availableModes;return"none"===e||null===t||-1!==t.indexOf(e)}},{key:"_onItemClick",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.sharedState.setSelectedFocus(e)}},{key:"_onBlurRadiusChanged",value:function(e){this.sharedState.setBlurRadius(e)}},{key:"_renderListItems",value:function(){var e=this,t=this.props.controls,n=this.sharedState.operationIdentifier,i=this.sharedState.selectedFocus,o=this.sharedState.blurRadius;return t.constructor.ITEMS.filter(function(t){return e._isModeAvailable(t.identifier)}).map(function(t){var r=e._getAssetPath(t.backgroundImagePath,!0),a=e._getAssetPath(t.activeBackgroundImagePath,!0),s=t.identifier===i;return d.React.createElement(m.a,{key:t.identifier,title:e._t("editor.controls.focus.items."+t.identifier),selected:s,showSlider:!!n,blurRadius:o,onBlurRadiusChanged:e._onBlurRadiusChanged,backgroundImagePath:r,activeBackgroundImagePath:a,onClick:e._onItemClick.bind(e,t,!0,!1)})},this)}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var e=this;return d.React.createElement(d.ScrollableListComponent,{direction:"vertical",innerListRef:function(t){e._list=t},innerRef:function(t){e._scrollbar=t}},d.React.createElement(v,null,this._renderListItems()))}}]),t}(d.ControlsComponent);g.contextTypes=d.ControlsComponent.contextTypes,g.propTypes=d.ControlsComponent.propTypes,g.RootElement=d.ControlsComponent.RootElement,t.a=g;var v=d.adonis.ul("1snluvd","List")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.ControlItem,g=d.ControlsStyles.ControlItemTitle,v=d.ControlsStyles.ControlItemActiveOverlay,y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onSliderValueChanged"),s}return r(t,e),m(t,[{key:"_onSliderValueChanged",value:function(e){var t=this.props.onBlurRadiusChanged,n=this.sharedState.inputDimensions,i=n.min();t&&t(e/i)}},{key:"_renderSlider",value:function(){var e=this.props,t=e.selected,n=e.showSlider,i=e.blurRadius;if(!t||!n)return null;var o=this.sharedState.inputDimensions,r=Math.min(180,Math.round(.1*o.min())),a=o.min();return d.React.createElement(d.SliderComponent,{minValue:0,maxValue:r,valueUnit:"",middleDot:!1,value:i*a,onChange:this._onSliderValueChanged})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.backgroundImagePath,i=e.activeBackgroundImagePath,o=e.selected,r=e.onClick,a=e.showSlider,s={backgroundImage:"url('"+(o?i:n)+"')"},l=this.context.theme.transitionDuration;return d.React.createElement(b,{selected:o,"data-selected":o,className:void 0,onClick:r,style:s},d.React.createElement(k,{selected:o,withSlider:o&&a},t),d.React.createElement(C,{visible:o&&a},this._renderSlider()),d.React.createElement(d.Transition,{active:o,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},d.React.createElement(w,{selected:!0})))}}]),t}(d.SharedStateComponent);y.contextTypes=d.SharedStateComponent.contextTypes,t.a=y;var b=Object(d.adonis)(_).li("19qom6j","ListItem"),k=Object(d.adonis)(g).div("1cwztpc",{selected:"2znik8",withSlider:"fsvvyb"},"ListItemTitle"),w=Object(d.adonis)(v).div("rctda3","ListItemOverlay"),C=d.adonis.div("chwlso",{visible:"vpr3tu"},"Slider")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(1),c=n.n(u),f=n(2),p=n.n(f),h=n(3),d=n.n(h),m=n(7),_=(n.n(m),n(5)),g=(n.n(_),n(308)),v=n(309),y=n(310),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(){var e;o(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=r(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(a)));return l._bindAll("_onZoomDone"),l._events=i({},_.Constants.EVENTS.ZOOM_DONE,l._onZoomDone),l.state=m.Utils.extend(l.state,{zoomDone:!1}),l}return a(t,e),b(t,[{key:"_onZoomDone",value:function(){this.setState({zoomDone:!0})}},{key:"_renderControls",value:function(){var e=this.sharedState.selectedFocus,t=void 0;switch(e){case"radial":t=g.a;break;case"linear":t=v.a;break;case"mirrored":t=y.a;break;default:return _.React.createElement("div",null)}return _.React.createElement(t,{zoomDone:this.state.zoomDone})}}]),t}(_.CanvasControlsComponent);k.contextTypes=_.CanvasControlsComponent.contextTypes,t.a=k},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(5)),y=(n.n(v),n(15)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=v.ControlsStyles.Knob,C=v.ControlsStyles.FullContainer,S=g.Math.Vector2,E=g.Math.Rectangle,x=function(e){function t(){var e;o(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a)));return l._bindAll("_onCircleDragStart","_onCircleDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone"),l.state=g.Utils.extend(l.state,{circlePosition:new S,circleDimensions:new S,knobPosition:new S,visible:!1}),l._knobChangedManually=!1,l._events=i({},v.Constants.EVENTS.ZOOM_DONE,l._onZoomDone),l.props.zoomDone&&Object(y.b)(function(){l._onZoomDone()}),l}return a(t,e),b(t,[{key:"componentDidMount",value:function(){k(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"sharedStateDidChange",value:function(e,t){this._operation&&t.operation&&this._operation!==t.operation&&this._operation.constructor===t.operation.constructor&&(t.operation.set(this._operation.serializeOptions()),this._operation=t.operation)}},{key:"_onZoomDone",value:function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"_onCircleDragStart",value:function(){this._initialPosition=this.sharedState.radialFocus.position.clone(),this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onCircleDrag",value:function(e){var t=this.context.editor,n=t.getOutputDimensions(),i=e.clone().divide(n),o=this._initialPosition.clone().add(i),r=this._initialKnobPosition.clone().add(e);this.sharedState.setPosition(o),this.state.knobPosition=r,t.render(),this._updatePositionsAndDimensions()}},{key:"_onKnobDragStart",value:function(e){this._knobChangedManually=!0,this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onKnobDrag",value:function(e){var t=this.context.editor,n=t.getOutputDimensions(),i=this._initialKnobPosition.clone().add(e).clamp(new S(0,0),n),o=this.sharedState.radialFocus.position.clone().multiply(n),r=i.clone().subtract(o).abs().len(),a=r/2;this.setState({knobPosition:i,circleDimensions:new S(2*r,2*r)}),this.sharedState.setOperationOptions({radius:r/n.min(),gradientRadius:a/n.min()}),t.render()}},{key:"_updatePositionsAndDimensions",value:function(){var e=this.context.editor,t=e.getOutputDimensions(),n=this.sharedState.radialFocus.position.clone().multiply(t),i=this.sharedState.radialFocus.radius*t.min(),o=2*i,r=new S(o,o),a={circleDimensions:r,circlePosition:n};this._knobChangedManually||(a.knobPosition=n.clone().add(i,0)),this.setState(a)}},{key:"_updateOnCanvasControls",value:function(){var e=this.context.editor,t=e.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),i=this.context.appComponent.getBounds(),o=new E(Math.floor(t.x-(n.left-i.left)),Math.floor(t.y-(n.top-i.top)),Math.ceil(t.width)+1,Math.ceil(t.height)+1);v.Utils.styleElement(this._onCanvasControls,{left:o.x+"px",top:o.y+"px",width:o.width+"px",height:o.height+"px"}),this.forceUpdate()}},{key:"_getCircleStyles",value:function(){return{width:this.state.circleDimensions.x,height:this.state.circleDimensions.y,left:this.state.circlePosition.x,top:this.state.circlePosition.y,marginLeft:-.5*this.state.circleDimensions.x,marginTop:-.5*this.state.circleDimensions.y}}},{key:"_getKnobStyle",value:function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}}},{key:"render",value:function(){var e=this;return v.React.createElement(T,{innerRef:function(t){e._container=t}},v.React.createElement(v.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},v.React.createElement(O,{innerRef:function(t){e._onCanvasControls=t}},v.React.createElement(v.DraggableComponent,{onStart:this._onCircleDragStart,onDrag:this._onCircleDrag},v.React.createElement(D,{className:void 0,style:this._getCircleStyles()})),v.React.createElement(v.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},v.React.createElement(R,{className:void 0,style:this._getKnobStyle()})))))}}]),t}(v.SharedStateComponent);x.contextTypes=v.SharedStateComponent.contextTypes,t.a=x;var T=Object(v.adonis)(C).div("1rineb","CanvasControls"),O=v.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),R=Object(v.adonis)(w).div("120drhm","Knob"),D=v.adonis.div("kgwi8g","Circle")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(5)),y=(n.n(v),n(15)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=v.ControlsStyles.Knob,C=v.ControlsStyles.FullContainer,S=g.Math.Vector2,E=g.Math.Rectangle,x=function(e){function t(){var e;o(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a)));return l._bindAll("_onKnobDragStart","_onKnobDrag","_onZoomDone"),l.state=g.Utils.extend(l.state,{visible:!1}),l._events=i({},v.Constants.EVENTS.ZOOM_DONE,l._onZoomDone),l.props.zoomDone&&Object(y.b)(function(){l._onZoomDone()}),l}return a(t,e),b(t,[{key:"componentDidMount",value:function(){k(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this),this._updateOnCanvasControls()}},{key:"sharedStateDidChange",value:function(e,t){this._operation&&t.operation&&this._operation!==t.operation&&this._operation.constructor===t.operation.constructor&&(t.operation.set(this._operation.serializeOptions()),this._operation=t.operation)}},{key:"_onZoomDone",value:function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls()}},{key:"_onKnobDragStart",value:function(e,t){this._initialPosition=this.sharedState.linearFocus["controlPoint"+e]}},{key:"_onKnobDrag",value:function(e,t){var n=this.context.editor,i=n.getSDK().getSprite().getBounds(),o=this._container.getBoundingClientRect(),r=this.context.appComponent.getBounds(),a=this._initialPosition.clone().multiply(i.width,i.height),s=a.add(t).clamp(new S(o.left-r.left-i.x,o.top-r.top-i.y),new S(o.width-(i.x-(o.left-r.left)),o.height-(i.y-(o.top-r.top)))),l=s.divide(i.width,i.height);this.sharedState["setControlPoint"+e](l)}},{key:"_updateOnCanvasControls",value:function(){var e=this.context.editor,t=e.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),i=this.context.appComponent.getBounds(),o=new E(Math.floor(t.x-(n.left-i.left)),Math.floor(t.y-(n.top-i.top)),Math.ceil(t.width)+1,Math.ceil(t.height)+1);v.Utils.styleElement(this._onCanvasControls,{left:o.x+"px",top:o.y+"px",width:o.width+"px",height:o.height+"px"}),this.forceUpdate()}},{key:"_getKnobStyle",value:function(e){var t=this.context.editor,n=this.sharedState.linearFocus["controlPoint"+e],i=t.getSDK().getSprite().getBounds(),o=n.clone().multiply(i.width,i.height);return{left:o.x,top:o.y}}},{key:"_getLineStyle",value:function(){var e=this.context.editor,t=e.getSDK().getSprite().getBounds(),n=this.sharedState.linearFocus.controlPoint1.clone(),i=this.sharedState.linearFocus.controlPoint2.clone(),o={1:n.multiply(t.width,t.height),2:i.multiply(t.width,t.height)},r=o[2].clone().subtract(o[1]),a=r.len(),s=Math.atan2(r.y,r.x);return{width:a+"px",left:o[1].x+"px",top:o[1].y+"px",transform:"rotate("+s+"rad) translateY(-50%)"}}},{key:"_renderKnobs",value:function(){for(var e=[],t=1;t<=2;t++)e.push(v.React.createElement(v.DraggableComponent,{onStart:this._onKnobDragStart.bind(this,t),onDrag:this._onKnobDrag.bind(this,t),key:t},v.React.createElement(R,{style:this._getKnobStyle(t),className:void 0})));return e}},{key:"render",value:function(){var e=this;return v.React.createElement(T,{innerRef:function(t){e._container=t}},v.React.createElement(v.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},v.React.createElement(O,{innerRef:function(t){e._onCanvasControls=t}},this._renderKnobs(),v.React.createElement(D,{style:this._getLineStyle()}))))}}]),t}(v.SharedStateComponent);x.contextTypes=v.SharedStateComponent.contextTypes,t.a=x;var T=Object(v.adonis)(C).div("1rineb","CanvasControls"),O=v.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),R=Object(v.adonis)(w).div("120drhm","Knob"),D=v.adonis.div("1rrhaqy","Line")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(5)),y=(n.n(v),n(15)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=v.ControlsStyles.Knob,C=v.ControlsStyles.FullContainer,S=g.Math.Vector2,E=g.Math.Rectangle,x=function(e){function t(){var e;o(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a)));return l._bindAll("_onCenterDragStart","_onCenterDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone"),l.state=g.Utils.extend(l.state,{areaPosition:new S,areaDimensions:new S,knobPosition:new S,visible:!1}),l._events=i({},v.Constants.EVENTS.ZOOM_DONE,l._onZoomDone),l.props.zoomDone&&Object(y.b)(function(){l._onZoomDone()}),l}return a(t,e),b(t,[{key:"componentDidMount",value:function(){k(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"sharedStateDidChange",value:function(e,t){this._operation&&t.operation&&this._operation!==t.operation&&this._operation.constructor===t.operation.constructor&&(t.operation.set(this._operation.serializeOptions()),this._operation=t.operation)}},{key:"_onZoomDone",value:function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"_onCenterDragStart",value:function(){this._initialStart=this.sharedState.mirroredFocus.start,this._initialEnd=this.sharedState.mirroredFocus.end,this._initialDist=this._initialEnd.clone().subtract(this._initialStart)}},{key:"_onCenterDrag",value:function(e){var t=this.context.editor,n=t.getOutputDimensions(),i=e.clone().divide(n),o=this._initialStart.clone().add(i).clamp(new S(0,0),new S(1,1).subtract(this._initialDist)),r=o.clone().add(this._initialDist);this.sharedState.setOperationOptions({start:o,end:r}),this._updatePositionsAndDimensions()}},{key:"_onKnobDragStart",value:function(e){this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onKnobDrag",value:function(e){var t=this.context.editor,n=t.getOutputDimensions(),i=this._initialKnobPosition.clone().add(e).clamp(new S(0,0),n),o=i.clone().subtract(this.state.areaPosition),r=this.state.areaPosition.clone().add(-o.y,o.x).divide(n),a=this.state.areaPosition.clone().add(o.y,-o.x).divide(n),s=2*o.len();this.sharedState.setOperationOptions({start:r,end:a,size:s/n.min(),gradientSize:s/n.min()}),this.setState({knobPosition:i,areaDimensions:new S(this.state.areaDimensions.x,s)})}},{key:"_getAreaStyle",value:function(){var e=this.state.knobPosition.clone().subtract(this.state.areaPosition),t=Math.atan2(e.x,e.y)*(180/Math.PI),n="rotate("+(-t).toFixed(2)+"deg)";return{width:this.state.areaDimensions.x,height:this.state.areaDimensions.y,left:this.state.areaPosition.x,top:this.state.areaPosition.y,marginLeft:-.5*this.state.areaDimensions.x,marginTop:-.5*this.state.areaDimensions.y,transform:n,MozTransform:n,msTransform:n,WebkitTransform:n}}},{key:"_getKnobStyle",value:function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}}},{key:"_updatePositionsAndDimensions",value:function(){var e=this.context.editor,t=e.getOutputDimensions(),n=this.sharedState.mirroredFocus,i=n.start,o=n.end,r=n.size;i=i.clone().multiply(t),o=o.clone().multiply(t),r*=t.min();var a=o.clone().subtract(i),s=i.clone().add(a.clone().divide(2)),l=new S(2*t.len(),r),u=a.len(),c=a.clone().divide(u).divide(2);this.setState({areaDimensions:l,areaPosition:s.clone(),knobPosition:s.clone().add(-r*c.y,r*c.x)})}},{key:"_updateOnCanvasControls",value:function(){var e=this.context.editor,t=e.getSDK().getSprite().getBounds(),n=this._container.getBoundingClientRect(),i=this.context.appComponent.getBounds(),o=new E(Math.floor(t.x-(n.left-i.left)),Math.floor(t.y-(n.top-i.top)),Math.ceil(t.width)+1,Math.ceil(t.height)+1);v.Utils.styleElement(this._onCanvasControls,{left:o.x+"px",top:o.y+"px",width:o.width+"px",height:o.height+"px"}),this.forceUpdate()}},{key:"render",value:function(){var e=this;return v.React.createElement(T,{innerRef:function(t){e._container=t}},v.React.createElement(v.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},v.React.createElement(O,{innerRef:function(t){e._onCanvasControls=t}},v.React.createElement(v.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},v.React.createElement(D,{className:void 0,style:this._getAreaStyle()})),v.React.createElement(v.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},v.React.createElement(R,{className:void 0,style:this._getKnobStyle()})))))}}]),t}(v.SharedStateComponent);x.contextTypes=v.SharedStateComponent.contextTypes,t.a=x;var T=Object(v.adonis)(C).div("1rineb","CanvasControls"),O=v.adonis.div("aovk7s",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),R=Object(v.adonis)(w).div("120drhm","Knob"),D=v.adonis.div("36haff","Area")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=n.n(d),_=n(312),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),g(t,[{key:"loadFrame",value:function(e){var t=this,n=this.context.editor,i=new d.Frame(this.context.ui,e),o=n.operations.getOrCreate("frame"),r=void 0,a=setTimeout(function(){r=d.ModalManager.instance.displayLoading(t._t("loading.loading"))},100);return i.load().then(function(){r&&r.close(),a&&(clearTimeout(a),a=null),o.setFrame(i.getFrame())})}}],[{key:"mapOperationsToSharedState",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],e.get("frame")||null),n=null;return t&&(n=t.getFrame()),{operation:t,frame:n,frameIdentifier:n?n.identifier:null,tintColor:t?t.getTintColor():null,removeFrame:function(){t&&e.remove(t)},setTintColor:function(e){t&&t.setTintColor(e.clone())}}}},{key:"isEnabled",value:function(e){return e.isToolAllowed("frame")&&e.isToolEnabled("frame")}}]),t}(d.BaseControls);v.clickAtPosition=d.BaseControls.clickAtPosition,v.getPreloadAssets=d.BaseControls.getPreloadAssets,v.identifier="frame",v.controlsComponent=_.a,v.canvasControlsComponent=d.BaseControls.canvasControlsComponent,v.iconPath="editor/controls/frame/icon.png",v.activeIconPath="editor/controls/frame/icon-active.png",v.requiredOperations=["frame"],v.defaultOptions={categories:[],replaceCategories:!1,availableFrames:null},v.updatableOperations=["frame"],v.switchToDefaultControlsOnRemoval=!1,m.a.Controls.FrameControls=v,t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(313)),v=n(315),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},k={ROOT:1,CATEGORY:2,OPTIONS:3},w=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));s._bindAll("_onFrameClick","_onReplaceClick"),s._initFrameManager(),s._needsStyleFixes=!0;var l=k.ROOT,u=s.getSharedState("operation");return u&&u.getFrame()&&(l=k.OPTIONS),s.state={currentPanel:l},s}return r(t,e),y(t,[{key:"fixStyles",value:function(){var e=this;return this._list.style.height="100%",b(t.prototype.__proto__||m()(t.prototype),"fixStyles",this).call(this).then(function(){if(_.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})}},{key:"componentDidUpdate",value:function(e,t){this.state.currentPanel!==t.currentPanel&&this.fixStyles()}},{key:"_initFrameManager",value:function(){this._frameManager=new _.FrameManager(this.context.ui,this.props.options)}},{key:"sharedStateDidChange",value:function(e,t){var n=this.context.editor,i=n.operations.get("frame");return!i||i&&!i.getFrame()?this.setState({currentPanel:k.ROOT}):this.setState({currentPanel:k.OPTIONS})}},{key:"_onReplaceClick",value:function(){this.setState({currentPanel:k.ROOT})}},{key:"_onCategoryClick",value:function(e){this.setState({currentPanel:k.CATEGORY,category:e})}},{key:"_onFrameClick",value:function(e){var t=this;if(!e)return this.sharedState.removeFrame(),void this.props.controls.addLocalHistorySnapshot("frame-image",!0);this.props.controls.loadFrame(e).then(function(){t.props.controls.addLocalHistorySnapshot("frame-image",!1),t.setState({currentPanel:k.OPTIONS})})}},{key:"_renderCurrentPanel",value:function(){var e=this,t=this.props.controls;switch(this.state.currentPanel){case k.ROOT:return _.React.createElement(g.a,{innerRef:function(t){e._list=t},frameManager:this._frameManager,onFrameClick:this._onFrameClick,controls:t,ref:"panel"});case k.OPTIONS:return _.React.createElement(v.a,{innerRef:function(t){e._list=t},frameManager:this._frameManager,onReplaceClick:this._onReplaceClick,onNewFrameClick:this._onNewFrameClick,controls:t,ref:"panel"})}}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){return this._renderCurrentPanel()}}]),t}(_.ControlsComponent);w.contextTypes=_.ControlsComponent.contextTypes,w.RootElement=_.ControlsComponent.RootElement,t.a=w},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(15)),v=n(314),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),y(t,[{key:"fixStyles",value:function(){var e=this;return h.a.resolve().then(function(){_.Utils.Browser.isIElte(10)?Object(g.b)(function(){e._scrollbar.update()}):e._scrollbar.update()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.frameManager,i=t.innerRef;return _.React.createElement(k,{innerRef:function(t){i&&i(t),e._wrapper=t},className:void 0},_.React.createElement(_.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},_.React.createElement(v.a,{frames:n.getFramesForCategory("all"),onFrameClick:this.props.onFrameClick})))}}]),t}(_.BaseComponent);b.contextTypes=_.BaseComponent.contextTypes,t.a=b;var k=_.adonis.div("rfecls","Wrapper")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.PlainControlItem,g=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"_onFrameClick",value:function(e){this.props.onFrameClick&&this.props.onFrameClick(e)}},{key:"_renderListItems",value:function(){var e=this,t=this.props.frames,n=this.getSharedState.frameIdentifier,i=this.getSharedState("selectedSprite");return i&&(n=i.getIdentifier()),t.map(function(t){var i=e._getAssetPath(t.thumbnail),o={background:"url('"+i+"') no-repeat center center",backgroundSize:"contain"};return d.React.createElement(y,{selected:t.identifier===n,key:t.identifier,onClick:e._onFrameClick.bind(e,t),className:void 0,twoColumns:!0},d.React.createElement(b,{style:o}))})}},{key:"render",value:function(){var e=this.sharedState.frame;return d.React.createElement(v,null,d.React.createElement(y,{selected:!e,onClick:this._onFrameClick.bind(this,null),className:void 0,withText:!0,twoColumns:!0},"None"),this._renderListItems())}}]),t}(d.SharedStateComponent);g.contextTypes=d.SharedStateComponent.contextTypes,t.a=g;var v=d.adonis.ul("18qztam","FrameList"),y=Object(d.adonis)(_).li("u8nfgk","FrameListItem"),b=d.adonis.div("7r0ke8","FrameImage")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(15)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=_.ControlsStyles.PlainControlItemBackground,b=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));s._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange","_onWidthChange");var l=s.sharedState.tintColor;return s.state={tintEnabled:!!l&&l.a>0,tintColor:l},s}return r(t,e),v(t,[{key:"_onTintToggle",value:function(e){var t=this.state.tintEnabled,n=this.sharedState.tintColor.clone();n.a=t?0:1,this.sharedState.setTintColor(n),this.props.controls.addLocalHistorySnapshot("frame-tint-enabled"),this.context.editor.render(),this.setState({tintEnabled:!t})}},{key:"_onTintColorChange",value:function(e){this.sharedState.setTintColor(e.clone()),this.props.controls.addLocalHistorySnapshot("frame-tint-color",!0),this.context.editor.render()}},{key:"sharedStateDidChange",value:function(){var e=this.sharedState.tintColor;this.setState({tintEnabled:!!e&&e.a>0,tintColor:e?e.clone():null})}},{key:"_onOpacityChange",value:function(e){this.getSharedState("operation").setAlpha(e/100),this.props.controls.addLocalHistorySnapshot("frame-opacity",!0),this.context.editor.render(),this.forceUpdate()}},{key:"_onWidthChange",value:function(e){var t=this.context.editor,n=this.getSharedState("operation"),i=n.getInputDimensions().min();n.setScale(e/i),this.props.controls.addLocalHistorySnapshot("frame-width",!0),t.render(),this.forceUpdate()}},{key:"fixStyles",value:function(){var e=this;return h.a.resolve().then(function(){_.Utils.Browser.isIElte(10)?Object(g.b)(function(){e._scrollbar.update()}):e._scrollbar.update()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.innerRef,i=t.onReplaceClick,o=this.getSharedState("operation"),r=o.getFrame(),a=o.getInputDimensions(),s=a.min(),l=r.tintable,u={background:"url('"+this._getAssetPath(r.thumbnail,!1)+"') center center / contain no-repeat"};return _.React.createElement(k,{innerRef:function(t){n&&n(t),e._wrapper=t},className:void 0},_.React.createElement(_.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},_.React.createElement("div",null,_.React.createElement(w,null,_.React.createElement(C,null,_.React.createElement(S,null,_.React.createElement(E,{style:u,onClick:i})),_.React.createElement(x,null,_.React.createElement(T,null,this._t("editor.controls.frame.frames."+r.identifier)||r.defaultName),_.React.createElement(O,{onClick:i,className:void 0},this._t("editor.controls.frame.replace")))),_.React.createElement(_.SliderControlComponent,{minValue:0,value:Math.round(100*o.getAlpha()),maxValue:100,label:this._t("editor.controls.frame.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0}),_.React.createElement(_.SliderControlComponent,{minValue:.05*s,value:Math.round(o.getScale()*s),maxValue:.3*s,label:this._t("editor.controls.frame.width"),onSliderValueChange:this._onWidthChange,onValueChange:this._onWidthChange,middleDot:!1,className:void 0})),l&&_.React.createElement(_.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.frame.fill"),expanded:this.state.tintEnabled,className:void 0,onToggle:this._onTintToggle},_.React.createElement(R,{value:this.state.tintColor,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))}}]),t}(_.SharedStateComponent);b.contextTypes=_.SharedStateComponent.contextTypes,t.a=b;var k=_.adonis.div("rfecls","Wrapper"),w=_.adonis.div("1vnvjau","TopSection"),C=_.adonis.div("16woy02","Details"),S=Object(_.adonis)(y).div("6u8g0p","Thumbnail"),E=_.adonis.div("7r0ke8","ThumbnailImage"),x=_.adonis.div("1trlo6v","DetailsContainer"),T=_.adonis.div("w9mc0y","Title"),O=_.adonis.div("1rhky7p","ReplaceButton"),R=Object(_.adonis)(_.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=n.n(d),_=n(317),g=n(26),v=n(79),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),y(t,[{key:"loadOverlay",value:function(e){var t=this,n=this._getAssetPath(e.image),i=v.a[e.blendMode],o=void 0,r=setTimeout(function(){o=d.ModalManager.instance.displayLoading(t._t("loading.loading"))},100);return g.a.load(n).then(function(t){return o&&o.close(),r&&(clearTimeout(r),r=null),{identifier:e.identifier,image:t,blendMode:i,alpha:void 0===e.intensity?1:e.intensity}})}}],[{key:"mapOperationsToSharedState",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],e.getOrCreate("overlay"));return{operation:t,identifier:t?t.getIdentifier():null,alpha:t?t.getAlpha():1,blendMode:t?t.getBlendMode():v.a.normal,removeOverlay:function(){t&&t.set({image:null,identifier:null,alpha:1})},setOverlayOptions:function(e){t&&t.set(e)},setAlpha:function(e){t&&t.setAlpha(e)},setBlendMode:function(e){t&&t.setBlendMode(e)}}}},{key:"isEnabled",value:function(e){return e.isToolAllowed("overlay")&&e.isToolEnabled("overlay")}}]),t}(d.BaseControls);b.clickAtPosition=d.BaseControls.clickAtPosition,b.getPreloadAssets=d.BaseControls.getPreloadAssets,b.identifier="overlay",b.controlsComponent=_.a,b.canvasControlsComponent=d.BaseControls.canvasControlsComponent,b.iconPath="editor/controls/overlay/icon.png",b.activeIconPath="editor/controls/overlay/icon-active.png",b.requiredOperations=["overlay"],b.defaultOptions={overlays:[],replaceOverlays:!1,availableOverlays:null},b.updatableOperations=["overlay"],b.switchToDefaultControlsOnRemoval=!1,m.a.Controls.OverlayControls=b,t.a=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(26)),v=n(125),y=n(318),b=(n(79),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=_.ControlsStyles.PlainControlItem,C=_.ControlsStyles.PlainControlItemBackground,S=_.ControlsStyles.ControlItemTitle,E=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r))),l=s.context,u=l.ui,c=l.theme;return s._thumbnailLoadQueue=new v.a(1,1/0,c.listItemSlideInDelay),s._thumbnailsLoaded={},s._overlayManager=new _.OverlayManager(u,s.props.options),s.state={},s}return r(t,e),b(t,[{key:"componentDidMount",value:function(){k(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this._loadThumbnails()}},{key:"componentWillUnmount",value:function(){k(t.prototype.__proto__||m()(t.prototype),"componentWillUnmount",this).call(this),this._thumbnailLoadQueue.dispose()}},{key:"_loadThumbnails",value:function(){var e=this;this._overlayManager.getOverlays().forEach(function(t){e._thumbnailLoadQueue.add(function(){return g.a.load(e._getAssetPath(t.thumbnail)).then(function(n){e._thumbnailsLoaded[t.identifier]=n,e.forceUpdate()})})})}},{key:"_onBlendModeChange",value:function(){this.props.controls.addLocalHistorySnapshot("overlay-blend-mode",!1)}},{key:"_onAlphaChange",value:function(){this.props.controls.addLocalHistorySnapshot("overlay-alpha",!0)}},{key:"_onItemClick",value:function(e){var t=this;if(!e)return this.getSharedState.removeOverlay(),this.forceUpdate();e.identifier!==this.sharedState.identifier&&this.props.controls.loadOverlay(e).then(function(e){t.sharedState.setOverlayOptions(e),t.props.controls.addLocalHistorySnapshot("overlay-image",!1)})}},{key:"_renderListItems",value:function(){var e=this,t=this.sharedState.identifier;return this._overlayManager.getOverlays().map(function(n){return _.React.createElement(y.a,{key:n.identifier,overlay:n,selected:n.identifier===t,visible:!!e._thumbnailsLoaded[n.identifier],onClick:e._onItemClick.bind(e,n),onBlendModeChange:e._onBlendModeChange.bind(e),onAlphaChange:e._onAlphaChange.bind(e)})})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var e=this,t=this.getSharedState("operation"),n=!t.getIdentifier();return _.React.createElement(_.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},_.React.createElement(x,null,_.React.createElement(T,{onClick:this._onItemClick.bind(this,null)},_.React.createElement(O,{selected:n},_.React.createElement(R,null,this._t("editor.controls.overlay.overlays.none")))),this._renderListItems()))}}]),t}(_.ControlsComponent);E.contextTypes=_.ControlsComponent.contextTypes,E.propTypes=_.ControlsComponent.propTypes,E.RootElement=_.ControlsComponent.RootElement,t.a=E;var x=_.adonis.ul("9uviv9","List"),T=Object(_.adonis)(w).div("1sgdmny","NoneItem"),O=Object(_.adonis)(C).div("yogtp1","NoneItemBackground"),R=Object(_.adonis)(S).span("5krmrh","ItemTitle")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),l=n(0),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(319)),v=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=_.ControlsStyles.ControlItem,k=_.ControlsStyles.ControlItemActiveOverlay,w=_.ControlsStyles.ControlItemTitle,C=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s.state={hovered:!1},s._bindAll("_onBlendModeChange","_onAlphaChange"),s}return r(t,e),y(t,[{key:"_onBlendModeChange",value:function(e){this.props.onBeforeBlendModeChange&&this.props.onBeforeBlendModeChange(),this.sharedState.setBlendMode(e),this.props.onBlendModeChange&&this.props.onBlendModeChange()}},{key:"_onAlphaChange",value:function(e){this.props.onBeforeAlphaChange&&this.props.onBeforeAlphaChange(),this.sharedState.setAlpha(e),this.props.onAlphaChange&&this.props.onAlphaChange()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.selected!==e.selected||this.props.visible!==e.visible||this.state.hovered!==t.hovered||this.props.overlay!==e.overlay||!(this.props.intensity===e.intensity||!e.selected)}},{key:"render",value:function(){var e=this,t=this.props,n=t.lastChild,i=t.onClick,o=t.selected,r=t.visible,a=t.overlay,s=this.sharedState.alpha,l=this.sharedState.blendMode,u={lastChild:n,onClick:i,visible:r};return u.style={backgroundImage:"url('"+this._getAssetPath(a.thumbnail)+"')"},_.React.createElement(S,v({},u,{className:void 0,animated:!0,innerRef:function(t){e._container=t},onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}}),_.React.createElement(x,{selected:o},_.React.createElement(_.Transition,{active:!o},_.React.createElement(R,null,_.React.createElement(T,{hovered:this.state.hovered},this._t("editor.controls.overlay.overlays."+a.identifier)||a.defaultName))),_.React.createElement(_.Transition,{active:o},_.React.createElement(R,null,_.React.createElement(O,null,"Blending"),_.React.createElement(I,{value:l,onChange:this._onBlendModeChange}),o&&_.React.createElement(E,null,_.React.createElement(_.SliderComponent,{minValue:0,maxValue:1,valueUnit:"",middleDot:!1,value:s,onChange:this._onAlphaChange})),_.React.createElement(D,{rendered:!0,visible:!0})))))}},{key:"container",get:function(){return this._container}}]),t}(_.SharedStateComponent);C.contextTypes=_.SharedStateComponent.contextTypes,t.a=C;var S=Object(_.adonis)(b).div("193vjnw",{lastChild:"229bd5"},"Item"),E=_.adonis.div("12dmntm","Slider"),x=_.adonis.div("1m161zg","ItemContainer"),T=Object(_.adonis)(w).span("120drhm","ItemTitle"),O=Object(_.adonis)(T)("1kbikta","BlendingLabel"),R=_.adonis.div("tj7k39",{rendered:"cuo4v2",visible:"82svov"},"ItemContent"),D=Object(_.adonis)(k).div("120drhm","Overlay"),I=Object(_.adonis)(g.a)("ii685b","BlendingControl")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(103),h=n.n(p),d=n(3),m=n.n(d),_=n(7),g=(n.n(_),n(5)),v=(n.n(g),n(79)),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=g.ControlsStyles.ControlItemTitle,k=_.Utils.flipObject(v.a),w=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onPreviousClick","_onNextClick"),s}return r(t,e),y(t,[{key:"_onPreviousClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=h()(k),n=t.indexOf(this.props.value.toString()),i=(n+t.length-1)%t.length,o=parseInt(t[i],10);this.props.onChange&&this.props.onChange(o)}},{key:"_onNextClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=h()(k),n=t.indexOf(this.props.value.toString()),i=(n+t.length+1)%t.length,o=parseInt(t[i],10);this.props.onChange&&this.props.onChange(o)}},{key:"render",value:function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-left.png",!0)+"')"},t={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-right.png",!0)+"')"},n=this.props.value;return g.React.createElement(C,{styles:this.props.styles},g.React.createElement(E,{onClick:this._onPreviousClick,style:e}),g.React.createElement(S,null,this._t("editor.controls.overlay.blendModes."+k[n])),g.React.createElement(E,{onClick:this._onNextClick,style:t}))}}]),t}(g.BaseComponent);w.contextTypes=g.BaseComponent.contextTypes,t.a=w;var C=g.adonis.div("15zte1z","BlendingControlContainer");w.RootElement=C;var S=Object(g.adonis)(b).div("1v7ogyl","Label"),E=g.adonis.div("1v32l0l","Arrow")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(7),g=(n.n(_),n(5)),v=n.n(g),y=n(321),b=n(326),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=_.Math.Vector2,C=void 0;_.Operations.SpriteOperation&&(C=_.Operations.SpriteOperation.StickerSprite);var S=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._updateStickerCategories=s._updateStickerCategories.bind(s),s}return r(t,e),k(t,[{key:"createSticker",value:function(e){var t=this;return this.loadStickerImage(e).then(function(n){var i=t.context.editor,o=i.operations.getOrCreate("sprite"),r=o.getInputDimensions(!1),a=new w(n.width,n.height),s=new w(.5*r.min(),.5*r.min()),l=o.createSticker({identifier:e.identifier,image:n,position:new w(.5,.5),dimensions:_.Utils.resizeVectorToFit(a,s),rotation:0,smoothDownscaling:t._options.smoothDownscaling});return t.sharedState.set({selectedSprite:l}),o.addSprite(l),t.addLocalHistorySnapshot("sticker-creation",!1),l})}},{key:"loadStickerImage",value:function(e){var t=this;return new h.a(function(n,i){var o=e.images.mediaBase,r=g.StickerManager.getURLForSticker(e,"base"),a=t._getAssetPath(r),s=new window.Image,l=void 0,u=setTimeout(function(){l=g.ModalManager.instance.displayLoading(t._t("loading.loading"))},100);s.addEventListener("load",function(){l&&l.close(),u&&(clearTimeout(u),u=null),void 0!==o.width&&void 0!==o.height&&(s.width=o.width,s.height=o.height),n(s)}),s.addEventListener("error",function(){l&&l.close(),u&&(clearTimeout(u),u=null),g.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.stickerLoadingError.text",{path:s.src})),i(new Error("Loading sticker failed"))}),s.crossOrigin="Anonymous",s.src=a})}},{key:"_updateStickerCategories",value:function(e){var t=this._options,n=t.categories,i=t.replaceCategories,o=t.availableStickers;e||(e=n);var r=new g.StickerManager(this.context.ui,{categories:e,replaceCategories:i,availableStickers:o});this.sharedState.set({stickerManager:r})}},{key:"_onEnter",value:function(){var e=this.context.editor;this._updateStickerCategories(),this._mediator.on(g.Constants.EVENTS.ADDED_STICKER,this._updateStickerCategories),e.zoom.auto(),e.features.disable("zoom","drag")}},{key:"_onLeave",value:function(){var e=this.context.editor;this._mediator.off(g.Constants.EVENTS.ADDED_STICKER,this._updateStickerCategories),e.features.enable("zoom","drag"),e.render()}}],[{key:"mapOperationsToSharedState",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=e.getOrCreate("sprite"),i=n.getInputDimensions(!1),o=t.selectedSprite,r=t.stickerManager;if(o&&n.getSprites().indexOf(o)<0){var a=n.getSprites().filter(function(e){return e.getId()===o.getId()})[0];a&&(o=a)}return{operation:n,inputDimensions:i,stickerManager:r,selectedSprite:o,stickerObject:o&&r?r.getStickerByIdentifier(o.getIdentifier()):null,image:o?o.getImage():null,alpha:o?100*o.getAlpha():0,tintMode:o?o.getTintMode():"",tintColor:o?o.getTintColor():null,setStickerOptions:function(e){o&&o.set(e)},setStickerImage:function(e){o&&o.setImage(e)},setAlpha:function(e){o&&o.setAlpha(e/100)},setTintMode:function(e){o&&o.setTintMode(e)},setTintColor:function(e){o&&o.setTintColor(e)}}}},{key:"clickAtPosition",value:function(e,t){var n=t.operations.get("sprite");if(!n)return!1;var i=n.getSpritesAtPosition(e,t.getOutputTextureDimensions()).filter(function(e){return e instanceof C});return!!i[0]&&{selectedSprite:i[0]}}},{key:"getPreloadAssets",value:function(e){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]}},{key:"isEnabled",value:function(e){return e.isToolAllowed("sticker")&&e.isToolEnabled("sticker")}}]),t}(g.BaseControls);S.identifier="sticker",S.controlsComponent=y.a,S.canvasControlsComponent=b.a,S.iconPath="editor/controls/sticker/icon.png",S.activeIconPath="editor/controls/sticker/icon-active.png",S.requiredOperations=["sprite"],S.defaultOptions={categories:[],replaceCategories:!1,availableStickers:null,snapRotation:90,snapRotationTolerance:5},S.updatableOperations=["sprite"],S.switchToDefaultControlsOnRemoval=!0,v.a.Controls.StickerControls=S,t.a=S},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(7),g=(n.n(_),n(5)),v=(n.n(g),n(322)),y=n(324),b=n(325),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},C=_.Math.Vector2,S={ROOT:1,CATEGORY:2,OPTIONS:3},E=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));s._bindAll("_onCategoryClick","_onStickerClick","_onBackClick","_onNewStickerClick","_onReplaceClick"),s._needsStyleFixes=!0;var l=S.ROOT;return s.sharedState.selectedSprite&&(l=S.OPTIONS),s.state.currentPanel=l,s}return r(t,e),k(t,[{key:"fixStyles",value:function(){var e=this;return this._list.style.height="100%",w(t.prototype.__proto__||m()(t.prototype),"fixStyles",this).call(this).then(function(){if(g.Utils.Browser.isIElte(10)){var t=e._container.offsetHeight;e._list.style.height=t+"px"}return e.refs.panel.fixStyles()})}},{key:"componentDidUpdate",value:function(e,t){this.state.currentPanel!==t.currentPanel&&this.fixStyles()}},{key:"sharedStateDidChange",value:function(e,t){e.stickerObject!==t.stickerObject&&t.selectedSprite&&t.stickerObject&&this.setState({currentPanel:S.OPTIONS})}},{key:"_onReplaceClick",value:function(){this.setState({currentPanel:S.ROOT})}},{key:"_onNewStickerClick",value:function(){this.state.currentPanel=S.ROOT,this.setSharedState({selectedSprite:null})}},{key:"_onCategoryClick",value:function(e){this.setState({currentPanel:S.CATEGORY,category:e})}},{key:"_onBackClick",value:function(){this.setState({currentPanel:S.ROOT})}},{key:"_onStickerClick",value:function(e){var t=this,n=this.sharedState.selectedSprite,i=function(){t.setState({currentPanel:S.OPTIONS})},o=this.context.editor;n?this.props.controls.loadStickerImage(e).then(function(r){var a=n.getDimensions().clone(),s=a.max(),l=new C(s,s),u=new C(r.width,r.height),c={image:r,identifier:e.identifier,dimensions:_.Utils.resizeVectorToFit(u,l)};"none"!==n.getTintMode()&&n.setTintMode(e.tintMode||"none"),t.sharedState.setStickerOptions(c),t.sharedState.setStickerImage(r),t.props.controls.addLocalHistorySnapshot("sticker-image",!0),o.render(),i()}):this.props.controls.createSticker(e).then(function(e){i()})}},{key:"_renderCurrentPanel",value:function(){var e=this,t=this.props.controls,n=this.sharedState.stickerManager;switch(this.state.currentPanel){case S.ROOT:return g.React.createElement(v.a,{innerRef:function(t){e._list=t},stickerManager:n,onCategoryClick:this._onCategoryClick,onStickerClick:this._onStickerClick,controls:t,ref:"panel"});case S.CATEGORY:return g.React.createElement(y.a,{innerRef:function(t){e._list=t},category:this.state.category,stickerManager:n,onBackClick:this._onBackClick,onStickerClick:this._onStickerClick,controls:t,ref:"panel"});case S.OPTIONS:return g.React.createElement(b.a,{innerRef:function(t){e._list=t},stickerManager:n,onReplaceClick:this._onReplaceClick,onNewStickerClick:this._onNewStickerClick,controls:t,ref:"panel"})}}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){return this._renderCurrentPanel()}}]),t}(g.ControlsComponent);E.contextTypes=g.ControlsComponent.contextTypes,E.RootElement=g.ControlsComponent.RootElement,t.a=E},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(323)),v=n(127),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s.state={category:"all"},s}return r(t,e),y(t,[{key:"_onCategoryClick",value:function(e,t){this.props.onCategoryClick&&this.props.onCategoryClick(e)}},{key:"fixStyles",value:function(){var e=this;return h.a.resolve().then(function(){_.Utils.Browser.isIElte(10)?Object(_.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})}},{key:"_renderListItems",value:function(){var e=this;return this.props.stickerManager.getCategories().map(function(t){return _.React.createElement(g.a,{key:t.identifier,category:t,onClick:e._onCategoryClick.bind(e,t)})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.stickerManager,i=t.innerRef;return _.React.createElement(k,{innerRef:function(t){i&&i(t),e._wrapper=t},className:void 0},_.React.createElement(_.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},_.React.createElement(w,null,this._renderListItems()),_.React.createElement(v.a,{stickers:n.getStickersForCategory("all"),onStickerClick:this.props.onStickerClick})))}}]),t}(_.BaseComponent);b.contextTypes=_.BaseComponent.contextTypes,t.a=b;var k=_.adonis.div("rfecls","Wrapper"),w=_.adonis.ul("5jg0ou","CategoryList")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.ControlItem,g=d.ControlsStyles.ControlItemTitle,v=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"render",value:function(){var e=this.props.category,t=this._getAssetPath(e.metaData.backgroundImage),n={backgroundImage:"url('"+t+"')"};return d.React.createElement(y,{onClick:this.props.onClick,style:n,className:void 0},d.React.createElement(k,null,this._t("editor.controls.sticker.stickerCategories."+e.identifier)||e.defaultName),d.React.createElement(b,null))}}]),t}(d.BaseComponent);v.contextTypes=d.BaseComponent.contextTypes,t.a=v;var y=Object(d.adonis)(_).li("1dc04zg","StickerCategoryItem"),b=d.adonis.div("1fxaw8w","Gradient"),k=Object(d.adonis)(g).div("120drhm","Title")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),n(127)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=_.ControlsStyles.ControlItemTextStyles,b=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"fixStyles",value:function(){var e=this;return h.a.resolve().then(function(){_.Utils.Browser.isIElte(10)?Object(_.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.stickerManager,i=t.category,o=t.onBackClick,r=t.onStickerClick,a=t.innerRef,s=this._getAssetPath(i.metaData.backgroundImage),l={backgroundImage:"url('"+s+"')",backgroundSize:"cover"},u={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",!0)+"')"},c=n.getStickersForCategory(i.identifier);return _.React.createElement(k,{innerRef:function(e){return a&&a(e)},className:void 0},_.React.createElement(w,{style:l},_.React.createElement(C,null,_.React.createElement(E,null,this._t("editor.controls.sticker.stickerCategories."+i.identifier)||i.defaultName),i.metaData.author&&_.React.createElement(x,null,_.React.createElement("span",null,"by "),i.metaData.author),_.React.createElement(T,{style:u,onClick:o.bind(this),className:void 0}))),_.React.createElement(S,{innerRef:function(t){e._wrapper=t}},_.React.createElement(_.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},_.React.createElement(g.a,{stickers:c,onStickerClick:r}))))}}]),t}(_.BaseComponent);b.contextTypes=_.BaseComponent.contextTypes,t.a=b;var k=_.adonis.div("iauaz2","StickerCategoryPanel"),w=_.adonis.div("2j8ygm","Header"),C=_.adonis.div("3wd3qf","HeaderContent"),S=_.adonis.div("zb78lb","Content"),E=Object(_.adonis)(y).div("kswtk0","Title"),x=Object(_.adonis)(y).div("1qn5s6u","Subtitle"),T=_.adonis.button("1t2nim8","BackButton")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),v=_.ControlsStyles.PlainControlItemBackground,y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange"),s}return r(t,e),g(t,[{key:"_getStickerObject",value:function(){return this.sharedState.stickerObject}},{key:"_onChangedOption",value:function(e,t){e&&this.props.controls.addLocalHistorySnapshot(e,t),this.context.editor.render()}},{key:"_onOpacityChange",value:function(e){this.sharedState.setAlpha(e),this._onChangedOption("sticker-opacity",!0)}},{key:"_onTintToggle",value:function(e){var t=this._getStickerObject();this.sharedState.setTintMode(e?t.tintMode:"none"),this._onChangedOption("sticker-tint-toggle",!0)}},{key:"_onTintColorChange",value:function(e){this.sharedState.setTintColor(e.clone()),this._onChangedOption("sticker-tint",!0)}},{key:"fixStyles",value:function(){var e=this;return h.a.resolve().then(function(){_.Utils.Browser.isIElte(10)?Object(_.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.innerRef,i=t.onNewStickerClick,o=t.onReplaceClick,r=this.sharedState,a=r.alpha,s=r.tintMode,l=r.tintColor,u=r.selectedSprite;if(!u)return null;var c=this._getStickerObject(),f={background:"url('"+u.getImage().src+"') center center / contain no-repeat"},p=!!c.tintMode&&"none"!==c.tintMode;return _.React.createElement(b,{innerRef:function(t){n&&n(t),e._wrapper=t},className:void 0},_.React.createElement(_.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},_.React.createElement("div",null,_.React.createElement(k,null,_.React.createElement(_.ButtonComponent,{title:this._t("editor.controls.sticker.new"),className:void 0,onClick:i}),_.React.createElement(w,null,_.React.createElement(C,null,_.React.createElement(S,{onClick:o,style:f})),_.React.createElement(E,null,_.React.createElement(x,null,this._t("editor.controls.sticker.stickers."+c.identifier)||c.defaultName),_.React.createElement(T,{onClick:o,className:void 0},this._t("editor.controls.sticker.replace")))),_.React.createElement(_.SliderControlComponent,{minValue:0,value:Math.round(a),maxValue:100,label:this._t("editor.controls.sticker.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0})),p&&_.React.createElement(_.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.sticker.fill"),expanded:"none"!==s,className:void 0,onToggle:this._onTintToggle},_.React.createElement(O,{value:l,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))}}]),t}(_.SharedStateComponent);y.contextTypes=_.SharedStateComponent.contextTypes,t.a=y;var b=_.adonis.div("rfecls","Wrapper"),k=_.adonis.div("1vnvjau","TopSection"),w=_.adonis.div("aqfteq","Details"),C=Object(_.adonis)(v).div("6u8g0p","Thumbnail"),S=_.adonis.div("7r0ke8","ThumbnailImage"),E=_.adonis.div("1trlo6v","DetailsContainer"),x=_.adonis.div("w9mc0y","Title"),T=_.adonis.div("1rhky7p","ReplaceButton"),O=Object(_.adonis)(_.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(7),g=(n.n(_),n(77)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=_.Operations.SpriteOperation,k=void 0;b&&(k=_.Operations.SpriteOperation.StickerSprite);var w=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),v(t,[{key:"_renderSpriteItems",value:function(e){return y(t.prototype.__proto__||m()(t.prototype),"_renderSpriteItems",this).call(this,e.filter(function(e){return e instanceof k}))}},{key:"_selectNextSprite",value:function(){for(var e=this.getSharedState("operation"),t=e.getSprites().slice(0).reverse(),n=void 0,i=void 0,o=0;o<t.length;o++)if((n=t[o])instanceof k){i=n;break}i||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:i})}},{key:"_createSprite",value:function(e){return this.getSharedState("operation").createSticker(e)}}]),t}(g.a);w.contextTypes=g.a.contextTypes,t.a=w},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(7),m=(n.n(d),n(5)),_=n.n(m),g=n(328),v=n(332),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=d.Math.Vector2,k=void 0,w=void 0;d.Operations.SpriteOperation&&(k=d.Operations.SpriteOperation.TextSprite,w=d.Operations.SpriteOperation.BrushSprite);var C=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),y(t,[{key:"createText",value:function(){var e=this.context.editor,t=this.sharedState.get("operation"),n=this.sharedState.get("fontManager"),i=n.getDefaultVariation(),o=e.getOutputDimensions(),r=e.getSDK(),a=r.getRenderer(),s=a.getMaxTextureSize(),l=t.createText({text:this.context.ui.translate("editor.controls.text.defaultText"),position:new b(.5,.5),maxWidth:.5,maxHeight:s?s/o.y:3,textMetrics:i.getTextMetrics(),fontIdentifier:i.getIdentifier(),fontSize:.08,fontFamily:i.getFontFamily(),fontWeight:i.getFontWeight(),fontStyle:i.getFontStyle(),color:d.Color.WHITE,alignment:"center"});return this.sharedState.set({selectedSprite:l}),t.addSprite(l),this.addLocalHistorySnapshot(),l}},{key:"_onEnter",value:function(){var e=this.context.editor,t=this._options,n=t.fonts,i=t.replaceFonts,o=t.availableVariations,r=new m.FontManager(this.context.ui,{fonts:n,replaceFonts:i,availableVariations:o});this.sharedState.set({fontManager:r}),e.features.disable("zoom","drag"),e.zoom.auto(),this.sharedState.get("selectedSprite")||this.createText(),e.render()}},{key:"_onLeave",value:function(){var e=this.context.editor;e.features.enable("zoom","drag"),e.render()}}],[{key:"mapOperationsToSharedState",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=e.getOrCreate("sprite"),i=n.getInputDimensions(),o=t.selectedSprite;if(o&&n.getSprites().indexOf(o)<0){var r=n.getSprites().filter(function(e){return e.getId()===o.getId()})[0];r&&(o=r)}return{operation:n,selectedSprite:o,inputDimensions:i,color:o?o.getColor().clone():null,backgroundColor:o?o.getBackgroundColor().clone():null,alignment:o?o.getAlignment():null,lineHeight:o?o.getLineHeight():0,fontFamily:o?o.getFontFamily():null,setFontSize:function(e){o&&o.setFontSize(e/i.min())},setColor:function(e){o&&o.setColor(e.clone())},setBackgroundColor:function(e){o&&o.setBackgroundColor(e.clone())},setCharacterSpacing:function(e){o&&o.setCharacterSpacing(e)},setLineHeight:function(e){o&&o.setLineHeight(e)},setAlignment:function(e){o&&o.setAlignment(e)},setTextOptions:function(e){o&&o.set(e)},setVariation:function(e){o&&o.set({fontIdentifier:e.getIdentifier(),fontFamily:e.getFontFamily(),fontWeight:e.getFontWeight(),fontStyle:e.getFontStyle(),textMetrics:e.getTextMetrics()})}}}},{key:"clickAtPosition",value:function(e,t){if(!t.operations.exists("sprite"))return!1;var n=t.operations.getOrCreate("sprite"),i=n.getSpritesAtPosition(e,t.getOutputTextureDimensions()).filter(function(e){return!(e instanceof w)});return!!(i.length&&i[0]instanceof k)&&{selectedSprite:i[0]}}},{key:"getPreloadAssets",value:function(e){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]}},{key:"isEnabled",value:function(e){return e.isToolAllowed("text")&&e.isToolEnabled("text")}}]),t}(m.BaseControls);C.identifier="text",C.controlsComponent=g.a,C.canvasControlsComponent=v.a,C.iconPath="editor/controls/text/icon.png",C.activeIconPath="editor/controls/text/icon-active.png",C.requiredOperations=["sprite"],C.defaultOptions={fonts:[],replaceFonts:!1,availableVariations:null,snapRotation:90,snapRotationTolerance:5},C.updatableOperations=["sprite"],C.switchToDefaultControlsOnRemoval=!0,_.a.Controls.TextControls=C,t.a=C},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(5),v=(n.n(g),n(329)),y=n(330),b=(n(331),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),k=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},w=g.GroupedControlsStyles.ControlGroupList,C=function(e){function t(){var e;o(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a)));return l._bindAll("_onNewTextClick","_onFontChanged","_onFontSizeChanged","_onCharacterSpacingChanged","_onLineSpacingChanged","_onColorChanged","_onBackgroundColorChanged","_onAlignmentChanged","_onVariationChanged","_onTextScaled"),l._events=i({},g.Constants.EVENTS.TEXT_SCALED,l._onTextScaled),l._unavailableFontFamilies=[],l}return a(t,e),b(t,[{key:"componentDidMount",value:function(){k(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this),this._loadFonts()}},{key:"_loadFonts",value:function(){var e=this,t=this.sharedState.fontManager,n=this.context.ui.getFontLoader();n.setFonts(t.getFonts());var i=void 0,o=window.setTimeout(function(){i=g.ModalManager.instance.displayLoading(e._t("loading.fonts"),!0)},200),r=this.sharedState.selectedSprite;return n.load().then(function(){window.clearTimeout(o),i&&i.close(),r.emit("update"),e.context.editor.render()}).catch(function(t){window.clearTimeout(o),i&&i.close(),t.forEach(function(t){e._unavailableFontFamilies.push(t.font.getFontFamily())});var n=e._unavailableFontFamilies.join(", ");r.emit("update"),e.context.editor.render(),e.forceUpdate(),g.ModalManager.instance.displayError(e._t("errors.fontLoadingError.title"),e._t("errors.fontLoadingError.text",{fonts:n}))})}},{key:"_onChangedOption",value:function(e,t){e&&this.props.controls.addLocalHistorySnapshot(e,t),this.context.editor.render()}},{key:"_onNewTextClick",value:function(){this.props.controls.createText()}},{key:"_onAlignmentChanged",value:function(e){this.sharedState.setAlignment(e),this._onChangedOption("text-alignment",!0)}},{key:"_onVariationChanged",value:function(e){this.sharedState.setVariation(e),this._onChangedOption("font-family",!0)}},{key:"_onFontChanged",value:function(e){var t=e.getVariations()[0];this._onVariationChanged(t)}},{key:"_onFontSizeChanged",value:function(e){this.sharedState.setFontSize(e),this._onChangedOption("font-size",!1)}},{key:"_onColorChanged",value:function(e){this.sharedState.setColor(e),this._onChangedOption("color",!0)}},{key:"_onBackgroundColorChanged",value:function(e){this.sharedState.setBackgroundColor(e),this._onChangedOption("background-color",!0)}},{key:"_onCharacterSpacingChanged",value:function(e){this.sharedState.setCharacterSpacing(e),this._onChangedOption()}},{key:"_onLineSpacingChanged",value:function(e){this.sharedState.setLineHeight(e),this._onChangedOption("line-spacing",!0)}},{key:"_onTextScaled",value:function(){this.forceUpdate()}},{key:"_renderFontFamilyAndSizeComponent",value:function(){var e=this,t=this.sharedState,n=t.selectedSprite,i=t.inputDimensions,o=t.fontManager,r=g.Utils.toFixed(n.getFontSize()*i.min(),1),a=Math.round(i.y),s=o.getFonts().filter(function(t){return e._unavailableFontFamilies.indexOf(t.getFontFamily())<0});return g.React.createElement(v.a,{onValueChange:this._onFontSizeChanged,onFontChange:this._onFontChanged,fonts:s,dropdownValue:n.getFontFamily(),label:this._t("editor.controls.text.font"),inputLabel:this._t("editor.controls.text.size"),className:void 0,value:r,minValue:10,maxValue:a})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var e=this,t=this.sharedState,n=t.selectedSprite,i=t.fontManager;if(!n)return null;var o=i.getFontByFontFamily(n.getFontFamily()),r=i.getVariationByIdentifier(n.getFontIdentifier()),a=this.sharedState,s=a.color,l=a.backgroundColor,u=a.alignment,c=a.lineHeight;return g.React.createElement(g.ScrollableListComponent,{direction:"vertical",innerListRef:function(t){e._list=t},innerRef:function(t){e._scrollbar=t}},g.React.createElement(S,{className:void 0},g.React.createElement(g.ButtonComponent,{title:this._t("editor.controls.text.new"),onClick:this._onNewTextClick,className:void 0}),g.React.createElement(x,null,this._renderFontFamilyAndSizeComponent(),g.React.createElement(y.a,{alignment:u,variations:o.getVariations(),selectedVariation:r,onAlignmentChange:this._onAlignmentChanged,onVariationChange:this._onVariationChanged})),g.React.createElement(g.ColorSelectionComponent,{value:s,onColorPickerToggle:this.fixStyles,onChange:this._onColorChanged})),g.React.createElement(E,null,g.React.createElement(g.CollapseSectionComponent,{key:"background",title:this._t("editor.controls.text.background"),alwaysExpanded:!0,className:void 0},g.React.createElement(g.ColorSelectionComponent,{value:l,onColorPickerToggle:this.fixStyles,onChange:this._onBackgroundColorChanged})),g.React.createElement(g.CollapseSectionComponent,{key:"spacing",title:this._t("editor.controls.text.spacing"),alwaysExpanded:!0},g.React.createElement(g.SliderControlComponent,{label:this._t("editor.controls.text.line"),minValue:.5,maxValue:3,className:void 0,value:g.Utils.toFixed(c,1),onSliderValueChange:this._onLineSpacingChanged,onValueChange:this._onLineSpacingChanged}))))}}]),t}(g.ControlsComponent);C.contextTypes=g.ControlsComponent.contextTypes,C.RootElement=g.ControlsComponent.RootElement,t.a=C;var S=g.adonis.div("1vnvjau","TopSection"),E=Object(g.adonis)(w).ul("mgrj1m","SectionList"),x=g.adonis.div("tymb4t","Details")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._updateFontsMap(),s}return r(t,e),g(t,[{key:"componentWillReceiveProps",value:function(e){v(t.prototype.__proto__||m()(t.prototype),"componentWillReceiveProps",this).call(this,e),e.fonts!==this.props.fonts&&this._updateFontsMap()}},{key:"_updateFontsMap",value:function(){var e=this;this._fontsMap={},this.props.fonts.forEach(function(t){e._fontsMap[t.getFontFamily()]=t})}},{key:"_renderLeftPart",value:function(){var e=this.sharedState.fontFamily,t=this._fontsMap[e];return _.React.createElement("div",{ref:"root",className:void 0},_.React.createElement(_.DropdownComponent,{value:t,style:{fontFamily:e},className:void 0,onChange:this.props.onFontChange},this.props.fonts.map(function(e){return _.React.createElement(_.DropdownComponent.Item,{value:e,key:e.getFontFamily(),style:{fontFamily:e.getFontFamily()}},e.getFontFamily())})))}}]),t}(_.ValueSelectionComponent);y.contextTypes=_.ValueSelectionComponent.contextTypes,t.a=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"_onAlignmentItemClick",value:function(e){this.props.onAlignmentChange&&this.props.onAlignmentChange(e.title)}},{key:"_onStyleItemClick",value:function(e){switch(e.title){case"bold":this.props.onStyleChange&&this.props.onStyleChange("fontWeight",this.props.bold?"normal":"bold");break;case"italic":this.props.onStyleChange&&this.props.onStyleChange("fontStyle",this.props.italic?"normal":"italic")}}},{key:"_renderAligmentItems",value:function(){var e=this,t=this.props.alignment;return[{title:"left",selected:"left"===t,iconPath:"editor/controls/text/align-left.png",selectedIconPath:"editor/controls/text/align-left-selected.png"},{title:"center",selected:"center"===t,iconPath:"editor/controls/text/align-center.png",selectedIconPath:"editor/controls/text/align-center-selected.png"},{title:"right",selected:"right"===t,iconPath:"editor/controls/text/align-right.png",selectedIconPath:"editor/controls/text/align-right-selected.png"}].map(function(t){var n=e._getAssetPath(t.iconPath,!0),i=e._getAssetPath(t.selectedIconPath,!0);return d.React.createElement(y,{key:t.title,className:void 0,"data-alignment":t.title,"data-selected":t.selected,onClick:e._onAlignmentItemClick.bind(e,t)},d.React.createElement(b,{visible:!0,src:n}),d.React.createElement(b,{visible:t.selected,src:i}))},this)}},{key:"_renderStylesDropdown",value:function(){var e=this.props,t=e.variations,n=e.selectedVariation;return d.React.createElement(d.DropdownComponent,{value:n,onChange:this.props.onVariationChange,className:void 0,enableMenu:t.length>1},t.map(function(e){return d.React.createElement(d.DropdownComponent.Item,{value:e,key:e.getIdentifier(),style:{fontFamily:e.getFontFamily(),fontStyle:e.getFontStyle(),fontWeight:e.getFontWeight()}},e.getLabel())}))}},{key:"render",value:function(){return d.React.createElement(g,{className:void 0},d.React.createElement(v,null,this._renderStylesDropdown()),d.React.createElement(v,{right:!0},this._renderAligmentItems()))}}]),t}(d.BaseComponent);_.contextTypes=d.BaseComponent.contextTypes,t.a=_;var g=d.adonis.div("1hzgwcr","TextControlsStyling"),v=d.adonis.div("64aub5",{right:"9ygmmm"},"Group"),y=d.adonis.div("tgbgl1",{selected:"zgbg08"},"ItemContainer"),b=d.adonis.img("7ni881",{visible:"zgbg08"},"ItemImage")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.ControlItem,g=d.ControlsStyles.ControlItemTitle,v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onClick","_onMouseEnter","_onMouseLeave","_onIntensityChanged"),s.state={selected:!1,hovering:!1,intensity:50},s}return r(t,e),m(t,[{key:"_onClick",value:function(){this.setState({selected:!0})}},{key:"_onMouseEnter",value:function(){this.setState({hovering:!0})}},{key:"_onMouseLeave",value:function(){this.setState({hovering:!1})}},{key:"_onIntensityChanged",value:function(e){this.setState({intensity:e})}},{key:"render",value:function(){var e=this.state,t=e.selected,n=e.hovering,i=e.intensity;return d.React.createElement(y,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick,selected:t},!(t&&n)&&d.React.createElement(b,{selected:t},this.props.title),t&&n&&d.React.createElement(k,null,d.React.createElement(d.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:i,onChange:this._onIntensityChanged})))}}]),t}(d.BaseComponent);v.contextTypes=d.BaseComponent.contextTypes;var y=Object(d.adonis)(_).div("nasu8t",{selected:"120drhm"},"LegibilityPresetItem"),b=Object(d.adonis)(g).div("1hd9n2f",{selected:"186qcx6"},"Title"),k=d.adonis.div("8ekz81","Slider")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(7),m=(n.n(d),n(77)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=void 0;d.Operations.SpriteOperation&&(g=d.Operations.SpriteOperation.TextSprite);var v=function(e){function t(){return i(this,t),o(this,(t.__proto__||h()(t)).apply(this,arguments))}return r(t,e),_(t,[{key:"_selectNextSprite",value:function(){for(var e=this.getSharedState("operation"),t=e.getSprites().slice(0).reverse(),n=void 0,i=void 0,o=0;o<t.length;o++)if((n=t[o])instanceof g){i=n;break}i||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:i})}},{key:"_createSprite",value:function(e){return this.getSharedState("operation").createText(e)}}]),t}(m.a);v.contextTypes=m.a.contextTypes,t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(8),h=n.n(p),d=n(3),m=n.n(d),_=n(7),g=(n.n(_),n(5)),v=n.n(g),y=n(334),b=n(336),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=_.Math.Vector2,C=new w(50,50),S=function(e){function t(){return i(this,t),o(this,(t.__proto__||m()(t)).apply(this,arguments))}return r(t,e),k(t,[{key:"convertOperationOptionsToUI",value:function(e){var t=e.start,n=e.end,i=e.rotation,o=e.textureScale,r=this.sharedState.get("transformOperation"),a=r.calculateScale(i),s=r.getInputDimensions(!1),l=Math.cos(i),u=Math.sin(i),c=n.clone().subtract(t).divide(2),f=t.clone().add(c).multiply(s),p=f.subtract(s.clone().multiply(.5)),h=new w(p.x*l-p.y*u,p.x*u+p.y*l).multiply(a),d=s.clone().multiply(.5).add(h),m=d.clone().divide(s);return{start:m.clone().subtract(c.clone().multiply(a)),end:m.clone().add(c.clone().multiply(a)),rotation:i,textureScale:o}}},{key:"_onEnter",value:function(){var e=this.context.editor,t=e.operations.exists("transform"),n=e.operations.getOrCreate("transform");n.setEnabled(!1,!1);var i=e.operations.exists("orientation"),o=e.operations.getOrCreate("orientation"),r={end:new w(1,1),rotation:0,start:new w(0,0),textureScale:1},a=n.getInputDimensions(!1),s=n.getNewDimensions(a),l=r,u=l,c=u.start,f=u.end,p=u.textureScale,h=u.rotation;if(t){l=n.serializeOptions(),c=l.start,f=l.end,h=l.rotation,p=l.textureScale,delete l.enabled;var d=this.convertOperationOptionsToUI({start:c,end:f,textureScale:p,rotation:h});c=d.start,f=d.end}e.broadcastTransform(n,r);var m=o.serializeOptions();e.setSpriteScale(n.calculateScale()),e.setRotation(h),n.set(r,t);var g=e.features.isEnabledByOptions("export");e.zoom.auto(!0,!1,function(){e.features.disable("zoom","drag","export")},!1),this.sharedState.set({transformOperation:n,initialTransformOptions:l,newTransformOptions:{start:c,end:f,rotation:h,textureScale:p},transformOperationExistedBeforeEntering:t,exportEnabled:g,orientationOperation:o,initialOrientationOptions:m,newOrientationOptions:_.Utils.cloneOptions(m),orientationOperationExistedBeforeEntering:i,start:w.fromObject(c),end:w.fromObject(f),rotation:h,orientationRotation:o.getRotation(),flipVertically:o.getFlipVertically(),flipHorizontally:o.getFlipHorizontally(),initialDimensions:s,initialRatio:n._ratio||null})}},{key:"_onBeforeLeave",value:function(){var e=this,t=this.context.ui.translate.bind(this.context.ui);return new h.a(function(n,i){var o=e.sharedState.get("changesDone"),r=e.sharedState.get("changesAccepted");if(o&&!r){return void g.ModalManager.instance.displayWarning(t("warnings.discardChanges.title"),t("warnings.discardChanges.text"),[t("warnings.discardChanges.buttons.cancel"),t("warnings.discardChanges.buttons.discard")]).on("button",function(e){return 0===e?n({leave:!1}):1===e?n({leave:!0,data:{discard:!0}}):void 0})}n({leave:!0})})}},{key:"_onLeave",value:function(e){var t=e.discard,n=this.context.editor,i=this.sharedState.get("transformOperation"),o=this.sharedState.get("orientationOperation"),r=this.sharedState.get("transformOperationExistedBeforeEntering");if(t){var a=this.sharedState.get("initialOrientationOptions");o.set(a);var s=this.sharedState.get("initialTransformOptions");n.broadcastTransform(i,s),i.set(s),i.setTextureScale(this._calculateTextureScale()),i.setEnabled(!0),r||n.operations.remove(i,!1)}else{var l={rotation:0,flipVertically:!1,flipHorizontally:!1};o.optionsEqual(l)&&n.operations.remove(o,!1);var u=this.sharedState.get("newTransformOptions"),c=u.start,f=u.end,p=u.textureScale,h=u.rotation;p=this._calculateTextureScale(),c=c.clone(),f=f.clone();var d=i.calculateScale(h),m=i.getInputDimensions(!1),_=Math.cos(-h),g=Math.sin(-h),v=f.clone().subtract(c).divide(2),y=c.clone().add(v).multiply(m),b=y.subtract(m.clone().multiply(.5)),k=new w(b.x*_-b.y*g,b.x*g+b.y*_).divide(d),C=m.clone().multiply(.5).add(k),S=C.clone().divide(m),E=S.clone().subtract(v.clone().divide(d)),x=S.clone().add(v.clone().divide(d)),T={start:new w(0,0),end:new w(1,1),rotation:0,textureScale:1},O={start:E,end:x,textureScale:p,rotation:h};O.start.equals(T.start)&&O.end.equals(T.end)&&O.rotation===T.rotation&&O.textureScale===T.textureScale?n.operations.remove(i,!1):(i.set(T),n.broadcastTransform(i,O),i.set(O),i.setTextureScale(this._calculateTextureScale()),i.setEnabled(!0))}n.setRotation(0),n.setSpriteScale(1),n.features.enable("zoom","drag","export"),this.sharedState.get("exportEnabled")&&n.features.enable("export"),n.zoom.auto(!0)}},{key:"_getGlobalHistoryData",value:function(){return{ratio:this.sharedState.get("ratio")}}},{key:"_onOperationRemoved",value:function(e){}},{key:"_calculateTextureScale",value:function(){var e=this.sharedState.get("transformOperation"),t=this.sharedState.get("ratio");if(!t||!t.dimensions)return 1;var n=this.sharedState.get("start"),i=this.sharedState.get("end"),o=i.clone().subtract(n),r=e.getInputDimensions(!1).multiply(o);return t.dimensions.x/r.x}},{key:"fixTransform",value:function(e,t,n,i){var o=this.context.editor,r=this.sharedState.get("transformOperation"),a=r.getInputDimensions(!1),s=this.sharedState.get("ratio"),l=s.ratio,u=s.dimensions;u&&!l&&(l=u.x/u.y);var c=void 0;"*"!==l&&(c=g.Utils.findIntegerFraction(l));var f=new w;f.x="left"===n?t.x:1-e.x,f.y="top"===i?t.y:1-e.y;var p=a.clone().multiply(f),h=t.clone().subtract(e),d=h.clone().multiply(a),m=C.clone().divide(o.zoom.targetLevel),_=new w(Math.min(m.x,.1*a.x),Math.min(m.y,.1*a.y));if("*"!==l&&_.divide(c).round().multiply(c),d.x=Math.min(Math.max(_.x,d.x),p.x),"*"!==l){var v=Math.floor(a.x/c.x);d.x=Math.max(1,Math.min(v,Math.round(d.x/c.x)))*c.x,d.y=d.x/l}d.y=Math.min(Math.max(_.y,d.y),p.y),"*"!==l&&(d.x=d.y*l);var y=d.divide(a);return"top"===i?e.y=t.y-y.y:t.y=e.y+y.y,"left"===n?e.x=t.x-y.x:t.x=e.x+y.x,"*"===l&&(e.multiply(a).round().divide(a),t.multiply(a).round().divide(a)),{start:e,end:t}}}],[{key:"mapOperationsToSharedState",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{transformOperation:e.get("transform"),orientationOperation:e.get("orientation")}}},{key:"getPreloadAssets",value:function(e){var t=e.getOptions(),n=_.Utils.defaults(t.editor.controlsOptions.transform,this.defaultOptions),i=["editor/controls/transform/dimensions-cross.png","editor/controls/transform/degree-slider.png","editor/controls/transform/flip.png","editor/controls/transform/lock.png","editor/controls/transform/rotate.png"];return new g.TransformRatioManager(n).getCategories().forEach(function(e){e.ratios.forEach(function(e){var t=e.identifier;i.push("editor/controls/transform/ratios/"+t+"-default.png","editor/controls/transform/ratios/"+t+"-hover.png","editor/controls/transform/ratios/"+t+"-active.png")})}),i}},{key:"isEnabled",value:function(e){return e.isToolAllowed("transform")&&e.isToolEnabled("transform")}}]),t}(g.BaseControls);S.clickAtPosition=g.BaseControls.clickAtPosition,S.identifier="transform",S.controlsComponent=b.a,S.canvasControlsComponent=y.a,S.iconPath="editor/controls/transform/icon.png",S.activeIconPath="editor/controls/transform/icon-active.png",S.requiredOperations=["transform","orientation"],S.defaultOptions={categories:[],replaceCategories:!1,availableRatios:null,enableRotation:!0,enableStraighten:!0,enableFlip:!0},S.updatableOperations=["transform","orientation"],S.switchToDefaultControlsOnRemoval=!1,v.a.Controls.TransformControls=S,t.a=S},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(6),c=n.n(u),f=n(1),p=n.n(f),h=n(2),d=n.n(h),m=n(3),_=n.n(m),g=n(7),v=(n.n(g),n(5)),y=(n.n(v),n(15)),b=n(335),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var o=c()(t,n);if(void 0===o){var r=_()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},C=g.Math.Vector2,S=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(s)));return u._bindAll("_onZoomDone","_onCornerDrag","_onCenterDragStart","_onCenterDrag","_onRotationChange","_onOperationUpdated","_onOperationRemoved","_onAcceptClick","_onAcceptMouseDown"),u._events=(n={},i(n,v.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated),i(n,v.Constants.EVENTS.OPERATION_REMOVED,u._onOperationRemoved),i(n,v.Constants.EVENTS.ZOOM_DONE,u._onZoomDone),n),u.state=g.Utils.extend(u.state,{visible:!1}),u}return a(t,e),k(t,[{key:"shouldSharedComponentUpdate",value:function(e,t){return!e.start.equals(t.start)||!e.end.equals(t.end)||e.orientationRotation!==t.orientationRotation||e.ratio!==t.ratio||e.changesDone!==t.changesDone}},{key:"sharedStateDidChange",value:function(e,t){(e.ratio&&e.ratio.ratio)!==(t.ratio&&t.ratio.ratio)&&this._calculateRatioFraction()}},{key:"sharedComponentWillUpdate",value:function(e,t){e.orientationRotation!==t.orientationRotation&&this._updateTransformAreaStyles()}},{key:"componentDidMount",value:function(){w(t.prototype.__proto__||_()(t.prototype),"componentDidMount",this).call(this),this._updateTransformAreaStyles(),this._calculateRatioFraction(),this.forceUpdate()}},{key:"componentWillUpdate",value:function(){this._updateTransformAreaStyles()}},{key:"componentDidUpdate",value:function(){!this._transformContainerRect&&this.getSharedState("ratio")&&(this._updateTransformAreaStyles(),this.forceUpdate())}},{key:"componentWillUnmount",value:function(){w(t.prototype.__proto__||_()(t.prototype),"componentWillUnmount",this).call(this),this._zoomAFRequest&&(Object(y.a)(this._zoomAFRequest),this._zoomAFRequest=null)}},{key:"_calculateRatioFraction",value:function(){var e=this.getSharedState("ratio");e&&"*"!==e.ratio&&(this._ratioFraction=v.Utils.findIntegerFraction(e.ratio))}},{key:"_onCenterDragStart",value:function(e){var t=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),areaDimensions:this._transformContainerRect.getSize(),imageDimensions:t.getInputDimensions(!1)}}},{key:"_onCenterDrag",value:function(e){var t=this._dragOptions,n=t.initialStart,i=t.initialEnd,o=t.areaDimensions,r=t.imageDimensions,a=e.clone().divide(o),s=i.clone().subtract(n),l=new C(0,0),u=new C(1,1).subtract(s),c=n.clone().add(a).clamp(l,u),f=c.clone().add(s);c.multiply(r).floor().divide(r),f.multiply(r).floor().divide(r),this.props.controls.fixTransform(c,f,"right","bottom");var p=this.getSharedState("newTransformOptions");p.start=c,p.end=f,this.setSharedState({start:c,end:f,changesDone:this.getSharedState("changesDone")||!(n.equals(c)&&i.equals(f))})}},{key:"_onCornerDragStart",value:function(e,t,n){var i=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),verticalSide:e,horizontalSide:t,areaDimensions:this._transformContainerRect.getSize(),imageDimensions:i.getInputDimensions(!1)},this._currentCorner={vertical:e,horizontal:t}}},{key:"_onCornerDrag",value:function(e){var t=this._dragOptions,n=t.initialStart,i=t.initialEnd,o=t.verticalSide,r=t.horizontalSide,a=t.areaDimensions,s=e.clone().divide(a),l=n.clone(),u=i.clone();("top"===o?l:u).y+=s.y,("left"===r?l:u).x+=s.x,this.props.controls.fixTransform(l,u,r,o);var c=this.getSharedState("newTransformOptions");c.start=l,c.end=u,this.setSharedState({start:l,end:u,changesDone:!0}),this._emitEvent(v.Constants.EVENTS.TRANSFORM_RESIZE)}},{key:"_onRotationChange",value:function(e){var t=this.getSharedState("transformOperation"),n=this.context.editor;n.setRotation(e),n.setSpriteScale(t.calculateScale(e)),this.getSharedState("newTransformOptions").rotation=e,n.render(),this.setSharedState({rotation:e,changesDone:!0})}},{key:"_onAcceptClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.getSharedState("changesDone")&&(this.setSharedState({changesAccepted:!0}),this.context.screen.switchToControls("default"))}},{key:"_onAcceptMouseDown",value:function(e){e.stopPropagation()}},{key:"_onZoomDone",value:function(){var e=this;this._zoomAFRequest=Object(y.b)(function(){e._updateTransformAreaStyles(),e.state.visible=!0,e.forceUpdate(),e._zoomAFRequest=null})}},{key:"_onOperationUpdated",value:function(e){if(e===this.getSharedState("transformOperation")){var t=this.context.editor,n=t.getSDK();n.setRotation(e.getRotation()),n.setSpriteScale(e.calculateScale()),t.render(),this.setSharedState({rotation:e.getRotation()}),this.forceUpdate()}}},{key:"_onOperationRemoved",value:function(e){"transform"!==e.constructor.identifier&&"orientation"!==e.constructor.identifier||this.forceUpdate()}},{key:"_onFlipClick",value:function(e){var t=this.context.editor,n=this.getSharedState("orientationOperation"),o=e.charAt(0).toUpperCase()+e.slice(1)+"ly",r=!this.getSharedState("flip"+o);this.setSharedState(i({},"flip"+o,r)),n.flip(e);var a=this.getSharedState("newTransformOptions"),s=-1*this.getSharedState("rotation");t.setRotation(s);var l=this.getSharedState("start").clone(),u=this.getSharedState("end").clone(),c=l.clone();"horizontal"===e?(l.set(1-u.x,l.y),u.set(1-c.x,u.y)):"vertical"===e&&(l.set(l.x,1-u.y),u.set(u.x,1-c.y)),a.start=l,a.end=u,a.rotation=s,this.setSharedState({start:l,end:u,rotation:s,changesDone:!0,newTransformOptions:a}),this.forceUpdate(),t.broadcastFlip(e),t.render()}},{key:"_onRotateClick",value:function(e){var t=this,n="cw"===e?90:-90,i=this.context.editor,o=this.getSharedState("orientationOperation"),r=(o.getRotation()+n)%360;o.set({rotation:r});var a={orientationRotation:r},s=this.getSharedState("newTransformOptions"),l=this.getSharedState("ratio");if(l)if(l.dimensions||"*"!==l.ratio)this._emitEvent(v.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO),this._emitEvent(v.Constants.EVENTS.TRANSFORM_RESIZE);else{var u=this.getSharedState("start").clone(),c=this.getSharedState("end").clone(),f=u.clone();"cw"===e?(u.set(1-c.y,f.x),c.set(1-f.y,c.x)):"ccw"===e&&(u.set(f.y,1-c.x),c.set(c.y,1-f.x)),a.start=u,a.end=c,s.start=u,s.end=c}this.setSharedState({changesDone:!0,newTransformOptions:s}),i.broadcastRotate(n),i.zoom.auto(!0,!0,function(){t.setSharedState(a)})}},{key:"_updateTransformAreaStyles",value:function(){this._transformContainerRect=this.getImageBoundingRect(),this._imageContainer&&v.Utils.styleElement(this._imageContainer,{left:this._transformContainerRect.x+"px",top:this._transformContainerRect.y+"px",width:this._transformContainerRect.width+"px",height:this._transformContainerRect.height+"px"})}},{key:"_getAreaStyles",value:function(){var e=void 0,t=void 0,n=void 0,i=void 0,o=void 0;this._transformContainer?(e=this._transformContainerRect.getSize(),o=this._transformContainerRect.getPosition(),t=this.getSharedState("start").clone().multiply(e),n=this.getSharedState("end").clone().multiply(e),i=n.clone().subtract(t)):(e=new C(0,0),t=new C(0,0),i=new C(0,0),o=new C(0,0));var r=this._getDimensionsStyles(i.x,i.y);return{topLeft:this._getDimensionsStyles(t.x+o.x,t.y+o.y),topCenter:this._getDimensionsStyles(i.x,t.y+o.y),centerLeft:this._getDimensionsStyles(t.x+o.x,i.y),center:{width:r.width},innerTransformContainer:r}}},{key:"_getDimensionsStyles",value:function(e,t){return{width:Math.max(1,e),height:Math.max(1,t)}}},{key:"_renderOnCanvasControls",value:function(){var e=this,t=this._getAreaStyles(),n=!this.getSharedState("ratio"),i={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/accept.png",!0)+"')"};return v.React.createElement(x,{innerRef:function(t){e._container=t}},v.React.createElement(D,{className:"js-imageContainer",innerRef:function(t){e._imageContainer=t}},v.React.createElement(U,{className:void 0,enabled:this.getSharedState("changesDone"),onClick:this._onAcceptClick,onMouseDown:this._onAcceptMouseDown,style:i})),v.React.createElement(I,{visible:this.state.visible,innerRef:function(t){e._transformContainer=t}},v.React.createElement(j,null,v.React.createElement(F,{style:t.topLeft}),v.React.createElement(F,{style:t.topCenter}),v.React.createElement(F,null)),v.React.createElement(j,null,v.React.createElement(F,{style:t.centerLeft}),v.React.createElement(v.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag,disabled:n},v.React.createElement(M,{style:t.center,className:void 0,undraggable:n},!n&&[v.React.createElement(v.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","left"),onDrag:this._onCornerDrag,key:"topLeft"},v.React.createElement(N,{top:!0,left:!0,className:void 0})),v.React.createElement(v.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","right"),onDrag:this._onCornerDrag,key:"topRight"},v.React.createElement(N,{top:!0,right:!0,className:void 0})),v.React.createElement(v.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","left"),onDrag:this._onCornerDrag,key:"bottomLeft"},v.React.createElement(N,{bottom:!0,left:!0,className:void 0})),v.React.createElement(v.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","right"),onDrag:this._onCornerDrag,key:"bottomRight"},v.React.createElement(N,{bottom:!0,right:!0,className:void 0})),v.React.createElement(P,{style:t.innerTransformContainer,className:void 0,key:"inner"},v.React.createElement(j,null,v.React.createElement(A,{right:!0,bottom:!0}),v.React.createElement(A,{right:!0,bottom:!0}),v.React.createElement(A,{bottom:!0})),v.React.createElement(j,null,v.React.createElement(A,{right:!0,bottom:!0}),v.React.createElement(A,{right:!0,bottom:!0}),v.React.createElement(A,{bottom:!0})),v.React.createElement(j,null,v.React.createElement(A,{right:!0}),v.React.createElement(A,{right:!0}),v.React.createElement(A,null)))])),v.React.createElement(F,null)),v.React.createElement(j,null,v.React.createElement(F,null),v.React.createElement(F,null),v.React.createElement(F,null))))}},{key:"_renderControls",value:function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/flip.png",!0)+"')"},t={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/rotate.png",!0)+"')"},n=this.props.options,i=n.enableRotation,o=n.enableFlip,r=n.enableStraighten;return v.React.createElement(E,{className:void 0},this._renderOnCanvasControls(),v.React.createElement(T,null,v.React.createElement(O,{className:void 0},o&&[v.React.createElement(L,{style:e,key:"flip-h",onClick:this._onFlipClick.bind(this,"horizontal"),className:void 0}),v.React.createElement(L,{vertical:!0,style:e,key:"flip-v",onClick:this._onFlipClick.bind(this,"vertical"),className:void 0})],r&&v.React.createElement(b.a,{value:this.getSharedState("rotation"),onChange:this._onRotationChange}),i&&[v.React.createElement(V,{style:t,key:"rotate-ccw",onClick:this._onRotateClick.bind(this,"ccw"),className:void 0}),v.React.createElement(V,{clockwise:!0,style:t,key:"rotate-cw",onClick:this._onRotateClick.bind(this,"cw"),className:void 0})])))}}]),t}(v.CanvasControlsComponent);S.contextTypes=v.CanvasControlsComponent.contextTypes,t.a=S;var E=v.adonis.div("120drhm","CanvasControls"),x=v.adonis.div("8gacw5",{draggable:"ovipzq"},"OnCanvasControls"),T=v.adonis.div("nmw377","BottomControlsContainer"),O=v.adonis.div("1gk061a","BottomControls"),R=v.adonis.div("1v9hd4r","TransformContainer"),D=v.adonis.div("15kzu1c","ImageContainer"),I=Object(v.adonis)(R)("1kjfwvf",{visible:"zgbg08"},"OuterTransformContainer"),P=Object(v.adonis)(R)("120drhm","InnerTransformContainer"),j=v.adonis.div("15u7gri","TransformRow"),B=v.adonis.div("1q481v0","TransformCell"),A=Object(v.adonis)(B)("1qh9j3j",{top:"1mup05p",right:"12l7t8k",bottom:"1ebuiz6",left:"txqhsl"},"BorderedTransformCell"),M=Object(v.adonis)(B)("52h18o",{undraggable:"16s6vgr"},"CenterTransformCell"),F=Object(v.adonis)(B)("17b4s67","DarkTransformCell"),N=v.adonis.div("1tai30v",{top:"1stnln8",right:"1wj5vxi",bottom:"17bojqc",left:"1a9ompl"},"Dragger"),z=v.adonis.button("127b6wl","Button"),L=Object(v.adonis)(z)("120drhm",{vertical:"12fqiy2"},"FlipButton"),V=Object(v.adonis)(z)("120drhm",{clockwise:"o7ss47"},"RotateButton"),U=v.adonis.div("sbdqjz",{enabled:"ro0g1e"},"AcceptButton")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(6),u=n.n(l),c=n(1),f=n.n(c),p=n(2),h=n.n(p),d=n(3),m=n.n(d),_=n(5),g=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),v=function e(t,n,i){null===t&&(t=Function.prototype);var o=u()(t,n);if(void 0===o){var r=m()(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},y=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(r)));return s._bindAll("_onDragStart","_onDrag"),s._width=0,s.state={value:s.props.value||0},s}return r(t,e),g(t,[{key:"componentDidMount",value:function(){v(t.prototype.__proto__||m()(t.prototype),"componentDidMount",this).call(this),this._degreesPerPixel=90/217}},{key:"componentWillReceiveProps",value:function(e){this.state.value!==e.value&&this.setState({value:e.value})}},{key:"_onDragStart",value:function(){this._initialDegrees=180*this.state.value/Math.PI}},{key:"_onDrag",value:function(e){var t=this._initialDegrees+e.x*this._degreesPerPixel;t=Math.min(45,Math.max(t,-45));var n=t*Math.PI/180;this.setState({value:n}),this.props.onChange&&this.props.onChange(n)}},{key:"_getValue",value:function(){return Math.round(180*this.state.value/Math.PI)+"°"}},{key:"_getIndicatorPosition",value:function(){var e=45*Math.PI/180;return this._width/2+this.state.value/e*(this._width/2)}},{key:"_getIndicatorStyles",value:function(){var e=45*Math.PI/180;return{left:{left:108.5+this.state.value/e*108.5},right:{right:108.5-this.state.value/e*108.5}}}},{key:"render",value:function(){var e=this._getIndicatorStyles(),t={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:e.left.left-4},n={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:e.left.left+35};return _.React.createElement(_.DraggableComponent,{onStart:this._onDragStart,onDrag:this._onDrag},_.React.createElement(b,{className:void 0},_.React.createElement(k,{style:t},_.React.createElement(w,{style:e.left})),_.React.createElement(C,{className:void 0},this._getValue()),_.React.createElement(k,{style:n},_.React.createElement(w,{style:e.right}))))}}]),t}(_.BaseComponent);y.contextTypes=_.BaseComponent.contextTypes,t.a=y;var b=_.adonis.div("tix0xu","Wrapper"),k=_.adonis.div("6mdana","RotationSlider"),w=_.adonis.div("nxjpo","Indicator"),C=_.adonis.div("d97kws","Value")},function(e,t,n){"use strict";function i(e,t,n){return t in e?l()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(1),c=n.n(u),f=n(2),p=n.n(f),h=n(3),d=n.n(h),m=n(7),_=(n.n(m),n(5)),g=(n.n(_),n(337)),v=n(338),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=_.GroupedControlsStyles.ControlGroupList,k=_.GroupedControlsStyles.ControlGroup,w=_.GroupedControlsStyles.ControlGroupTitle,C=m.Math.Vector2,S=function(e){function t(){var e,n;o(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=r(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s)));return u._bindAll("_reapplyRatio","_onHistoryChange","_onResetDefaultClick","_onOperationRemoved","_onOperationUpdated"),u._events=(n={},i(n,_.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO,u._reapplyRatio),i(n,_.Constants.EVENTS.OPERATION_REMOVED,u._onOperationRemoved),i(n,_.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated),i(n,_.Constants.EVENTS.HISTORY_UNDO,u._onHistoryChange),i(n,_.Constants.EVENTS.HISTORY_REDO,u._onHistoryChange),n),u._transformRatioManager=new _.TransformRatioManager(u.props.options),u.state.ratio=null,u._selectInitialRatio(!u.getSharedState("transformOperationExistedBeforeEntering")),u}return a(t,e),y(t,[{key:"shouldSharedComponentUpdate",value:function(e,t){return e.ratio!==t.ratio}},{key:"_onHistoryChange",value:function(e){var t=this.context.editor,n={},i=t.operations.get("transform");if(i){var o=this.getSharedState("newTransformOptions"),r=this.props.controls.convertOperationOptionsToUI(i.serializeOptions());o.start=r.start,o.end=r.end,o.rotation=r.rotation,o.textureScale=r.textureScale,n.newTransformOptions=o,n.changesDone=!0,e.data&&e.data.ratio&&(n.ratio=e.data.ratio);var a={end:new C(1,1),rotation:0,start:new C(0,0),textureScale:1};t.broadcastTransform(i,a),this.setSharedState(n),t.zoom.auto(!0,!0)}}},{key:"_onOperationUpdated",value:function(e){var t=this.context.editor;if(this.getSharedState("transformOperation")===e){var n=this.props.controls.convertOperationOptionsToUI(e.serializeOptions());this.setSharedState({rotation:n.rotation,start:n.start,end:n.end}),t.zoom.auto(!0,!0)}}},{key:"_onOperationRemoved",value:function(e){var t=this.context.editor;if(this.getSharedState("transformOperation")===e){var n=t.operations.getOrCreate("transform",{enabled:!1}),i=t.getSDK();i.setRotation(0),i.setSpriteScale(1),this.setSharedState({transformOperation:n,rotation:0,initialTransformOptions:n.serializeOptions(),transformOperationExistedBeforeEntering:!1}),n._ratio=null,this._selectInitialRatio(!0,!0)}if(this.getSharedState("orientationOperation")===e){var o=t.operations.getOrCreate("orientation");this.setSharedState({orientationOperation:o,rotation:0,flipVertically:!1,flipHorizontally:!1})}}},{key:"_onResetDefaultClick",value:function(){var e=this.context.editor,t=this.getSharedState("orientationOperation"),n=t.getRotation();t.set({flipHorizontally:!1,flipVertically:!1,rotation:0}),e.broadcastRotate(-n);var i=this.getSharedState("newTransformOptions");i.start=new C(0,0),i.end=new C(1,1),i.rotation=0,this.setSharedState({ratio:null,start:new C(0,0),end:new C(1,1),orientationRotation:0,rotation:0,flipVertically:!1,flipHorizontally:!1,changesDone:!0}),this._emitEvent(_.Constants.EVENTS.TRANSFORM_RESIZE),e.setRotation(0),e.setSpriteScale(1),e.zoom.auto(!0,!0)}},{key:"_reapplyRatio",value:function(){var e=this.getSharedState("ratio");this._selectRatio(e)}},{key:"_selectRatio",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.getSharedState("transformOperation");t&&e&&this._setDefaultOptionsForRatio(e,n),i._ratio=e,this.setSharedState({ratio:e},n),n&&this.setSharedState({changesDone:!0}),this._emitEvent(_.Constants.EVENTS.TRANSFORM_RESIZE)}},{key:"_setDefaultOptionsForRatio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||{},i=n.ratio,o=n.dimensions,r=new C,a=new C;o&&!i&&(i=o.x/o.y);var s=i&&_.Utils.findIntegerFraction(i);if(i&&"*"!==i){var l=this.getSharedState("transformOperation"),u=l.getInputDimensions(!1),c=u.x/u.y,f=void 0,p=void 0;if(c<=i){var h=Math.floor(u.x/s.x)*s.y;p=Math.floor(Math.min(h,u.y)/s.y)*s.y,f=p*i,r.set((u.x-f)/2,(u.y-p)/2).floor()}else{var d=Math.floor(u.y/s.y)*s.x;f=Math.floor(Math.min(d,u.x)/s.x)*s.x,p=f/i,r.set((u.x-f)/2,(u.y-p)/2).floor()}a.copy(r).add(f,p),r.divide(u),a.divide(u)}else r=new C(0,0),a=new C(1,1);var m=this.getSharedState("newTransformOptions");m.start=r,m.end=a,this.setSharedState({start:r,end:a},t)}},{key:"_selectInitialRatio",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getSharedState("transformOperation"),o=null,r=this._transformRatioManager.getCategories(),a=r.map(function(t){return e._transformRatioManager.getRatiosForCategory(t)}).reduce(function(e,t){return e.concat(t)}),s=i._ratio;if(s){o=a.filter(function(e){return e===s})[0]}if(!o){o=a.filter(function(e){return e.selected}).pop()}return o||(o=a[0],"*"!==o.ratio&&this.setSharedState({changesDone:!0})),this._selectRatio(o,t,n)}},{key:"_renderSections",value:function(){var e=this,t=function(t){return _.React.createElement(T,{key:t.identifier},_.React.createElement(O,null,e._t("editor.controls.transform.ratios."+t.identifier+".name")||t.defaultName),_.React.createElement(R,null,n(t)))},n=function(t){return e._transformRatioManager.getRatiosForCategory(t).map(function(n){var i=e.getSharedState("ratio")===n;return _.React.createElement(g.a,{key:n.identifier,defaultIconPath:"editor/controls/transform/ratios/"+n.identifier+"-default.png",hoverIconPath:"editor/controls/transform/ratios/"+n.identifier+"-hover.png",activeIconPath:"editor/controls/transform/ratios/"+n.identifier+"-active.png",onClick:e._selectRatio.bind(e,n),title:e._t("editor.controls.transform.ratios."+t.identifier+".ratios."+n.identifier)||n.defaultName,identifier:n.identifier,selected:i})})};return this._transformRatioManager.getCategories().map(function(n){return e._transformRatioManager.getRatiosForCategory(n).length>0?t(n):null})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var e=this,t=this.context.options,n=t.editor.forceCrop,i=this.getSharedState("ratio");return[_.React.createElement(_.ScrollableListComponent,{key:"list",direction:"vertical",innerRef:function(t){e._scrollbar=t}},_.React.createElement(x,null,_.React.createElement(E,null,_.React.createElement(_.ButtonComponent,{disabled:n,title:this._t("editor.controls.transform.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderSections())),_.React.createElement(v.a,{key:"transformDimensions",controls:this.props.controls,disabled:!i||!!i.dimensions})]}}]),t}(_.ControlsComponent);S.contextTypes=_.ControlsComponent.contextTypes,S.RootElement=_.ControlsComponent.RootElement,t.a=S;var E=_.adonis.li("7abnmv","SectionListHeader"),x=Object(_.adonis)(b).ul("x32ss4","SectionList"),T=Object(_.adonis)(k).li("ber9o0","Section"),O=Object(_.adonis)(w).div("15ebqhq","SectionTitle"),R=_.adonis.ul("1klgjyq","SectionGrid")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(5),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=d.ControlsStyles.PlainControlItem,g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return s.state={hovered:!1},s}return r(t,e),m(t,[{key:"render",value:function(){var e=this,t={backgroundImage:"url('"+this._getAssetPath(this.props.defaultIconPath,!0)+"')"},n={backgroundImage:"url('"+this._getAssetPath(this.props.hoverIconPath,!0)+"')"},i={backgroundImage:"url('"+this._getAssetPath(this.props.activeIconPath,!0)+"')"},o=this.props,r=o.selected,a=o.onClick,s=o.identifier,l=o.title,u=this.state.hovered;return d.React.createElement(v,{selected:r,onClick:a,"data-identifier":s,"data-selected":r,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},className:void 0},d.React.createElement(d.Transition,{active:!r},d.React.createElement(y,{style:t})),d.React.createElement(d.Transition,{active:!r&&u},d.React.createElement(y,{style:n})),d.React.createElement(d.Transition,{active:r},d.React.createElement(y,{style:i})),d.React.createElement(b,{selected:r},l))}}]),t}(d.BaseComponent);g.contextTypes=d.BaseComponent.contextTypes,t.a=g;var v=Object(d.adonis)(_).li("71xi0n","TransformListItem"),y=d.adonis.div("u0ryhr",{rendered:"2jlos",visible:"82svov"},"Icon"),b=d.adonis.div("jpjwq7",{selected:"zgbg08"},"Title")},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),l=n(1),u=n.n(l),c=n(2),f=n.n(c),p=n(3),h=n.n(p),d=n(7),m=(n.n(d),n(5)),_=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),g=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=o(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r))),l=s._getTransformDimensions();return s.state={dimensions:l,x:l.x,y:l.y},s}return r(t,e),_(t,[{key:"shouldSharedComponentUpdate",value:function(e,t){return!e.start.equals(t.start)||!e.end.equals(t.end)||e.ratio!==t.ratio}},{key:"sharedComponentWillUpdate",value:function(e,t){if(t.transformOperation){var n=this._getTransformDimensions(),i=n.x,o=n.y;this.state.dimensions=n,this.state.x=i,this.state.y=o}}},{key:"_onInputLiveChange",value:function(e,t){var n=t.target.value;n.length&&!n.match(/\d+?/i)||(this.state[e]=n&&parseInt(n,10)||"",this.forceUpdate())}},{key:"_onInputChange",value:function(e,t){var n=this.state[e]||0,i=this.getSharedState("transformOperation"),o=i.getInputDimensions(!1),r=this.getSharedState("ratio"),a=r.ratio,s=this.getSharedState("start"),l=this.getSharedState("end"),u=l.clone().subtract(s),c=u.clone().multiply(o);if(c[e]=Math.min(o[e],n),"*"!==a){var f=m.Utils.findIntegerFraction(a);c[e]=Math.max(1,Math.round(c[e]/f[e]))*f[e],"x"===e?c.y=c.x/a:c.x=c.y*a}var p=c.clone();(c.x>o.x||c.y>o.y)&&(p=d.Utils.resizeVectorToFit(c,o));var h=this._getTransformDimensions(),_=h.x,g=h.y;this.state.dimensions=h,this.state.x=_,this.state.y=g,this._resizeTransformTo(p),this.forceUpdate()}},{key:"_getTransformDimensions",value:function(){var e=this.getSharedState("transformOperation"),t=this.getSharedState("ratio")||{ratio:"*"},n=void 0;if(t.dimensions)n=t.dimensions.clone();else{var i=e.getInputDimensions(!1),o=this.getSharedState("start");n=this.getSharedState("end").clone().subtract(o).multiply(i).round()}return n}},{key:"_resizeTransformTo",value:function(e){var t=this.getSharedState("transformOperation"),n=t.getInputDimensions(!1),i=this.getSharedState("start").clone(),o=this.getSharedState("end").clone(),r=e.divide(n);o.copy(i).add(r),o.x>1&&(i.x-=o.x-1,o.x=1),o.y>1&&(i.y-=o.y-1,o.y=1);var a=this.props.controls,s=a.fixTransform(i,o,"right","bottom"),l=s.start,u=s.end,c=this.getSharedState("newTransformOptions");c.start=l,c.end=u,this.setSharedState({start:l,end:u}),this._emitEvent(m.Constants.EVENTS.TRANSFORM_RESIZE)}},{key:"render",value:function(){return m.React.createElement(b,{className:void 0},m.React.createElement(k,null,m.React.createElement(w,null,m.React.createElement(C,null,m.React.createElement(v,{suffix:this._t("editor.controls.transform.dimensions.width"),name:"width",disabled:this.props.disabled,value:this.state.x,onLiveChange:this._onInputLiveChange.bind(this,"x"),onChange:this._onInputChange.bind(this,"x")})),m.React.createElement(S,null,m.React.createElement(y,{src:this._getAssetPath("editor/controls/transform/dimensions-cross.png",!0)})),m.React.createElement(C,null,m.React.createElement(v,{suffix:this._t("editor.controls.transform.dimensions.height"),name:"height",disabled:this.props.disabled,value:this.state.y,onLiveChange:this._onInputLiveChange.bind(this,"y"),onChange:this._onInputChange.bind(this,"y")}))),m.React.createElement(m.Transition,{active:this.props.disabled,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},m.React.createElement(E,{className:void 0},m.React.createElement(x,{src:this._getAssetPath("editor/controls/transform/lock.png",!0)})))))}}]),t}(m.SharedStateComponent);g.contextTypes=m.SharedStateComponent.contextTypes,t.a=g;var v=Object(m.adonis)(m.SuffixedTextInputComponent)("2jlos","DimensionInput"),y=m.adonis.img("1dew3s1","Cross"),b=m.adonis.div("1yz821h","TransformDimensions"),k=m.adonis.div("1dg9k0o","TransformDimensionsWrapper"),w=m.adonis.div("wlk9p6","Table"),C=m.adonis.div("1q481v0","Cell"),S=Object(m.adonis)(C)("13lk3i9","CrossCell"),E=m.adonis.div("943mx5",{rendered:"2jlos",visible:"rval4i"},"LockOverlay"),x=m.adonis.img("1hp46pm","Lock")}])});