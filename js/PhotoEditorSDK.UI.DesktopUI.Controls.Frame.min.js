!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core")):"function"==typeof define&&define.amd?define([["PhotoEditorSDK","UI","DesktopUI"]],t):"object"==typeof exports?exports._unexposedPESDK=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core")):e._unexposedPESDK=t(e.PhotoEditorSDK.UI.DesktopUI)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=66)}({0:function(t,n){t.exports=e},2:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});for(var o="undefined"==typeof window?e:window,r=o.requestAnimationFrame,a=o.cancelAnimationFrame,i=0,s=["ms","moz","webkit","o"],c=0;c<s.length&&!r;++c)r=o[s[c]+"RequestAnimationFrame"],a=o[s[c]+"CancelAnimationFrame"]||o[s[c]+"CancelRequestAnimationFrame"];r&&(r=r.bind(o)),a&&(a=a.bind(o)),r||(r=function(e,t){var n=(new Date).getTime(),o=Math.max(0,16-(n-i)),r=setTimeout(function(){e(n+o)},o);return i=n+o,r}),a||(a=function(e){clearTimeout(e)})}).call(t,n(4))},4:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},66:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n.n(i),c=n(67),l=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype._onEnter=function(){var e=this.context.editor,t=e.operations.get("frame");this.sharedState.set({operation:t})},t.prototype._onOperationRemoved=function(e){},t.isEnabled=function(e){return e.isToolAllowed("frame")&&e.isToolEnabled("frame")},t}(i.BaseControls);l.clickAtPosition=i.BaseControls.clickAtPosition,l.getPreloadAssets=i.BaseControls.getPreloadAssets,l.identifier="frame",l.controlsComponent=c.a,l.canvasControlsComponent=i.BaseControls.canvasControlsComponent,l.iconPath="editor/controls/frame/icon.png",l.activeIconPath="editor/controls/frame/icon-active.png",l.requiredOperations=["frame"],l.defaultOptions={categories:[],replaceCategories:!1,availableFrames:null},t.default=l,s.a.Controls.FrameControls=l},67:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=(n.n(s),n(68)),l=n(70),p={ROOT:1,CATEGORY:2,OPTIONS:3},u=function(e){function t(){var n;r(this,t);for(var i=arguments.length,c=Array(i),l=0;l<i;l++)c[l]=arguments[l];var u=a(this,e.call.apply(e,[this].concat(c)));u._bindAll("_onFrameClick","_onReplaceClick","_onHistoryChange","_onOperationUpdated"),u._initFrameManager(),u._needsStyleFixes=!0;var f=p.ROOT,h=u.getSharedState("operation");return h&&h.getFrame()&&(f=p.OPTIONS),u.state={currentPanel:f},u._events=(n={},o(n,s.Constants.EVENTS.HISTORY_UNDO,u._onHistoryChange),o(n,s.Constants.EVENTS.HISTORY_REDO,u._onHistoryChange),o(n,s.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated),n),u}return i(t,e),t.prototype.fixStyles=function(){var t=this;return this._list.style.height="100%",e.prototype.fixStyles.call(this).then(function(){if(s.Utils.Browser.isIElte(10)){var e=t._container.offsetHeight;t._list.style.height=e+"px"}return t.refs.panel.fixStyles()})},t.prototype.componentDidUpdate=function(e,t){this.state.currentPanel!==t.currentPanel&&this.fixStyles()},t.prototype._initFrameManager=function(){this._frameManager=new s.FrameManager(this.context.ui,this.props.options)},t.prototype._onOperationUpdated=function(e){e===this.getSharedState("operation")&&this.forceUpdate()},t.prototype._onHistoryChange=function(){var e=this.context.editor,t=e.operations.get("frame");return!t||t&&!t.getFrame()?this.setState({currentPanel:p.ROOT}):this.setState({currentPanel:p.OPTIONS})},t.prototype._onReplaceClick=function(){this.setState({currentPanel:p.ROOT})},t.prototype._onCategoryClick=function(e){this.setState({currentPanel:p.CATEGORY,category:e})},t.prototype._onFrameClick=function(e){var t=this,n=this.context.editor;if(!e){var o=this.getSharedState("operation");return void(o&&(n.operations.remove(o),this.setSharedState({operation:null}),this.props.controls.addLocalHistorySnapshot("frame-image",!1),n.render()))}var r=new s.Frame(this.context.ui,e),a=n.operations.getOrCreate("frame"),i=void 0,c=setTimeout(function(){i=s.ModalManager.instance.displayLoading(t._t("loading.loading"))},100);r.load().then(function(){i&&i.close(),c&&(clearTimeout(c),c=null),a.setFrame(r.getFrame()),t.props.controls.addLocalHistorySnapshot("frame-image",!1),n.render(),t.setSharedState({operation:a},!1),t.setState({currentPanel:p.OPTIONS})})},t.prototype._renderCurrentPanel=function(){var e=this,t=this.props.controls;switch(this.state.currentPanel){case p.ROOT:return s.React.createElement(c.a,{innerRef:function(t){e._list=t},frameManager:this._frameManager,onFrameClick:this._onFrameClick,controls:t,ref:"panel"});case p.OPTIONS:return s.React.createElement(l.a,{innerRef:function(t){e._list=t},frameManager:this._frameManager,onReplaceClick:this._onReplaceClick,onNewFrameClick:this._onNewFrameClick,controls:t,ref:"panel"})}},t.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},t.prototype._renderContent=function(){return this._renderCurrentPanel()},t}(s.ControlsComponent);u.contextTypes=s.ControlsComponent.contextTypes,u.RootElement=s.ControlsComponent.RootElement,t.a=u},68:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),n(2)),c=n(69),l=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){i.Utils.Browser.isIElte(10)?Object(s.b)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.render=function(){var e=this,t=this.props,n=t.frameManager,o=t.innerRef;return i.React.createElement(p,{innerRef:function(t){o&&o(t),e._wrapper=t},className:void 0},i.React.createElement(i.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},i.React.createElement(c.a,{frames:n.getFramesForCategory("all"),onFrameClick:this.props.onFrameClick})))},t}(i.BaseComponent);l.contextTypes=i.BaseComponent.contextTypes,t.a=l;var p=i.adonis.div("rfecls","Wrapper")},69:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),i.ControlsStyles.PlainControlItem),c=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype._onFrameClick=function(e){this.props.onFrameClick&&this.props.onFrameClick(e)},t.prototype._renderListItems=function(){var e=this,t=this.props.frames,n=void 0,o=this.getSharedState("operation");o&&o.getFrame()&&(n=o.getFrame().identifier);var r=this.getSharedState("selectedSprite");return r&&(n=r.getIdentifier()),t.map(function(t){var o=e._getAssetPath(t.thumbnail),r={background:"url('"+o+"') no-repeat center center",backgroundSize:"contain"};return i.React.createElement(p,{selected:t.identifier===n,key:t.identifier,onClick:e._onFrameClick.bind(e,t),className:void 0,twoColumns:!0},i.React.createElement(u,{style:r}))})},t.prototype.render=function(){var e=this.getSharedState("operation"),t=e&&e.getFrame();return i.React.createElement(l,null,i.React.createElement(p,{selected:!t,onClick:this._onFrameClick.bind(this,null),className:void 0,withText:!0,twoColumns:!0},"None"),this._renderListItems())},t}(i.SharedStateComponent);c.contextTypes=i.SharedStateComponent.contextTypes,t.a=c;var l=i.adonis.ul("18qztam","FrameList"),p=Object(i.adonis)(s).li("u8nfgk","FrameListItem"),u=i.adonis.div("7r0ke8","FrameImage")},70:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=(n.n(s),n(2)),l=s.ControlsStyles.PlainControlItemBackground,p=function(e){function t(){var n;r(this,t);for(var i=arguments.length,c=Array(i),l=0;l<i;l++)c[l]=arguments[l];var p=a(this,e.call.apply(e,[this].concat(c)));p._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange","_onWidthChange","_onHistoryChange"),p._events=(n={},o(n,s.Constants.EVENTS.HISTORY_UNDO,p._onHistoryChange),o(n,s.Constants.EVENTS.HISTORY_REDO,p._onHistoryChange),n);var u=p.getSharedState("operation");return p.state={tintEnabled:u.getTintColor().a>0,tintColor:u.getTintColor()},p}return i(t,e),t.prototype._onTintToggle=function(e){var t=this.getSharedState("operation"),n=this.state.tintEnabled,o=t.getTintColor().clone();o.a=n?0:1,t.setTintColor(o),this.props.controls.addLocalHistorySnapshot("frame-tint-enabled"),this.context.editor.render(),this.setState({tintEnabled:!n})},t.prototype._onTintColorChange=function(e){this.getSharedState("operation").setTintColor(e.clone()),this.props.controls.addLocalHistorySnapshot("frame-tint-color",!0),this.context.editor.render(),this.forceUpdate()},t.prototype._onHistoryChange=function(){if(this.context.editor.operations.exists("frame")){var e=this.getSharedState("operation");e.getFrame()&&this.setState({tintEnabled:e.getTintColor().a>0,tintColor:e.getTintColor().clone()})}},t.prototype._onOpacityChange=function(e){this.getSharedState("operation").setAlpha(e/100),this.props.controls.addLocalHistorySnapshot("frame-opacity",!0),this.context.editor.render(),this.forceUpdate()},t.prototype._onWidthChange=function(e){var t=this.context.editor,n=this.getSharedState("operation"),o=n.getInputDimensions().min();n.setScale(e/o),this.props.controls.addLocalHistorySnapshot("frame-width",!0),t.render(),this.forceUpdate()},t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(c.b)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.render=function(){var e=this,t=this.props,n=t.innerRef,o=t.onReplaceClick,r=this.getSharedState("operation"),a=r.getFrame(),i=r.getInputDimensions(),c=i.min(),l=a.tintable,p={background:"url('"+this._getAssetPath(a.thumbnail,!1)+"') center center / contain no-repeat"};return s.React.createElement(u,{innerRef:function(t){n&&n(t),e._wrapper=t},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},s.React.createElement("div",null,s.React.createElement(f,null,s.React.createElement(h,null,s.React.createElement(d,null,s.React.createElement(m,{style:p,onClick:o})),s.React.createElement(y,null,s.React.createElement(C,null,this._t("editor.controls.frame.frames."+a.identifier)||a.defaultName),s.React.createElement(g,{onClick:o,className:void 0},this._t("editor.controls.frame.replace")))),s.React.createElement(s.SliderControlComponent,{minValue:0,value:Math.round(100*r.getAlpha()),maxValue:100,label:this._t("editor.controls.frame.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0}),s.React.createElement(s.SliderControlComponent,{minValue:.05*c,value:Math.round(r.getScale()*c),maxValue:.3*c,label:this._t("editor.controls.frame.width"),onSliderValueChange:this._onWidthChange,onValueChange:this._onWidthChange,middleDot:!1,className:void 0})),l&&s.React.createElement(s.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.frame.fill"),expanded:this.state.tintEnabled,className:void 0,onToggle:this._onTintToggle},s.React.createElement(b,{value:this.state.tintColor,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))},t}(s.SharedStateComponent);p.contextTypes=s.SharedStateComponent.contextTypes,t.a=p;var u=s.adonis.div("rfecls","Wrapper"),f=s.adonis.div("1vnvjau","TopSection"),h=s.adonis.div("16woy02","Details"),d=Object(s.adonis)(l).div("6u8g0p","Thumbnail"),m=s.adonis.div("7r0ke8","ThumbnailImage"),y=s.adonis.div("1trlo6v","DetailsContainer"),C=s.adonis.div("w9mc0y","Title"),g=s.adonis.div("1rhky7p","ReplaceButton"),b=Object(s.adonis)(s.ColorSelectionComponent)("1ouwzwk","ColorSelection")}}).default});