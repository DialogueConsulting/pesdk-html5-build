!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):"function"==typeof define&&define.amd?define([["PhotoEditorSDK","UI","DesktopUI"],"photoeditorsdk"],e):"object"==typeof exports?exports._unexposedPESDK=e(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):t._unexposedPESDK=e(t.PhotoEditorSDK.UI.DesktopUI,t.PhotoEditorSDK)}("undefined"!=typeof self?self:this,function(t,e){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=42)}({0:function(e,o){e.exports=t},1:function(t,o){t.exports=e},3:function(t,e,o){"use strict";function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=o(1),p=(o.n(s),o(0)),c=(o.n(p),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}),l=s.Math.Vector2,h=void 0;s.Operations.SpriteOperation&&(h=s.Operations.SpriteOperation.TextSprite);var u=function(t){function e(){r(this,e);for(var o=arguments.length,n=Array(o),a=0;a<o;a++)n[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(n)));return s._bindAll("_onDragStart","_onDrag","_onDragStop","_onRotateDragStart","_onRotateDrag","_onRotateDragStop","_onCornerDrag","_onCornerDragStop","_onSpriteUpdate","_onTakeToFront","_onFlipHorizontally","_onDuplicate","_onDelete"),s}return a(e,t),e.prototype.componentDidMount=function(){this.props.sprite.on("update",this._onSpriteUpdate)},e.prototype.componentWillUnmount=function(){this.props.sprite.off("update",this._onSpriteUpdate)},e.prototype.componentWillReceiveProps=function(t){this.props.sprite.off("update",this._onSpriteUpdate),t.sprite.on("update",this._onSpriteUpdate)},e.prototype._onSpriteUpdate=function(){this.forceUpdate()},e.prototype._onTakeToFront=function(t){t.stopPropagation(),this.props.onTakeToFront&&this.props.onTakeToFront(t)},e.prototype._onFlipHorizontally=function(t){t.stopPropagation(),this.props.onFlipHorizontally&&this.props.onFlipHorizontally(t)},e.prototype._onDelete=function(t){t.stopPropagation(),this.props.onDelete&&this.props.onDelete(t)},e.prototype._onDuplicate=function(t){t.stopPropagation(),this.props.onDuplicate&&this.props.onDuplicate(t)},e.prototype._onBeforeScale=function(){},e.prototype._onScale=function(t){},e.prototype._onRotateDragStart=function(){this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onRotateDrag=function(t,e){var o=this.context.editor,n=this.props.sprite,r=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),i=r.clone(),a=e.clone().subtract(this._containerOffset).subtract(i),s=Math.atan2(a.y,a.x)-Math.PI/2,p=this.props,c=p.snapRotation,l=p.snapRotationTolerance,h=Math.round(180*s/Math.PI),u=Math.round(h/c)*c,d=h-u;Math.abs(d)<l&&(s=u*Math.PI/180),n.setRotation(s),o.render(),this.forceUpdate()},e.prototype._onRotateDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._onCornerDragStart=function(t,e,o,n){var r=this.context.editor,i=this.props.sprite,a=i.getDimensions(r.getSDK(),r.getOutputDimensions()),s=a.x;this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var p=i.getPivot(),c=i.getAnchor(),h=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),u=i.getDimensions(r.getSDK(),r.getOutputDimensions()),d=new l(u.width,u.height),f=h.clone().subtract(d.clone().multiply(c)).add(d.clone().multiply(p)).round(),g=n.clone().subtract(this._containerOffset).subtract(f);this._initialScaleSettings={width:s,mouseDistanceFromPivot:g},this._onBeforeScale(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onCornerDrag=function(t){var e=this.context.editor,o=this.props.sprite,n=o.getRotation(),r=this._initialScaleSettings,i=r.width,a=r.mouseDistanceFromPivot,s=a.clone().add(t),p=Math.cos(n),c=Math.sin(n),l=Math.max(Math.abs(2*(s.x*p+s.y*c)),this.constructor.MIN_WIDTH),h=l/i;e.render(),this._onScale(h)},e.prototype._onCornerDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._isDraggingDisabled=function(){return!this.props.selected},e.prototype._onDragStart=function(){var t=this.props.sprite;this._initialPosition=t.getPosition(),this.props.onBeforeChange&&this.props.onBeforeChange()},e.prototype._onDrag=function(t){var e=this.props.sprite,o=this.context.editor,n=o.getOutputDimensions(),r=this._initialPosition.clone().add(t.divide(n));e.setPosition(r),o.render(),this.forceUpdate()},e.prototype._onDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange()},e.prototype._getAbsoluteSpritePosition=function(){var t=this.context.editor,e=t.getOutputDimensions();return this.props.sprite.getPosition().clone().multiply(e)},e.prototype._getContainerStyle=function(){return{}},e.prototype._renderKnobs=function(){var t=this,e=[];return["top","bottom"].forEach(function(o){["left","right"].forEach(function(r){var i=o+"-"+r,a=n({},i,!0);e.push(p.React.createElement(p.DraggableComponent,{key:i,onStart:t._onCornerDragStart.bind(t,o,r),onDrag:t._onCornerDrag,onStop:t._onCornerDragStop},p.React.createElement(v,a)))})}),e},e.prototype._getSpriteDimensions=function(){var t=this.context.editor,e=this.props.sprite,o=t.getOutputDimensions();return e.getDimensions(t.getSDK(),o)},e.prototype._getOverlayPosition=function(){var t=this.context.editor,e=this.props.sprite,o=t.getOutputDimensions(),n=this._getSpriteDimensions(),r=e.getPosition().clone().multiply(o),i=e.getRotation(),a=Math.sin(i),s=Math.cos(i),p=new l(Math.abs(n.x*s)+Math.abs(n.y*a),Math.abs(n.x*a)+Math.abs(n.y*s));return new l(r.x,r.y-p.y/2-70).clamp(new l(80,20),o.clone().subtract(80,70))},e.prototype._renderOverlayControls=function(){if(this.props.selected)return p.React.createElement(p.CanvasOverlayControlsComponent,{takeToFront:!0,flipHorizontally:!(this.props.sprite instanceof h),duplicate:!0,delete:!0,position:this._getOverlayPosition(),onTakeToFront:this._onTakeToFront,onFlipHorizontally:this._onFlipHorizontally,onDuplicate:this._onDuplicate,onDelete:this._onDelete})},e.prototype._getItemControlsProps=function(){return{}},e.prototype.render=function(){var t=this,e=this.props,o=e.selected,n=e.sprite,r=this.state.editing,i=!r,a=[this._renderKnobs(),p.React.createElement(m,{key:"rotateControls"},p.React.createElement(p.DraggableComponent,{onStart:this._onRotateDragStart,onDrag:this._onRotateDrag,onStop:this._onRotateDragStop},p.React.createElement(S,null)))],s=this._getItemControlsProps(),l=p.React.createElement(g,c({style:this._getContainerStyle()},s),a);return p.React.createElement(p.DraggableComponent,{onStart:this._onDragStart,onStop:this._onDragStop,onDrag:this._onDrag,disabled:this._isDraggingDisabled()},p.React.createElement(d,{onClick:this.props.onClick,"data-type":n.constructor.type,"data-selected":o,className:void 0},this._renderOverlayControls(),p.React.createElement(f,{style:this._getContainerStyle(),editing:o&&r,innerRef:function(e){t._container=e},className:void 0},p.React.createElement(y,null,this._renderContent()),o&&!i&&a),o&&i&&l))},e}(p.BaseComponent);u.contextTypes=p.BaseComponent.contextTypes,u.MIN_WIDTH=1,u.defaultProps={snapRotation:90,snapRotationTolerance:5},e.a=u;var d=p.adonis.div("120drhm","OuterContainer"),f=p.adonis.div("bkf7u8",{editing:"64zghi"},"Container"),g=p.adonis.div("36haff","ItemControls"),y=p.adonis.div("120drhm","Content"),m=p.adonis.div("77tiy3","RotateControl"),_=p.adonis.div("mznefm","Knob"),S=Object(p.adonis)(_)("1en5760","RotateKnob"),v=Object(p.adonis)(_)("bdmepn",{"top-left":"1dtvxe8","top-right":"1tu191k","bottom-left":"1we5ut6","bottom-right":"f2wva1"},"CornerKnob")},42:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=(o.n(a),o(0)),p=o.n(s),c=o(43),l=o(47),h=a.Math.Vector2,u=void 0,d=void 0;a.Operations.SpriteOperation&&(u=a.Operations.SpriteOperation.TextSprite,d=a.Operations.SpriteOperation.BrushSprite);var f=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.createText=function(){var t=this.context.editor,e=this.sharedState.get("operation"),o=this.sharedState.get("fontManager"),n=o.getDefaultVariation(),r=t.getOutputDimensions(),i=t.getSDK(),s=i.getRenderer(),p=s.getMaxTextureSize(),c=e.createText({text:this.context.ui.translate("editor.controls.text.defaultText"),position:new h(.5,.5),maxWidth:.5,maxHeight:p?p/r.y:3,textMetrics:n.getTextMetrics(),fontIdentifier:n.getIdentifier(),fontSize:.08,fontFamily:n.getFontFamily(),fontWeight:n.getFontWeight(),fontStyle:n.getFontStyle(),color:a.Color.WHITE,alignment:"center"});return e.addSprite(c),this.addLocalHistorySnapshot(),this.sharedState.set({selectedSprite:c}),c},e.prototype._onEnter=function(){var t=this.context.editor,e=t.operations.getOrCreate("sprite"),o=this._options,n=o.fonts,r=o.replaceFonts,i=o.availableVariations,a=new s.FontManager(this.context.ui,{fonts:n,replaceFonts:r,availableVariations:i});this.sharedState.set({operation:e,fontManager:a}),t.features.disable("zoom","drag"),t.zoom.auto(),this.sharedState.get("selectedSprite")||this.createText(),this.sharedState.set({operation:e}),t.render()},e.prototype._onLeave=function(){var t=this.context.editor;t.features.enable("zoom","drag"),t.render()},e.clickAtPosition=function(t,e){if(!e.operations.exists("sprite"))return!1;var o=e.operations.getOrCreate("sprite"),n=o.getSpritesAtPosition(t,e.getOutputTextureDimensions()).filter(function(t){return!(t instanceof d)});return!!(n.length&&n[0]instanceof u)&&{selectedSprite:n[0]}},e.getPreloadAssets=function(t){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]},e.isEnabled=function(t){return t.isToolAllowed("text")&&t.isToolEnabled("text")},e}(s.BaseControls);f.identifier="text",f.controlsComponent=c.a,f.canvasControlsComponent=l.a,f.iconPath="editor/controls/text/icon.png",f.activeIconPath="editor/controls/text/icon-active.png",f.requiredOperations=["sprite"],f.defaultOptions={fonts:[],replaceFonts:!1,availableVariations:null,snapRotation:90,snapRotationTolerance:5},e.default=f,p.a.Controls.TextControls=f},43:function(t,e,o){"use strict";function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=o(0),p=(o.n(s),o(44)),c=o(45),l=o(46),h=s.GroupedControlsStyles.ControlGroupList,u=function(t){function e(){r(this,e);for(var o=arguments.length,a=Array(o),p=0;p<o;p++)a[p]=arguments[p];var c=i(this,t.call.apply(t,[this].concat(a)));return c._bindAll("_onNewTextClick","_onFontChanged","_onFontSizeChanged","_onCharacterSpacingChanged","_onLineSpacingChanged","_onColorChanged","_onBackgroundColorChanged","_onSelectedSpriteUpdate","_onAlignmentChanged","_onVariationChanged","_onTextScaled"),c._events=n({},s.Constants.EVENTS.TEXT_SCALED,c._onTextScaled),c._unavailableFontFamilies=[],c}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this._loadFonts()},e.prototype.sharedStateDidChange=function(t,e){t.selectedSprite!==e.selectedSprite&&(this._lastLocalHistoryItem=null,t.selectedSprite.off("update",this._onSelectedSpriteUpdate),e.selectedSprite&&e.selectedSprite.on("update",this._onSelectedSpriteUpdate))},e.prototype._loadFonts=function(){var t=this,e=this.getSharedState("fontManager"),o=this.context.ui.getFontLoader();o.setFonts(e.getFonts());var n=void 0,r=window.setTimeout(function(){n=s.ModalManager.instance.displayLoading(t._t("loading.fonts"),!0)},200),i=this.getSharedState("selectedSprite");return o.load().then(function(){window.clearTimeout(r),n&&n.close(),i.emit("update"),t.context.editor.render()}).catch(function(e){window.clearTimeout(r),n&&n.close(),e.forEach(function(e){t._unavailableFontFamilies.push(e.font.getFontFamily())});var o=t._unavailableFontFamilies.join(", ");i.emit("update"),t.context.editor.render(),t.forceUpdate(),s.ModalManager.instance.displayError(t._t("errors.fontLoadingError.title"),t._t("errors.fontLoadingError.text",{fonts:o}))})},e.prototype._onSelectedSpriteUpdate=function(t,e){e&&e.fontSize&&this.forceUpdate()},e.prototype._onNewTextClick=function(){this.props.controls.createText(),this.context.editor.render(),this.forceUpdate()},e.prototype._onAlignmentChanged=function(t){var e=this.context.editor;this.getSharedState("selectedSprite").setAlignment(t),this.props.controls.addLocalHistorySnapshot("text-alignment",!0),this.forceUpdate(),e.render()},e.prototype._onVariationChanged=function(t){var e=this.context.editor,o=this.getSharedState("selectedSprite");o.setFontIdentifier(t.getIdentifier()),o.setFontFamily(t.getFontFamily()),o.setFontWeight(t.getFontWeight()),o.setFontStyle(t.getFontStyle()),o.setTextMetrics(t.getTextMetrics()),this.props.controls.addLocalHistorySnapshot("font-family",!0),this.forceUpdate(),e.render()},e.prototype._onFontChanged=function(t){var e=t.getVariations()[0];this._onVariationChanged(e),this.props.controls.addLocalHistorySnapshot("font-family",!0),this.forceUpdate(),this.context.editor.render()},e.prototype._onFontSizeChanged=function(t){var e=this.getSharedState("operation"),o=this.getSharedState("selectedSprite"),n=e.getInputDimensions();o.setFontSize(t/n.min()),this.props.controls.addLocalHistorySnapshot("font-size",!1),this.context.editor.render()},e.prototype._onColorChanged=function(t){this.getSharedState("selectedSprite").setColor(t.clone()),this.props.controls.addLocalHistorySnapshot("color",!0),this.context.editor.render()},e.prototype._onBackgroundColorChanged=function(t){this.getSharedState("selectedSprite").setBackgroundColor(t.clone()),this.props.controls.addLocalHistorySnapshot("background-color",!0),this.context.editor.render()},e.prototype._onCharacterSpacingChanged=function(t){this.getSharedState("selectedSprite").setCharacterSpacing(t),this.forceUpdate(),this.context.editor.render()},e.prototype._onLineSpacingChanged=function(t){this.getSharedState("selectedSprite").setLineHeight(t),this.props.controls.addLocalHistorySnapshot("line-spacing",!0),this.forceUpdate(),this.context.editor.render()},e.prototype._onTextScaled=function(){this.forceUpdate()},e.prototype._renderLegibilityPresets=function(){return[{title:"text shadow"},{title:"bg overlay"},{title:"bg blur"}].map(function(t){return s.React.createElement(l.a,{key:t.title,title:t.title})})},e.prototype._renderFontFamilyAndSizeComponent=function(){var t=this,e=this.getSharedState("selectedSprite"),o=this.getSharedState("fontManager"),n=this.getSharedState("operation"),r=n.getInputDimensions(),i=s.Utils.toFixed(e.getFontSize()*r.min(),1),a=Math.round(r.y),c=o.getFonts().filter(function(e){return t._unavailableFontFamilies.indexOf(e.getFontFamily())<0});return s.React.createElement(p.a,{onValueChange:this._onFontSizeChanged,onFontChange:this._onFontChanged,fonts:c,dropdownValue:e.getFontFamily(),label:this._t("editor.controls.text.font"),inputLabel:this._t("editor.controls.text.size"),className:void 0,value:i,minValue:10,maxValue:a})},e.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},e.prototype._renderContent=function(){var t=this,e=this.getSharedState("selectedSprite");if(!e)return null;var o=this.getSharedState("fontManager"),n=o.getFontByFontFamily(e.getFontFamily()),r=o.getVariationByIdentifier(e.getFontIdentifier()),i=e.getColor().clone(),a=e.getBackgroundColor().clone();return s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerListRef:function(e){t._list=e},innerRef:function(e){t._scrollbar=e}},s.React.createElement(d,{className:void 0},s.React.createElement(s.ButtonComponent,{title:this._t("editor.controls.text.new"),onClick:this._onNewTextClick,className:void 0}),s.React.createElement(g,null,this._renderFontFamilyAndSizeComponent(),s.React.createElement(c.a,{alignment:e.getAlignment(),variations:n.getVariations(),selectedVariation:r,onAlignmentChange:this._onAlignmentChanged,onVariationChange:this._onVariationChanged})),s.React.createElement(s.ColorSelectionComponent,{value:i,onColorPickerToggle:this.fixStyles,onChange:this._onColorChanged})),s.React.createElement(f,null,s.React.createElement(s.CollapseSectionComponent,{key:"background",title:this._t("editor.controls.text.background"),alwaysExpanded:!0,className:void 0},s.React.createElement(s.ColorSelectionComponent,{value:a,onColorPickerToggle:this.fixStyles,onChange:this._onBackgroundColorChanged})),s.React.createElement(s.CollapseSectionComponent,{key:"spacing",title:this._t("editor.controls.text.spacing"),alwaysExpanded:!0},s.React.createElement(s.SliderControlComponent,{label:this._t("editor.controls.text.line"),minValue:.5,maxValue:3,className:void 0,value:s.Utils.toFixed(e.getLineHeight(),1),onSliderValueChange:this._onLineSpacingChanged,onValueChange:this._onLineSpacingChanged}))))},e}(s.ControlsComponent);u.contextTypes=s.ControlsComponent.contextTypes,u.RootElement=s.ControlsComponent.RootElement,e.a=u;var d=s.adonis.div("1vnvjau","TopSection"),f=Object(s.adonis)(h).ul("mgrj1m","SectionList"),g=s.adonis.div("tymb4t","Details")},44:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(0),s=(o.n(a),function(t){function e(){n(this,e);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._updateFontsMap(),s}return i(e,t),e.prototype.componentWillReceiveProps=function(e){t.prototype.componentWillReceiveProps.call(this,e),e.fonts!==this.props.fonts&&this._updateFontsMap()},e.prototype._updateFontsMap=function(){var t=this;this._fontsMap={},this.props.fonts.forEach(function(e){t._fontsMap[e.getFontFamily()]=e})},e.prototype._renderLeftPart=function(){var t=this.getSharedState("selectedSprite"),e=t.getFontFamily(),o=this._fontsMap[e];return a.React.createElement("div",{ref:"root",className:void 0},a.React.createElement(a.DropdownComponent,{value:o,style:{fontFamily:e},className:void 0,onChange:this.props.onFontChange},this.props.fonts.map(function(t){return a.React.createElement(a.DropdownComponent.Item,{value:t,key:t.getFontFamily(),style:{fontFamily:t.getFontFamily()}},t.getFontFamily())})))},e}(a.ValueSelectionComponent));s.contextTypes=a.ValueSelectionComponent.contextTypes,e.a=s},45:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(0),s=(o.n(a),function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._onAlignmentItemClick=function(t){this.props.onAlignmentChange&&this.props.onAlignmentChange(t.title)},e.prototype._onStyleItemClick=function(t){switch(t.title){case"bold":this.props.onStyleChange&&this.props.onStyleChange("fontWeight",this.props.bold?"normal":"bold");break;case"italic":this.props.onStyleChange&&this.props.onStyleChange("fontStyle",this.props.italic?"normal":"italic")}},e.prototype._renderAligmentItems=function(){var t=this,e=this.props.alignment;return[{title:"left",selected:"left"===e,iconPath:"editor/controls/text/align-left.png",selectedIconPath:"editor/controls/text/align-left-selected.png"},{title:"center",selected:"center"===e,iconPath:"editor/controls/text/align-center.png",selectedIconPath:"editor/controls/text/align-center-selected.png"},{title:"right",selected:"right"===e,iconPath:"editor/controls/text/align-right.png",selectedIconPath:"editor/controls/text/align-right-selected.png"}].map(function(e){var o=t._getAssetPath(e.iconPath,!0),n=t._getAssetPath(e.selectedIconPath,!0);return a.React.createElement(l,{key:e.title,className:void 0,"data-alignment":e.title,"data-selected":e.selected,onClick:t._onAlignmentItemClick.bind(t,e)},a.React.createElement(h,{visible:!0,src:o}),a.React.createElement(h,{visible:e.selected,src:n}))},this)},e.prototype._renderStylesDropdown=function(){var t=this.props,e=t.variations,o=t.selectedVariation;return a.React.createElement(a.DropdownComponent,{value:o,onChange:this.props.onVariationChange,className:void 0,enableMenu:e.length>1},e.map(function(t){return a.React.createElement(a.DropdownComponent.Item,{value:t,key:t.getIdentifier(),style:{fontFamily:t.getFontFamily(),fontStyle:t.getFontStyle(),fontWeight:t.getFontWeight()}},t.getLabel())}))},e.prototype.render=function(){return a.React.createElement(p,{className:void 0},a.React.createElement(c,null,this._renderStylesDropdown()),a.React.createElement(c,{right:!0},this._renderAligmentItems()))},e}(a.BaseComponent));s.contextTypes=a.BaseComponent.contextTypes,e.a=s;var p=a.adonis.div("1hzgwcr","TextControlsStyling"),c=a.adonis.div("64aub5",{right:"9ygmmm"},"Group"),l=a.adonis.div("tgbgl1",{selected:"zgbg08"},"ItemContainer"),h=a.adonis.img("7ni881",{visible:"zgbg08"},"ItemImage")},46:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(0),s=(o.n(a),a.ControlsStyles.ControlItem),p=a.ControlsStyles.ControlItemTitle,c=function(t){function e(){n(this,e);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s._bindAll("_onClick","_onMouseEnter","_onMouseLeave","_onIntensityChanged"),s.state={selected:!1,hovering:!1,intensity:50},s}return i(e,t),e.prototype._onClick=function(){this.setState({selected:!0})},e.prototype._onMouseEnter=function(){this.setState({hovering:!0})},e.prototype._onMouseLeave=function(){this.setState({hovering:!1})},e.prototype._onIntensityChanged=function(t){this.setState({intensity:t})},e.prototype.render=function(){var t=this.state,e=t.selected,o=t.hovering,n=t.intensity;return a.React.createElement(l,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick,selected:e},!(e&&o)&&a.React.createElement(h,{selected:e},this.props.title),e&&o&&a.React.createElement(u,null,a.React.createElement(a.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:n,onChange:this._onIntensityChanged})))},e}(a.BaseComponent);c.contextTypes=a.BaseComponent.contextTypes,e.a=c;var l=Object(a.adonis)(s).div("nasu8t",{selected:"120drhm"},"LegibilityPresetItem"),h=Object(a.adonis)(p).div("1hd9n2f",{selected:"186qcx6"},"Title"),u=a.adonis.div("8ekz81","Slider")},47:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(1),s=(o.n(a),o(6)),p=void 0;a.Operations.SpriteOperation&&(p=a.Operations.SpriteOperation.TextSprite);var c=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype._selectNextSprite=function(){for(var t=this.getSharedState("operation"),e=t.getSprites().slice(0).reverse(),o=void 0,n=void 0,r=0;r<e.length;r++)if((o=e[r])instanceof p){n=o;break}n||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:n})},e.prototype._createSprite=function(t){return this.getSharedState("operation").createText(t)},e}(s.a);c.contextTypes=s.a.contextTypes,e.a=c},5:function(t,e,o){"use strict";var n=function(){function t(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.a={load:function(t){var e=this;return function(){if(t.substr(0,5),!0)return Promise.resolve([t,t])}().then(function(t){var o=n(t,2),r=o[0],i=o[1];return e._createAndLoadImage(r,i)})},_createAndLoadImage:function(t,e){return new Promise(function(t,o){var n=new window.Image;n.addEventListener("load",function(){t(n)}),n.addEventListener("error",function(){o(new Error("Failed to load image at "+e))}),n.crossOrigin="Anonymous",n.src=e})},loadXHR:function(t,e){return new Promise(function(o,n){var r=void 0;window.XDomainRequest?(r=new window.XDomainRequest,e&&r.overrideMimeType(e),r.onload=function(){o(r)},r.onerror=function(t){n(t)}):window.XMLHttpRequest&&(r=new window.XMLHttpRequest,e&&r.overrideMimeType(e),r.onreadystatechange=function(t){4===r.readyState&&(200===r.status?o(r):n(new Error("HTTP Status "+r.status)))}),r.open("GET",t,!0),r.send()})}}},6:function(t,e,o){"use strict";function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=o(1),p=(o.n(s),o(0)),c=(o.n(p),o(7)),l=o(8),h=o(9),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},d=s.Math.Vector2,f=function(t){function e(){var o;r(this,e);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];var h=i(this,t.call.apply(t,[this].concat(c)));return h._bindAll("_onZoomDone","_onWindowResize","_onHistoryChange","_onAfterTransform"),h._events=(o={},n(o,p.Constants.EVENTS.ZOOM_DONE,h._onZoomDone),n(o,p.Constants.EVENTS.WINDOW_RESIZE,h._onWindowResize),n(o,p.Constants.EVENTS.HISTORY_UNDO,h._onHistoryChange),n(o,p.Constants.EVENTS.HISTORY_REDO,h._onHistoryChange),o),h.state=s.Utils.extend(h.state,{visible:!1,canvasClickDisabled:!1}),h}return a(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.forceUpdate()},e.prototype._onAfterTransform=function(t){var e="sprite-transform-"+t.getId();this.props.controls.addLocalHistorySnapshot(e,!0)},e.prototype._onHistoryChange=function(){var t=this.getSharedState("operation");if(t){var e=this.getSharedState("selectedSprite");-1===t.getSprites().indexOf(e)&&this._selectNextSprite()}},e.prototype._onWindowResize=function(){var t=this;this.context.editor.once("rendered",function(){t.forceUpdate()})},e.prototype._onZoomDone=function(){this.context.editor.render(),this.setState({visible:!0})},e.prototype._onItemBlur=function(){},e.prototype._onCanvasClick=function(t){if(!this.state.canvasClickDisabled){this._performHitTest(p.Utils.getEventPosition(t))||(this.getSharedState("selectedSprite")&&this._onItemBlur(),this.context.screen.switchToControls("default"))}},e.prototype._onSpriteDelete=function(t){this.getSharedState("operation").removeSprite(t),t.dispose(),this._selectNextSprite(),this.props.controls.addLocalHistorySnapshot("sprite-deletion",!1),this.context.editor.render()},e.prototype._onSpriteTakeToFront=function(t){this.getSharedState("operation").takeSpriteToFront(t),this.props.controls.addLocalHistorySnapshot("sprite-order",!1),this.forceUpdate(),this.context.editor.render()},e.prototype._onSpriteFlipHorizontally=function(t,e){e.stopPropagation(),t.setFlipHorizontally(!t.getFlipHorizontally()),this.props.controls.addLocalHistorySnapshot("sprite-flip-horizontally",!1),this.forceUpdate(),this.context.editor.render()},e.prototype._onSpriteDuplicate=function(t,e){e.stopPropagation();var o=this.getSharedState("operation"),n=t.serializeOptions();delete n.id,delete n.type,t.hasOption("image")&&(n.image=t.getImage());var r=o.getInputDimensions();n.position.add(new d(10,10).divide(r));var i=this._createSprite(n);o.addSprite(i),this.setSharedState({selectedSprite:i}),this.props.controls.addLocalHistorySnapshot("sprite-creation",!1),this.context.editor.render()},e.prototype._selectNextSprite=function(){var t=this.getSharedState("operation"),e=t.getSprites(),o=e[e.length-1];o?this.setSharedState({selectedSprite:o}):(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default"))},e.prototype._getComponentTypeForSprite=function(t){var e=s.Operations.SpriteOperation;switch(t.constructor){case e.StickerSprite:return c.a;case e.TextSprite:return l.a;case e.BrushSprite:return h.a}},e.prototype._getPropsForSprite=function(t){var e={};return e.hideContent=!0,e},e.prototype._renderSpriteItems=function(t){var e=this,o=this.getSharedState("selectedSprite");return t.map(function(t){var n=e._getComponentTypeForSprite(t),r=e._getPropsForSprite(t),i=o===t;return p.React.createElement(n,u({sprite:t,selected:i,onClick:e._onCanvasClick,onAfterChange:e._onAfterTransform.bind(e,t),onCanvasClickDisabled:e._onCanvasClickDisabled,onCanvasClickEnabled:e._onCanvasClickEnabled,onDelete:e._onSpriteDelete.bind(e,t),onTakeToFront:e._onSpriteTakeToFront.bind(e,t),onFlipHorizontally:e._onSpriteFlipHorizontally.bind(e,t),onDuplicate:e._onSpriteDuplicate.bind(e,t),snapRotation:e.props.options.snapRotation,snapRotationTolerance:e.props.options.snapRotationTolerance,canvasControls:e,key:t.getId()},r))})},e.prototype._renderOverlayControls=function(){return null},e.prototype._renderControls=function(){var t=this;if(this.state.visible){var e=this.getSharedState("operation"),o=e.getSprites(),n=this._container&&this._getContainerStyle();return p.React.createElement(g,{className:void 0},p.React.createElement(y,{innerRef:function(e){t._innerContainer=e},style:n,className:void 0},!this.state.canvasClickDisabled&&p.React.createElement(m,{onClick:this._onCanvasClick}),p.React.createElement("div",null,this._renderSpriteItems(o),this._renderOverlayControls())))}},e}(p.CanvasControlsComponent);f.contextTypes=p.CanvasControlsComponent.contextTypes,e.a=f;var g=p.adonis.div("120drhm","CanvasControls"),y=p.adonis.div("1anj0of","Container"),m=p.adonis.div("o35414","ClickHandlerForInternetExplorer")},7:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(0),s=(o.n(a),o(3)),p=o(5),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},l=function(t){function e(){n(this,e);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=r(this,t.call.apply(t,[this].concat(i)));return s.state={renderAsSVG:!1,svgAttributes:{}},s}return i(e,t),e.prototype.componentDidMount=function(){var e=this;if(t.prototype.componentDidMount.call(this),this.props.hideContent)return null;var o=this.props.sprite;o.getImage().src.match(/\w+\.svg(?=\?|$)/i)&&"none"!==o.getTintMode()&&p.a.loadXHR(o.getImage().src,"image/svg+xml").then(function(t){for(var o=t.responseXML.documentElement.attributes,n={},r=0;r<o.length;r++){var i=o[r],a=i.name,s=i.value;"xmlns:xlink"===a&&(a="xmlnsXlink"),n[a]=s}var p=t.responseText.match(/<svg\b[^>]*>([\s\S]*?)<\/svg>/im)[1];p=p.replace(/\s+?fill=["'].*?["']/gi,""),e.setState({renderAsSVG:!0,svgContent:p,svgAttributes:n})})},e.prototype._onBeforeScale=function(){var t=this.props.sprite;this._initialOptions={dimensions:t.getDimensions().clone()}},e.prototype._onScale=function(t){var e=this.context.editor,o=this._initialOptions.dimensions;this.props.sprite.set({dimensions:o.clone().multiply(t/e.zoom.level)}),this.forceUpdate(),e.render()},e.prototype._getSpriteDimensions=function(){var t=this.context.editor;return this.props.sprite.getDimensions().clone().multiply(t.zoom.level)},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getOutputDimensions(),o=this.props.sprite,n=o.getPosition().clone().multiply(e),r=180*o.getRotation()/Math.PI,i="rotateZ("+r.toFixed(2)+"deg)",a=o.getDimensions().clone().multiply(t.zoom.level);return{width:a.x,height:a.y,left:n.x,top:n.y,marginLeft:-.5*a.x,marginTop:-.5*a.y,transform:i,MozTransform:i,msTransform:i,WebkitTransform:i,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}},e.prototype._getContentStyle=function(){var t=this.props.sprite,e="rotateY("+(t.getFlipHorizontally()?180:0)+"deg) rotateX("+(t.getFlipVertically()?180:0)+"deg)",o={opacity:t.getAlpha(),transform:e,MozTransform:e,msTransform:e,WebkitTransform:e};return this.state.renderAsSVG&&(o.fill=t.getTintColor().toRGBA()),o},e.prototype._renderContent=function(){if(this.props.hideContent)return null;var t=this.props.sprite,e=this.state.svgAttributes;return this.state.renderAsSVG?React.createElement(u,c({style:this._getContentStyle(),dangerouslySetInnerHTML:{__html:this.state.svgContent}},e)):React.createElement(h,{src:t.getImage().src,style:this._getContentStyle()})},e}(s.a);l.contextTypes=s.a.contextTypes,l.MIN_WIDTH=s.a.MIN_WIDTH,e.a=l;var h=a.adonis.img("1ssoezr","Image"),u=a.adonis.svg("1ssoezr","SVGImage")},8:function(t,e,o){"use strict";function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=o(1),p=(o.n(s),o(0)),c=(o.n(p),o(3)),l=s.Math.Vector2,h=function(t){function e(){r(this,e);for(var o=arguments.length,n=Array(o),a=0;a<o;a++)n[a]=arguments[a];var s=i(this,t.call.apply(t,[this].concat(n)));return s._bindAll("_onTextChange","_onBlur","_onItemDoubleClick","_onWidthDrag","_onWidthDragStop"),s.state={editing:!1,updateBecauseIESucks:!1},s}return a(e,t),e.prototype._isDraggingDisabled=function(){return t.prototype._isDraggingDisabled.call(this)||this.state.editing},e.prototype.enterEditMode=function(){var t=this,e=this.context.editor,o=this.props.sprite;o.setVisible(!1),e.render(),this.setState({editing:!0},function(){o._edited||(o.setText(""),t._textField.value="",o._edited=!0,t.forceUpdate()),t._textField.focus(),t._textField.select()})},e.prototype.leaveEditMode=function(){var t=this.context.editor;this.props.sprite.setVisible(!0),t.render(),this.setState({editing:!1})},e.prototype.shouldComponentUpdate=function(){return!0},e.prototype._onTakeToFront=function(){var e;this.leaveEditMode();for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];(e=t.prototype._onTakeToFront).call.apply(e,[this].concat(n))},e.prototype._onFlipHorizontally=function(){var e;this.leaveEditMode();for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];(e=t.prototype._onFlipHorizontally).call.apply(e,[this].concat(n))},e.prototype._onDuplicate=function(){var e;this.leaveEditMode();for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];(e=t.prototype._onDuplicate).call.apply(e,[this].concat(n))},e.prototype._onSpriteUpdate=function(e,o){var n=this;p.Utils.Browser.isIElte(10)&&o.alignment&&e.getAlignment()!==o.alignment&&this.setState({updateBecauseIESucks:!0},function(){Object(p.requestAnimationFrame)(function(){n.setState({updateBecauseIESucks:!1})})}),t.prototype._onSpriteUpdate.call(this)},e.prototype._onWidthDragStart=function(t,e,o){var n=this.context.editor,r=this.props.sprite,i=r.getAnchor();this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var a=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),s=r.getDimensions(n.getSDK(),n.getOutputDimensions()),p=new l(s.width,s.height),c=a.clone().subtract(p.clone().multiply(i)).add(p.clone().multiply(.5)).round(),h=o.clone().subtract(this._containerOffset).subtract(c);this._initialScaleSettings={maxWidth:r.getMaxWidth(),mouseDistanceFromCenter:h},this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()},e.prototype._onWidthDrag=function(t){var e=this.props.sprite,o=e.getRotation(),n=this._initialScaleSettings.mouseDistanceFromCenter,r=n.clone().add(t),i=Math.cos(o),a=Math.sin(o),s=Math.max(Math.abs(2*(r.x*i+r.y*a)),50)/this._imageBoundingBox.width;e.setMaxWidth(s),this.context.editor.render()},e.prototype._onWidthDragStop=function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()},e.prototype._onBlur=function(){this.leaveEditMode();var t=this.props.sprite;t&&""===t.getText()&&(t.setText(this._t("editor.controls.text.defaultText")),t._edited=!1)},e.prototype._onTextChange=function(t){this.props.sprite.setText(t.target.value),this.forceUpdate()},e.prototype._onItemDoubleClick=function(){this.props.selected&&this.enterEditMode()},e.prototype._onBeforeScale=function(){var t=this.props.sprite;this._initialOptions={maxWidth:t.getMaxWidth(),fontSize:t.getFontSize()}},e.prototype._onScale=function(t){var e=this._initialOptions,o=e.maxWidth,n=e.fontSize,r=this.props.sprite;r.set({maxWidth:o*t,fontSize:n*t}),this.context.mediator.emit(p.Constants.EVENTS.TEXT_SCALED,r),this.forceUpdate()},e.prototype._getContainerStyle=function(){var t=this.context.editor,e=t.getOutputDimensions(),o=this.props.sprite,n=o.getPosition().clone().multiply(e),r=180*o.getRotation()/Math.PI,i="rotateZ("+r.toFixed(2)+"deg)",a=o.getMaxWidth()*e.x,s=o.getDimensions(t.getSDK(),e).y;return{width:a,height:s,left:n.x,top:n.y,marginLeft:-.5*a,marginTop:-.5*s,transform:i,MozTransform:i,msTransform:i,WebkitTransform:i,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}},e.prototype._getTextStyle=function(){var t=this.context.editor,e=this.props.sprite,o=t.getSDK(),n=t.getOutputDimensions(),r=e.getDOMStyle(o,n),i=this._getAbsoluteSpritePosition(),a=e.getDimensions(o,n);return r.height=Math.min(a.y,n.y-i.y+a.y/2),r},e.prototype._renderKnobs=function(){var e=this,o=t.prototype._renderKnobs.call(this);return["left","right"].forEach(function(t){var r="width-"+t,i=n({},t,!0);o.push(p.React.createElement(p.DraggableComponent,{key:r,onStart:e._onWidthDragStart.bind(e,t),onDrag:e._onWidthDrag,onStop:e._onWidthDragStop},p.React.createElement(f,i)))}),o},e.prototype._getItemControlsProps=function(){return{onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd}},e.prototype._renderContent=function(){var t=this,e=this.props,o=e.sprite,n=e.selected,r=this.state,i=r.editing,a=r.updateBecauseIESucks,s=[];return this.props.hideContent&&!this.state.editing||s.push(p.React.createElement(u,{key:"text-field",editing:i,innerRef:function(e){t._textField=e},style:this._getTextStyle(),defaultValue:o.getText(),onBlur:this._onBlur,onChange:this._onTextChange,updateBecauseIESucks:a})),this.state.editing||s.push(p.React.createElement(d,{key:"disabled-overlay",className:void 0,selected:n})),s},e}(c.a);h.contextTypes=c.a.contextTypes,h.MIN_WIDTH=100,e.a=h;var u=p.adonis.textarea("12u5t8c",{updateBecauseIESucks:"ckktkq",editing:"15kzu1c"},"TextField"),d=p.adonis.div("8gacw5","DisabledOverlay"),f=p.adonis.div("jqmmm4",{left:"tr97e1",right:"1llojum"},"WidthControl")},9:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(0),s=(o.n(a),o(3)),p=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return i(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this);var e=this.props.sprite.getCanvas();this._brush&&this._appendCanvas(e)},e.prototype.componentWillReceiveProps=function(t){if(t.sprite!==this.props.sprite){var e=this.props.sprite.getCanvas();if(e.parentNode.removeChild(e),this._brush){var o=t.sprite.getCanvas();this._appendCanvas(o)}}},e.prototype._appendCanvas=function(t){t.style.width="100%",t.style.height="100%",this._brush.appendChild(t)},e.prototype._renderOverlayControls=function(){return null},e.prototype.render=function(){var t=this;return this.props.hideContent?null:a.React.createElement(c,{innerRef:function(e){t._brush=e}})},e}(s.a);e.a=p;var c=a.adonis.div("8gacw5","BrushItem")}}).default});