!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):"function"==typeof define&&define.amd?define([["PhotoEditorSDK","UI","DesktopUI"],"photoeditorsdk"],t):"object"==typeof exports?exports._unexposedPESDK=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core"),require("photoeditorsdk")):e._unexposedPESDK=t(e.PhotoEditorSDK.UI.DesktopUI,e.PhotoEditorSDK)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(t,n){t.exports=e},function(e,n){e.exports=t},,,,,,,,,,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),i.ControlsStyles.PlainControlItem),c=i.ControlsStyles.PlainControlItemBackground,l=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onWebcamClick","_onDropZoneClick","_onDropZoneDragEnter","_onDropZoneDragLeave","_onDropZoneDragOver","_onDropZoneDrop","_onImage"),s._dragCounter=0,s.state={dropZoneHovered:!1},s}return a(t,e),t.prototype._onWebcamClick=function(){this.props.onWebcamActivated&&this.props.onWebcamActivated()},t.prototype._onImage=function(e){this.props.onImage&&this.props.onImage(e)},t.prototype._onDropZoneClick=function(){this.refs.upload.open()},t.prototype._onDropZoneDragEnter=function(e){e.preventDefault(),this._dragCounter++,this.setState({dropZoneHovered:!0})},t.prototype._onDropZoneDragLeave=function(e){e.preventDefault(),0===--this._dragCounter&&this.setState({dropZoneHovered:!1})},t.prototype._onDropZoneDragOver=function(e){e.preventDefault()},t.prototype._onDropZoneDrop=function(e){var t=this;e.stopPropagation(),e.preventDefault(),e=e.nativeEvent,e.returnValue=!1,this.setState({dropZoneHovered:!1},function(){if(e.target||e.dataTransfer){var n=e.target.files||e.dataTransfer.files;if(n&&!(n.length<=0))return n[0].type.match(/^image\//i)?void t._handleFile(n[0]):i.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.invalidFileType.text",{fileType:n[0].type}))}})},t.prototype._handleFile=function(e){var t=this,n=new window.FileReader;n.onload=function(){return function(e){var n=e.target.result,o=new window.Image;o.addEventListener("load",function(){t._onImage(o)}),o.addEventListener("error",function(e){return i.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.imageLoadingError.text"))}),o.src=n}}(),n.readAsDataURL(e)},t.prototype.render=function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return i.React.createElement(u,null,i.React.createElement(i.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onImage}),i.React.createElement(p,null,i.React.createElement(f,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone")),!this.state.dropZoneHovered&&this.props.webcamEnabled&&i.React.createElement(h,{style:e,className:void 0,onClick:this._onWebcamClick})))},t}(i.BaseComponent);t.a=l;var u=Object(i.adonis)(s).li("fujban","Container"),p=Object(i.adonis)(c).div("17hsmc4","Background"),f=i.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),h=i.adonis.div("1y2fyfw","WebcamButton")},,,function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n.n(i),c=n(15),l=n(21),u=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.shouldKeepChanges=function(){var e=this,t=this.context,n=t.editor,o=t.ui;return void 0===this.keepChanges&&!n.isShallow&&n.history.isUndoAvailable()?new Promise(function(t,n){i.ModalManager.instance.displayWarning(o.translate("warnings.discardChanges.title"),o.translate("warnings.discardChanges.text"),[o.translate("warnings.discardChanges.buttons.keep"),o.translate("warnings.discardChanges.buttons.discard")],!0).on("button",function(n){var o=0===n;e.keepChanges=o,t(o)})}):Promise.resolve(this.keepChanges)},t.prototype.onImage=function(e){var t=this;this.shouldKeepChanges().then(function(n){if(t._options.switchScreenOnImage)t.context.options.editor.image=e,t.context.appComponent.switchToScreen("editor");else{t.context.editor.setImage(e,!n)}t.sharedState.get("webcamEnabled")&&(t.sharedState.set({webcamEnabled:!1}),t.context.screen.switchToControls("default"))})},t.prototype._onEnter=function(){this.sharedState.set({webcamEnabled:!1})},t.hasLibraryProvider=function(e){var t=e.getOptions().editor.controlsOptions;if(void 0===t.library)return!0;var n=t.library;return!!(n.provider||n.enableWebcam||n.enableUpload)},t.isEnabled=function(e){return t.hasLibraryProvider(e)&&e.isToolEnabled("library")},t}(i.BaseControls);u.clickAtPosition=i.BaseControls.clickAtPosition,u.getPreloadAssets=i.BaseControls.getPreloadAssets,u.identifier="library",u.controlsComponent=c.a,u.canvasControlsComponent=l.a,u.iconPath="editor/controls/library/icon.png",u.activeIconPath="editor/controls/library/icon-active.png",u.defaultOptions={enableWebcam:!0,enableUpload:!0,displayUploadInCanvas:!1,switchScreenOnImage:!1},t.default=u,s.a.Controls.LibraryControls=u},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),n(16)),c=n(18),l=n(20),u={ROOT:0,SEARCH:1},p=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a))),c=s.props.options.provider;return c&&(s._library=new c),s._bindAll("_onCategorySelect","_onImageSelect","_onSearchQueryChange","_onWebcamActivated"),s.state.currentPanel=u.ROOT,s.state.searchQuery="",s}return a(t,e),t.prototype._onBackButtonClick=function(){this.setState({currentPanel:u.ROOT,searchQuery:"",backButton:!1})},t.prototype._onCategorySelect=function(e){this.setState({currentPanel:u.SEARCH,searchQuery:e.getName(),backButton:!0})},t.prototype._onImageSelect=function(e){var t=this;this.setSharedState({webcamEnabled:!1});var n=new window.Image,o=void 0,r=setTimeout(function(){o=i.ModalManager.instance.displayLoading(t._t("loading.loading"))},200);n.addEventListener("load",function(){o&&o.close(),r&&(clearTimeout(r),r=null),t.props.controls.onImage(n)}),n.addEventListener("error",function(){o&&o.close(),r&&(clearTimeout(r),r=null),i.ModalManager.instance.displayError(t._t("errors.title"),t._t("errors.imageLoadingError.text"))}),n.crossOrigin="Anonymous",n.src=e.getRawUrl()},t.prototype._onSearchQueryChange=function(e){this.setState({searchQuery:e,currentPanel:u.SEARCH})},t.prototype._onWebcamActivated=function(e){this.setSharedState({webcamEnabled:!0})},t.prototype.fixStyles=function(){var t=this;if(this._list)return this._list.style.height="100%",e.prototype.fixStyles.call(this).then(function(){if(i.Utils.Browser.isIElte(10)){var e=t._container.offsetHeight;t._list.style.height=e+"px"}return t.refs.panel.fixStyles()})},t.prototype._renderCurrentPanel=function(){var e=this;switch(this.state.currentPanel){case u.ROOT:return i.React.createElement(s.a,{controls:this.props.controls,innerRef:function(t){e._list=t},library:this._library,onCategorySelect:this._onCategorySelect,onWebcamActivated:this._onWebcamActivated,options:this.props.options,key:"panel",ref:"panel"});case u.SEARCH:return i.React.createElement(c.a,{innerRef:function(t){e._list=t},library:this._library,onImageSelect:this._onImageSelect,searchQuery:this.state.searchQuery,key:"panel",ref:"panel"})}},t.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!1}},t.prototype._renderContent=function(){var e=[];return this._library&&e.push(i.React.createElement(l.a,{key:"searchHeader",onChange:this._onSearchQueryChange,searchQuery:this.state.searchQuery})),e.push(this._renderCurrentPanel()),e},t}(i.ControlsComponent);p.contextTypes=i.ControlsComponent.contextTypes,p.propTypes=i.ControlsComponent.propTypes,p.RootElement=i.ControlsComponent.RootElement,t.a=p},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),n(17)),c=n(11),l=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onImage"),s.state={loading:!0,categories:[]},s}return a(t,e),t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){i.Utils.Browser.isIElte(10)?Object(i.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this._loadCategories()},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this._loadCoverImagesQueue&&this._loadCoverImagesQueue.dispose(),this._disposed=!0},t.prototype._onCategoryClick=function(e){this.props.onCategorySelect&&this.props.onCategorySelect(e)},t.prototype._onImage=function(e){this.props.controls.onImage(e)},t.prototype._loadCoverImages=function(e){var t=this,n=this.context.theme,o=e.map(function(e){return{fn:function(){return e.loadCoverImage()},index:e}});this._loadCoverImagesQueue=new i.DelayedJobQueue(o,{minDelay:n.listItemSlideInDelay}),this._loadCoverImagesQueue.on("job-done",function(e){t._disposed||(t.forceUpdate(),t._scrollbar.update())}),this._loadCoverImagesQueue.start()},t.prototype._loadCategories=function(){var e=this;return this.props.library?this.props.library.getCategories().then(function(t){e._loadCoverImages(t),e.setState({loading:!1,categories:t})}):(this.setState({loading:!1,categories:[]}),Promise.resolve())},t.prototype._renderListItems=function(){var e=this;return this.state.categories.map(function(t){return i.React.createElement(s.a,{key:t.getName(),category:t,visible:t.isCoverImageLoaded(),onClick:e._onCategoryClick.bind(e,t)})})},t.prototype.render=function(){var e=this;if(this.state.loading)return i.React.createElement(i.LoadingIndicatorComponent,null);var t=this.props.options,n=t.enableUpload,o=t.displayUploadInCanvas,r=this.props.innerRef;return i.React.createElement(u,{innerRef:function(t){r&&r(t),e._wrapper=t},className:void 0},i.React.createElement(i.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},i.React.createElement(p,null,n&&!o&&i.React.createElement(c.a,{controls:this.props.controls,onImage:this._onImage,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this.props.onWebcamActivated}),this._renderListItems())))},t}(i.BaseComponent);t.a=l;var u=i.adonis.div("rfecls","RootPanelWrapper"),p=i.adonis.ul("5jg0ou","CategoryList")},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),i.ControlsStyles.ControlItem),c=i.ControlsStyles.ControlItemTitle,l=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.category,n=e.onClick,o=e.visible,r={backgroundImage:"url('"+t.getCoverImage()+"')"};return i.React.createElement(u,{animated:!0,style:r,visible:o,className:void 0,onClick:n},i.React.createElement(p,null,t.getName()))},t}(i.BaseComponent);t.a=l;var u=Object(i.adonis)(s).li("prcvvt","ListItem"),p=Object(i.adonis)(c).div("1ler8h7","ListItemTitle")},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),n(19)),c=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s.state={loading:!0,images:[]},s}return a(t,e),t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){i.Utils.Browser.isIElte(10)?Object(i.requestAnimationFrame)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this._loadImages(this.props.searchQuery)},t.prototype.componentWillReceiveProps=function(e){this.props.searchQuery!==e.searchQuery&&this._loadImages(e.searchQuery)},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this._loadThumbsQueue.stop(),this._loadThumbsQueue.dispose(),this._disposed=!0},t.prototype._onImageClick=function(e){this.props.onImageSelect&&this.props.onImageSelect(e)},t.prototype._loadThumbs=function(e){var t=this,n=this.context.theme,o=e.map(function(e){return{fn:function(){return e.loadThumb()},index:e}});this._loadThumbsQueue=new i.DelayedJobQueue(o,{minDelay:n.listItemSlideInDelay}),this._loadThumbsQueue.on("job-done",function(e){t._disposed||(t.forceUpdate(),t._scrollbar&&t._scrollbar.update())}),this._loadThumbsQueue.start()},t.prototype._loadImages=function(e){var t=this;return e.trim()||this.setState({loading:!1,images:[]},function(){return t._scrollbar&&t._scrollbar.update()}),this.setState({loading:!0}),this.props.library.searchImages(e).then(function(e){t._loadThumbs(e),t.setState({loading:!1,images:e},function(){return t._scrollbar.update()})})},t.prototype._renderListItems=function(){var e=this,t=this.context.editor,n=t.getImage();return 0===this.state.images.length?i.React.createElement(p,null,this._t("editor.controls.library.noResults")):this.state.images.map(function(t){return i.React.createElement(s.a,{key:t.getThumbUrl(),image:t,selected:t.getRawUrl()===(n&&n.src),visible:t.isThumbLoaded(),onClick:e._onImageClick.bind(e,t)})})},t.prototype.render=function(){var e=this;if(this.state.loading)return i.React.createElement(i.LoadingIndicatorComponent,null);var t=this.props.innerRef;return i.React.createElement(l,{innerRef:function(n){t&&t(n),e._wrapper=n},className:void 0},i.React.createElement(i.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},i.React.createElement(u,null,this._renderListItems())))},t}(i.BaseComponent);t.a=c;var l=i.adonis.div("rfecls","RootPanelWrapper"),u=i.adonis.ul("5jg0ou","ImageList"),p=i.adonis.div("6kl290","NoResultsText")},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),i.ControlsStyles.ControlItem),c=i.ControlsStyles.ControlItemActiveOverlay,l=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s.state={isPortrait:!1,hovered:!1},s}return a(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.props.visible!==e.visible){var t=this.props.image.getThumbImage();t.height>t.width&&this.setState({isPortrait:!0})}},t.prototype.render=function(){var e=this,t=this.props,n=t.image,o=t.onClick,r=t.selected,a=t.visible,s={backgroundImage:"url('"+n.getThumbUrl()+"')"},c=n.getAuthorAvatar(),l=this.context.theme.transitionDuration,m=[void 0,r&&"is-selected"].filter(function(e){return e});return i.React.createElement(u,{animated:!0,style:s,selected:r,visible:a,className:m.join(" "),onClick:o,portrait:this.state.isPortrait,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},i.React.createElement(i.Transition,{active:this.state.hovered,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},i.React.createElement(d,{selected:r},c&&i.React.createElement(f,{src:c}),i.React.createElement(h,null,n.getAuthorName()))),i.React.createElement(i.Transition,{active:r,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},i.React.createElement(p,{selected:!0})))},t}(i.BaseComponent);t.a=l;var u=Object(i.adonis)(s).li("1a5mxw5",{portrait:"otbyv0"},"ListItem"),p=Object(i.adonis)(c).div("120drhm","ListItemOverlay"),f=i.adonis.img("1owxkzt","AuthorAvatar"),h=i.adonis.div("1jylqsv","AuthorName"),d=i.adonis.div("mchu36",{rendered:"2jlos",visible:"1fmxelx"},"Author")},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),250),c=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),c=0;c<n;c++)a[c]=arguments[c];var l=r(this,e.call.apply(e,[this].concat(a)));return l._bindAll("_onInputChange"),l._onDebouncedInputChange=i.Utils.debounce(l._onDebouncedInputChange,s),l.state={searchQueryInputValue:""},l}return a(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.searchQuery!==e.searchQuery&&this.setState({searchQueryInputValue:e.searchQuery})},t.prototype.componentWillUnmount=function(){this._disposed=!0},t.prototype._onDebouncedInputChange=function(e){this._disposed||this.props.onChange&&this.props.onChange(e)},t.prototype._onInputChange=function(e){var t=e.target.value;this.setState({searchQueryInputValue:t}),this._onDebouncedInputChange(t)},t.prototype.render=function(){return i.React.createElement(l,{key:"header"},i.React.createElement(u,null,i.React.createElement(p,{placeholder:this._t("editor.controls.library.search"),onLiveChange:this._onInputChange,className:void 0,value:this.state.searchQueryInputValue})))},t}(i.BaseComponent);t.a=c;var l=i.adonis.div("1tkmkv6","Header"),u=i.adonis.div("mz0a5q","InputContainer"),p=Object(i.adonis)(i.TextInputComponent)("py3uvl","TextInput")},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),n(22)),c=n(34),l=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onImage","_onWebcamBack","_onWebcamActivated"),s.state.displayHeader=!1,s}return a(t,e),t.prototype._onImage=function(e){this.props.controls.onImage(e)},t.prototype._onWebcamBack=function(){this.setSharedState({webcamEnabled:!1})},t.prototype._onWebcamActivated=function(e){this.setSharedState({webcamEnabled:!0})},t.prototype._renderControls=function(){var e=this.getSharedState("webcamEnabled"),t=this.props.options.displayUploadInCanvas;return e?i.React.createElement(s.a,{onImage:this._onImage,onBack:this._onWebcamBack}):t?i.React.createElement(u,null,i.React.createElement(c.a,{large:!0,controls:this.props.controls,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this._onWebcamActivated,onImage:this._onImage})):void 0},t}(i.CanvasControlsComponent);l.contextTypes=i.CanvasControlsComponent.contextTypes,t.a=l;var u=i.adonis.div("1up9ikz","LibraryUploadContainer")},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(1),s=(n.n(i),n(0)),c=(n.n(s),n(23)),l=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=r(this,e.call.apply(e,[this].concat(a)));return s._bindAll("_onWebcamReady","_onWebcamError","_onButtonClick","_onCancelClick"),s.state={webcamReady:!1},s}return a(t,e),t.prototype._onWebcamReady=function(){this.props.onReady&&this.props.onReady(),this.setState({webcamReady:!0})},t.prototype._onWebcamError=function(e){var t=this;s.ModalManager.instance.displayError(this._t("errors.title"),this._t("errors.webcamUnavailable.text",{error:e})).on("close",function(){return t.props.onBack()})},t.prototype._onButtonClick=function(e){e.preventDefault(),this._takePhoto()},t.prototype._onCancelClick=function(e){e.preventDefault(),this.props.onBack&&this.props.onBack()},t.prototype._takePhoto=function(){var e=this;this.state.webcamReady&&this._webcam.capture().then(function(t){e.props.onImage&&e.props.onImage(t)})},t.prototype.render=function(){var e=this;return s.React.createElement(u,null,s.React.createElement(p,null,s.React.createElement(f,{onClick:this._onCancelClick},this._t("editor.cancel"))),s.React.createElement(h,null,s.React.createElement(d,{innerRef:function(t){e._videoContainer=t}},s.React.createElement(c.a,{flashURL:this._getAssetPath("fallback/webcam.swf"),ref:function(t){e._webcam=t},onWebcamError:this._onWebcamError,onWebcamAvailable:this._onWebcamReady}),s.React.createElement(m,{onClick:this._onButtonClick}))))},t}(s.BaseComponent);t.a=l;var u=s.adonis.div("dehn6v","Container"),p=s.adonis.div("4d756t","Gradient"),f=s.adonis.div("1p4kwwq","CancelButton"),h=s.adonis.div("1j41msh","OuterVideoContainer"),d=s.adonis.div("1g72uw9","VideoContainer"),m=(s.adonis.video("1btv3tg",{visible:"jsuk9w"},"Video"),s.adonis.div("1fkab7z","Button"))},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(24),s=n.n(i),c=n(29),l=n.n(c),u=n(0),p=(n.n(u),function(e){function t(n){o(this,t);var a=r(this,e.call(this,n));return a._bindAll("_onLoadedMetadata"),a.state={webcamAvailable:!1,useFlashFallback:!1},a._getUserMedia=null,a._webcamStream=null,a}return a(t,e),t.prototype.componentDidMount=function(){var e=this;if(this._initGetUserMedia(),this._getUserMedia)this._getUserMedia({video:{optional:[{minWidth:320},{minWidth:640},{minWidth:1024},{minWidth:1280},{minWidth:1920},{minWidth:2560}]},audio:!1}).then(function(t){e._webcamStream=t;var n=e._videoElement;"srcObject"in n?n.srcObject=t:n.src=window.URL.createObjectURL(t)}).catch(function(t){e.props.onWebcamError&&e.props.onWebcamError(t)});else{var t=!1;window.Webcam||(window.Webcam={},t=!0),window.Webcam.flashNotify=function(n,o){switch(n){case"cameraLive":e.setState({webcamAvailable:!0},function(){e.props.onWebcamAvailable&&e.props.onWebcamAvailable()}),delete window.Webcam.flashNotify,t&&delete window.Webcam;break;case"error":e.props.onWebcamError&&e.props.onWebcamError(o),delete window.Webcam.flashNotify,t&&delete window.Webcam}}}},t.prototype.componentWillUnmount=function(){this._disposeWebcam()},t.prototype._initGetUserMedia=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this._getUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)),!this._getUserMedia){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;e&&(this._getUserMedia=function(t){return new Promise(function(n,o){return e.call(navigator,t,n,o)})})}this._getUserMedia||this.setState({useFlashFallback:!0})},t.prototype._disposeWebcam=function(){if(this._webcamStream){var e=this._webcamStream,t=e.getTracks()[0];t?t.stop():e.stop&&e.stop()}else this._flashWebcam&&this._flashWebcam._releaseCamera()},t.prototype.capture=function(){var e=this;return this.state.webcamAvailable?this._videoElement&&!this._flashWebcam?new Promise(function(t,n){var o=e._videoElement;if(0===o.readyState)n(new Error("Webcam video not available"));else{var r=document.createElement("canvas");r.width=o.videoWidth,r.height=o.videoHeight;r.getContext("2d").drawImage(o,0,0);var a=new window.Image;a.addEventListener("load",function(){t(a)}),a.src=r.toDataURL("image/jpeg")}}):this._flashWebcam?new Promise(function(t,n){var o=e._flashWebcam._snap(),r=new Image;r.onload=function(){t(r)},r.src="data:image/jpeg;base64,"+o}):Promise.reject(new Error("Webcam video not available")):Promise.reject(new Error("Webcam video not available"))},t.prototype._getFlashFallbackComponent=function(){var e=this,t=this._container,n=t.offsetWidth,o=t.offsetHeight,r=640,a=480;o>n?(r=n||640,a=.75*n):(r=4/3*o,a=o||480);var i="width="+r+"&height="+a+"&dest_width=1024&dest_height=768&jpeg_quality=100&fps=24";return l.a.createElement("object",{classID:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-shockwave-flash",width:r,height:a,ref:function(t){e._flashWebcam=t},align:"middle"},l.a.createElement("param",{name:"wmode",value:"transparent"}),l.a.createElement("param",{name:"allowScriptAccess",value:"always"}),l.a.createElement("param",{name:"allowFullScreen",value:"false"}),l.a.createElement("param",{name:"movie",value:this.props.flashURL}),l.a.createElement("param",{name:"loop",value:"false"}),l.a.createElement("param",{name:"menu",value:"false"}),l.a.createElement("param",{name:"quality",value:"best"}),l.a.createElement("param",{name:"bgcolor",value:"#ffffff"}),l.a.createElement("param",{name:"flashvars",value:i}))},t.prototype._onLoadedMetadata=function(){var e=this;this.setState({webcamAvailable:!0},function(){e.props.onWebcamAvailable&&e.props.onWebcamAvailable()})},t.prototype.render=function(){var e=this,t=this.state.useFlashFallback?this._getFlashFallbackComponent():l.a.createElement(f,{autoPlay:!0,visible:this.state.webcamAvailable&&!this.state.useFlashFallback,innerRef:function(t){e._videoElement=t},onLoadedMetadata:this._onLoadedMetadata});return l.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"},ref:function(t){e._container=t}},t)},t}(u.BaseComponent));p.propTypes={flashURL:s.a.string,onWebcamAvailable:s.a.func,onWebcamError:s.a.func},t.a=p;var f=u.adonis.video("145pu2m",{visible:"jsuk9w"},"Video")},function(e,t,n){e.exports=n(25)()},function(e,t,n){"use strict";var o=n(26),r=n(27),a=n(28);e.exports=function(){function e(e,t,n,o,i,s){s!==a&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){"use strict";function o(e){return function(){return e}}var r=function(){};r.thatReturns=o,r.thatReturnsFalse=o(!1),r.thatReturnsTrue=o(!0),r.thatReturnsNull=o(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";function o(e,t,n,o,a,i,s,c){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,a,i,s,c],p=0;l=new Error(t.replace(/%s/g,function(){return u[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(e){};e.exports=o},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(30)},function(e,t,n){"use strict";function o(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,o=0;o<t;o++)n+="&args[]="+encodeURIComponent(arguments[o+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function r(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||k}function a(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||k}function i(){}function s(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||k}function c(e,t,n){var o,r={},a=null,i=null;if(null!=t)for(o in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,o)&&!T.hasOwnProperty(o)&&(r[o]=t[o]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];r.children=c}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===r[o]&&(r[o]=s[o]);return{$$typeof:C,type:e,key:a,ref:i,props:r,_owner:D.current}}function l(e){return"object"==typeof e&&null!==e&&e.$$typeof===C}function u(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function p(e,t,n,o){if(A.length){var r=A.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=o,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:o,count:0}}function f(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function h(e,t,n,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var i=!1;if(null===e)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case C:case E:case R:case O:i=!0}}if(i)return n(r,e,""===t?"."+d(e,0):t),1;if(i=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){a=e[s];var c=t+d(a,s);i+=h(a,c,n,r)}else if(null===e||void 0===e?c=null:(c=I&&e[I]||e["@@iterator"],c="function"==typeof c?c:null),"function"==typeof c)for(e=c.call(e),s=0;!(a=e.next()).done;)a=a.value,c=t+d(a,s++),i+=h(a,c,n,r);else"object"===a&&(n=""+e,o("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return i}function d(e,t){return"object"==typeof e&&null!==e&&null!=e.key?u(e.key):t.toString(36)}function m(e,t){e.func.call(e.context,t,e.count++)}function y(e,t,n){var o=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?b(e,o,n,_.thatReturnsArgument):null!=e&&(l(e)&&(t=r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(W,"$&/")+"/")+n,e={$$typeof:C,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),o.push(e))}function b(e,t,n,o,r){var a="";null!=n&&(a=(""+n).replace(W,"$&/")+"/"),t=p(t,a,o,r),null==e||h(e,"",y,t),f(t)}/** @license React v16.2.0
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var v=n(31),g=n(32),_=n(33),w="function"==typeof Symbol&&Symbol.for,C=w?Symbol.for("react.element"):60103,E=w?Symbol.for("react.call"):60104,R=w?Symbol.for("react.return"):60105,O=w?Symbol.for("react.portal"):60106,S=w?Symbol.for("react.fragment"):60107,I="function"==typeof Symbol&&Symbol.iterator,k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&o("85"),this.updater.enqueueSetState(this,e,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},i.prototype=r.prototype;var j=a.prototype=new i;j.constructor=a,v(j,r.prototype),j.isPureReactComponent=!0;var P=s.prototype=new i;P.constructor=s,v(P,r.prototype),P.unstable_isAsyncReactComponent=!0,P.render=function(){return this.props.children};var D={current:null},x=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0},W=/\/+/g,A=[],U={Children:{map:function(e,t,n){if(null==e)return e;var o=[];return b(e,o,null,t,n),o},forEach:function(e,t,n){if(null==e)return e;t=p(null,null,t,n),null==e||h(e,"",m,t),f(t)},count:function(e){return null==e?0:h(e,"",_.thatReturnsNull,null)},toArray:function(e){var t=[];return b(e,t,null,_.thatReturnsArgument),t},only:function(e){return l(e)||o("143"),e}},Component:r,PureComponent:a,unstable_AsyncComponent:s,Fragment:S,createElement:c,cloneElement:function(e,t,n){var o=v({},e.props),r=e.key,a=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,i=D.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!T.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];o.children=s}return{$$typeof:C,type:e.type,key:r,ref:a,props:o,_owner:i}},createFactory:function(e){var t=c.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:D,assign:v}},L=Object.freeze({default:U}),M=L&&U||L;e.exports=M.default?M.default:M},function(e,t,n){"use strict";function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,c=o(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)a.call(n,u)&&(c[u]=n[u]);if(r){s=r(n);for(var p=0;p<s.length;p++)i.call(n,s[p])&&(c[s[p]]=n[s[p]])}}return c}},function(e,t,n){"use strict";var o={};e.exports=o},function(e,t,n){"use strict";function o(e){return function(){return e}}var r=function(){};r.thatReturns=o,r.thatReturnsFalse=o(!1),r.thatReturnsTrue=o(!0),r.thatReturnsNull=o(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=(n.n(i),n(11)),c=i.ControlsStyles.PlainControlItem,l=i.ControlsStyles.PlainControlItemBackground,u=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return i.React.createElement(p,null,i.React.createElement(f,null,i.React.createElement(m,null,i.React.createElement(h,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},i.React.createElement(i.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onNewFile}),this.state.dropZoneHovered?this._t("editor.controls.library.fileDropZoneHovered"):this._t("editor.controls.library.fileDropZone"))),!this.state.dropZoneHovered&&this.props.webcamEnabled&&i.React.createElement(m,null,i.React.createElement(d,{style:e,className:void 0,onClick:this._onWebcamClick}))))},t}(s.a);t.a=u;var p=Object(i.adonis)(c).div("1xesje3","Container"),f=Object(i.adonis)(l).div("z914p5","Background"),h=i.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),d=i.adonis.div("1jg5y1q","WebcamButton"),m=i.adonis.div("15u7gri","Row")}]).default});