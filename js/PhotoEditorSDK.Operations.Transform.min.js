!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("photoeditorsdk")):"function"==typeof define&&define.amd?define(["photoeditorsdk"],e):"object"==typeof exports?exports._unexposedPESDK=e(require("photoeditorsdk")):t._unexposedPESDK=e(t.PhotoEditorSDK)}("undefined"!=typeof self?self:this,function(t){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=104)}({0:function(e,o){e.exports=t},104:function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),a=o.n(r),l=o(105),u=r.Math.Vector2,p=function(t){function e(){return i(this,e),n(this,t.apply(this,arguments))}return s(e,t),e.prototype._render=function(t){this._sprite.setRotation(0);var e=t.getDimensions(),o=this._options,i=o.start,n=o.end,s=o.rotation,a=o.textureScale,l=i.clone().add(n.clone().subtract(i).divide(2)),u=this.calculateScale(),p=u*a,c=this.getNewDimensions(e);return this._sprite.setAnchor(l),this._sprite.setRotation(s),this._sprite.setScale(p,p),this._sprite.setPosition(c.clone().multiply(.5)),this._renderTexture.render(this._container),r.Promise.resolve()},e.prototype.calculateScale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),o=new u(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),i=e.clone().multiply(.5);i.subtract(o.clone().divide(2)),i.abs();return i.y>i.x?2*i.y/e.y+1:2*i.x/e.x+1},e.prototype.getNewDimensions=function(t){var e=this._options,o=e.start,i=e.end,n=e.textureScale,s=this.calculateScale();return t.clone().multiply(n*s).multiply(i.clone().subtract(o)).round()},e.prototype.flip=function(t){var e=this._options,o=e.start,i=e.end,n=o.clone();"horizontal"===t?(o.set(1-i.x,o.y),i.set(1-n.x,i.y)):"vertical"===t&&(o.set(o.x,1-i.y),i.set(i.x,1-n.y))},e.prototype.rotate=function(t){for(var e=this._options,o=e.start,i=e.end,n=(t+360)%360,s=Math.floor(n/90),r=0;r<s;r++){var a=o.clone();o.set(1-i.y,a.x),i.set(1-a.y,i.x)}},e}(r.Operation);p.identifier="transform",p.prototype.availableOptions={start:{type:r.OptionType.VECTOR2,default:new u(0,0)},end:{type:r.OptionType.VECTOR2,default:new u(1,1)},textureScale:{type:r.OptionType.NUMBER,default:1},rotation:{type:r.OptionType.NUMBER,default:0}},p.TransformChange=l.a,a.a.Operations.TransformOperation=p,e.default=p},105:function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=o(0),s=(o.n(n),n.Math.Vector2),r=function(){function t(e,o){i(this,t),this._operation=e,this._options=o,this._inputDimensions=this._operation.getInputDimensions(!1),this._rotationDelta=o.rotation-this._operation.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._operation.getEnd().clone().subtract(this._operation.getStart()).multiply(this._inputDimensions),this._newAbsoluteSize=o.end.clone().subtract(o.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._operation.getStart().clone().subtract(o.start).multiply(this._inputDimensions),this._scaleRatio=this._operation.calculateScale(o.rotation)/this._operation.calculateScale(),this._absoluteStart=this._operation.getStart().clone().multiply(this._inputDimensions),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/this._operation.getTextureScale()}return t.prototype.applyToRelativePoint=function(t){var e=this._operation.getStart(),o=this._operation.getEnd(),i=e.clone().add(o.clone().subtract(e).divide(2)),n=i.multiply(this._inputDimensions),r=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),a=n.clone().add(r),l=a.clone().subtract(this._inputDimensions.clone().divide(2)),u=new s(l.x*this._deltaCos-l.y*this._deltaSin,l.x*this._deltaSin+l.y*this._deltaCos),p=this._inputDimensions.clone().divide(2).add(u),c=this._options.start.clone().multiply(this._inputDimensions);return p.clone().subtract(c).divide(this._newAbsoluteSize)},t.prototype.applyToRelativeSize=function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()},t.prototype.applyToDimensions=function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t},t.prototype.scaleSize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]},t.prototype.applyToRotation=function(t){return(t+this._rotationDelta)%(2*Math.PI)},t}();e.a=r}}).default});