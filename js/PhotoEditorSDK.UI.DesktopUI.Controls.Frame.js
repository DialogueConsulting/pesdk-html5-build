!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core")):"function"==typeof define&&define.amd?define([["PhotoEditorSDK","UI","DesktopUI"]],t):"object"==typeof exports?exports._unexposedPESDK=t(require("photoeditorsdk/PhotoEditorSDK.UI.DesktopUI.Core")):e._unexposedPESDK=t(e.PhotoEditorSDK.UI.DesktopUI)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=55)}({0:function(t,n){t.exports=e},2:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});for(var o="undefined"==typeof window?e:window,r=o.requestAnimationFrame,i=o.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],c=0;c<s.length&&!r;++c)r=o[s[c]+"RequestAnimationFrame"],i=o[s[c]+"CancelAnimationFrame"]||o[s[c]+"CancelRequestAnimationFrame"];r&&(r=r.bind(o)),i&&(i=i.bind(o)),r||(r=function(e,t){var n=(new Date).getTime(),o=Math.max(0,16-(n-a)),r=setTimeout(function(){e(n+o)},o);return a=n+o,r}),i||(i=function(e){clearTimeout(e)})}).call(t,n(4))},4:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},55:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n.n(a),c=n(56),l=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype._onEnter=function(){var e=this.context.editor,t=e.operations.exists("frame"),n=e.operations.get("frame"),o=n&&n.serializeOptions();this.sharedState.set({operation:n,initialOptions:o,operationExistedBeforeEntering:t})},t.prototype._onLeave=function(){var e=this.sharedState.get("initialOptions"),t=this.sharedState.get("operationExistedBeforeEntering"),n={type:"global",operation:"frame",options:e,existent:t};this.addHistoryItem(n)},t.prototype._onOperationRemoved=function(e){},t.isEnabled=function(e){return e.isToolAllowed("frame")&&e.isToolEnabled("frame")},t}(a.BaseControls);l.clickAtPosition=a.BaseControls.clickAtPosition,l.getPreloadAssets=a.BaseControls.getPreloadAssets,l.identifier="frame",l.controlsComponent=c.a,l.canvasControlsComponent=a.BaseControls.canvasControlsComponent,l.iconPath="editor/controls/frame/icon.png",l.activeIconPath="editor/controls/frame/icon-active.png",l.requiredOperations=["frame"],l.defaultOptions={categories:[],replaceCategories:!1,availableFrames:null},t.default=l,s.a.Controls.FrameControls=l},56:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=(n.n(s),n(57)),l=n(59),p={ROOT:1,CATEGORY:2,OPTIONS:3},u=function(e){function t(){var n;r(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];var u=i(this,e.call.apply(e,[this].concat(c)));u._bindAll("_onFrameClick","_onReplaceClick","_onHistoryUndo","_onOperationUpdated"),u._initFrameManager(),u._needsStyleFixes=!0;var f=p.ROOT,h=u.getSharedState("operation");return h&&h.getFrame()&&(f=p.OPTIONS),u.state={currentPanel:f},u._events=(n={},o(n,s.Constants.EVENTS.HISTORY_UNDO,u._onHistoryUndo),o(n,s.Constants.EVENTS.OPERATION_UPDATED,u._onOperationUpdated),n),u}return a(t,e),t.prototype.fixStyles=function(){var t=this;return this._list.style.height="100%",e.prototype.fixStyles.call(this).then(function(){if(s.Utils.Browser.isIElte(10)){var e=t._container.offsetHeight;t._list.style.height=e+"px"}return t.refs.panel.fixStyles()})},t.prototype.componentDidUpdate=function(e,t){this.state.currentPanel!==t.currentPanel&&this.fixStyles()},t.prototype._initFrameManager=function(){this._frameManager=new s.FrameManager(this.context.ui,this.props.options)},t.prototype._onOperationUpdated=function(e){e===this.getSharedState("operation")&&this.forceUpdate()},t.prototype._onHistoryUndo=function(){var e=this.context.editor,t=e.operations.get("frame");if(!t||t&&!t.getFrame())return this.setState({currentPanel:p.ROOT})},t.prototype._onReplaceClick=function(){this.setState({currentPanel:p.ROOT})},t.prototype._onCategoryClick=function(e){this.setState({currentPanel:p.CATEGORY,category:e})},t.prototype._onFrameClick=function(e){var t=this,n=this.context.editor;if(this.props.controls.registerLocalHistoryChange("frame-image",!1,"frame"),!e){var o=this.getSharedState("operation");return void(o&&(n.operations.remove(o),this.setSharedState({operation:null}),n.render()))}var r=new s.Frame(this.context.ui,e),i=n.operations.getOrCreate("frame"),a=void 0,c=setTimeout(function(){a=s.ModalManager.instance.displayLoading(t._t("loading.loading"))},100);r.load().then(function(){a&&a.close(),c&&(clearTimeout(c),c=null),i.setFrame(r.getFrame()),n.render(),t.setSharedState({operation:i},!1),t.setState({currentPanel:p.OPTIONS})})},t.prototype._renderCurrentPanel=function(){var e=this,t=this.props.controls;switch(this.state.currentPanel){case p.ROOT:return s.React.createElement(c.a,{innerRef:function(t){e._list=t},frameManager:this._frameManager,onFrameClick:this._onFrameClick,controls:t,ref:"panel"});case p.OPTIONS:return s.React.createElement(l.a,{innerRef:function(t){e._list=t},frameManager:this._frameManager,onReplaceClick:this._onReplaceClick,onNewFrameClick:this._onNewFrameClick,controls:t,ref:"panel"})}},t.prototype._getRootProps=function(){return{className:void 0,withBorderTop:!0}},t.prototype._renderContent=function(){return this._renderCurrentPanel()},t}(s.ControlsComponent);u.contextTypes=s.ControlsComponent.contextTypes,u.RootElement=s.ControlsComponent.RootElement,t.a=u},57:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),n(2)),c=n(58),l=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){a.Utils.Browser.isIElte(10)?Object(s.b)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.render=function(){var e=this,t=this.props,n=t.frameManager,o=t.innerRef;return a.React.createElement(p,{innerRef:function(t){o&&o(t),e._wrapper=t},className:void 0},a.React.createElement(a.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},a.React.createElement(c.a,{frames:n.getFramesForCategory("all"),onFrameClick:this.props.onFrameClick})))},t}(a.BaseComponent);l.contextTypes=a.BaseComponent.contextTypes,t.a=l;var p=a.adonis.div("rfecls","Wrapper")},58:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=(n.n(a),a.ControlsStyles.PlainControlItem),c=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return i(t,e),t.prototype._onFrameClick=function(e){this.props.onFrameClick&&this.props.onFrameClick(e)},t.prototype._renderListItems=function(){var e=this,t=this.props.frames,n=void 0,o=this.getSharedState("operation");o&&o.getFrame()&&(n=o.getFrame().identifier);var r=this.getSharedState("selectedSprite");return r&&(n=r.getIdentifier()),t.map(function(t){var o=e._getAssetPath(t.thumbnail),r={background:"url('"+o+"') no-repeat center center",backgroundSize:"contain"};return a.React.createElement(p,{selected:t.identifier===n,key:t.identifier,onClick:e._onFrameClick.bind(e,t),className:void 0,twoColumns:!0},a.React.createElement(u,{style:r}))})},t.prototype.render=function(){var e=this.getSharedState("operation"),t=e&&e.getFrame();return a.React.createElement(l,null,a.React.createElement(p,{selected:!t,onClick:this._onFrameClick.bind(this,null),className:void 0,withText:!0,twoColumns:!0},"None"),this._renderListItems())},t}(a.SharedStateComponent);c.contextTypes=a.SharedStateComponent.contextTypes,t.a=c;var l=a.adonis.ul("18qztam","FrameList"),p=Object(a.adonis)(s).li("u8nfgk","FrameListItem"),u=a.adonis.div("7r0ke8","FrameImage")},59:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=(n.n(s),n(2)),l=s.ControlsStyles.PlainControlItemBackground,p=function(e){function t(){r(this,t);for(var n=arguments.length,a=Array(n),c=0;c<n;c++)a[c]=arguments[c];var l=i(this,e.call.apply(e,[this].concat(a)));l._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange","_onWidthChange","_onHistoryUndo"),l._events=o({},s.Constants.EVENTS.HISTORY_UNDO,l._onHistoryUndo);var p=l.getSharedState("operation");return l.state={tintEnabled:p.getTintColor().a>0,tintColor:p.getTintColor()},l}return a(t,e),t.prototype._onTintToggle=function(e){this.props.controls.registerLocalHistoryChange("frame-tint-enabled");var t=this.getSharedState("operation"),n=this.state.tintEnabled,o=t.getTintColor().clone();o.a=n?0:1,t.setTintColor(o),this.context.editor.render(),this.setState({tintEnabled:!n})},t.prototype._onTintColorChange=function(e){this.props.controls.registerLocalHistoryChange("frame-tint-color",!0),this.getSharedState("operation").setTintColor(e.clone()),this.context.editor.render(),this.forceUpdate()},t.prototype._onHistoryUndo=function(){if(this.context.editor.operations.exists("frame")){var e=this.getSharedState("operation");e.getFrame()&&this.setState({tintEnabled:e.getTintColor().a>0,tintColor:e.getTintColor().clone()})}},t.prototype._onOpacityChange=function(e){this.props.controls.registerLocalHistoryChange("frame-opacity",!0),this.getSharedState("operation").setAlpha(e/100),this.context.editor.render(),this.forceUpdate()},t.prototype._onWidthChange=function(e){this.props.controls.registerLocalHistoryChange("frame-width",!0);var t=this.context.editor,n=this.getSharedState("operation"),o=n.getInputDimensions().min();n.setScale(e/o),t.render(),this.forceUpdate()},t.prototype.fixStyles=function(){var e=this;return Promise.resolve().then(function(){s.Utils.Browser.isIElte(10)?Object(c.b)(function(){e._scrollbar.update()}):e._scrollbar.update()})},t.prototype.render=function(){var e=this,t=this.props,n=t.innerRef,o=t.onReplaceClick,r=this.getSharedState("operation"),i=r.getFrame(),a=r.getInputDimensions(),c=a.min(),l=i.tintable,p={background:"url('"+this._getAssetPath(i.thumbnail,!1)+"') center center / contain no-repeat"};return s.React.createElement(u,{innerRef:function(t){n&&n(t),e._wrapper=t},className:void 0},s.React.createElement(s.ScrollableListComponent,{direction:"vertical",innerRef:function(t){e._scrollbar=t}},s.React.createElement("div",null,s.React.createElement(f,null,s.React.createElement(h,null,s.React.createElement(d,null,s.React.createElement(m,{style:p,onClick:o})),s.React.createElement(y,null,s.React.createElement(g,null,this._t("editor.controls.frame.frames."+i.identifier)||i.defaultName),s.React.createElement(C,{onClick:o,className:void 0},this._t("editor.controls.frame.replace")))),s.React.createElement(s.SliderControlComponent,{minValue:0,value:Math.round(100*r.getAlpha()),maxValue:100,label:this._t("editor.controls.frame.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0}),s.React.createElement(s.SliderControlComponent,{minValue:.05*c,value:Math.round(r.getScale()*c),maxValue:.3*c,label:this._t("editor.controls.frame.width"),onSliderValueChange:this._onWidthChange,onValueChange:this._onWidthChange,middleDot:!1,className:void 0})),l&&s.React.createElement(s.CollapseSectionComponent,{toggleable:!0,title:this._t("editor.controls.frame.fill"),expanded:this.state.tintEnabled,className:void 0,onToggle:this._onTintToggle},s.React.createElement(b,{value:this.state.tintColor,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))},t}(s.SharedStateComponent);p.contextTypes=s.SharedStateComponent.contextTypes,t.a=p;var u=s.adonis.div("rfecls","Wrapper"),f=s.adonis.div("1vnvjau","TopSection"),h=s.adonis.div("16woy02","Details"),d=Object(s.adonis)(l).div("6u8g0p","Thumbnail"),m=s.adonis.div("7r0ke8","ThumbnailImage"),y=s.adonis.div("1trlo6v","DetailsContainer"),g=s.adonis.div("w9mc0y","Title"),C=s.adonis.div("1rhky7p","ReplaceButton"),b=Object(s.adonis)(s.ColorSelectionComponent)("1ouwzwk","ColorSelection")}}).default});